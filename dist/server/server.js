(()=>{"use strict";var e={8505:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;const a=n(o(7147)),i=o(3553);t.Store=class{constructor(){this.path=i.constants.settings_path,this.data=function(){try{return a.default.existsSync(i.constants.settings_path)?JSON.parse(a.default.readFileSync(i.constants.settings_path,"utf-8")):i.constants.default_config}catch(e){return console.log(e),i.constants.default_config}}()}get(e){return this.data[e]}set(e,t){this.data[e]=t,a.default.writeFileSync(this.path,JSON.stringify(this.data))}}},9156:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.sqliteConfig=void 0;const n=o(5251),a=o(3553);t.sqliteConfig={development:{dialect:"sqlite",storage:a.constants.db_path,logging:e=>n.logger.debug(e)},test:{dialect:"sqlite",storage:"test_db.db",logging:!1},production:{dialect:"sqlite",storage:a.constants.db_path,logging:e=>n.logger.debug(e)}},t.config={development:{host:"127.0.0.1",dialect:"mariadb",username:"root",password:"r00t",database:"dev",logging:e=>n.logger.debug(e)},test:{host:"127.0.0.1",dialect:"mariadb",username:"root",password:"r00t",database:"test",logging:!1},production:{host:"127.0.0.1",dialect:"mariadb",username:"root",password:"r00t",database:"druglane",logging:e=>n.logger.debug(e)}}},5251:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var a=Object.getOwnPropertyDescriptor(t,o);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,a)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const l=o(3553),d=i(o(7773)),s=r(o(1017)),u=o(2547),c=d.format.combine(d.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),d.format.align(),d.format.printf((e=>`${e.level}: ${[e.timestamp]}: ${e.message}`))),p=d.createLogger({transports:[new d.transports.File({filename:s.default.resolve(l.constants.settings_location,"logs",`${(0,u.getToday)()} debug.log`),level:"debug",format:c}),new d.transports.File({filename:s.default.resolve(l.constants.settings_location,"logs",`${(0,u.getToday)()} info.log`),level:"info",format:c}),new d.transports.File({filename:s.default.resolve(l.constants.settings_location,"logs",`${(0,u.getToday)()} error.log`),level:"error",format:c})]});t.logger=p},5486:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.runMigrations=void 0,o(7058);const a=o(8505),i=o(714),r=o(6930),l=(new a.Store,o(4539)),d=o(5251),s=new i.Umzug({migrations:r.migrationsList,context:l.sequelize.getQueryInterface(),storage:new i.SequelizeStorage({sequelize:l.sequelize}),logger:console});t.runMigrations=()=>n(void 0,void 0,void 0,(function*(){try{yield s.up()}catch(e){throw d.logger.error({message:e}),new Error("Migration error:"+e)}}))},6930:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.migrationsList=void 0;const a=o(496),i=o(6612),r=o(8728),l=o(4539),d=o(7501),s=o(3426),u=o(8801),c=o(1942),p=o(4284),y=o(128),m=o(2083),f=o(4437),_=o(9591),N=o(5559),g=o(7133),v=o(3979),S=o(5338),E=o(887),R=o(3082),T=o(7901),I=o(5672),b=o(3417),h=o(3591),D=o(1530),w=o(2961),O=o(6324),C=o(4976),P=o(993),x=o(2775),M=o(8431),A=o(8899),G=o(7527),V=o(7900),U=o(4155),j=o(314),k=o(208);function L(e,t){return n(this,void 0,void 0,(function*(){let o=[];const n=yield t.showIndex(e);for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const t=n[e];o.push(t.name)}return o}))}t.migrationsList=[{name:"2019-001-initialMigrations-addActvities",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(s.Activities.tableName,{activity_id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},user_id:{type:a.STRING},activity:{type:a.STRING},module:{type:a.INTEGER},created_on:{type:a.STRING,defaultValue:a.Sequelize.literal("CURRENT_TIMESTAMP")},deleted:{allowNull:!0,type:a.INTEGER,defaultValue:0}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(s.Activities.tableName)}))}},{name:"2019-002-initialMigrations-addCustomers",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(d.Customers.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING,allowNull:!1},sex:{type:a.STRING},email:{type:a.STRING},phone:{type:a.STRING},location:{type:a.STRING},created_on:{type:a.STRING,defaultValue:a.Sequelize.literal("CURRENT_TIMESTAMP")}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(d.Customers.tableName)}))}},{name:"2019-003-initialMigrations-createPermissions",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(u.Permissions.tableName,{permission_id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING,allowNull:!1},description:{type:a.STRING}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(u.Permissions.tableName)}))}},{name:"2019-004-initialMigrations-insertPermissions",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert(u.Permissions.tableName,[...c.allPermissions.values()],{})}))},down({context:e}){return n(this,void 0,void 0,(function*(){}))}},{name:"2019-005-initialMigrations-createRoles",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(p.Roles.tableName,{role_id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},role_name:{type:a.STRING,allowNull:!1},description:{type:a.STRING}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(u.Permissions.tableName)}))}},{name:"2019-006-initialMigrations-createRolePermissions",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(y.RolePermissions.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},role_id:{type:a.INTEGER,allowNull:!1},permission_id:{type:a.INTEGER,allowNull:!1}}),yield e.addConstraint(y.RolePermissions.tableName,{fields:["role_id"],type:"foreign key",name:"role_permissions_role_id",references:{table:p.Roles.tableName,field:"role_id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint(y.RolePermissions.tableName,{fields:["permission_id"],type:"foreign key",name:"role_permissions_permission_id",references:{table:u.Permissions.tableName,field:"permission_id"},onDelete:"cascade",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(y.RolePermissions.tableName)}))}},{name:"2019-007-initialMigrations-insertRoles",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert(p.Roles.tableName,[{role_id:1,role_name:"Branch Manager",description:"manages day-to-day activities. Receives purchases, manages stock. May also make sales"},{role_id:2,role_name:"Sales Person",description:"serves customers and makes sales. Limited permissions by default"}],{})}))},down({context:e}){return n(this,void 0,void 0,(function*(){}))}},{name:"2019-008-initialMigrations-insertDefaultPermissions",up({context:e}){return n(this,void 0,void 0,(function*(){let t=[];c.allPermissions.forEach((e=>{t.push({role_id:1,permission_id:e.permission_id})})),c.defaultSalesPersonPermissions.forEach((e=>{t.push({role_id:2,permission_id:e})})),yield e.bulkInsert(y.RolePermissions.tableName,t,{})}))},down({context:e}){return n(this,void 0,void 0,(function*(){}))}},{name:"2019-009-initialMigrations-createInsurers",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(N.InsuranceProviders.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING,allowNull:!1}}),(yield L(N.InsuranceProviders.tableName,e)).indexOf(`${N.InsuranceProviders.tableName}_name`)&&(yield e.addIndex(N.InsuranceProviders.tableName,["name"]))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(N.InsuranceProviders.tableName)}))}},{name:"2019-010-initialMigrations-createVendors",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(E.Vendors.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING,allowNull:!1},location:{type:a.STRING,defaultValue:null},phone:{type:a.STRING,allowNull:!1},code:{type:a.STRING,defaultValue:null},email:{type:a.STRING,defaultValue:null},notes:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},legacy_id:{type:a.STRING,defaultValue:null}}),-1===(yield L(E.Vendors.tableName,e)).indexOf(`${E.Vendors.tableName}_name`)&&(yield e.addIndex(E.Vendors.tableName,["name"],{unique:!0}))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(E.Vendors.tableName)}))}},{name:"2019-011-initialMigrations-createBranches",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(I.Branches.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING,allowNull:!1},location:{type:a.STRING,defaultValue:null},phone:{type:a.STRING,allowNull:!1},address:{type:a.STRING,defaultValue:null},email:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}}),-1===(yield L(I.Branches.tableName,e)).indexOf(`${I.Branches.tableName}_name`)&&(yield e.addIndex(I.Branches.tableName,["name"],{unique:!0}))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(I.Branches.tableName)}))}},{name:"2019-012-initialMigrations-createSettings",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(D.Settings.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING,allowNull:!1},module:{type:a.STRING,allowNull:!1},value:{type:a.STRING,allowNull:!1}}),-1===(yield L(D.Settings.tableName,e)).indexOf(`${D.Settings.tableName}_name`)&&(yield e.addIndex(D.Settings.tableName,["name"],{unique:!0}))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(D.Settings.tableName)}))}},{name:"2019-013-initialMigrations-createUsers",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(m.Users.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},role_id:{type:a.INTEGER,allowNull:!1},email:{type:a.STRING,allowNull:!1},username:{type:a.STRING,allowNull:!1},password_hash:{type:a.STRING,allowNull:!1},last_login:{type:a.STRING,allowNull:!1,defaultValue:""},last_ip:{type:a.STRING,allowNull:!1,defaultValue:""},created_on:{type:a.STRING,allowNull:!1,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},display_name:{type:a.STRING,allowNull:!1},active:{type:a.INTEGER,allowNull:!1,defaultValue:0},last_seen:{type:a.STRING,allowNull:!0},phone:{type:a.STRING,defaultValue:""}});let t=yield L(m.Users.tableName,e);-1===t.indexOf(`${m.Users.tableName}_username`)&&(yield e.addIndex(m.Users.tableName,["username"],{unique:!0})),-1===t.indexOf(`${m.Users.tableName}_email`)&&(yield e.addIndex(m.Users.tableName,["email"],{unique:!0}))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(m.Users.tableName)}))}},{name:"2019-014-initialMigrations-createUserSessions",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(f.UserSessions.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},user_id:{type:a.INTEGER,allowNull:!1},token:{type:a.STRING,allowNull:!1},expires:{type:a.STRING,allowNull:!1},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}}),-1===(yield L(f.UserSessions.tableName,e)).indexOf(`${f.UserSessions.tableName}_user_id_token_expires`)&&(yield e.addIndex(f.UserSessions.tableName,["user_id","token","expires"],{unique:!0}))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(f.UserSessions.tableName)}))}},{name:"2019-015-initialMigrations-createProducts",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(i.Products.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING,allowNull:!1},price:{type:a.DOUBLE,allowNull:!1},category:{type:a.STRING,defaultValue:null},notes:{type:a.STRING,defaultValue:null},unit:{type:a.STRING,defaultValue:null},picture:{type:a.STRING,defaultValue:null},max_stock:{type:a.DOUBLE,defaultValue:null},min_stock:{type:a.DOUBLE,defaultValue:null},expiry:{type:a.STRING,defaultValue:null},barcode:{type:a.STRING,defaultValue:null},current_stock:{type:a.DOUBLE,defaultValue:null},last_modified:{type:a.STRING,defaultValue:null},cost_price:{type:a.DOUBLE,defaultValue:null},status:{type:a.INTEGER,defaultValue:1},size:{type:a.STRING,defaultValue:null},description:{type:a.STRING,defaultValue:1},shelf:{type:a.STRING,defaultValue:1},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(i.Products.tableName,e);-1===t.indexOf(`${i.Products.tableName}_name`)&&(yield e.addIndex(i.Products.tableName,["name"],{unique:!0})),-1===t.indexOf(`${i.Products.tableName}_price`)&&(yield e.addIndex(i.Products.tableName,["price"])),-1===t.indexOf(`${i.Products.tableName}_category`)&&(yield e.addIndex(i.Products.tableName,["category"])),-1===t.indexOf(`${i.Products.tableName}_max_stock`)&&(yield e.addIndex(i.Products.tableName,["max_stock"])),-1===t.indexOf(`${i.Products.tableName}_min_stock`)&&(yield e.addIndex(i.Products.tableName,["min_stock"])),-1===t.indexOf(`${i.Products.tableName}_expiry`)&&(yield e.addIndex(i.Products.tableName,["expiry"])),-1===t.indexOf(`${i.Products.tableName}_current_stock`)&&(yield e.addIndex(i.Products.tableName,["current_stock"])),-1===t.indexOf(`${i.Products.tableName}_last_modified`)&&(yield e.addIndex(i.Products.tableName,["last_modified"])),-1===t.indexOf(`${i.Products.tableName}_status`)&&(yield e.addIndex(i.Products.tableName,["status"])),-1===t.indexOf(`${i.Products.tableName}_description`)&&(yield e.addIndex(i.Products.tableName,["description"]))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(i.Products.tableName)}))}},{name:"2019-016-initialMigrations-createSales",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(_.Sales.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},customer:{type:a.STRING,allowNull:!1},code:{type:a.STRING,allowNull:!1,unique:!0},created_by:{type:a.INTEGER,defaultValue:null},date:{type:a.STRING,defaultValue:null},amount_paid:{type:a.DOUBLE,defaultValue:0},payment_method:{type:a.STRING,defaultValue:"Cash"},momo_reference:{type:a.STRING,defaultValue:null},insurance_provider:{type:a.STRING,defaultValue:null},insurance_member_name:{type:a.STRING,defaultValue:null},insurance_member_id:{type:a.STRING,defaultValue:null},creditor_name:{type:a.STRING,defaultValue:null},credit_paid:{type:a.INTEGER,defaultValue:0},discount:{type:a.DOUBLE,defaultValue:0},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},shift:{type:a.STRING,defaultValue:null}});let t=yield L(_.Sales.tableName,e);-1===t.indexOf(`${_.Sales.tableName}_code`)&&(yield e.addIndex(_.Sales.tableName,["code"],{unique:!0})),-1===t.indexOf(`${_.Sales.tableName}_payment_method`)&&(yield e.addIndex(_.Sales.tableName,["payment_method"])),-1===t.indexOf(`${_.Sales.tableName}_date`)&&(yield e.addIndex(_.Sales.tableName,["date"])),-1===t.indexOf(`${_.Sales.tableName}_customer`)&&(yield e.addIndex(_.Sales.tableName,["customer"])),yield e.addConstraint(_.Sales.tableName,{fields:["insurance_provider"],type:"foreign key",name:"sales_insurance_provider",references:{table:N.InsuranceProviders.tableName,field:"name"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(_.Sales.tableName)}))}},{name:"2019-017-initialMigrations-createSalesDetails",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(g.SalesDetails.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},product:{type:a.INTEGER,allowNull:!1},code:{type:a.STRING,allowNull:!1},created_by:{type:a.INTEGER,defaultValue:null},date:{type:a.STRING,defaultValue:null},price:{type:a.DOUBLE,allowNull:!1},quantity:{type:a.DOUBLE,allowNull:!1},cost_price:{type:a.DOUBLE,allowNull:!1},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(g.SalesDetails.tableName,e);-1===t.indexOf(`${g.SalesDetails.tableName}_code`)&&(yield e.addIndex(g.SalesDetails.tableName,["code"])),-1===t.indexOf(`${g.SalesDetails.tableName}_date`)&&(yield e.addIndex(g.SalesDetails.tableName,["date"])),yield e.addConstraint(g.SalesDetails.tableName,{fields:["code"],type:"foreign key",references:{table:_.Sales.tableName,field:"code"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint(g.SalesDetails.tableName,{fields:["product"],type:"foreign key",references:{table:i.Products.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(g.SalesDetails.tableName)}))}},{name:"2019-018-initialMigrations-createPurchases",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(v.Purchases.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},vendor:{type:a.INTEGER,allowNull:!1},code:{type:a.STRING,allowNull:!1,unique:!0},created_by:{type:a.INTEGER,defaultValue:null},date:{type:a.STRING,defaultValue:null},amount_paid:{type:a.DOUBLE,defaultValue:0},payment_method:{type:a.STRING,defaultValue:"Cash"},site:{type:a.STRING,defaultValue:null},invoice:{type:a.STRING,defaultValue:null},last_payment_date:{type:a.STRING,defaultValue:null},status:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(v.Purchases.tableName,e);-1===t.indexOf(`${v.Purchases.tableName}_code`)&&(yield e.addIndex(v.Purchases.tableName,["code"],{unique:!0})),-1===t.indexOf(`${v.Purchases.tableName}_payment_method`)&&(yield e.addIndex(v.Purchases.tableName,["payment_method"])),-1===t.indexOf(`${v.Purchases.tableName}_date`)&&(yield e.addIndex(v.Purchases.tableName,["date"])),-1===t.indexOf(`${v.Purchases.tableName}_vendor`)&&(yield e.addIndex(v.Purchases.tableName,["vendor"])),yield e.addConstraint(v.Purchases.tableName,{fields:["vendor"],type:"foreign key",references:{table:E.Vendors.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(v.Purchases.tableName)}))}},{name:"2019-019-initialMigrations-createPurchaseDetails",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(S.PurchaseDetails.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},product:{type:a.INTEGER,allowNull:!1},code:{type:a.STRING,allowNull:!1},created_by:{type:a.INTEGER,defaultValue:null},date:{type:a.STRING,defaultValue:null},price:{type:a.DOUBLE,allowNull:!1},quantity:{type:a.DOUBLE,allowNull:!1},selling_price:{type:a.DOUBLE,allowNull:!1},unit:{type:a.STRING,allowNull:!1},markup:{type:a.STRING},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(S.PurchaseDetails.tableName,e);-1===t.indexOf(`${S.PurchaseDetails.tableName}_code`)&&(yield e.addIndex(S.PurchaseDetails.tableName,["code"])),-1===t.indexOf(`${S.PurchaseDetails.tableName}_date`)&&(yield e.addIndex(S.PurchaseDetails.tableName,["date"])),yield e.addConstraint(S.PurchaseDetails.tableName,{fields:["code"],type:"foreign key",references:{table:v.Purchases.tableName,field:"code"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint(S.PurchaseDetails.tableName,{fields:["product"],type:"foreign key",references:{table:i.Products.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(S.PurchaseDetails.tableName)}))}},{name:"2019-020-initialMigrations-createReceivedTransfers",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(R.ReceivedTransfers.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},sender:{type:a.INTEGER,allowNull:!1},code:{type:a.STRING,allowNull:!1,unique:!0},created_by:{type:a.INTEGER,defaultValue:null},date:{type:a.STRING,defaultValue:null},invoice:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(R.ReceivedTransfers.tableName,e);-1===t.indexOf(`${R.ReceivedTransfers.tableName}_code`)&&(yield e.addIndex(R.ReceivedTransfers.tableName,["code"],{unique:!0})),-1===t.indexOf(`${R.ReceivedTransfers.tableName}_invoice`)&&(yield e.addIndex(R.ReceivedTransfers.tableName,["invoice"])),-1===t.indexOf(`${R.ReceivedTransfers.tableName}_date`)&&(yield e.addIndex(R.ReceivedTransfers.tableName,["date"])),-1===t.indexOf(`${R.ReceivedTransfers.tableName}_sender`)&&(yield e.addIndex(R.ReceivedTransfers.tableName,["sender"])),yield e.addConstraint(R.ReceivedTransfers.tableName,{fields:["sender"],type:"foreign key",references:{table:I.Branches.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(R.ReceivedTransfers.tableName)}))}},{name:"2019-021-initialMigrations-createReceivedTransferDetails",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(T.ReceivedTransferDetails.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},product:{type:a.INTEGER,allowNull:!1},code:{type:a.STRING,allowNull:!1},created_by:{type:a.INTEGER,defaultValue:null},date:{type:a.STRING,defaultValue:null},expiry:{type:a.STRING,defaultValue:null},price:{type:a.DOUBLE,allowNull:!1},quantity:{type:a.DOUBLE,allowNull:!1},cost_price:{type:a.DOUBLE,allowNull:!1},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(T.ReceivedTransferDetails.tableName,e);-1===t.indexOf(`${T.ReceivedTransferDetails.tableName}_code`)&&(yield e.addIndex(T.ReceivedTransferDetails.tableName,["code"])),-1===t.indexOf(`${T.ReceivedTransferDetails.tableName}_date`)&&(yield e.addIndex(T.ReceivedTransferDetails.tableName,["date"])),yield e.addConstraint(T.ReceivedTransferDetails.tableName,{fields:["code"],type:"foreign key",references:{table:R.ReceivedTransfers.tableName,field:"code"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint(T.ReceivedTransferDetails.tableName,{fields:["product"],type:"foreign key",references:{table:i.Products.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(S.PurchaseDetails.tableName)}))}},{name:"2019-022-initialMigrations-createTransfers",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(b.Transfers.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},receiver:{type:a.INTEGER,allowNull:!1},code:{type:a.STRING,allowNull:!1,unique:!0},created_by:{type:a.INTEGER,defaultValue:null},date:{type:a.STRING,defaultValue:null},status:{type:a.STRING,defaultValue:"Pending"},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(b.Transfers.tableName,e);-1===t.indexOf(`${b.Transfers.tableName}_code`)&&(yield e.addIndex(b.Transfers.tableName,["code"],{unique:!0})),-1===t.indexOf(`${b.Transfers.tableName}_date`)&&(yield e.addIndex(b.Transfers.tableName,["date"])),-1===t.indexOf(`${b.Transfers.tableName}_receiver`)&&(yield e.addIndex(b.Transfers.tableName,["receiver"])),yield e.addConstraint(b.Transfers.tableName,{fields:["receiver"],type:"foreign key",references:{table:I.Branches.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(b.Transfers.tableName)}))}},{name:"2019-023-initialMigrations-createTransferDetails",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(h.TransferDetails.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},product:{type:a.INTEGER,allowNull:!1},code:{type:a.STRING,allowNull:!1},created_by:{type:a.INTEGER,defaultValue:null},date:{type:a.STRING,defaultValue:null},expiry:{type:a.STRING,defaultValue:null},price:{type:a.DOUBLE,allowNull:!1},quantity:{type:a.DOUBLE,allowNull:!1},cost_price:{type:a.DOUBLE,allowNull:!1},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(h.TransferDetails.tableName,e);-1===t.indexOf(`${h.TransferDetails.tableName}_code`)&&(yield e.addIndex(h.TransferDetails.tableName,["code"])),-1===t.indexOf(`${h.TransferDetails.tableName}_date`)&&(yield e.addIndex(h.TransferDetails.tableName,["date"])),yield e.addConstraint(h.TransferDetails.tableName,{fields:["code"],type:"foreign key",references:{table:b.Transfers.tableName,field:"code"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint(h.TransferDetails.tableName,{fields:["product"],type:"foreign key",references:{table:i.Products.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(h.TransferDetails.tableName)}))}},{name:"2019-024-initialMigrations-createStockAdjustment",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(w.StockAdjustment.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.STRING,defaultValue:null},product:{type:a.INTEGER,allowNull:!1},quantity_counted:{type:a.DOUBLE,allowNull:!1},quantity_expected:{type:a.DOUBLE,allowNull:!1},current_price:{type:a.DOUBLE,allowNull:!1},created_by:{type:a.INTEGER,defaultValue:null},code:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},cost_price:{type:a.DOUBLE,allowNull:!1},category:{type:a.STRING,defaultValue:null},size:{type:a.STRING,defaultValue:null},expiry:{type:a.STRING,defaultValue:null},comments:{type:a.STRING,defaultValue:null},quantity_expired:{type:a.DOUBLE,allowNull:!1,defaultValue:0},quantity_damaged:{type:a.DOUBLE,allowNull:!1,defaultValue:0}});let t=yield L(w.StockAdjustment.tableName,e);-1===t.indexOf(`${w.StockAdjustment.tableName}_code`)&&(yield e.addIndex(w.StockAdjustment.tableName,["code"])),-1===t.indexOf(`${w.StockAdjustment.tableName}_date`)&&(yield e.addIndex(w.StockAdjustment.tableName,["date"])),-1===t.indexOf(`${w.StockAdjustment.tableName}_created_on`)&&(yield e.addIndex(w.StockAdjustment.tableName,["created_on"])),-1===t.indexOf(`${w.StockAdjustment.tableName}_product`)&&(yield e.addIndex(w.StockAdjustment.tableName,["product"])),yield e.addConstraint(w.StockAdjustment.tableName,{fields:["product"],type:"foreign key",references:{table:i.Products.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(g.SalesDetails.tableName)}))}},{name:"2019-025-initialMigrations-createStockAdjustmentSessions",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(O.StockAdjustmentSessions.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.STRING,allowNull:!1},code:{type:a.STRING,allowNull:!1},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},status:{type:a.STRING,defaultValue:"in_progress"},created_by:{type:a.INTEGER,defaultValue:null}});let t=yield L(O.StockAdjustmentSessions.tableName,e);-1===t.indexOf(`${O.StockAdjustmentSessions.tableName}_code`)&&(yield e.addIndex(O.StockAdjustmentSessions.tableName,["code"],{unique:!0})),-1===t.indexOf(`${O.StockAdjustmentSessions.tableName}_created_on`)&&(yield e.addIndex(O.StockAdjustmentSessions.tableName,["created_on"]))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(O.StockAdjustmentSessions.tableName)}))}},{name:"2019-026-initialMigrations-createCustomerDiagnostics",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(C.CustomerDiagnostics.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},customer:{type:a.INTEGER,allowNull:!1},test:{type:a.STRING,allowNull:!1},data:{type:a.STRING,allowNull:!1},comments:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}}),-1===(yield L(C.CustomerDiagnostics.tableName,e)).indexOf(`${C.CustomerDiagnostics.tableName}_test`)&&(yield e.addIndex(C.CustomerDiagnostics.tableName,["test"],{unique:!0})),yield e.addConstraint(C.CustomerDiagnostics.tableName,{fields:["customer"],type:"foreign key",references:{table:d.Customers.tableName,field:"id"},onDelete:"cascade",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(C.CustomerDiagnostics.tableName)}))}},{name:"2019-027-initialMigrations-createDiagnosticTests",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(P.DiagnosticTests.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},test_name:{type:a.STRING,allowNull:!1},parameters:{type:a.STRING,allowNull:!1},comments:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}}),-1===(yield L(P.DiagnosticTests.tableName,e)).indexOf(`${P.DiagnosticTests.tableName}_test_name`)&&(yield e.addIndex(P.DiagnosticTests.tableName,["test_name"],{unique:!0})),yield e.bulkInsert(P.DiagnosticTests.tableName,[{test_name:"Blood Glucose Test",parameters:"value (mmol/L)",comments:"Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol / L; After meals - 5 to 9 mmol / L"},{test_name:"Blood Pressure",parameters:"systolic, diastolic",comments:"90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low"},{test_name:"Total Blood Cholesterol",parameters:"value (mmol/L)",comments:"Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High"}])}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(P.DiagnosticTests.tableName)}))}},{name:"2019-028-initialMigrations-createStockAdjustmentPending",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(x.StockAdjustmentPending.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.STRING,defaultValue:null},product:{type:a.INTEGER,allowNull:!1},quantity_counted:{type:a.DOUBLE,allowNull:!1},quantity_expected:{type:a.DOUBLE,allowNull:!1},current_price:{type:a.DOUBLE,allowNull:!1},created_by:{type:a.INTEGER,defaultValue:null},code:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},cost_price:{type:a.DOUBLE,allowNull:!1},category:{type:a.STRING,defaultValue:null},size:{type:a.STRING,defaultValue:null},expiry:{type:a.STRING,defaultValue:null},comments:{type:a.STRING,defaultValue:null},quantity_expired:{type:a.DOUBLE,allowNull:!1,defaultValue:0},quantity_damaged:{type:a.DOUBLE,allowNull:!1,defaultValue:0},shelf:{type:a.STRING,defaultValue:null},unit:{type:a.STRING,defaultValue:null}});let t=yield L(x.StockAdjustmentPending.tableName,e);-1===t.indexOf(`${x.StockAdjustmentPending.tableName}_code`)&&(yield e.addIndex(x.StockAdjustmentPending.tableName,["code"])),-1===t.indexOf(`${x.StockAdjustmentPending.tableName}_date`)&&(yield e.addIndex(x.StockAdjustmentPending.tableName,["date"])),-1===t.indexOf(`${x.StockAdjustmentPending.tableName}_created_on`)&&(yield e.addIndex(x.StockAdjustmentPending.tableName,["created_on"])),-1===t.indexOf(`${x.StockAdjustmentPending.tableName}_product`)&&(yield e.addIndex(x.StockAdjustmentPending.tableName,["product"])),yield e.addConstraint(x.StockAdjustmentPending.tableName,{fields:["product"],type:"foreign key",references:{table:i.Products.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(x.StockAdjustmentPending.tableName)}))}},{name:"2019-029-initialMigrations-createdbBackups",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(M.DbBackups.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},file_name:{type:a.STRING,defaultValue:null},created_by:{type:a.INTEGER,defaultValue:null},description:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},uploaded:{type:a.STRING,defaultValue:null},db_version:{type:a.STRING,defaultValue:null}}),-1===(yield L(M.DbBackups.tableName,e)).indexOf(`${M.DbBackups.tableName}_file_name_created_on`)&&(yield e.addIndex(M.DbBackups.tableName,["file_name","created_on"]))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(M.DbBackups.tableName)}))}},{name:"2019-030-initialMigrations-createRefills",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(A.Refills.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},product:{type:a.STRING,allowNull:!1},created_by:{type:a.INTEGER,defaultValue:null},start_date:{type:a.STRING,allowNull:!1},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},product_id:{type:a.INTEGER,defaultValue:null},quantity:{type:a.DOUBLE,allowNull:!1},end_date:{type:a.STRING,defaultValue:null},status:{type:a.STRING,defaultValue:null},customer_id:{type:a.INTEGER,defaultValue:null},customer_name:{type:a.STRING,defaultValue:null}});let t=yield L(A.Refills.tableName,e);-1===t.indexOf(`${A.Refills.tableName}_end_date`)&&(yield e.addIndex(A.Refills.tableName,["end_date"])),-1===t.indexOf(`${A.Refills.tableName}_start_date`)&&(yield e.addIndex(A.Refills.tableName,["start_date"])),-1===t.indexOf(`${A.Refills.tableName}_status`)&&(yield e.addIndex(A.Refills.tableName,["status"])),yield e.addConstraint(A.Refills.tableName,{fields:["product_id"],type:"foreign key",references:{table:i.Products.tableName,field:"id"},onDelete:"restrict",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(A.Refills.tableName)}))}},{name:"2019-031-initialMigrations-createStockValues",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(G.StockValues.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.STRING,allowNull:!1},last_modified:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")},selling_value:{type:a.DOUBLE,allowNull:!1},cost_value:{type:a.DOUBLE,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(G.StockValues.tableName)}))}},{name:"2019-032-initialMigrations-createOutgoingPaymets",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(V.OutgoingPayments.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.STRING,allowNull:!1},amount:{type:a.DOUBLE,allowNull:!1},type:{type:a.STRING,allowNull:!1},recipient:{type:a.STRING,allowNull:!1},payment_method:{type:a.STRING,defaultValue:"Cash"},transaction_id:{type:a.STRING,defaultValue:null},item_code:{type:a.STRING,defaultValue:null},notes:{type:a.STRING,defaultValue:null},created_by:{type:a.INTEGER,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(V.OutgoingPayments.tableName,e);-1===t.indexOf(`${V.OutgoingPayments.tableName}_date`)&&(yield e.addIndex(V.OutgoingPayments.tableName,["date"])),-1===t.indexOf(`${V.OutgoingPayments.tableName}_type`)&&(yield e.addIndex(V.OutgoingPayments.tableName,["type"])),-1===t.indexOf(`${V.OutgoingPayments.tableName}_recipient`)&&(yield e.addIndex(V.OutgoingPayments.tableName,["recipient"])),-1===t.indexOf(`${V.OutgoingPayments.tableName}_created_on`)&&(yield e.addIndex(V.OutgoingPayments.tableName,["created_on"]))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(V.OutgoingPayments.tableName)}))}},{name:"2019-034-initialMigrations-createOnlineBackups",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(U.OnlineBackups.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.STRING,allowNull:!1},url:{type:a.STRING,allowNull:!1},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}}),-1===(yield L(U.OnlineBackups.tableName,e)).indexOf(`${U.OnlineBackups.tableName}_date`)&&(yield e.addIndex(U.OnlineBackups.tableName,["date"]))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(U.OnlineBackups.tableName)}))}},{name:"2019-035-initialMigrations-createDBSync",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(j.DbSync.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},type:{type:a.STRING,allowNull:!1},action:{type:a.STRING,defaultValue:null},data:{type:a.STRING,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}}),-1===(yield L(j.DbSync.tableName,e)).indexOf(`${j.DbSync.tableName}_created_on`)&&(yield e.addIndex(j.DbSync.tableName,["created_on"]))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(j.DbSync.tableName)}))}},{name:"2019-036-initialMigrations-createIncomingPaymets",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable(k.IncomingPayments.tableName,{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.STRING,allowNull:!1},amount:{type:a.DOUBLE,allowNull:!1},type:{type:a.STRING,allowNull:!1},payer:{type:a.STRING,allowNull:!1},payment_method:{type:a.STRING,defaultValue:"Cash"},transaction_id:{type:a.STRING,defaultValue:null},item_code:{type:a.STRING,defaultValue:null},notes:{type:a.STRING,defaultValue:null},created_by:{type:a.INTEGER,defaultValue:null},created_on:{type:a.STRING,defaultValue:l.sequelize.literal("CURRENT_TIMESTAMP")}});let t=yield L(k.IncomingPayments.tableName,e);-1===t.indexOf(`${k.IncomingPayments.tableName}_date`)&&(yield e.addIndex(k.IncomingPayments.tableName,["date"])),-1===t.indexOf(`${k.IncomingPayments.tableName}_type`)&&(yield e.addIndex(k.IncomingPayments.tableName,["type"])),-1===t.indexOf(`${k.IncomingPayments.tableName}_payer`)&&(yield e.addIndex(k.IncomingPayments.tableName,["payer"])),-1===t.indexOf(`${k.IncomingPayments.tableName}_created_on`)&&(yield e.addIndex(k.IncomingPayments.tableName,["created_on"]))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable(k.IncomingPayments.tableName)}))}},{name:"20210314155622-addCustomerDob",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn(d.Customers.tableName,"date_of_birth",{type:a.DATE})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn(d.Customers.tableName,"date_of_birth")}))}},{name:"20210314180101-create-product-batches",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable("ProductBatches",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},batch_number:{type:a.STRING},expiry:{type:a.DATE},barcode:{type:a.STRING},product:{type:a.INTEGER},purchase_code:{type:a.STRING},createdAt:{allowNull:!0,type:a.DATE},updatedAt:{allowNull:!0,type:a.DATE}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable("ProductBatches")}))}},{name:"20210315154011-addQuantityToProductBatches",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("productbatches","quantity",{type:a.DOUBLE})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("productbatches","quantity")}))}},{name:"20210317181610-addQuantitySoldToproductBatches",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("productbatches","quantity_sold",{type:a.DOUBLE,defaultValue:0})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("productbatches","quantity_sold")}))}},{name:"20210324143037-create-daily-records",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable("dailyRecords",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.DATE},amount:{type:a.DOUBLE},shift:{type:a.STRING},created_by:{type:a.INTEGER},created_on:{defaultValue:a.NOW,allowNull:!0,type:a.DATE}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable("dailyRecords")}))}},{name:"20210324173726-addPaymentMethodsToDailyRecords",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("dailyRecords","cash",{type:a.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","momo",{type:a.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","insurance",{type:a.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","credit",{type:a.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","pos",{type:a.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","cheque",{type:a.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","other",{type:a.DOUBLE,defaultValue:0})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("dailyRecords","cash"),yield e.removeColumn("dailyRecords","momo"),yield e.removeColumn("dailyRecords","insurance"),yield e.removeColumn("dailyRecords","credit"),yield e.removeColumn("dailyRecords","pos"),yield e.removeColumn("dailyRecords","cheque"),yield e.removeColumn("dailyRecords","other")}))}},{name:"20210409084451-createSalesBatches",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable("sales_batches",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},date:{type:a.DATE},batch_number:{type:a.STRING},product:{type:a.INTEGER},quantity:{type:a.DOUBLE},code:{type:a.STRING},created_by:{type:a.INTEGER},created_on:{defaultValue:a.NOW,allowNull:!0,type:a.DATE}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable("sales_batches")}))}},{name:"20210409085254-addExpiryToSalesBatches",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("sales_batches","expiry",{type:a.DATE})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("sales_batches","expiry")}))}},{name:"20210409095027-addPreferredVendorToProducts",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("products","preferred_vendor",{type:a.INTEGER})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("products","preferred_vendor")}))}},{name:"20210626115902-createTokensTable",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable("tokens",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING},token:{type:a.STRING},created_on:{defaultValue:a.NOW,allowNull:!0,type:a.DATE}})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable("tokens`")}))}},{name:"20210824173831-addOnlineToUsers",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("users","allow_online",{type:a.STRING,defaultValue:"no"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("users","allow_online")}))}},{name:"20210926105345-updateProductsTable",up({context:e}){return n(this,void 0,void 0,(function*(){}))},down({context:e}){return n(this,void 0,void 0,(function*(){}))}},{name:"20211023131213-insertTaxSetting",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"tax",module:"System",value:"0"}],{})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:"tax"})}))}},{name:"20211023134920-addTaxToSales",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("sales","tax",{type:a.DOUBLE,defaultValue:0})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("sales","tax")}))}},{name:"20211024133528-insertBatchSetting",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"activate_batch_mode",module:"System",value:"no"}],{})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:"activate_batch_mode"})}))}},{name:"20211109143824-addLogoToSettings",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"logo",module:"System",value:""},{name:"receipt_logo",module:"System",value:"no"}])}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:{[a.Op.in]:["logo","receipt_logo"]}})}))}},{name:"20211121152934-productsAddDrugInfo",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("products","is_drug",{type:a.STRING,defaultValue:"yes"}),yield e.addColumn("products","generic_name",{allowNull:!0,type:a.STRING,defaultValue:null}),yield e.addColumn("products","contraindications",{allowNull:!0,type:a.STRING,defaultValue:null}),yield e.addColumn("products","pregnancy",{allowNull:!0,type:a.STRING,defaultValue:null}),yield e.addColumn("products","side_effects",{allowNull:!0,type:a.STRING,defaultValue:null}),yield e.addColumn("products","caution",{allowNull:!0,type:a.STRING,defaultValue:null}),yield e.addColumn("products","indications",{allowNull:!0,type:a.STRING,defaultValue:null})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("products","is_drug"),yield e.removeColumn("products","generic_name"),yield e.removeColumn("products","contraindications"),yield e.removeColumn("products","pregnancy"),yield e.removeColumn("products","side_effects"),yield e.removeColumn("products","caution"),yield e.removeColumn("products","indications")}))}},{name:"20211121154018-addStoresTables",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable("stores",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},name:{type:a.STRING},created_on:{defaultValue:a.NOW,allowNull:!0,type:a.DATE}}),yield e.createTable("store_inventory",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},product:{type:a.INTEGER},store:{type:a.INTEGER},max_stock:{type:a.DOUBLE},min_stock:{type:a.DOUBLE},current_stock:{type:a.DOUBLE},expiry:{type:a.DATE},created_on:{defaultValue:a.NOW,allowNull:!0,type:a.DATE}}),yield e.addConstraint("store_inventory",{fields:["product"],type:"foreign key",name:"products_storeInventory_product",references:{table:"products",field:"id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint("store_inventory",{fields:["store"],type:"foreign key",name:"products_storeInventory_store",references:{table:"stores",field:"id"},onDelete:"cascade",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable("stores"),yield e.dropTable("store_inventory")}))}},{name:"20211121170321-addRequisitionTables",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable("requisitions",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},code:{allowNull:!1,type:a.STRING},sender:{allowNull:!1,type:a.INTEGER},recipient:{allowNull:!1,type:a.INTEGER},created_on:{defaultValue:a.NOW,allowNull:!0,type:a.DATE},created_by:{defaultValue:null,allowNull:!0,type:a.INTEGER},status:{allowNull:!1,defaultValue:"Pending",type:a.STRING}}),yield e.createTable("requisition_details",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},product:{type:a.INTEGER},code:{type:a.STRING},price:{type:a.DOUBLE},cost_price:{type:a.DOUBLE},quantity:{type:a.DOUBLE},expiry:{type:a.DATE},created_on:{defaultValue:a.NOW,allowNull:!0,type:a.DATE},date:{allowNull:!1,type:a.DATE},created_by:{defaultValue:null,allowNull:!0,type:a.INTEGER}}),yield e.addConstraint("requisitions",{fields:["code"],type:"unique",name:"requisitions_code_key"}),yield e.addConstraint("requisitions",{fields:["sender"],type:"foreign key",name:"requisitions_store_sender",references:{table:"stores",field:"id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint("requisitions",{fields:["recipient"],type:"foreign key",name:"requisitions_store_recipient",references:{table:"stores",field:"id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint("requisition_details",{fields:["product"],type:"foreign key",name:"requisition_details_product_key",references:{table:"products",field:"id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint("requisition_details",{fields:["code"],type:"foreign key",name:"requisition_details_code_key",references:{table:"requisitions",field:"code"},onDelete:"cascade",onUpdate:"cascade"})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable("requisitions"),yield e.dropTable("requisition_details")}))}},{name:"20211125214835-addDescriptionToStores",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("stores","description",{type:a.STRING,allowNull:!0,defaultValue:""})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("stores","description")}))}},{name:"20220105074517-addReceiptSettings",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"tax_title",module:"System",value:"Local Sale Tax"},{name:"show_tax_on_receipt",module:"System",value:"yes"},{name:"receipt_show_credits",module:"System",value:"yes"},{name:"receipt_extra_info",module:"System",value:""},{name:"receipt_footer",module:"System",value:""}])}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:{[a.Op.in]:["tax_title","show_tax_on_receipt","receipt_show_credits","receipt_extra_info","receipt_footer"]}})}))}},{name:"20220223095800-addMarkupToProducts",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("products","markup",{type:a.DOUBLE,defaultValue:1.33})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("products","markup")}))}},{name:"20220311134330-addActiveIngredient",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("products","active_ingredients",{type:a.STRING,defaultValue:null,allowNull:!0}),yield e.addColumn("products","drug_info",{type:a.STRING,defaultValue:null,allowNull:!0})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("products","active_ingredients"),yield e.removeColumn("products","drug_info")}))}},{name:"20220328084933-addExpiryToPurchaseDetails",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("purchase_details","expiry",{type:a.STRING,defaultValue:null,allowNull:!0})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("purchase_details","expiry")}))}},{name:"20220411095651-receiptSettings",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"receipt_show_customer",module:"System",value:"yes"},{name:"receipt_product_data",module:"System",value:""},{name:"receipt_font_size",module:"System",value:"13px"},{name:"receipt_show_borders",module:"System",value:"yes"}])}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:{[a.Op.in]:["receipt_show_customer","receipt_product_data","receipt_font_size","receipt_show_borders"]}})}))}},{name:"20220503070044-updateSalesDetails",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn("sales_details","expiry",{type:a.STRING,defaultValue:null,allowNull:!0}),yield e.addColumn("sales_details","unit",{type:a.STRING,defaultValue:null,allowNull:!0}),yield e.addColumn("sales_details","label",{type:a.STRING,defaultValue:null,allowNull:!0})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("sales_details","expiry"),yield e.removeColumn("sales_details","unit"),yield e.removeColumn("sales_details","label")}))}},{name:"20220506130046-addSalesPermissions",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert("permissions",[{permission_id:"88",name:"Edit Sales Prices",description:"Allow user to change the price of items during sales"}]),yield e.bulkInsert("role_permissions",[{permission_id:88,role_id:1}])}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkDelete("permissions",{permission_id:"88"}),yield e.bulkDelete("role_permissions",{permission_id:"88"})}))}},{name:"20220524121539-multiplePaymentMethods",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable("sales_payment_methods",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},code:{allowNull:!1,type:a.STRING},payment_method:{allowNull:!1,type:a.STRING},created_on:{defaultValue:a.NOW,allowNull:!0,type:a.DATE},date:{defaultValue:null,allowNull:!0,type:a.DATE},amount_paid:{allowNull:!1,type:a.DOUBLE},transaction_id:{allowNull:!0,defaultValue:null,type:a.STRING}});let t=yield L("sales_payment_methods",e);-1===t.indexOf("sales_payment_methods_payment_method")&&(yield e.addIndex("sales_payment_methods",{fields:["payment_method"]})),-1===t.indexOf("sales_payment_methods_created_on")&&(yield e.addIndex("sales_payment_methods",{fields:["created_on"]})),-1===t.indexOf("sales_payment_methods_date")&&(yield e.addIndex("sales_payment_methods",{fields:["date"]})),-1===t.indexOf("sales_payment_methods_amount_paid")&&(yield e.addIndex("sales_payment_methods",{fields:["amount_paid"]}))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable("sales_payment_methods")}))}},{name:"20220711162301-addDuplicateTimeoutSetting",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"duplicate_record_timeout",module:"System",value:"10"}])}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:"duplicate_record_timeout"})}))}},{name:"20221007120257-addReminderTable",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.createTable("reminders",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:a.INTEGER},type:{type:a.STRING,allowNull:!1},dayOfWeek:{allowNull:!1,type:a.STRING,defaultValue:"Monday"},hourOfDay:{allowNull:!1,defaultValue:"9",type:a.STRING},recipient:{type:a.STRING,allowNull:!1},cc:{type:a.STRING,allowNull:null,defaultValue:null}}),yield e.bulkInsert("reminders",[{type:"upcoming refills",dayOfWeek:"Monday",hourOfDay:"10",recipient:"none",cc:""}])}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.dropTable("reminders")}))}},{name:"20221220113200-addCreatedOnToVariousTables",up({context:e}){return n(this,void 0,void 0,(function*(){const t=["insurance_providers","reminders","role_permissions","roles"],o=yield l.sequelize.transaction();try{for(let n=0;n<t.length;n++){const i=t[n];(yield e.describeTable(i)).created_on||(yield e.addColumn(i,"created_on",{defaultValue:a.NOW,allowNull:!0,type:a.DATE},{transaction:o}))}o.commit()}catch(e){throw o.rollback(),new Error(e)}}))},down({context:e}){return n(this,void 0,void 0,(function*(){["insurance_providers","reminders","role_permissions","roles"].forEach((t=>n(this,void 0,void 0,(function*(){yield e.removeColumn(t,"created_on")}))))}))}},{name:"20221220114600-addUpdatedAtToVariousTables",up({context:e}){return n(this,void 0,void 0,(function*(){const t=yield l.sequelize.transaction();try{for(let o=0;o<r.models.length;o++){const n=r.models[o];(yield e.describeTable(n.tableName)).updatedAt||(yield e.addColumn(n.tableName,"updatedAt",{defaultValue:a.NOW,allowNull:!0,type:a.DATE},{transaction:t}))}t.commit()}catch(e){throw t.rollback(),new Error(e)}}))},down({context:e}){return n(this,void 0,void 0,(function*(){r.models.forEach((t=>n(this,void 0,void 0,(function*(){yield e.removeColumn(t.tableName,"updatedAt")}))))}))}},{name:"20221220151900-addObjectIdToActivities",up({context:e}){return n(this,void 0,void 0,(function*(){(yield e.describeTable("activities")).object_id||(yield e.addColumn("activities","object_id",{type:a.STRING}))}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn("activities","object_id")}))}},{name:"20221221082200-addDeletedAtToAllTables",up({context:e}){return n(this,void 0,void 0,(function*(){const t=yield l.sequelize.transaction();try{for(let o=0;o<r.models.length;o++){const n=r.models[o];(yield e.describeTable(n.tableName)).deletedAt||(yield e.addColumn(n.tableName,"deletedAt",{allowNull:!0,type:a.DATE},{transaction:t}))}t.commit()}catch(e){throw t.rollback(),new Error(e)}}))},down({context:e}){return n(this,void 0,void 0,(function*(){r.models.forEach((t=>n(this,void 0,void 0,(function*(){yield e.removeColumn(t.tableName,"deletedAt")}))))}))}},{name:"20230314000000-addLastProductStockModified",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addColumn(i.Products.tableName,"last_stock_modification",{type:a.STRING,defaultValue:null,allowNull:!0})}))},down({context:e}){return n(this,void 0,void 0,(function*(){yield e.removeColumn(i.Products.tableName,"last_stock_modification")}))}},{name:"20230321000000-addIndexToStockValues",up({context:e}){return n(this,void 0,void 0,(function*(){yield e.addIndex(G.StockValues.tableName,["date"],{unique:!0})}))},down({context:e}){return n(this,void 0,void 0,(function*(){}))}}]},1942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSalesPersonPermissions=t.allPermissions=t.PERMISSION_VIEW_SALES_HISTORY=t.PERMISSION_VIEW_SALES_REPORTS=t.PERMISSION_VIEW_TRANSFER_HISTORY=t.PERMISSION_ADJUST_STOCK=t.PERMISSION_CREATE_SALES=t.PERMISSION_DELETE_PURCHASES=t.PERMISSION_DELETE_SALES_RECORDS=t.PERMISSION_DELETE_TRANSFERS=t.PERMISSION_EDIT_SALES=t.PERMISSION_GIVE_DISCOUNT=t.PERMISSION_MANAGE_ACCOUNTS=t.PERMISSION_MANAGE_CUSTOMERS=t.PERMISSION_MANAGE_INVENTORY=t.PERMISSION_MANAGE_SETTINGS=t.PERMISSION_MANAGE_STAFF=t.PERMISSION_MANAGE_VENDORS=t.PERMISSION_RECEIVE_PURCHASES=t.PERMISSION_RECEIVE_TRANSFERS=t.PERMISSION_RETURN_SOLD_ITEMS=t.PERMISSION_TRANSFER_ITEMS=t.PERMISSION_VIEW_ACCOUNTS=t.PERMISSION_VIEW_END_OF_DAY_REPORT=t.PERMISSION_VIEW_INVENTORY=t.PERMISSION_VIEW_PURCHASE_HISTORY=t.PERMISSION_VIEW_USER_ACTIVITIES=void 0,t.PERMISSION_VIEW_USER_ACTIVITIES="View Sales History",t.PERMISSION_VIEW_PURCHASE_HISTORY="View Purchase History",t.PERMISSION_VIEW_INVENTORY="View Inventory",t.PERMISSION_VIEW_END_OF_DAY_REPORT="View End Of Day Report",t.PERMISSION_VIEW_ACCOUNTS="View Accounts",t.PERMISSION_TRANSFER_ITEMS="Transfer Items",t.PERMISSION_RETURN_SOLD_ITEMS="Return Sold Items",t.PERMISSION_RECEIVE_TRANSFERS="Receive Transfers",t.PERMISSION_RECEIVE_PURCHASES="Receive Purchases",t.PERMISSION_MANAGE_VENDORS="Manage Vendors",t.PERMISSION_MANAGE_STAFF="Manage Staff",t.PERMISSION_MANAGE_SETTINGS="Manage Settings",t.PERMISSION_MANAGE_INVENTORY="Manage Inventory",t.PERMISSION_MANAGE_CUSTOMERS="Manage Customers",t.PERMISSION_MANAGE_ACCOUNTS="Manage Accounts",t.PERMISSION_GIVE_DISCOUNT="Give Discount",t.PERMISSION_EDIT_SALES="Edit Sales",t.PERMISSION_DELETE_TRANSFERS="Delete Transfers",t.PERMISSION_DELETE_SALES_RECORDS="Sales Records",t.PERMISSION_DELETE_PURCHASES="Delete Purchases",t.PERMISSION_CREATE_SALES="Create Sales",t.PERMISSION_ADJUST_STOCK="Adjust Stock",t.PERMISSION_VIEW_TRANSFER_HISTORY="View Transfer History",t.PERMISSION_VIEW_SALES_REPORTS="View Sales Reports",t.PERMISSION_VIEW_SALES_HISTORY="View Sales History",t.allPermissions=new Map(Object.entries({PERMISSION_VIEW_SALES_HISTORY:{name:t.PERMISSION_VIEW_SALES_HISTORY,permission_id:59,description:"view sales invoices"},PERMISSION_RETURN_SOLD_ITEMS:{name:t.PERMISSION_RETURN_SOLD_ITEMS,permission_id:60,description:"received items returned. This will alter stock levels"},PERMISSION_DELETE_SALES_RECORDS:{name:t.PERMISSION_DELETE_SALES_RECORDS,permission_id:61,description:"delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales"},PERMISSION_VIEW_SALES_REPORTS:{name:t.PERMISSION_VIEW_SALES_REPORTS,permission_id:62,description:"View the monthly/daily sales reports page "},PERMISSION_VIEW_END_OF_DAY_REPORT:{name:t.PERMISSION_VIEW_END_OF_DAY_REPORT,permission_id:63,description:"view the end of day sales summary"},PERMISSION_TRANSFER_ITEMS:{name:t.PERMISSION_TRANSFER_ITEMS,permission_id:64,description:"transfer products to another branch. this will affect stock levels"},PERMISSION_RECEIVE_TRANSFERS:{name:t.PERMISSION_RECEIVE_TRANSFERS,permission_id:65,description:"receive items transferred from another branch. this will affect stock levels"},PERMISSION_VIEW_INVENTORY:{name:t.PERMISSION_VIEW_INVENTORY,permission_id:67,description:"view the products list, expiries, and stock-out"},PERMISSION_MANAGE_INVENTORY:{name:t.PERMISSION_MANAGE_INVENTORY,permission_id:68,description:"add a new product to the inventory/edit products, delete products"},PERMISSION_ADJUST_STOCK:{name:t.PERMISSION_ADJUST_STOCK,permission_id:72,description:"adjust the stock of products or initiate stock-taking"},PERMISSION_RECEIVE_PURCHASES:{name:t.PERMISSION_RECEIVE_PURCHASES,permission_id:73,description:"receive new purchases"},PERMISSION_VIEW_PURCHASE_HISTORY:{name:t.PERMISSION_VIEW_PURCHASE_HISTORY,permission_id:74,description:"view purchase history"},PERMISSION_CREATE_SALES:{name:t.PERMISSION_CREATE_SALES,permission_id:75,description:"make sales"},PERMISSION_DELETE_PURCHASES:{name:t.PERMISSION_DELETE_PURCHASES,permission_id:76,description:"delete purchases invoices. This will affect stock levels"},PERMISSION_MANAGE_VENDORS:{name:t.PERMISSION_MANAGE_VENDORS,permission_id:77,description:"add/delete vendors"},PERMISSION_VIEW_TRANSFER_HISTORY:{name:t.PERMISSION_VIEW_TRANSFER_HISTORY,permission_id:78,description:"view outgoing/incoming transfer history"},PERMISSION_DELETE_TRANSFERS:{name:t.PERMISSION_DELETE_TRANSFERS,permission_id:79,description:"elete transfer records. this will affect stock levels"},PERMISSION_VIEW_USER_ACTIVITIES:{name:t.PERMISSION_VIEW_USER_ACTIVITIES,permission_id:80,description:"view all activities by user and time"},PERMISSION_MANAGE_STAFF:{name:t.PERMISSION_MANAGE_STAFF,permission_id:81,description:"add/edit/delete users. Also can change a user role or permissions"},PERMISSION_MANAGE_CUSTOMERS:{name:t.PERMISSION_MANAGE_CUSTOMERS,permission_id:82,description:"add/edit/delete customers data."},PERMISSION_MANAGE_SETTINGS:{name:t.PERMISSION_MANAGE_SETTINGS,permission_id:83,description:"edit company name, phone, address, etc"},PERMISSION_VIEW_ACCOUNTS:{name:t.PERMISSION_VIEW_ACCOUNTS,permission_id:84,description:"view accounts details/reports"},PERMISSION_MANAGE_ACCOUNTS:{name:t.PERMISSION_MANAGE_ACCOUNTS,permission_id:85,description:"delete/add expenses/accounts details/reports"},PERMISSION_GIVE_DISCOUNT:{name:t.PERMISSION_GIVE_DISCOUNT,permission_id:86,description:"offer discounts to clients during sales"},PERMISSION_EDIT_SALES:{name:t.PERMISSION_EDIT_SALES,permission_id:87,description:"edit a sales date, payment method, amount paid, customer and shift"}})),t.defaultSalesPersonPermissions=[59,62,63,67,74,80,75]},4539:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sequelize=void 0;const n=o(4464),a=o(9156),i=new n.Sequelize(a.config.production);t.sequelize=i},3064:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=o(5251),r=a(o(6860)).default.Router(),l=o(6);r.get("/",((e,t)=>n(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),r.post("/login",((e,t)=>n(void 0,void 0,void 0,(function*(){try{let o=yield(0,l.login_function)(e.body);t.status(201).json(o)}catch(e){t.status(500).json({status:"-1",data:null,message:e})}})))),r.get("/getBranches",((e,t)=>n(void 0,void 0,void 0,(function*(){try{let e=yield(0,l.get_branches_function)();t.status(201).json(e)}catch(e){t.status(500).json({status:"-1",data:null,message:e})}})))),r.get("/getLogo",((e,t)=>n(void 0,void 0,void 0,(function*(){try{let e=yield(0,l.get_logo_function)();t.status(201).json(e)}catch(e){i.logger.error(e),t.status(500).json({status:"-1",data:null,message:e})}})))),r.post("/saveBranch",((e,t)=>n(void 0,void 0,void 0,(function*(){try{let o=yield(0,l.save_branch_function)(e.body);t.json(o)}catch(e){i.logger.error(e),t.status(500).json({status:"-1",data:null,message:e})}})))),r.get("/getInsurers",((e,t)=>n(void 0,void 0,void 0,(function*(){try{let e=yield(0,l.get_insurers_function)();t.json(e)}catch(e){i.logger.error(e),t.status(500).json({status:"-1",data:null,message:e})}})))),r.get("/settings",((e,t)=>n(void 0,void 0,void 0,(function*(){try{let e=yield(0,l.getSettings)();t.json(e)}catch(e){i.logger.error({message:e}),t.status(500).json({status:"-1",data:null,message:e})}})))),t.default=r},4987:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(o(6860)).default.Router();i.get("/",((e,t)=>n(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},7217:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(o(6860)).default.Router();i.get("/",((e,t)=>n(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},3654:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(o(6860)).default.Router();i.get("/",((e,t)=>n(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},4046:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(o(6860)).default.Router();i.get("/",((e,t)=>n(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},5233:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(o(6860)).default.Router();i.get("/",((e,t)=>n(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},8476:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(o(6860)).default.Router();i.get("/",((e,t)=>n(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},1222:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=a(o(6860)).default.Router();i.get("/",((e,t)=>n(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},2547:(e,t)=>{function o(e,t){let o=new Date(t,0,1+7*(e-1));for(;0!==o.getDay();)o.setDate(o.getDate()-1);return o}function n(e,t){let o=new Date(t);return o.setDate(o.getDate()+e),o}function a(e="",t=null){let o=new Date;null!=t&&(o=new Date(t));let n,a,r=o.getDate(),l=o.getMonth()+1,d=o.getFullYear();n=r<10?"0"+r:r.toString(),a=l<10?"0"+l:l.toString();let s="",u="",c="";switch(e){case"timestamp":return s=i(o.getHours()),u=i(o.getMinutes()),c=i(o.getSeconds()),d+"-"+a+"-"+n+" "+s+":"+u+":"+c;case"timestamp_string":return s=i(o.getHours()),u=i(o.getMinutes()),c=i(o.getSeconds()),d+""+a+n+s+u+c;case"month":return a;default:return d+"-"+a+"-"+n}}function i(e){return e.toString().padStart(2,"0")}function r(e){let t="string"==typeof e?parseInt(e):e;return 2==t?28:-1!=[9,4,6,11].indexOf(t)?30:31}function l(){return(new Date).getFullYear()}function d(e,t=""){return a(t,e)}function s(e){const t=e?new Date(e):new Date;Date.now();const o=new Date(t.getFullYear(),0,1);let n=Math.floor((t.getTime()-o.getTime())/864e5);return Math.ceil(n/7)}Object.defineProperty(t,"__esModule",{value:!0}),t.setDates=t.getWeekNumber=t.addTimePeriod=t.subtractTimePeriod=t.formatDate=t.timeBetweenDates=t.compareDates=t.getThisYear=t.getLastDayOfMonth=t.getAge=t.getMonthsNoPad=t.getMonthsObjects=t.getDatesBetween=t.nth=t.getDays=t.getMonths=t.getDayName=t.getMonthName=t.padZero=t.getToday=t.formatDateTime=t.addDaystoDate=t.getFirstDayOfWeek=void 0,t.getFirstDayOfWeek=o,t.addDaystoDate=n,t.formatDateTime=function(e){return new Date(e).toISOString().slice(0,19).replace("T"," ")},t.getToday=a,t.padZero=i,t.getMonthName=function(e){try{let t=["January","February","March","April","May","June","July","August","September","October","November","December"];if(null==t[e-1])throw new Error("Number not found");return t[e-1]}catch(e){throw new Error("Number not found")}},t.getDayName=function(e){try{let t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(null==t[e])throw new Error("Number not found");return t[e]}catch(e){throw new Error("Number not found")}},t.getMonths=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},t.getDays=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},t.nth=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},t.getDatesBetween=function(e,t){let o=[],n="string"==typeof e?new Date(e):e,i="string"==typeof t?new Date(t):t;for(;n<=i;)o.push(a("",n)),n=new Date(n.getDate()+1);return o},t.getMonthsObjects=function(){let e=[];return e.push({id:"01",name:"January"}),e.push({id:"02",name:"February"}),e.push({id:"03",name:"March"}),e.push({id:"04",name:"April"}),e.push({id:"05",name:"May"}),e.push({id:"06",name:"June"}),e.push({id:"07",name:"July"}),e.push({id:"08",name:"August"}),e.push({id:"09",name:"September"}),e.push({id:"10",name:"October"}),e.push({id:"11",name:"November"}),e.push({id:"12",name:"December"}),e},t.getMonthsNoPad=function(){let e=[];return e.push({id:"1",name:"January"}),e.push({id:"2",name:"February"}),e.push({id:"3",name:"March"}),e.push({id:"4",name:"April"}),e.push({id:"5",name:"May"}),e.push({id:"6",name:"June"}),e.push({id:"7",name:"July"}),e.push({id:"8",name:"August"}),e.push({id:"9",name:"September"}),e.push({id:"10",name:"October"}),e.push({id:"11",name:"November"}),e.push({id:"12",name:"December"}),e},t.getAge=function(e){let t=new Date,o=new Date(e),n=t.getFullYear()-o.getFullYear(),a=t.getMonth()-o.getMonth();return(a<0||0===a&&t.getDate()<o.getDate())&&n--,n},t.getLastDayOfMonth=r,t.getThisYear=l,t.compareDates=function(e,t){let o=new Date(e),n=null==t?new Date:new Date(t);return o<n?"before":o>n?"after":"same"},t.timeBetweenDates=function(e,t="",o="seconds"){let n=new Date(e),a=new Date;switch(""!=t&&(a=new Date(t)),o){case"days":return n.getTime()-a.getTime()/864e5;case"minutes":return n.getTime()-a.getTime()/36e5;default:return(n.getTime()-a.getTime())/1e3}},t.formatDate=d,t.subtractTimePeriod=function(e,t,o){switch(e="string"==typeof e?new Date(e):e,t){case"years":return new Date(e.setFullYear(e.getFullYear()-o));case"months":return new Date(e.setMonth(e.getMonth()-o));case"hours":return new Date(e.setHours(e.getHours()-o));case"minutes":return new Date(e.setMinutes(e.getMinutes()-o));case"seconds":return new Date(e.setSeconds(e.getSeconds()-o));default:return new Date(e.setDate(e.getDate()-o))}},t.addTimePeriod=function(e,t,o){switch(e="string"==typeof e?new Date(e):e,t){case"years":return new Date(e.setFullYear(e.getFullYear()-o));case"months":return new Date(e.setMonth(e.getMonth()-o));case"hours":return new Date(e.setHours(e.getHours()-o));case"minutes":return new Date(e.setMinutes(e.getMinutes()-o));case"seconds":return new Date(e.setSeconds(e.getSeconds()-o));default:return new Date(e.setDate(e.getDate()-o))}},t.getWeekNumber=s,t.setDates=function(e){const t=new Date;let i,u,c=s(t),p=l(),y=p-1,m=t.getMonth(),f=0==m?12:m-1,_=11==m?1:m+1;switch(e){case"all":i=d(new Date(2015,0,1)),u=a();break;case"today":case"today":default:i=a(),u=a();break;case"yesterday":i=d(n(-1,a())),u=d(n(-1,a()));break;case"this_week":i=d(o(c,p)),u=d(n(6,i));break;case"last_week":i=d(n(-6,d(o(c,p)))),u=d(n(6,i));break;case"next_week":i=d(n(6,d(o(c,p)))),u=d(n(6,i));break;case"this_month":i=d(new Date(p,m,1)),u=d(new Date(p,m,r(m)));break;case"last_month":i=d(new Date(new Date(p,m,1).setMonth(m-1))),u=d(new Date(new Date(p,m,r(f)).setMonth(m-1)));break;case"next_month":i=d(new Date(new Date(p,m,1).setMonth(m+1))),u=d(new Date(new Date(p,m,r(_)).setMonth(m+1)));break;case"first_quarter":i=d(new Date(p,0,1)),u=d(new Date(p,2,31));break;case"second_quarter":i=d(new Date(p,3,1)),u=d(new Date(p,5,30));break;case"third_quarter":i=d(new Date(p,6,1)),u=d(new Date(p,8,30));break;case"last_quarter":i=d(new Date(p,9,1)),u=d(new Date(p,11,31));break;case"this_year":i=d(new Date(p,0,1)),u=d(new Date(p,11,31));break;case"last_year":i=d(new Date(y,0,1)),u=d(new Date(y,11,31))}return{startDate:i,endDate:u}}},8153:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moduleNames=t.infoMessages=t.errorMessages=void 0,t.errorMessages={WRONG_COMBINATION:"Wrong combination. Try again",USER_NOT_FOUND:"User not found",ERROR_GETTING_BRANCHES:"Error getting branches",ERROR_GETTING_LOGO:"Error getting logo",ERROR_GETTING_SETTINGS:"Error getting settings",ERROR_CREATING_BRANCH:"Error creating branch",ERROR_GETTING_INSURERS:"Error getting insurers"},t.infoMessages={LOGGED_IN:"logged in",CREATED_NEW_BRANCH:"created a new branch",CREATED_NEW_INSURER:"created a new insurer"},t.moduleNames={SYSTEM:"System"}},3426:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Activities=void 0;const i=o(4464),r=o(2083);let l=class extends i.Model{};n([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),a("design:type",String)],l.prototype,"activity",void 0),n([i.PrimaryKey,(0,i.Column)({type:i.DataType.BIGINT,autoIncrement:!0}),a("design:type",String)],l.prototype,"activity_id",void 0),n([(0,i.ForeignKey)((()=>r.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",String)],l.prototype,"user_id",void 0),n([(0,i.Column)({type:i.DataType.STRING,allowNull:!0}),a("design:type",String)],l.prototype,"module",void 0),n([i.CreatedAt,a("design:type",String)],l.prototype,"created_on",void 0),n([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!0,defaultValue:0}),a("design:type",String)],l.prototype,"deleted",void 0),n([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!0,defaultValue:0}),a("design:type",String)],l.prototype,"object_id",void 0),l=n([(0,i.Table)({tableName:"activities",modelName:"Activities",paranoid:!0})],l),t.Activities=l},5672:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Branches=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([i.Index,(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),a("design:type",String)],r.prototype,"name",void 0),n([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),a("design:type",String)],r.prototype,"location",void 0),n([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),a("design:type",String)],r.prototype,"phone",void 0),n([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),a("design:type",String)],r.prototype,"address",void 0),n([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),a("design:type",String)],r.prototype,"email",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),r=n([(0,i.Table)({tableName:"branches",modelName:"Branches",paranoid:!0})],r),t.Branches=r},4976:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerDiagnostics=void 0;const i=o(4464),r=o(7501);let l=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],l.prototype,"id",void 0),n([(0,i.ForeignKey)((()=>r.Customers)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],l.prototype,"customer",void 0),n([i.Column,a("design:type",String)],l.prototype,"test",void 0),n([i.Column,a("design:type",String)],l.prototype,"data",void 0),n([i.Column,a("design:type",String)],l.prototype,"comments",void 0),n([i.Index,i.Column,a("design:type",String)],l.prototype,"date",void 0),n([i.Index,i.CreatedAt,a("design:type",String)],l.prototype,"created_on",void 0),l=n([(0,i.Table)({tableName:"customer_diagnostics",modelName:"CustomerDiagnostics",paranoid:!0})],l),t.CustomerDiagnostics=l},7501:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Customers=void 0;const i=o(4464),r=o(4976);let l=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],l.prototype,"id",void 0),n([i.Index,(0,i.Column)({allowNull:!1}),a("design:type",String)],l.prototype,"name",void 0),n([i.Column,a("design:type",String)],l.prototype,"sex",void 0),n([i.Index,i.Column,a("design:type",String)],l.prototype,"phone",void 0),n([i.Index,(0,i.Column)({validate:{isEmail:!0}}),a("design:type",String)],l.prototype,"email",void 0),n([(0,i.Column)({validate:{isDate:!0}}),a("design:type",String)],l.prototype,"date_of_birth",void 0),n([i.CreatedAt,a("design:type",String)],l.prototype,"created_on",void 0),n([i.Column,a("design:type",String)],l.prototype,"location",void 0),n([(0,i.HasMany)((()=>r.CustomerDiagnostics)),a("design:type",Array)],l.prototype,"customerDiagnostics",void 0),l=n([(0,i.Table)({tableName:"customers",modelName:"Customers",paranoid:!0})],l),t.Customers=l},7917:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DailyRecords=void 0;const r=o(4539),l=o(4464),d=o(2083);let s=class extends l.Model{static getTotalSummary(e){return i(this,void 0,void 0,(function*(){return yield this.findOne({attributes:[[r.sequelize.fn("SUM",r.sequelize.col("cash")),"cash"],[r.sequelize.fn("SUM",r.sequelize.col("momo")),"momo"],[r.sequelize.fn("SUM",r.sequelize.col("pos")),"pos"],[r.sequelize.fn("SUM",r.sequelize.col("cheque")),"cheque"],[r.sequelize.fn("SUM",r.sequelize.col("other")),"other"],[r.sequelize.fn("SUM",r.sequelize.col("credit")),"credit"],[r.sequelize.fn("SUM",r.sequelize.col("insurance")),"insurance"]],where:{date:e}})}))}};n([l.PrimaryKey,(0,l.Column)({type:l.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],s.prototype,"id",void 0),n([l.Index,(0,l.Column)({type:l.DataType.DATE}),a("design:type",String)],s.prototype,"date",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],s.prototype,"amount",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],s.prototype,"pos",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],s.prototype,"cheque",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],s.prototype,"insurance",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],s.prototype,"momo",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],s.prototype,"cash",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],s.prototype,"other",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],s.prototype,"credit",void 0),n([(0,l.Column)({type:l.DataType.STRING}),a("design:type",String)],s.prototype,"shift",void 0),n([(0,l.ForeignKey)((()=>d.Users)),(0,l.Column)({type:l.DataType.INTEGER}),a("design:type",Number)],s.prototype,"created_by",void 0),n([l.Index,l.CreatedAt,a("design:type",Number)],s.prototype,"created_on",void 0),s=n([(0,l.Table)({tableName:"dailyRecords",modelName:"DailyRecords",paranoid:!0})],s),t.DailyRecords=s},8431:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DbBackups=void 0;const i=o(4464),r=o(2083);let l=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],l.prototype,"id",void 0),n([i.Column,a("design:type",String)],l.prototype,"file_name",void 0),n([(0,i.ForeignKey)((()=>r.Users)),(0,i.Column)({type:i.DataType.INTEGER}),a("design:type",String)],l.prototype,"created_by",void 0),n([i.Column,a("design:type",String)],l.prototype,"description",void 0),n([i.Column,a("design:type",String)],l.prototype,"uploaded",void 0),n([i.Column,a("design:type",String)],l.prototype,"db_version",void 0),n([i.CreatedAt,a("design:type",String)],l.prototype,"created_on",void 0),l=n([(0,i.Table)({tableName:"dbbackups",modelName:"DbBackups",paranoid:!0})],l),t.DbBackups=l},314:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DbSync=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([i.Column,a("design:type",String)],r.prototype,"type",void 0),n([i.Column,a("design:type",String)],r.prototype,"action",void 0),n([i.Column,a("design:type",String)],r.prototype,"data",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),r=n([(0,i.Table)({tableName:"db_sync",modelName:"DbSync",paranoid:!0})],r),t.DbSync=r},993:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticTests=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"test_name",void 0),n([i.Column,a("design:type",String)],r.prototype,"parameters",void 0),n([i.Column,a("design:type",String)],r.prototype,"comments",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),r=n([(0,i.Table)({tableName:"diagnostic_tests",modelName:"DiagnosticTests",paranoid:!0})],r),t.DiagnosticTests=r},208:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.IncomingPayments=void 0;const r=o(4539),l=o(4464),d=o(496),s=o(2083);let u=class extends l.Model{static getTotalPaid(e,t,o){return i(this,void 0,void 0,(function*(){return(yield this.findOne({attributes:[[r.sequelize.fn("SUM",r.sequelize.col("amount")),"total"]],where:Object.assign(Object.assign(Object.assign({type:"Credit Sale Payment"},t&&{date:{[d.Op.gte]:new Date(t)}}),o&&{date:{[d.Op.lte]:new Date(o)}}),e&&{payer:e})})).total||0}))}};n([l.PrimaryKey,(0,l.Column)({type:l.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],u.prototype,"id",void 0),n([l.Index,(0,l.Column)({type:l.DataType.DATE}),a("design:type",String)],u.prototype,"date",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE}),a("design:type",Number)],u.prototype,"amount",void 0),n([l.Index,l.Column,a("design:type",String)],u.prototype,"type",void 0),n([l.Index,l.Column,a("design:type",String)],u.prototype,"payer",void 0),n([l.Index,l.Column,a("design:type",String)],u.prototype,"payment_method",void 0),n([l.Index,l.Column,a("design:type",String)],u.prototype,"transaction_id",void 0),n([l.Column,a("design:type",String)],u.prototype,"item_code",void 0),n([l.Column,a("design:type",String)],u.prototype,"notes",void 0),n([(0,l.ForeignKey)((()=>s.Users)),(0,l.Column)({type:l.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],u.prototype,"created_by",void 0),n([l.Index,l.CreatedAt,a("design:type",String)],u.prototype,"created_on",void 0),u=n([(0,l.Table)({tableName:"incoming_payments",modelName:"IncomingPayments",paranoid:!0})],u),t.IncomingPayments=u},5559:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.InsuranceProviders=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([i.Column,a("design:type",String)],r.prototype,"name",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),r=n([(0,i.Table)({tableName:"insurance_providers",modelName:"InsuranceProviders",paranoid:!0})],r),t.InsuranceProviders=r},4155:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineBackups=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),a("design:type",String)],r.prototype,"date",void 0),n([i.Column,a("design:type",String)],r.prototype,"url",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),r=n([(0,i.Table)({tableName:"online_backups",modelName:"OnlineBackups",paranoid:!0})],r),t.OnlineBackups=r},7900:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.OutgoingPayments=void 0;const i=o(4464),r=o(2083);let l=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],l.prototype,"id",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),a("design:type",String)],l.prototype,"date",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],l.prototype,"amount",void 0),n([i.Index,i.Column,a("design:type",String)],l.prototype,"type",void 0),n([i.Index,i.Column,a("design:type",String)],l.prototype,"recipient",void 0),n([i.Column,a("design:type",String)],l.prototype,"transaction_id",void 0),n([i.Column,a("design:type",String)],l.prototype,"item_code",void 0),n([i.Column,a("design:type",String)],l.prototype,"notes",void 0),n([(0,i.ForeignKey)((()=>r.Users)),(0,i.Column)({type:i.DataType.INTEGER}),a("design:type",Number)],l.prototype,"created_by",void 0),n([i.CreatedAt,a("design:type",String)],l.prototype,"created_on",void 0),l=n([(0,i.Table)({tableName:"outgoing_payments",modelName:"OutgoingPayments",paranoid:!0})],l),t.OutgoingPayments=l},8801:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Permissions=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"permission_id",void 0),n([i.Index,(0,i.Column)({unique:!0}),a("design:type",String)],r.prototype,"name",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"description",void 0),r=n([(0,i.Table)({tableName:"permissions",modelName:"Permissions",paranoid:!0,timestamps:!1})],r),t.Permissions=r},688:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductBatches=void 0;const i=o(4464),r=o(6612);let l=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],l.prototype,"id",void 0),n([i.Column,a("design:type",String)],l.prototype,"batch_number",void 0),n([(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],l.prototype,"expiry",void 0),n([i.Column,a("design:type",String)],l.prototype,"barcode",void 0),n([(0,i.ForeignKey)((()=>r.Products)),(0,i.Column)({type:i.DataType.INTEGER}),a("design:type",Number)],l.prototype,"product",void 0),n([i.Column,a("design:type",String)],l.prototype,"purchase_code",void 0),l=n([(0,i.Table)({tableName:"ProductBatches",modelName:"ProductBatches",paranoid:!0})],l),t.ProductBatches=l},6612:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Products=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([i.Index,(0,i.Column)({allowNull:!1,unique:!0}),a("design:type",String)],r.prototype,"name",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],r.prototype,"price",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"category",void 0),n([i.Column,a("design:type",String)],r.prototype,"notes",void 0),n([i.Column,a("design:type",String)],r.prototype,"unit",void 0),n([i.Column,a("design:type",String)],r.prototype,"picture",void 0),n([i.Index,i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],r.prototype,"max_stock",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],r.prototype,"min_stock",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE,allowNull:!1,validate:{isDate:!0}}),a("design:type",String)],r.prototype,"expiry",void 0),n([i.Column,a("design:type",String)],r.prototype,"barcode",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],r.prototype,"current_stock",void 0),n([(0,i.Column)({type:i.DataType.DATE,allowNull:!0}),a("design:type",String)],r.prototype,"last_modified",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],r.prototype,"cost_price",void 0),n([i.Column,a("design:type",String)],r.prototype,"size",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"description",void 0),n([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1,defaultValue:1}),a("design:type",Number)],r.prototype,"status",void 0),n([i.Column,a("design:type",String)],r.prototype,"shelf",void 0),n([(0,i.Column)({type:i.DataType.STRING}),a("design:type",Number)],r.prototype,"preferred_vendor",void 0),n([i.Column,a("design:type",String)],r.prototype,"is_drug",void 0),n([i.Column,a("design:type",String)],r.prototype,"generic_name",void 0),n([i.Column,a("design:type",String)],r.prototype,"contraindications",void 0),n([i.Column,a("design:type",String)],r.prototype,"pregnancy",void 0),n([i.Column,a("design:type",String)],r.prototype,"side_effects",void 0),n([i.Column,a("design:type",String)],r.prototype,"caution",void 0),n([i.Column,a("design:type",String)],r.prototype,"indications",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:1.33,validate:{isNumeric:!0,isFloat:!0}}),a("design:type",Number)],r.prototype,"markup",void 0),n([i.Column,a("design:type",String)],r.prototype,"active_ingredients",void 0),n([i.Column,a("design:type",String)],r.prototype,"drug_info",void 0),n([i.Column,a("design:type",String)],r.prototype,"last_stock_modification",void 0),n([(0,i.Column)({type:i.DataType.VIRTUAL,get(){return Date.parse(this.getDataValue("expiry"))<Date.now()}}),a("design:type",Boolean)],r.prototype,"expired",void 0),n([(0,i.Column)({type:i.DataType.VIRTUAL,get(){return this.getDataValue("current_stock")<1}}),a("design:type",Boolean)],r.prototype,"out_of_stock",void 0),n([(0,i.Column)({type:i.DataType.VIRTUAL,get(){return this.getDataValue("current_stock")>0&&this.getDataValue("current_stock")<=this.getDataValue("min_stock")}}),a("design:type",Boolean)],r.prototype,"near_min",void 0),n([(0,i.Column)({type:i.DataType.VIRTUAL,get(){return this.getDataValue("current_stock")>0&&this.getDataValue("current_stock")>=this.getDataValue("max_stock")}}),a("design:type",Boolean)],r.prototype,"near_max",void 0),r=n([(0,i.Table)({tableName:"products",modelName:"Products",paranoid:!0})],r),t.Products=r},5338:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.PurchaseDetails=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],r.prototype,"product",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],r.prototype,"quantity",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],r.prototype,"price",void 0),n([i.Column,a("design:type",String)],r.prototype,"unit",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),n([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],r.prototype,"created_by",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],r.prototype,"markup",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"code",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],r.prototype,"date",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],r.prototype,"selling_price",void 0),n([(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],r.prototype,"expiry",void 0),r=n([(0,i.Table)({tableName:"purchase_details",modelName:"PurchaseDetails",paranoid:!0})],r),t.PurchaseDetails=r},3979:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Purchases=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],r.prototype,"vendor",void 0),n([(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),a("design:type",String)],r.prototype,"date",void 0),n([i.Column,a("design:type",String)],r.prototype,"site",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"code",void 0),n([i.Column,a("design:type",String)],r.prototype,"status",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),n([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],r.prototype,"created_by",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"invoice",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"payment_method",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE}),a("design:type",Number)],r.prototype,"amount_paid",void 0),n([(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],r.prototype,"last_payment_date",void 0),r=n([(0,i.Table)({tableName:"purchases",modelName:"Purchases",paranoid:!0})],r),t.Purchases=r},7901:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ReceivedTransferDetails=void 0;const i=o(4464),r=o(6612),l=o(3082),d=o(2083);let s=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],s.prototype,"id",void 0),n([(0,i.ForeignKey)((()=>r.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],s.prototype,"product",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],s.prototype,"quantity",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],s.prototype,"price",void 0),n([i.Column,a("design:type",String)],s.prototype,"unit",void 0),n([i.CreatedAt,a("design:type",String)],s.prototype,"created_on",void 0),n([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],s.prototype,"created_by",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],s.prototype,"markup",void 0),n([i.Index,(0,i.ForeignKey)((()=>l.ReceivedTransfers)),i.Column,a("design:type",String)],s.prototype,"code",void 0),n([i.Index,i.Column,a("design:type",String)],s.prototype,"date",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],s.prototype,"selling_price",void 0),s=n([(0,i.Table)({tableName:"received_transfer_details",modelName:"ReceivedTransferDetails",paranoid:!0})],s),t.ReceivedTransferDetails=s},3082:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ReceivedTransfers=void 0;const i=o(4464),r=o(5672),l=o(2083);let d=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],d.prototype,"id",void 0),n([(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),a("design:type",String)],d.prototype,"date",void 0),n([i.Index,(0,i.Column)({allowNull:!1}),a("design:type",String)],d.prototype,"code",void 0),n([i.Index,(0,i.Column)({allowNull:!1}),a("design:type",String)],d.prototype,"invoice",void 0),n([i.CreatedAt,a("design:type",String)],d.prototype,"created_on",void 0),n([(0,i.ForeignKey)((()=>l.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"created_by",void 0),n([(0,i.ForeignKey)((()=>r.Branches)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"sender",void 0),d=n([(0,i.Table)({tableName:"received_transfers",modelName:"ReceivedTransfers",paranoid:!0})],d),t.ReceivedTransfers=d},8899:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Refills=void 0;const i=o(4464),r=o(7501),l=o(6612),d=o(2083);let s=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],s.prototype,"id",void 0),n([i.Index,i.Column,a("design:type",String)],s.prototype,"product",void 0),n([(0,i.ForeignKey)((()=>l.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!0}),a("design:type",Number)],s.prototype,"product_id",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:1}),a("design:type",Number)],s.prototype,"quantity",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),a("design:type",String)],s.prototype,"start_date",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],s.prototype,"end_date",void 0),n([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],s.prototype,"created_by",void 0),n([i.Index,i.Column,a("design:type",String)],s.prototype,"status",void 0),n([(0,i.ForeignKey)((()=>r.Customers)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],s.prototype,"customer_id",void 0),n([i.Column,a("design:type",String)],s.prototype,"customer_name",void 0),n([i.CreatedAt,a("design:type",String)],s.prototype,"created_on",void 0),s=n([(0,i.Table)({tableName:"refills",modelName:"Refills",paranoid:!0})],s),t.Refills=s},128:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.RolePermissions=void 0;const i=o(4464),r=o(8801),l=o(4284);let d=class extends i.Model{};n([(0,i.ForeignKey)((()=>l.Roles)),(0,i.Column)({type:i.DataType.INTEGER}),a("design:type",Number)],d.prototype,"role_id",void 0),n([(0,i.ForeignKey)((()=>r.Permissions)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"permission_id",void 0),n([i.CreatedAt,a("design:type",String)],d.prototype,"created_on",void 0),d=n([(0,i.Table)({tableName:"role_permissions",modelName:"RolePermissions",paranoid:!0})],d),t.RolePermissions=d},4284:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Roles=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"role_id",void 0),n([i.Column,a("design:type",String)],r.prototype,"role_name",void 0),n([i.Column,a("design:type",String)],r.prototype,"description",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),r=n([(0,i.Table)({tableName:"roles",modelName:"Roles",paranoid:!0})],r),t.Roles=r},9591:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Sales=void 0;const i=o(4464),r=o(7501),l=o(2083);let d=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],d.prototype,"id",void 0),n([(0,i.ForeignKey)((()=>r.Customers)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!0,defaultValue:null}),a("design:type",Number)],d.prototype,"customer",void 0),n([i.Index,(0,i.Column)({allowNull:!1,unique:!0}),a("design:type",String)],d.prototype,"code",void 0),n([(0,i.ForeignKey)((()=>l.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"created_by",void 0),n([i.CreatedAt,a("design:type",String)],d.prototype,"created_on",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),a("design:type",Number)],d.prototype,"amount_paid",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"payment_method",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"momo_reference",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"date",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"insurance_provider",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"insurance_member_name",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"insurance_member_id",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"creditor_name",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE}),a("design:type",Number)],d.prototype,"credit_paid",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE}),a("design:type",Number)],d.prototype,"discount",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE}),a("design:type",Number)],d.prototype,"tax",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"shift",void 0),d=n([(0,i.Table)({tableName:"sales",modelName:"Sales",paranoid:!0})],d),t.Sales=d},7133:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SalesDetails=void 0;const r=o(4539),l=o(4464),d=o(6612),s=o(9591),u=o(496);let c=class extends l.Model{static getTotalSales(e,t){return i(this,void 0,void 0,(function*(){return(yield this.findOne({attributes:[[r.sequelize.literal("sum(price * quantity)"),"total_amount"],[r.sequelize.fn("SUM",r.sequelize.col("amount")),"total"]],where:{date:{[u.Op.between]:[new Date(e),new Date(t)]}}})).total_amount||0}))}};n([l.PrimaryKey,(0,l.Column)({type:l.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],c.prototype,"id",void 0),n([(0,l.ForeignKey)((()=>d.Products)),(0,l.Column)({type:l.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],c.prototype,"product",void 0),n([l.Index,(0,l.Column)({type:l.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],c.prototype,"quantity",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],c.prototype,"price",void 0),n([l.Column,a("design:type",String)],c.prototype,"unit",void 0),n([l.CreatedAt,a("design:type",String)],c.prototype,"created_on",void 0),n([l.Column,a("design:type",String)],c.prototype,"label",void 0),n([l.Index,(0,l.ForeignKey)((()=>s.Sales)),l.Column,a("design:type",String)],c.prototype,"code",void 0),n([l.Index,l.Column,a("design:type",String)],c.prototype,"date",void 0),n([(0,l.Column)({type:l.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],c.prototype,"cost_price",void 0),n([l.Index,l.Column,a("design:type",String)],c.prototype,"expiry",void 0),c=n([(0,l.Table)({tableName:"sales_details",modelName:"SalesDetails",paranoid:!0})],c),t.SalesDetails=c},1530:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const i=o(4464);let r=class extends i.Model{};n([i.Index,(0,i.Column)({allowNull:!1,unique:!0}),a("design:type",String)],r.prototype,"name",void 0),n([i.Column,a("design:type",String)],r.prototype,"value",void 0),n([(0,i.Column)({allowNull:!1}),a("design:type",String)],r.prototype,"module",void 0),r=n([(0,i.Table)({tableName:"settings",modelName:"Settings",paranoid:!0,createdAt:!1})],r),t.Settings=r},2961:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StockAdjustment=void 0;const i=o(4464),r=o(6612),l=o(2083);let d=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],d.prototype,"id",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE,validate:{isDate:!0}}),a("design:type",String)],d.prototype,"date",void 0),n([(0,i.ForeignKey)((()=>r.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"product",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0,notNull:!0}}),a("design:type",Number)],d.prototype,"quantity_counted",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],d.prototype,"quantity_expected",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0,notNull:!0}}),a("design:type",Number)],d.prototype,"current_price",void 0),n([(0,i.ForeignKey)((()=>l.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"created_by",void 0),n([(0,i.Column)({allowNull:!0}),a("design:type",String)],d.prototype,"code",void 0),n([i.CreatedAt,a("design:type",String)],d.prototype,"created_on",void 0),n([i.Column,a("design:type",String)],d.prototype,"category",void 0),n([i.Column,a("design:type",String)],d.prototype,"size",void 0),n([(0,i.Column)({type:i.DataType.DATE,validate:{isDate:!0}}),a("design:type",String)],d.prototype,"expiry",void 0),n([i.Column,a("design:type",String)],d.prototype,"comments",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],d.prototype,"quantity_expired",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],d.prototype,"quantity_damaged",void 0),n([i.Column,a("design:type",String)],d.prototype,"unit",void 0),d=n([(0,i.Table)({tableName:"stock_adjustment",modelName:"StockAdjustment",paranoid:!0})],d),t.StockAdjustment=d},2775:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StockAdjustmentPending=void 0;const i=o(4464),r=o(6612),l=o(2083);let d=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],d.prototype,"id",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE,validate:{isDate:!0}}),a("design:type",String)],d.prototype,"date",void 0),n([(0,i.ForeignKey)((()=>r.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"product",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0,notNull:!0}}),a("design:type",Number)],d.prototype,"quantity_counted",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0}}),a("design:type",Number)],d.prototype,"quantity_expected",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0,notNull:!0}}),a("design:type",Number)],d.prototype,"current_price",void 0),n([(0,i.ForeignKey)((()=>l.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"created_by",void 0),n([i.Column,a("design:type",String)],d.prototype,"code",void 0),n([i.CreatedAt,a("design:type",String)],d.prototype,"created_on",void 0),n([i.Column,a("design:type",String)],d.prototype,"category",void 0),n([i.Column,a("design:type",String)],d.prototype,"size",void 0),n([(0,i.Column)({type:i.DataType.DATE,validate:{isDate:!0}}),a("design:type",String)],d.prototype,"expiry",void 0),n([i.Column,a("design:type",String)],d.prototype,"comments",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0,notNull:!0}}),a("design:type",Number)],d.prototype,"quantity_expired",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0,validate:{isNumeric:!0,notNull:!0}}),a("design:type",Number)],d.prototype,"quantity_damaged",void 0),n([i.Column,a("design:type",String)],d.prototype,"shelf",void 0),n([i.Column,a("design:type",String)],d.prototype,"unit",void 0),d=n([(0,i.Table)({tableName:"stock_adjustment_pending",modelName:"StockAdjustmentPending",paranoid:!1})],d),t.StockAdjustmentPending=d},6324:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StockAdjustmentSessions=void 0;const i=o(4464),r=o(2083);let l=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],l.prototype,"id",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE,allowNull:!1,validate:{isDate:!0}}),a("design:type",String)],l.prototype,"date",void 0),n([i.Index,(0,i.Column)({unique:!0}),a("design:type",String)],l.prototype,"code",void 0),n([i.CreatedAt,a("design:type",String)],l.prototype,"created_on",void 0),n([(0,i.ForeignKey)((()=>r.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],l.prototype,"created_by",void 0),l=n([(0,i.Table)({tableName:"stock_adjustment_sessions",modelName:"StockAdjustmentSessions",paranoid:!0})],l),t.StockAdjustmentSessions=l},7527:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StockValues=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE,unique:!0,validate:{isDate:!0}}),a("design:type",String)],r.prototype,"date",void 0),n([(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],r.prototype,"last_modified",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),a("design:type",Number)],r.prototype,"selling_value",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),a("design:type",Number)],r.prototype,"cost_value",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),r=n([(0,i.Table)({tableName:"stock_values",modelName:"StockValues",paranoid:!0})],r),t.StockValues=r},3591:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TransferDetails=void 0;const i=o(4464),r=o(6612),l=o(3417),d=o(2083);let s=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],s.prototype,"id",void 0),n([(0,i.ForeignKey)((()=>r.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],s.prototype,"product",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],s.prototype,"quantity",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],s.prototype,"cost_price",void 0),n([i.Column,a("design:type",String)],s.prototype,"unit",void 0),n([i.CreatedAt,a("design:type",String)],s.prototype,"created_on",void 0),n([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],s.prototype,"created_by",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],s.prototype,"markup",void 0),n([i.Index,(0,i.ForeignKey)((()=>l.Transfers)),i.Column,a("design:type",String)],s.prototype,"code",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],s.prototype,"date",void 0),n([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),a("design:type",Number)],s.prototype,"price",void 0),n([(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],s.prototype,"expiry",void 0),s=n([(0,i.Table)({tableName:"transfer_details",modelName:"TransferDetails",paranoid:!0})],s),t.TransferDetails=s},3417:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transfers=void 0;const i=o(4464),r=o(5672),l=o(2083);let d=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],d.prototype,"id",void 0),n([(0,i.ForeignKey)((()=>r.Branches)),(0,i.Column)({type:i.DataType.INTEGER}),a("design:type",Number)],d.prototype,"receiver",void 0),n([i.Index,(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],d.prototype,"date",void 0),n([i.Index,i.Column,a("design:type",String)],d.prototype,"code",void 0),n([i.Column,a("design:type",String)],d.prototype,"status",void 0),n([i.CreatedAt,a("design:type",String)],d.prototype,"created_on",void 0),n([(0,i.ForeignKey)((()=>l.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],d.prototype,"created_by",void 0),d=n([(0,i.Table)({tableName:"transfers",modelName:"Transfers",paranoid:!0})],d),t.Transfers=d},4437:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.UserSessions=void 0;const i=o(4464),r=o(2083);let l=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],l.prototype,"id",void 0),n([(0,i.ForeignKey)((()=>r.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),a("design:type",Number)],l.prototype,"user_id",void 0),n([i.Index,i.Column,a("design:type",String)],l.prototype,"token",void 0),n([i.CreatedAt,a("design:type",String)],l.prototype,"created_on",void 0),n([(0,i.Column)({type:i.DataType.DATE}),a("design:type",String)],l.prototype,"expires",void 0),l=n([(0,i.Table)({tableName:"user_sessions",modelName:"UserSessions",paranoid:!0})],l),t.UserSessions=l},2083:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Users=void 0;const i=o(4464),r=o(4284);let l=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],l.prototype,"id",void 0),n([(0,i.ForeignKey)((()=>r.Roles)),(0,i.Column)({type:i.DataType.INTEGER}),a("design:type",Number)],l.prototype,"role_id",void 0),n([i.Index,(0,i.Column)({allowNull:!1,type:i.DataType.STRING,unique:!0}),a("design:type",String)],l.prototype,"email",void 0),n([i.Index,(0,i.Column)({allowNull:!1,type:i.DataType.STRING,unique:!0}),a("design:type",String)],l.prototype,"username",void 0),n([i.Index,(0,i.Column)({allowNull:!1,type:i.DataType.TEXT}),a("design:type",String)],l.prototype,"password_hash",void 0),n([(0,i.Column)({allowNull:!0,type:i.DataType.DATE}),a("design:type",String)],l.prototype,"last_login",void 0),n([(0,i.Column)({type:i.DataType.TEXT}),a("design:type",String)],l.prototype,"last_ip",void 0),n([i.CreatedAt,a("design:type",String)],l.prototype,"created_on",void 0),n([i.Column,a("design:type",String)],l.prototype,"display_name",void 0),n([i.Index,(0,i.Column)({type:i.DataType.INTEGER,defaultValue:1,allowNull:!1}),a("design:type",Number)],l.prototype,"active",void 0),n([i.Column,a("design:type",String)],l.prototype,"last_seen",void 0),n([i.Index,(0,i.Column)({allowNull:!1,type:i.DataType.TEXT,unique:!0}),a("design:type",String)],l.prototype,"phone",void 0),n([(0,i.BelongsTo)((()=>r.Roles)),a("design:type",r.Roles)],l.prototype,"userRole",void 0),l=n([(0,i.Table)({tableName:"users",modelName:"Users",paranoid:!0})],l),t.Users=l},887:function(e,t,o){var n=this&&this.__decorate||function(e,t,o,n){var a,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(a=e[l])&&(r=(i<3?a(r):i>3?a(t,o,r):a(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Vendors=void 0;const i=o(4464);let r=class extends i.Model{};n([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER,autoIncrement:!0}),a("design:type",Number)],r.prototype,"id",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"name",void 0),n([i.Column,a("design:type",String)],r.prototype,"location",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"phone",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"code",void 0),n([i.Index,i.Column,a("design:type",String)],r.prototype,"email",void 0),n([i.Column,a("design:type",String)],r.prototype,"notes",void 0),n([i.CreatedAt,a("design:type",String)],r.prototype,"created_on",void 0),n([i.Column,a("design:type",String)],r.prototype,"legacy_id",void 0),r=n([(0,i.Table)({tableName:"vendors",modelName:"Vendors",paranoid:!0})],r),t.Vendors=r},8728:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.models=void 0;const n=o(3426),a=o(5672),i=o(4976),r=o(7501),l=o(7917),d=o(8431),s=o(314),u=o(993),c=o(208),p=o(5559),y=o(4155),m=o(7900),f=o(8801),_=o(688),N=o(6612),g=o(5338),v=o(3979),S=o(7901),E=o(3082),R=o(8899),T=o(4284),I=o(128),b=o(9591),h=o(7133),D=o(1530),w=o(2961),O=o(2775),C=o(6324),P=o(7527),x=o(3591),M=o(3417),A=o(2083),G=o(4437),V=o(887);t.models=[n.Activities,a.Branches,i.CustomerDiagnostics,r.Customers,l.DailyRecords,d.DbBackups,s.DbSync,u.DiagnosticTests,c.IncomingPayments,p.InsuranceProviders,y.OnlineBackups,m.OutgoingPayments,f.Permissions,_.ProductBatches,N.Products,g.PurchaseDetails,v.Purchases,S.ReceivedTransferDetails,E.ReceivedTransfers,R.Refills,I.RolePermissions,T.Roles,b.Sales,h.SalesDetails,D.Settings,w.StockAdjustment,O.StockAdjustmentPending,C.StockAdjustmentSessions,P.StockValues,x.TransferDetails,M.Transfers,A.Users,G.UserSessions,V.Vendors]},483:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidInt=t.isAdminPasswordSet=t.isCompanySet=t.app=void 0;const i=a(o(6860)),r=a(o(5142)),l=o(3553),d=a(o(6077)),s=o(5251),u=o(5486),c=o(1530),p=o(5276),y=o(1310);function m(e){return null!=e&&Number.isInteger(e)}new p.ServerEvents,r.default.config(),t.app=(0,i.default)(),t.isCompanySet=function(){return n(this,void 0,void 0,(function*(){const e=yield c.Settings.findOne({where:{name:"company_id"}});return null!=e&&m(e.value)}))},t.isAdminPasswordSet=function(){return n(this,void 0,void 0,(function*(){const e=yield c.Settings.findOne({where:{name:"admin_password"}});return null!=e&&e.value.trim().length>0}))},t.isValidInt=m;const f=a(o(3064)),_=a(o(4987)),N=a(o(7217)),g=a(o(3654)),v=a(o(4046)),S=a(o(5233)),E=a(o(8476)),R=a(o(1222));let T;t.app.use("/api_admin",f.default),t.app.use("/api_staff",E.default),t.app.use("/api_customer",_.default),t.app.use("/api_product",N.default),t.app.use("/api_vendor",R.default),t.app.use("/api_purchase",g.default),t.app.use("/api_sale",v.default),t.app.use("/api_transfer",S.default),t.app.use(((e,t,o)=>n(void 0,void 0,void 0,(function*(){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept, Authorization, Token, Usertype, Userid, Type"),"OPTIONS"===e.method?(t.header("Access-Control-Allow-Methods","PUT, POST, PATCH, DELETE, GET"),t.status(200).json({})):o()})))),n(void 0,void 0,void 0,(function*(){try{T=t.app.listen(l.constants.port,(()=>{s.logger.info("server started successfully on "+l.constants.port);const e=`http://${d.default.address()}:${l.constants.port}`;process.send({message:e,event:y.SERVER_URL_UPDATED}),(0,u.runMigrations)();try{process.send({message:y.SERVER_RUNNING,event:y.SERVER_STATE_CHANGED}),s.logger.info("process.send defined")}catch(e){s.logger.error({message:"process.send not defined."})}}))}catch(e){process.send({message:`Server encountered an error: ${e}`,event:y.SERVER_MESSAGE_RECEIVED}),s.logger.error({message:e})}}))},6:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function r(e){try{d(n.next(e))}catch(e){i(e)}}function l(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,l)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.change_staff_password_function=t.get_role_function=t.delete_role_function=t.delete_role_permission_function=t.add_role_permission_function=t.get_role_excluded_permissions_function=t.get_role_permissions_function=t.get_roles_function=t.add_role_function=t.update_user_function=t.activate_user_function=t.get_user_function=t.delete_user_function=t.save_user_function=t.get_users_function=t.get_user_activities_function=t.get_activities_function=t.get_all_activities_function=t.delete_insurer_function=t.add_insurer_function=t.get_insurers_function=t.save_branch_function=t.getSettings=t.get_logo_function=t.get_branches_function=t.login_function=void 0;const i=o(3553),r=a(o(1017)),l=o(2083),d=o(4284),s=o(1530),u=o(3426),c=o(5672),p=o(4437),y=o(5251),m=o(5559),f=o(496),_=a(o(8432)),N=o(8801),g=o(128),v=o(8153);t.login_function=function(e){return n(this,void 0,void 0,(function*(){let t=e.username,o=e.password;try{let e=yield l.Users.findOne({where:{username:t},include:[d.Roles]}),n=!1;if(e&&(n=_.default.compareSync(o,e.password_hash)),!e||!n)throw new Error(v.errorMessages.USER_NOT_FOUND);const a=new Date;let i=_.default.hashSync(t+a,10),r=a.getDate()+3,s={user_id:e.id,token:`${i}`,expires:`${r}`};return p.UserSessions.create(s),e.token=i,e.role=e.role_id,e.type="staff",u.Activities.create({activity:` ${e.display_name} ${v.infoMessages.LOGGED_IN}`,user_id:e.id,module:"System"}),e}catch(e){throw e instanceof Error?(y.logger.error({message:e}),new Error(e.message)):new Error(e)}}))},t.get_branches_function=function(){return n(this,void 0,void 0,(function*(){try{return yield c.Branches.findAll()}catch(e){throw y.logger.error({message:e}),new Error(v.errorMessages.ERROR_GETTING_BRANCHES)}}))},t.get_logo_function=function(){return n(this,void 0,void 0,(function*(){try{const e=o(7147);let t=yield s.Settings.findOne({where:{name:"logo"}}),n="jpg",a="";return null!=t&&(n=t.value.split(".").pop(),a=`data:image/${n};base64,`+e.readFileSync(r.default.join(i.constants.settings_location,t.value),"base64")),a}catch(e){throw y.logger.error({message:e}),new Error(v.errorMessages.ERROR_GETTING_LOGO)}}))},t.getSettings=function(e){return n(this,void 0,void 0,(function*(){try{return yield s.Settings.findAll({where:e&&e.settings?{name:{[f.Op.in]:e.settings}}:{}})}catch(e){throw y.logger.error({message:e}),new Error(v.errorMessages.ERROR_GETTING_SETTINGS)}}))},t.save_branch_function=function(e){return n(this,void 0,void 0,(function*(){try{let t={name:`'${e.name}'`,phone:`'${e.phone}'`},o=yield c.Branches.create(t);return u.Activities.create({activity:v.infoMessages.CREATED_NEW_BRANCH,user_id:e.user_id,module:v.moduleNames.SYSTEM}),o}catch(e){throw y.logger.error({message:e}),new Error(v.errorMessages.ERROR_CREATING_BRANCH)}}))},t.get_insurers_function=function(){return n(this,void 0,void 0,(function*(){try{return yield m.InsuranceProviders.findAll()}catch(e){throw y.logger.error({message:e}),new Error(v.errorMessages.ERROR_GETTING_INSURERS)}}))},t.add_insurer_function=function(e){return n(this,void 0,void 0,(function*(){try{let t={name:`'${e.name}'`},o=yield m.InsuranceProviders.create(t);return u.Activities.create({activity:"created a new branch",user_id:e.user_id,module:"System"}),o}catch(e){throw y.logger.error({message:e}),new Error("Error creating insurer")}}))},t.delete_insurer_function=function(e){return n(this,void 0,void 0,(function*(){const t=e.id.split(",");try{return yield m.InsuranceProviders.destroy({where:{[f.Op.or]:[{id:{[f.Op.in]:t}},{name:{[f.Op.in]:t}}]}}),!0}catch(e){throw y.logger.error({message:e}),new Error("Error deleting insurer")}}))},t.get_all_activities_function=function(e){return n(this,void 0,void 0,(function*(){let t=null==e.offset?0:e.offset,o=null==e.limit?100:e.limit,n=null==e.start_date?null:e.start_date,a=null==e.end_date?null:e.end_date;try{let e;return e=null==n?yield u.Activities.findAll({limit:o,offset:t}):yield u.Activities.findAll({where:{created_on:{[f.Op.and]:{[f.Op.gte]:`${n} 00:00:00`,[f.Op.lte]:`${a} 23:59:59`}}}}),e}catch(e){throw y.logger.error({message:e}),new Error("Error getting activities")}}))},t.get_activities_function=function(e){return n(this,void 0,void 0,(function*(){let t=e.r,o=null==e.offset?0:parseInt(e.offset),n=null==e.limit?null:parseInt(e.limit);try{return yield u.Activities.findAll({where:{object_id:t},limit:n,offset:o,include:{model:l.Users,as:"user"}})}catch(e){throw y.logger.error({message:e}),new Error("Error getting Activities")}}))},t.get_user_activities_function=function(e){return n(this,void 0,void 0,(function*(){let t=null==e.offset?0:parseInt(e.offset),o=null==e.limit?100:parseInt(e.limit),n=null==e.start_date?null:e.start_date,a=null==e.end_date?null:e.end_date;try{let i={user_id:e.id};return null!=n&&(i.created_on={[f.Op.and]:[`${n} 00:00:00`,`${a} 23:59:59`]}),yield u.Activities.findAll({where:i,limit:o,offset:t})}catch(e){throw y.logger.error({message:e}),new Error("Error getting Activities")}}))},t.get_users_function=function(e){return n(this,void 0,void 0,(function*(){try{let t=null==e.offset?0:parseInt(e.offset),o=null==e.limit?100:parseInt(e.limit);return yield l.Users.findAll({limit:o,offset:t,include:{model:d.Roles}})}catch(e){throw y.logger.error({message:e}),new Error("Error getting users")}}))},t.save_user_function=function(e){return n(this,void 0,void 0,(function*(){try{let t=l.Users.build(e),o=e.password;if(null!=o&&"undefined"!=o){let e=_.default.hashSync(o,10);t.password_hash=`${e}`}else delete t.password_hash;return yield t.save(),u.Activities.create({activity:`modified a new user: ${t.display_name}`,user_id:e.user_id,module:"System"}),t}catch(e){throw y.logger.error({message:e}),new Error("Error adding a user")}}))},t.delete_user_function=function(e){return n(this,void 0,void 0,(function*(){let t=e.id;try{let o=yield l.Users.findOne({where:{id:t}});return yield o.destroy(),u.Activities.create({activity:`deleted user ${JSON.stringify(o)}`,user_id:`${e.user_id}`,object_id:o.id,module:"users"}),!0}catch(e){throw y.logger.error({message:e}),new Error(e)}}))},t.get_user_function=function(e){return n(this,void 0,void 0,(function*(){try{return yield l.Users.findOne({where:{id:e.id}})}catch(e){throw y.logger.error({message:e}),new Error(e)}}))},t.activate_user_function=function(e){return n(this,void 0,void 0,(function*(){try{return yield l.Users.update({active:e.active},{where:{id:e.id}}),u.Activities.create({activity:`activated a user: ${e.display_name}`,user_id:e.user_id,module:"System"}),!0}catch(e){throw y.logger.error({message:e}),new Error(`Error activating user: error: ${e}`)}}))},t.update_user_function=function(e){return n(this,void 0,void 0,(function*(){try{let t=yield l.Users.findByPk(e.id);return t.set(e),yield t.save(),u.Activities.create({activity:`updated a user: ${t.display_name}: ${JSON.stringify(e)} `,user_id:e.user_id,module:"System"}),!0}catch(e){throw y.logger.error({message:e}),new Error(`Error updating user: error: ${e}`)}}))},t.add_role_function=function(e){return n(this,void 0,void 0,(function*(){try{let t=yield d.Roles.create(e);return u.Activities.create({activity:`created a new role ${e.role_name}`,user_id:e.user_id,module:"System"}),t}catch(e){throw y.logger.error({message:e}),new Error(`Error getting user: ${e}`)}}))},t.get_roles_function=function(e){return n(this,void 0,void 0,(function*(){try{let t=null==e.offset?0:parseInt(e.offset),o=null==e.limit?100:parseInt(e.limit);return yield d.Roles.findAll({limit:o,offset:t})}catch(e){throw y.logger.error({message:e}),new Error(`Error getting roles: ${e}`)}}))},t.get_role_permissions_function=function(e){return n(this,void 0,void 0,(function*(){try{return yield N.Permissions.findAll({where:{permission_id:{[f.Op.in]:f.Sequelize.literal(`(select permission_id from ${g.RolePermissions.tableName} \n                    where role_id = ${e.id})`)}}})}catch(t){throw y.logger.error({message:t}),new Error(`Error getting role permissions for role_id: ${e.id}: ${t}`)}}))},t.get_role_excluded_permissions_function=function(e){return n(this,void 0,void 0,(function*(){try{return yield N.Permissions.findAll({where:{permission_id:{[f.Op.notIn]:f.Sequelize.literal(`(select permission_id from ${g.RolePermissions.tableName} \n                    where role_id = ${e.id})`)}},logging:console.log})}catch(t){throw y.logger.error({message:t}),new Error(`Unable to get excluded permissions for role id: ${e.id}: ${t}`)}}))},t.add_role_permission_function=function(e){return n(this,void 0,void 0,(function*(){try{let t=yield g.RolePermissions.create(e);return u.Activities.create({activity:`added a permission ${e.permission_name} to role: ${e.role_name}`,user_id:e.user_id,module:"System"}),t}catch(t){throw y.logger.error({message:t}),new Error(`Unable to add a permission ${e.permission_name} \n        to role: ${e.role_name}: : ${t}`)}}))},t.delete_role_permission_function=function(e){return n(this,void 0,void 0,(function*(){try{return yield g.RolePermissions.destroy({where:{role_id:e.role_id,permission_id:e.permission_id}}),u.Activities.create({activity:`removed a permission ${e.permission_name} from role ${e.role_name}`,user_id:`${e.user_id}`,module:"users"}),!0}catch(e){throw y.logger.error({message:e}),new Error(`Error removing permission from role: error: ${e}`)}}))},t.delete_role_function=function(e){return n(this,void 0,void 0,(function*(){try{return yield d.Roles.destroy({where:{role_id:e.id}}),u.Activities.create({activity:`deleted a role ${e.role_name} `,user_id:`${e.user_id}`,module:"users"}),!0}catch(e){throw y.logger.error({message:e}),new Error("Error deleting a role. Error: "+e)}}))},t.get_role_function=function(e){return n(this,void 0,void 0,(function*(){try{return yield d.Roles.findByPk(e.id,{include:[g.RolePermissions]})}catch(e){throw y.logger.error({message:e}),new Error("Error getting a role. Error: "+e)}}))},t.change_staff_password_function=function(e){return n(this,void 0,void 0,(function*(){e.old_password;try{let t=yield l.Users.findOne({where:{username:e.username}}),o=!1;if(null!=t&&(o=_.default.compareSync(e.old_password,t.password_hash)),null==t||!o)throw new Error(v.errorMessages.WRONG_COMBINATION);let n=_.default.hashSync(e.password,10);return t.password_hash=`${n}`,yield t.save(),u.Activities.create({activity:` ${t.display_name} changed their password`,user_id:t.id,module:"System"}),t}catch(e){throw y.logger.error({message:e}),new Error(e)}}))}},5276:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServerEvents=void 0;const n=o(2781);class a extends n.EventEmitter{constructor(){super()}}t.ServerEvents=a},3553:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.constants=void 0;const a=process.env.PORT||5100,i=n(o(1017)),r=n(o(2037)),l="druglanev1.db",d=i.default.join(process.env.APPDATA,"druglaneServerV1");t.constants={appLongName:"Druglane Pharmacy Management System",appname:"Druglane",server_url:"https://druglanepms.calgadsoftwares.com",settings_location:d,customer_image_url:"assets/customer_images/",customer_image_thumbnail_url:"assets/customer_images/thumbnails/",product_image_url:"assets/product_images/",product_image_thumbnail_url:"assets/product_images/thumbnails/",port:a,firebase_user_collection:"users",firebase_requests_collection:"requests",firebase_responses_collection:"responses",settings_path:i.default.join(d,"system-settings.json"),db_path:i.default.join(d,l),backup_folder:i.default.join(r.default.homedir(),"DruglaneBackups"),settings_filename:"system-settings.json",db_filename:l,internal_backups_path:i.default.join(d,"backups"),backup_temp_location:i.default.join(d,"backupRestoreTemp"),company_id:"",default_functional_groups:["Adult Analgesics Tablets","Adult Analgesics Suppositories","Paediatric Analgesics Syrups","Paediatric Analgesics Suppositories","Adult Dry Cough Syrups","Adult Expectorant Syups","Adult Cough & Cold Syrups","Adult Dry Cough Tablets","Adult Expectorant Tablets","Adult Cough & Cold Tablets","Baby Cough Syrups (0-1 years)","Child Cough Syrups (up to 6 years)","Child Cough Syrups (up to 12 years)","Adult Catarrh Syrups","Adult Catarrh Tablets","Paediatric Catarrh Syrups","Adult Blood Tonics","Adult Multivitamins","Paediatric Blood Tonics","Paediatric Multivitamins"],default_config:{port:a,host:"localhost",dbversion:0,admin_set:"no",company_set:"no",auto_backup_time:19,last_sync:0,env:"production"},PERMISSION_VIEW_USER_ACTIVITIES:"View Sales History",PERMISSION_VIEW_PURCHASE_HISTORY:"View Purchase History",PERMISSION_VIEW_INVENTORY:"View Inventory",PERMISSION_VIEW_END_OF_DAY_REPORT:"View End Of Day Report",PERMISSION_VIEW_ACCOUNTS:"View Accounts",PERMISSION_TRANSFER_ITEMS:"Transfer Items",PERMISSION_RETURN_SOLD_ITEMS:"Return Sold Items",PERMISSION_RECEIVE_TRANSFERS:"Receive Transfers",PERMISSION_RECEIVE_PURCHASES:"Receive Purchases",PERMISSION_MANAGE_VENDORS:"Manage Vendors",PERMISSION_MANAGE_STAFF:"Manage Staff",PERMISSION_MANAGE_SETTINGS:"Manage Settings",PERMISSION_MANAGE_INVENTORY:"Manage Inventory",PERMISSION_MANAGE_CUSTOMERS:"Manage Customers",PERMISSION_MANAGE_ACCOUNTS:"Manage Accounts",PERMISSION_GIVE_DISCOUNT:"Give Discount",PERMISSION_EDIT_SALES:"Edit Sales",PERMISSION_DELETE_TRANSFERS:"Delete Transfers",PERMISSION_DELETE_SALES_RECORDS:"Sales Records",PERMISSION_DELETE_PURCHASES:"Delete Purchases",PERMISSION_CREATE_SALES:"Create Sales",PERMISSION_ADJUST_STOCK:"Adjust Stock",PERMISSION_VIEW_TRANSFER_HISTORY:"View Transfer History",PERMISSION_VIEW_SALES_REPORTS:"View Sales Reports",PERMISSION_VIEW_SALES_HISTORY:"View Sales History",STRING_DB_VERSION:"dbversion"}},1310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_ACTIVATION=t.ACTIVATION_RESULT=t.RESTART_SERVER=t.SERVER_ERROR=t.SERVER_STARTING=t.SERVER_STOPPED=t.SERVER_RUNNING=t.SERVER_DISCONNECTED=t.PREFERENCE_SET=t.SET_PREFERENCE=t.PREFERENCE_RECEIVED=t.GET_PREFERENCE=t.SERVER_URL_RECEIVED=t.GET_SERVER_URL=t.SERVER_URL_UPDATED=t.COMPANY_NAME_RECEIVED=t.GET_COMPANY_NAME=t.GET_APP_DETAILS=t.GET_SERVER_STATE=t.SERVER_MESSAGE_RECEIVED=t.SERVER_STATE_CHANGED=void 0,t.SERVER_STATE_CHANGED="server_state_changed",t.SERVER_MESSAGE_RECEIVED="server_message_received",t.GET_SERVER_STATE="getServerState",t.GET_APP_DETAILS="getAppDetails",t.GET_COMPANY_NAME="getCompanyName",t.COMPANY_NAME_RECEIVED="companyNameReceived",t.SERVER_URL_UPDATED="server_url_updated",t.GET_SERVER_URL="get_server_url",t.SERVER_URL_RECEIVED="server_url_received",t.GET_PREFERENCE="getPreference",t.PREFERENCE_RECEIVED="preferenceReceived",t.SET_PREFERENCE="setPreference",t.PREFERENCE_SET="referenceSet",t.SERVER_DISCONNECTED="Server Disconnected",t.SERVER_RUNNING="Server Running",t.SERVER_STOPPED="Server Stopped",t.SERVER_STARTING="Server Starting",t.SERVER_ERROR="Server Error",t.RESTART_SERVER="restart_server",t.ACTIVATION_RESULT="activation_result",t.CALL_ACTIVATION="call_validation"},8432:e=>{e.exports=require("bcryptjs")},5142:e=>{e.exports=require("dotenv")},6860:e=>{e.exports=require("express")},6077:e=>{e.exports=require("ip")},496:e=>{e.exports=require("sequelize")},4464:e=>{e.exports=require("sequelize-typescript")},7058:e=>{e.exports=require("ts-node/register")},714:e=>{e.exports=require("umzug")},7773:e=>{e.exports=require("winston")},7147:e=>{e.exports=require("fs")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")}},t={};!function o(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}(483)})();