(()=>{"use strict";var e={8505:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;const r=o(n(7147)),i=n(3553);t.Store=class{constructor(){this.path=i.constants.settings_path,this.data=function(){try{return r.default.existsSync(i.constants.settings_path)?JSON.parse(r.default.readFileSync(i.constants.settings_path,"utf-8")):i.constants.default_config}catch(e){return console.log(e),i.constants.default_config}}()}get(e){return this.data[e]}set(e,t){this.data[e]=t,r.default.writeFileSync(this.path,JSON.stringify(this.data))}}},9156:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;const o=n(5251),r=n(3553);t.config={development:{dialect:"sqlite",storage:r.constants.db_path,logging:e=>o.logger.debug(e)},test:{dialect:"sqlite",storage:"test_db.db",logging:!1},production:{dialect:"sqlite",storage:r.constants.db_path,logging:e=>o.logger.debug(e)}}},5251:function(e,t,n){var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return r(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;const d=n(3553),s=i(n(7773)),l=a(n(1017)),u=n(2547),c=s.format.combine(s.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),s.format.align(),s.format.printf((e=>`${e.level}: ${[e.timestamp]}: ${e.message}`))),p=s.createLogger({transports:[new s.transports.File({filename:l.default.resolve(d.constants.settings_location,"logs",`${(0,u.getToday)()} debug.log`),level:"debug",format:c}),new s.transports.File({filename:l.default.resolve(d.constants.settings_location,"logs",`${(0,u.getToday)()} error.log`),level:"error",format:c})]});t.logger=p},2326:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.manualMigrations=void 0,t.manualMigrations=[{query:"CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );",version:1},{query:"CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );",version:2},{query:"CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );",version:3},{query:"\n        INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');",version:4},{query:"CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );",version:5},{query:"CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);\n      ",version:6},{query:"CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);",version:7},{query:"CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);\n      ",version:8},{query:"CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );",version:9},{query:"CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);\n      ",version:10},{query:"CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );",version:11},{query:"CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);\n      ",version:12},{query:"CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );",version:13},{query:"\n      CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);\n      ",version:14},{query:"CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );",version:15},{query:"\n      CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);\n      ",version:16},{query:"CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );",version:17},{query:"\n      CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);\n      ",version:18},{query:"CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );",version:19},{query:"\n      CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);\n      ",version:20},{query:"CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );",version:21},{query:"CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );",version:22},{query:"CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );",version:23},{query:"\n      CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);\n      ",version:24},{query:"CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );",version:25},{query:"\n      CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);\n      ",version:26},{query:"CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );",version:27},{query:"\n      CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);\n      ",version:28},{query:"CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );",version:29},{query:"\n      CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n      ",version:30},{query:"CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );",version:31},{query:"\n      \n      CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);\n      ",version:32},{query:"CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );",version:33},{query:"\n      \n      CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);\n\n      ",version:34},{query:"CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );",version:35},{query:"\n      \n      CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);\n\n      ",version:36},{query:"CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          ); ",version:37},{query:"\n      \n      CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);\n\n      ",version:38},{query:"CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );",version:39},{query:"\n      \n      CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);\n\n      ",version:40},{query:"INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');",version:41},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);",version:42},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);",version:43},{query:"DROP INDEX IF EXISTS purchase_details_index_2;",version:44},{query:"DROP INDEX IF EXISTS received_transfer_details_index_2;",version:45},{query:"DROP INDEX IF EXISTS transferDETAILS_index_2;",version:46},{query:"DROP INDEX IF EXISTS received_transfer_details_index_2;",version:47},{query:"\n      \n      CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);\n\n      ",version:48},{query:"INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');",version:49},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);",version:50},{query:"DROP INDEX IF EXISTS product_name_unique;",version:51},{query:"\n      \n      CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);\n     \n      ",version:52},{query:"\n      \n    PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;\n     \n      ",version:53},{query:"INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');",version:54},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);",version:55},{query:"\n      \n    PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;\n     \n      ",version:56},{query:"\n    PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;\n          ",version:57},{query:"",version:58},{query:"",version:59},{query:"\n    CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );\n    \n          ",version:60},{query:"\n      CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);\n      ",version:61},{query:"\n\n\n    CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');\n          \n         \n    \n          ",version:62},{query:"\n    PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;\n          ",version:63},{query:"",version:64},{query:"INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');",version:65},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);",version:66},{query:"\n    PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;\n          ",version:67},{query:"CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);\n      ",version:68},{query:" \n\n \n    CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      \n          \n    \n          ",version:69},{query:"\n      \n      CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);\n      ",version:70},{query:"\n    PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;\n          ",version:71},{query:"\n      CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n      ",version:72},{query:"\n    PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;\n          ",version:73},{query:"CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);\n      ",version:74},{query:"CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );",version:75},{query:"\n        \n    \n\n    CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;\n          \n          \n      ",version:76},{query:" \n   \n    PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;\n          \n    \n          ",version:77},{query:"",version:78},{query:"CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );",version:79},{query:" \n\n    PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;\n          \n    \n          ",version:80},{query:" \n\n    PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;\n          \n    \n          ",version:81},{query:"\n      \n    PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;\n     \n      ",version:82},{query:"",version:83},{query:"\n     INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');\n    ",version:84},{query:"CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n          ",version:85},{query:"CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );",version:86},{query:"CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );",version:87},{query:"CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );",version:88},{query:"CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );",version:89},{query:"\n        \n\n    CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          ",version:90},{query:"",version:91},{query:" \n\n    PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;\n          \n    \n          ",version:92},{query:"INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');",version:93},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);",version:94},{query:"INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');",version:95},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);",version:96},{query:"\n    \n    create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );\n    \n    ",version:97},{query:"\n    ",version:98},{query:"CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );",version:99},{query:"INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');",version:100},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);",version:101},{query:"\n     INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');\n    ",version:102},{query:"INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');",version:103},{query:"INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);",version:104}]},5486:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.runMigrations=void 0,n(7058);const r=n(8505),i=n(714),a=n(2326),d=n(3553),s=n(6930),l=new r.Store,u=n(4539),c=n(5251),p=new i.Umzug({migrations:s.migrationsList,context:u.sequelize.getQueryInterface(),storage:new i.SequelizeStorage({sequelize:u.sequelize}),logger:console});t.runMigrations=()=>o(void 0,void 0,void 0,(function*(){try{for(var e=0;e<a.manualMigrations.length;e++){const t=a.manualMigrations[e];t.query.trim().length>1&&(yield u.sequelize.transaction((e=>o(void 0,void 0,void 0,(function*(){yield u.sequelize.query(t.query,{transaction:e})}))))),l.set(d.constants.STRING_DB_VERSION,t.version.toString())}yield p.up()}catch(e){throw c.logger.error(e),new Error("Migration error:"+e)}}))},6930:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.migrationsList=void 0;const i=n(496),a=r(n(8728)),d=n(4539);t.migrationsList=[{name:"20210314155622-addCustomerDob",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("customers",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},name:{type:i.STRING},sex:{type:i.DATE},phone:{type:i.STRING},email:{type:i.INTEGER}}),yield e.addColumn("customers","date_of_birth",{type:i.DATE})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("customers")}))}},{name:"20210314180101-create-product-batches",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("ProductBatches",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},batch_number:{type:i.STRING},expiry:{type:i.DATE},barcode:{type:i.STRING},product:{type:i.INTEGER},purchase_code:{type:i.STRING},createdAt:{allowNull:!0,type:i.DATE},updatedAt:{allowNull:!0,type:i.DATE}})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("ProductBatches")}))}},{name:"20210315154011-addQuantityToProductBatches",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("productbatches","quantity",{type:i.DOUBLE})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("productbatches","quantity")}))}},{name:"20210317181610-addQuantitySoldToproductBatches",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("productbatches","quantity_sold",{type:i.DOUBLE,defaultValue:0})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("productbatches","quantity_sold")}))}},{name:"20210324143037-create-daily-records",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("dailyRecords",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},date:{type:i.DATE},amount:{type:i.DOUBLE},shift:{type:i.STRING},created_by:{type:i.INTEGER},created_on:{defaultValue:i.NOW,allowNull:!0,type:i.DATE}})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("dailyRecords")}))}},{name:"20210324173726-addPaymentMethodsToDailyRecords",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("dailyRecords","cash",{type:i.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","momo",{type:i.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","insurance",{type:i.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","credit",{type:i.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","pos",{type:i.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","cheque",{type:i.DOUBLE,defaultValue:0}),yield e.addColumn("dailyRecords","other",{type:i.DOUBLE,defaultValue:0})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("dailyRecords","cash"),yield e.removeColumn("dailyRecords","momo"),yield e.removeColumn("dailyRecords","insurance"),yield e.removeColumn("dailyRecords","credit"),yield e.removeColumn("dailyRecords","pos"),yield e.removeColumn("dailyRecords","cheque"),yield e.removeColumn("dailyRecords","other")}))}},{name:"20210409084451-createSalesBatches",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("sales_batches",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},date:{type:i.DATE},batch_number:{type:i.STRING},product:{type:i.INTEGER},quantity:{type:i.DOUBLE},code:{type:i.STRING},created_by:{type:i.INTEGER},created_on:{defaultValue:i.NOW,allowNull:!0,type:i.DATE}})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("sales_batches")}))}},{name:"20210409085254-addExpiryToSalesBatches",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("sales_batches","expiry",{type:i.DATE})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("sales_batches","expiry")}))}},{name:"20210409095027-addPreferredVendorToProducts",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("products","preferred_vendor",{type:i.INTEGER})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("products","preferred_vendor")}))}},{name:"20210626115902-createTokensTable",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("tokens",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},name:{type:i.STRING},token:{type:i.STRING},created_on:{defaultValue:i.NOW,allowNull:!0,type:i.DATE}})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("tokens`")}))}},{name:"20210824173831-addOnlineToUsers",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("users","allow_online",{type:i.STRING,defaultValue:"no"})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("users","allow_online")}))}},{name:"20210926105345-updateProductsTable",up({context:e}){return o(this,void 0,void 0,(function*(){}))},down({context:e}){return o(this,void 0,void 0,(function*(){}))}},{name:"20211023131213-insertTaxSetting",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"tax",module:"System",value:"0"}],{})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:"tax"})}))}},{name:"20211023134920-addTaxToSales",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("sales","tax",{type:i.DOUBLE,defaultValue:0})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("sales","tax")}))}},{name:"20211024133528-insertBatchSetting",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"activate_batch_mode",module:"System",value:"no"}],{})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:"activate_batch_mode"})}))}},{name:"20211109143824-addLogoToSettings",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"logo",module:"System",value:""},{name:"receipt_logo",module:"System",value:"no"}])}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:{[i.Op.in]:["logo","receipt_logo"]}})}))}},{name:"20211121152934-productsAddDrugInfo",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("products","is_drug",{type:i.STRING,defaultValue:"yes"}),yield e.addColumn("products","generic_name",{allowNull:!0,type:i.STRING,defaultValue:null}),yield e.addColumn("products","contraindications",{allowNull:!0,type:i.STRING,defaultValue:null}),yield e.addColumn("products","pregnancy",{allowNull:!0,type:i.STRING,defaultValue:null}),yield e.addColumn("products","side_effects",{allowNull:!0,type:i.STRING,defaultValue:null}),yield e.addColumn("products","caution",{allowNull:!0,type:i.STRING,defaultValue:null}),yield e.addColumn("products","indications",{allowNull:!0,type:i.STRING,defaultValue:null})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("products","is_drug"),yield e.removeColumn("products","generic_name"),yield e.removeColumn("products","contraindications"),yield e.removeColumn("products","pregnancy"),yield e.removeColumn("products","side_effects"),yield e.removeColumn("products","caution"),yield e.removeColumn("products","indications")}))}},{name:"20211121154018-addStoresTables",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("stores",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},name:{type:i.STRING},created_on:{defaultValue:i.NOW,allowNull:!0,type:i.DATE}}),yield e.createTable("store_inventory",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},product:{type:i.INTEGER},store:{type:i.INTEGER},max_stock:{type:i.DOUBLE},min_stock:{type:i.DOUBLE},current_stock:{type:i.DOUBLE},expiry:{type:i.DATE},created_on:{defaultValue:i.NOW,allowNull:!0,type:i.DATE}}),yield e.addConstraint("store_inventory",{fields:["product"],type:"foreign key",name:"products_storeInventory_product",references:{table:"products",field:"id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint("store_inventory",{fields:["store"],type:"foreign key",name:"products_storeInventory_store",references:{table:"stores",field:"id"},onDelete:"cascade",onUpdate:"cascade"})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("stores"),yield e.dropTable("store_inventory")}))}},{name:"20211121170321-addRequisitionTables",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("requisitions",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},code:{allowNull:!1,type:i.STRING},sender:{allowNull:!1,type:i.INTEGER},recipient:{allowNull:!1,type:i.INTEGER},created_on:{defaultValue:i.NOW,allowNull:!0,type:i.DATE},created_by:{defaultValue:null,allowNull:!0,type:i.INTEGER},status:{allowNull:!1,defaultValue:"Pending",type:i.STRING}}),yield e.createTable("requisition_details",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},product:{type:i.INTEGER},code:{type:i.STRING},price:{type:i.DOUBLE},cost_price:{type:i.DOUBLE},quantity:{type:i.DOUBLE},expiry:{type:i.DATE},created_on:{defaultValue:i.NOW,allowNull:!0,type:i.DATE},date:{allowNull:!1,type:i.DATE},created_by:{defaultValue:null,allowNull:!0,type:i.INTEGER}}),yield e.addConstraint("requisitions",{fields:["code"],type:"unique",name:"requisitions_code_key"}),yield e.addConstraint("requisitions",{fields:["sender"],type:"foreign key",name:"requisitions_store_sender",references:{table:"stores",field:"id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint("requisitions",{fields:["recipient"],type:"foreign key",name:"requisitions_store_recipient",references:{table:"stores",field:"id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint("requisition_details",{fields:["product"],type:"foreign key",name:"requisition_details_product_key",references:{table:"products",field:"id"},onDelete:"cascade",onUpdate:"cascade"}),yield e.addConstraint("requisition_details",{fields:["code"],type:"foreign key",name:"requisition_details_code_key",references:{table:"requisitions",field:"code"},onDelete:"cascade",onUpdate:"cascade"})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("requisitions"),yield e.dropTable("requisition_details")}))}},{name:"20211125214835-addDescriptionToStores",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("stores","description",{type:i.STRING,allowNull:!0,defaultValue:""})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("stores","description")}))}},{name:"20220105074517-addReceiptSettings",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"tax_title",module:"System",value:"Local Sale Tax"},{name:"show_tax_on_receipt",module:"System",value:"yes"},{name:"receipt_show_credits",module:"System",value:"yes"},{name:"receipt_extra_info",module:"System",value:""},{name:"receipt_footer",module:"System",value:""}])}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:{[i.Op.in]:["tax_title","show_tax_on_receipt","receipt_show_credits","receipt_extra_info","receipt_footer"]}})}))}},{name:"20220223095800-addMarkupToProducts",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("products","markup",{type:i.DOUBLE,defaultValue:1.33})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("products","markup")}))}},{name:"20220311134330-addActiveIngredient",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("products","active_ingredients",{type:i.STRING,defaultValue:null,allowNull:!0}),yield e.addColumn("products","drug_info",{type:i.STRING,defaultValue:null,allowNull:!0})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("products","active_ingredients"),yield e.removeColumn("products","drug_info")}))}},{name:"20220328084933-addExpiryToPurchaseDetails",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("purchase_details","expiry",{type:i.STRING,defaultValue:null,allowNull:!0})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("purchase_details","expiry")}))}},{name:"20220411095651-receiptSettings",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"receipt_show_customer",module:"System",value:"yes"},{name:"receipt_product_data",module:"System",value:""},{name:"receipt_font_size",module:"System",value:"13px"},{name:"receipt_show_borders",module:"System",value:"yes"}])}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:{[i.Op.in]:["receipt_show_customer","receipt_product_data","receipt_font_size","receipt_show_borders"]}})}))}},{name:"20220503070044-updateSalesDetails",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.addColumn("sales_details","expiry",{type:i.STRING,defaultValue:null,allowNull:!0}),yield e.addColumn("sales_details","unit",{type:i.STRING,defaultValue:null,allowNull:!0}),yield e.addColumn("sales_details","label",{type:i.STRING,defaultValue:null,allowNull:!0})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("sales_details","expiry"),yield e.removeColumn("sales_details","unit"),yield e.removeColumn("sales_details","label")}))}},{name:"20220506130046-addSalesPermissions",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkInsert("permissions",[{permission_id:"88",name:"Edit Sales Prices",description:"Allow user to change the price of items during sales"}]),yield e.bulkInsert("role_permissions",[{permission_id:88,role_id:1}])}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkDelete("permissions",{permission_id:"88"}),yield e.bulkDelete("role_permissions",{permission_id:"88"})}))}},{name:"20220524121539-multiplePaymentMethods",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("sales_payment_methods",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},code:{allowNull:!1,type:i.STRING},payment_method:{allowNull:!1,type:i.STRING},created_on:{defaultValue:i.NOW,allowNull:!0,type:i.DATE},date:{defaultValue:null,allowNull:!0,type:i.DATE},amount_paid:{allowNull:!1,type:i.DOUBLE},transaction_id:{allowNull:!0,defaultValue:null,type:i.STRING}}),yield e.addIndex("sales_payment_methods",{fields:["payment_method"]}),yield e.addIndex("sales_payment_methods",{fields:["created_on"]}),yield e.addIndex("sales_payment_methods",{fields:["date"]}),yield e.addIndex("sales_payment_methods",{fields:["amount_paid"]}),yield e.addConstraint("sales_payment_methods",{fields:["code"],type:"foreign key",name:"sales_payment_methods_code_key",references:{table:"sales",field:"code"},onDelete:"cascade",onUpdate:"cascade"})}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("sales_payment_methods")}))}},{name:"20220711162301-addDuplicateTimeoutSetting",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkInsert("settings",[{name:"duplicate_record_timeout",module:"System",value:"10"}])}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.bulkDelete("settings",{name:"duplicate_record_timeout"})}))}},{name:"20221007120257-addReminderTable",up({context:e}){return o(this,void 0,void 0,(function*(){yield e.createTable("reminders",{id:{allowNull:!1,autoIncrement:!0,primaryKey:!0,type:i.INTEGER},type:{type:i.STRING,allowNull:!1},dayOfWeek:{allowNull:!1,type:i.STRING,defaultValue:"Monday"},hourOfDay:{allowNull:!1,defaultValue:"9",type:i.STRING},recipient:{type:i.STRING,allowNull:!1},cc:{type:i.STRING,allowNull:null,defaultValue:null}}),yield e.bulkInsert("reminders",[{type:"upcoming refills",dayOfWeek:"Monday",hourOfDay:"10",recipient:"none",cc:""}])}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.dropTable("reminders")}))}},{name:"20221220113200-addCreatedOnToVariousTables",up({context:e}){return o(this,void 0,void 0,(function*(){const t=["insurance_providers","drug_info","reminders","role_permissions","roles"],n=yield d.sequelize.transaction();try{for(let o=0;o<t.length;o++){const r=t[o];(yield e.describeTable(r)).created_on||(yield e.addColumn(r,"created_on",{defaultValue:i.NOW,allowNull:!0,type:i.DATE},{transaction:n}))}n.commit()}catch(e){throw n.rollback(),new Error(e)}}))},down({context:e}){return o(this,void 0,void 0,(function*(){["insurance_providers","drug_info","reminders","role_permissions","roles"].forEach((t=>o(this,void 0,void 0,(function*(){yield e.removeColumn(t,"created_on")}))))}))}},{name:"20221220114600-addUpdatedAtToVariousTables",up({context:e}){return o(this,void 0,void 0,(function*(){const t=yield d.sequelize.transaction();try{for(let n=0;n<a.default.length;n++){const o=a.default[n];(yield e.describeTable(o.tableName)).updatedAt||(yield e.addColumn(o.tableName,"updatedAt",{defaultValue:i.NOW,allowNull:!0,type:i.DATE},{transaction:t}))}t.commit()}catch(e){throw t.rollback(),new Error(e)}}))},down({context:e}){return o(this,void 0,void 0,(function*(){a.default.forEach((t=>o(this,void 0,void 0,(function*(){yield e.removeColumn(t.tableName,"updatedAt")}))))}))}},{name:"20221220151900-addObjectIdToActivities",up({context:e}){return o(this,void 0,void 0,(function*(){(yield e.describeTable("activities")).object_id||(yield e.addColumn("activities","object_id",{type:i.STRING}))}))},down({context:e}){return o(this,void 0,void 0,(function*(){yield e.removeColumn("activities","object_id")}))}},{name:"20221221082200-addDeletedAtToAllTables",up({context:e}){return o(this,void 0,void 0,(function*(){const t=yield d.sequelize.transaction();try{for(let n=0;n<a.default.length;n++){const o=a.default[n];(yield e.describeTable(o.tableName)).deletedAt||(yield e.addColumn(o.tableName,"deletedAt",{allowNull:!0,type:i.DATE},{transaction:t}))}t.commit()}catch(e){throw t.rollback(),new Error(e)}}))},down({context:e}){return o(this,void 0,void 0,(function*(){a.default.forEach((t=>o(this,void 0,void 0,(function*(){yield e.removeColumn(t.tableName,"deletedAt")}))))}))}}]},4539:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sequelize=void 0;const r=n(4464),i=o(n(8728)),a=n(9156),d=new r.Sequelize(a.config.production);t.sequelize=d,d.addModels(i.default)},3064:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(5251),a=r(n(6860)).default.Router(),d=n(6);a.get("/",((e,t)=>o(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),a.post("/login",((e,t)=>o(void 0,void 0,void 0,(function*(){try{let n=yield(0,d.login_function)(e.body);t.status(201).json(n)}catch(e){t.status(500).json({status:"-1",data:null,message:e})}})))),a.get("/getBranches",((e,t)=>o(void 0,void 0,void 0,(function*(){try{let e=yield(0,d.get_branches_function)();t.status(201).json(e)}catch(e){t.status(500).json({status:"-1",data:null,message:e})}})))),a.get("/getLogo",((e,t)=>o(void 0,void 0,void 0,(function*(){try{let e=yield(0,d.get_logo_function)();t.status(201).json(e)}catch(e){i.logger.error(e),t.status(500).json({status:"-1",data:null,message:e})}})))),a.post("/saveBranch",((e,t)=>o(void 0,void 0,void 0,(function*(){try{let n=yield(0,d.save_branch_function)(e.body);t.json(n)}catch(e){i.logger.error(e),t.status(500).json({status:"-1",data:null,message:e})}})))),a.get("/getInsurers",((e,t)=>o(void 0,void 0,void 0,(function*(){try{let e=yield(0,d.get_insurers_function)();t.json(e)}catch(e){i.logger.error(e),t.status(500).json({status:"-1",data:null,message:e})}})))),a.get("/settings",((e,t)=>o(void 0,void 0,void 0,(function*(){try{let e=yield(0,d.getSettings)();t.json(e)}catch(e){i.logger.error({message:e}),t.status(500).json({status:"-1",data:null,message:e})}})))),t.default=a},4987:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6860)).default.Router();i.get("/",((e,t)=>o(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},7217:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6860)).default.Router();i.get("/",((e,t)=>o(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},3654:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6860)).default.Router();i.get("/",((e,t)=>o(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},4046:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6860)).default.Router();i.get("/",((e,t)=>o(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},5233:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6860)).default.Router();i.get("/",((e,t)=>o(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},8476:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6860)).default.Router();i.get("/",((e,t)=>o(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},1222:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(6860)).default.Router();i.get("/",((e,t)=>o(void 0,void 0,void 0,(function*(){t.status(200).send("welcome!")})))),t.default=i},2547:(e,t)=>{function n(e,t){let n=new Date(t,0,1+7*(e-1));for(;0!==n.getDay();)n.setDate(n.getDate()-1);return n}function o(e,t){let n=new Date(t);return n.setDate(n.getDate()+e),n}function r(e="",t=null){let n=new Date;null!=t&&(n=new Date(t));let o,r,a=n.getDate(),d=n.getMonth()+1,s=n.getFullYear();o=a<10?"0"+a:a.toString(),r=d<10?"0"+d:d.toString();let l="",u="",c="";switch(e){case"timestamp":return l=i(n.getHours()),u=i(n.getMinutes()),c=i(n.getSeconds()),s+"-"+r+"-"+o+" "+l+":"+u+":"+c;case"timestamp_string":return l=i(n.getHours()),u=i(n.getMinutes()),c=i(n.getSeconds()),s+""+r+o+l+u+c;case"month":return r;default:return s+"-"+r+"-"+o}}function i(e){return e.toString().padStart(2,"0")}function a(e){let t="string"==typeof e?parseInt(e):e;return 2==t?28:-1!=[9,4,6,11].indexOf(t)?30:31}function d(){return(new Date).getFullYear()}function s(e,t=""){return r(t,e)}function l(e){const t=e?new Date(e):new Date;Date.now();const n=new Date(t.getFullYear(),0,1);let o=Math.floor((t.getTime()-n.getTime())/864e5);return Math.ceil(o/7)}Object.defineProperty(t,"__esModule",{value:!0}),t.setDates=t.getWeekNumber=t.addTimePeriod=t.subtractTimePeriod=t.formatDate=t.timeBetweenDates=t.compareDates=t.getThisYear=t.getLastDayOfMonth=t.getAge=t.getMonthsNoPad=t.getMonthsObjects=t.getDatesBetween=t.nth=t.getDays=t.getMonths=t.getDayName=t.getMonthName=t.padZero=t.getToday=t.formatDateTime=t.addDaystoDate=t.getFirstDayOfWeek=void 0,t.getFirstDayOfWeek=n,t.addDaystoDate=o,t.formatDateTime=function(e){return new Date(e).toISOString().slice(0,19).replace("T"," ")},t.getToday=r,t.padZero=i,t.getMonthName=function(e){try{let t=["January","February","March","April","May","June","July","August","September","October","November","December"];if(null==t[e-1])throw new Error("Number not found");return t[e-1]}catch(e){throw new Error("Number not found")}},t.getDayName=function(e){try{let t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];if(null==t[e])throw new Error("Number not found");return t[e]}catch(e){throw new Error("Number not found")}},t.getMonths=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},t.getDays=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},t.nth=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},t.getDatesBetween=function(e,t){let n=[],o="string"==typeof e?new Date(e):e,i="string"==typeof t?new Date(t):t;for(;o<=i;)n.push(r("",o)),o=new Date(o.getDate()+1);return n},t.getMonthsObjects=function(){let e=[];return e.push({id:"01",name:"January"}),e.push({id:"02",name:"February"}),e.push({id:"03",name:"March"}),e.push({id:"04",name:"April"}),e.push({id:"05",name:"May"}),e.push({id:"06",name:"June"}),e.push({id:"07",name:"July"}),e.push({id:"08",name:"August"}),e.push({id:"09",name:"September"}),e.push({id:"10",name:"October"}),e.push({id:"11",name:"November"}),e.push({id:"12",name:"December"}),e},t.getMonthsNoPad=function(){let e=[];return e.push({id:"1",name:"January"}),e.push({id:"2",name:"February"}),e.push({id:"3",name:"March"}),e.push({id:"4",name:"April"}),e.push({id:"5",name:"May"}),e.push({id:"6",name:"June"}),e.push({id:"7",name:"July"}),e.push({id:"8",name:"August"}),e.push({id:"9",name:"September"}),e.push({id:"10",name:"October"}),e.push({id:"11",name:"November"}),e.push({id:"12",name:"December"}),e},t.getAge=function(e){let t=new Date,n=new Date(e),o=t.getFullYear()-n.getFullYear(),r=t.getMonth()-n.getMonth();return(r<0||0===r&&t.getDate()<n.getDate())&&o--,o},t.getLastDayOfMonth=a,t.getThisYear=d,t.compareDates=function(e,t){let n=new Date(e),o=null==t?new Date:new Date(t);return n<o?"before":n>o?"after":"same"},t.timeBetweenDates=function(e,t="",n="seconds"){let o=new Date(e),r=new Date;switch(""!=t&&(r=new Date(t)),n){case"days":return o.getTime()-r.getTime()/864e5;case"minutes":return o.getTime()-r.getTime()/36e5;default:return(o.getTime()-r.getTime())/1e3}},t.formatDate=s,t.subtractTimePeriod=function(e,t,n){switch(e="string"==typeof e?new Date(e):e,t){case"years":return new Date(e.setFullYear(e.getFullYear()-n));case"months":return new Date(e.setMonth(e.getMonth()-n));case"hours":return new Date(e.setHours(e.getHours()-n));case"minutes":return new Date(e.setMinutes(e.getMinutes()-n));case"seconds":return new Date(e.setSeconds(e.getSeconds()-n));default:return new Date(e.setDate(e.getDate()-n))}},t.addTimePeriod=function(e,t,n){switch(e="string"==typeof e?new Date(e):e,t){case"years":return new Date(e.setFullYear(e.getFullYear()-n));case"months":return new Date(e.setMonth(e.getMonth()-n));case"hours":return new Date(e.setHours(e.getHours()-n));case"minutes":return new Date(e.setMinutes(e.getMinutes()-n));case"seconds":return new Date(e.setSeconds(e.getSeconds()-n));default:return new Date(e.setDate(e.getDate()-n))}},t.getWeekNumber=l,t.setDates=function(e){const t=new Date;let i,u,c=l(t),p=d(),y=p-1,f=t.getMonth(),m=0==f?12:f-1,_=11==f?1:f+1;switch(e){case"all":i=s(new Date(2015,0,1)),u=r();break;case"today":case"today":default:i=r(),u=r();break;case"yesterday":i=s(o(-1,r())),u=s(o(-1,r()));break;case"this_week":i=s(n(c,p)),u=s(o(6,i));break;case"last_week":i=s(o(-6,s(n(c,p)))),u=s(o(6,i));break;case"next_week":i=s(o(6,s(n(c,p)))),u=s(o(6,i));break;case"this_month":i=s(new Date(p,f,1)),u=s(new Date(p,f,a(f)));break;case"last_month":i=s(new Date(new Date(p,f,1).setMonth(f-1))),u=s(new Date(new Date(p,f,a(m)).setMonth(f-1)));break;case"next_month":i=s(new Date(new Date(p,f,1).setMonth(f+1))),u=s(new Date(new Date(p,f,a(_)).setMonth(f+1)));break;case"first_quarter":i=s(new Date(p,0,1)),u=s(new Date(p,2,31));break;case"second_quarter":i=s(new Date(p,3,1)),u=s(new Date(p,5,30));break;case"third_quarter":i=s(new Date(p,6,1)),u=s(new Date(p,8,30));break;case"last_quarter":i=s(new Date(p,9,1)),u=s(new Date(p,11,31));break;case"this_year":i=s(new Date(p,0,1)),u=s(new Date(p,11,31));break;case"last_year":i=s(new Date(y,0,1)),u=s(new Date(y,11,31))}return{startDate:i,endDate:u}}},3426:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Activities=void 0;const i=n(4464),a=n(2083);let d=class extends i.Model{};o([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),r("design:type",String)],d.prototype,"activity",void 0),o([i.PrimaryKey,(0,i.Column)({type:i.DataType.BIGINT}),r("design:type",String)],d.prototype,"activity_id",void 0),o([(0,i.ForeignKey)((()=>a.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",String)],d.prototype,"user_id",void 0),o([(0,i.Column)({type:i.DataType.STRING,allowNull:!0}),r("design:type",String)],d.prototype,"module",void 0),o([i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),o([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!0,defaultValue:0}),r("design:type",String)],d.prototype,"deleted",void 0),o([(0,i.Column)({type:i.DataType.INTEGER,allowNull:!0,defaultValue:0}),r("design:type",String)],d.prototype,"object_id",void 0),d=o([(0,i.Table)({tableName:"activities",modelName:"Activities",paranoid:!0})],d),t.Activities=d},5672:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Branches=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Index,(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),r("design:type",String)],a.prototype,"name",void 0),o([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),r("design:type",String)],a.prototype,"location",void 0),o([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),r("design:type",String)],a.prototype,"phone",void 0),o([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),r("design:type",String)],a.prototype,"address",void 0),o([(0,i.Column)({type:i.DataType.STRING,allowNull:!1}),r("design:type",String)],a.prototype,"email",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),a=o([(0,i.Table)({tableName:"branches",modelName:"Branches",paranoid:!0})],a),t.Branches=a},4976:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomerDiagnostics=void 0;const i=n(4464),a=n(7501);let d=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Customers)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],d.prototype,"customer",void 0),o([i.Column,r("design:type",String)],d.prototype,"test",void 0),o([i.Column,r("design:type",String)],d.prototype,"data",void 0),o([i.Column,r("design:type",String)],d.prototype,"comments",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"date",void 0),o([i.Index,i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),d=o([(0,i.Table)({tableName:"customer_diagnostics",modelName:"CustomerDiagnostics",paranoid:!0})],d),t.CustomerDiagnostics=d},7501:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Customers=void 0;const i=n(4464),a=n(4976);let d=class extends i.Model{};o([i.Index,i.Column,r("design:type",String)],d.prototype,"name",void 0),o([i.Column,r("design:type",String)],d.prototype,"sex",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"phone",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"email",void 0),o([i.Column,r("design:type",String)],d.prototype,"date_of_birth",void 0),o([i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),o([i.Column,r("design:type",String)],d.prototype,"location",void 0),o([(0,i.HasMany)((()=>a.CustomerDiagnostics)),r("design:type",Array)],d.prototype,"customerDiagnostics",void 0),d=o([(0,i.Table)({tableName:"customers",modelName:"Customers",paranoid:!0})],d),t.Customers=d},7917:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DailyRecords=void 0;const i=n(4464),a=n(2083);let d=class extends i.Model{};o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],d.prototype,"date",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],d.prototype,"amount",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],d.prototype,"pos",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],d.prototype,"cheque",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],d.prototype,"insurance",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],d.prototype,"momo",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],d.prototype,"cash",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],d.prototype,"other",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],d.prototype,"credit",void 0),o([(0,i.Column)({type:i.DataType.STRING}),r("design:type",String)],d.prototype,"shift",void 0),o([(0,i.ForeignKey)((()=>a.Users)),(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",Number)],d.prototype,"created_by",void 0),o([i.Index,i.CreatedAt,r("design:type",Number)],d.prototype,"created_on",void 0),d=o([(0,i.Table)({tableName:"dailyRecords",modelName:"DailyRecords",paranoid:!0})],d),t.DailyRecords=d},8431:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DbBackups=void 0;const i=n(4464),a=n(2083);let d=class extends i.Model{};o([i.Column,r("design:type",String)],d.prototype,"file_name",void 0),o([(0,i.ForeignKey)((()=>a.Users)),(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",String)],d.prototype,"created_by",void 0),o([i.Column,r("design:type",String)],d.prototype,"description",void 0),o([i.Column,r("design:type",String)],d.prototype,"uploaded",void 0),o([i.Column,r("design:type",String)],d.prototype,"db_version",void 0),o([i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),d=o([(0,i.Table)({tableName:"dbbackups",modelName:"DbBackups",paranoid:!0})],d),t.DbBackups=d},314:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DbSync=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Column,r("design:type",String)],a.prototype,"type",void 0),o([i.Column,r("design:type",String)],a.prototype,"action",void 0),o([i.Column,r("design:type",String)],a.prototype,"data",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),a=o([(0,i.Table)({tableName:"db_sync",modelName:"DbSync",paranoid:!0})],a),t.DbSync=a},993:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticTests=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Index,i.Column,r("design:type",String)],a.prototype,"test_name",void 0),o([i.Column,r("design:type",String)],a.prototype,"parameters",void 0),o([i.Column,r("design:type",String)],a.prototype,"comments",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),a=o([(0,i.Table)({tableName:"diagnostic_tests",modelName:"DiagnosticTests",paranoid:!0})],a),t.DiagnosticTests=a},7345:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DrugInfo=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Column,r("design:type",String)],a.prototype,"name",void 0),o([i.Column,r("design:type",String)],a.prototype,"pregnancy",void 0),o([i.Column,r("design:type",String)],a.prototype,"pharmacodynamics",void 0),o([i.Column,r("design:type",String)],a.prototype,"indications_and_usage",void 0),o([i.Column,r("design:type",String)],a.prototype,"contraindications",void 0),o([i.Column,r("design:type",String)],a.prototype,"drug_interactions_table",void 0),o([i.Column,r("design:type",String)],a.prototype,"warnings_and_cautions",void 0),o([i.Column,r("design:type",String)],a.prototype,"dosage_and_administration",void 0),o([i.Column,r("design:type",String)],a.prototype,"adverse_reactions",void 0),o([i.Column,r("design:type",String)],a.prototype,"information_for_patients",void 0),o([i.Column,r("design:type",String)],a.prototype,"clinical_pharmacology",void 0),o([i.Column,r("design:type",String)],a.prototype,"drug_abuse_and_dependence",void 0),o([i.Column,r("design:type",String)],a.prototype,"teratogenic_effects",void 0),o([i.Column,r("design:type",String)],a.prototype,"geriatric_use",void 0),o([i.Column,r("design:type",String)],a.prototype,"overdosage",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),a=o([(0,i.Table)({tableName:"drug_info",modelName:"DrugInfo",paranoid:!0})],a),t.DrugInfo=a},208:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.IncomingPayments=void 0;const i=n(4464),a=n(2083);let d=class extends i.Model{};o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],d.prototype,"date",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE}),r("design:type",Number)],d.prototype,"amount",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"type",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"payer",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"payment_method",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"transaction_id",void 0),o([i.Column,r("design:type",String)],d.prototype,"item_code",void 0),o([i.Column,r("design:type",String)],d.prototype,"notes",void 0),o([(0,i.ForeignKey)((()=>a.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],d.prototype,"created_by",void 0),o([i.Index,i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),d=o([(0,i.Table)({tableName:"incoming_payments",modelName:"IncomingPayments",paranoid:!0})],d),t.IncomingPayments=d},5559:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.InsuranceProviders=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Column,r("design:type",String)],a.prototype,"name",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),a=o([(0,i.Table)({tableName:"insurance_providers",modelName:"InsuranceProviders",paranoid:!0})],a),t.InsuranceProviders=a},7300:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ItemActiveIngredients=void 0;const i=n(4464),a=n(6612);let d=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],d.prototype,"product",void 0),o([i.Column,r("design:type",String)],d.prototype,"ingredient",void 0),d=o([(0,i.Table)({tableName:"item_active_ingredients",modelName:"ItemActiveIngredients",paranoid:!0})],d),t.ItemActiveIngredients=d},4155:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.OnlineBackups=void 0;const i=n(4464);let a=class extends i.Model{};o([(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),r("design:type",String)],a.prototype,"date",void 0),o([i.Column,r("design:type",String)],a.prototype,"url",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),a=o([(0,i.Table)({tableName:"online_backups",modelName:"OnlineBackups",paranoid:!0})],a),t.OnlineBackups=a},7900:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.OutgoingPayments=void 0;const i=n(4464),a=n(2083);let d=class extends i.Model{};o([i.Index,(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),r("design:type",String)],d.prototype,"date",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],d.prototype,"amount",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"type",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"recipient",void 0),o([i.Column,r("design:type",String)],d.prototype,"transaction_id",void 0),o([i.Column,r("design:type",String)],d.prototype,"item_code",void 0),o([i.Column,r("design:type",String)],d.prototype,"notes",void 0),o([(0,i.ForeignKey)((()=>a.Users)),(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",Number)],d.prototype,"created_by",void 0),o([i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),d=o([(0,i.Table)({tableName:"outgoing_payments",modelName:"OutgoingPayments",paranoid:!0})],d),t.OutgoingPayments=d},8801:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Permissions=void 0;const i=n(4464);let a=class extends i.Model{};o([i.PrimaryKey,i.Column,r("design:type",Number)],a.prototype,"permission_id",void 0),o([i.Index,(0,i.Column)({unique:!0}),r("design:type",String)],a.prototype,"name",void 0),o([i.Index,i.Column,r("design:type",String)],a.prototype,"description",void 0),a=o([(0,i.Table)({tableName:"permissions",modelName:"Permissions",paranoid:!0})],a),t.Permissions=a},688:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductBatches=void 0;const i=n(4464),a=n(6612);let d=class extends i.Model{};o([i.Column,r("design:type",String)],d.prototype,"batch_number",void 0),o([(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],d.prototype,"expiry",void 0),o([i.Column,r("design:type",String)],d.prototype,"barcode",void 0),o([(0,i.ForeignKey)((()=>a.Products)),(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",Number)],d.prototype,"product",void 0),o([i.Column,r("design:type",String)],d.prototype,"purchase_code",void 0),d=o([(0,i.Table)({tableName:"outgoing_payments",modelName:"ProductBatches",paranoid:!0})],d),t.ProductBatches=d},6612:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Products=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Index,(0,i.Column)({allowNull:!1,unique:!0}),r("design:type",String)],a.prototype,"name",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],a.prototype,"price",void 0),o([i.Index,i.Column,r("design:type",String)],a.prototype,"category",void 0),o([i.Column,r("design:type",String)],a.prototype,"notes",void 0),o([i.Column,r("design:type",String)],a.prototype,"unit",void 0),o([i.Column,r("design:type",String)],a.prototype,"picture",void 0),o([i.Index,i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],a.prototype,"max_stock",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],a.prototype,"min_stock",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),r("design:type",String)],a.prototype,"expiry",void 0),o([i.Column,r("design:type",String)],a.prototype,"barcode",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],a.prototype,"current_stock",void 0),o([(0,i.Column)({type:i.DataType.DATE,allowNull:!0}),r("design:type",String)],a.prototype,"last_modified",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],a.prototype,"cost_price",void 0),o([i.Column,r("design:type",String)],a.prototype,"size",void 0),o([i.Index,i.Column,r("design:type",String)],a.prototype,"description",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:1}),r("design:type",Number)],a.prototype,"status",void 0),o([i.Column,r("design:type",String)],a.prototype,"shelf",void 0),o([(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",Number)],a.prototype,"preferred_vendor",void 0),o([i.Column,r("design:type",String)],a.prototype,"is_drug",void 0),o([i.Column,r("design:type",String)],a.prototype,"generic_name",void 0),o([i.Column,r("design:type",String)],a.prototype,"contraindications",void 0),o([i.Column,r("design:type",String)],a.prototype,"pregnancy",void 0),o([i.Column,r("design:type",String)],a.prototype,"side_effects",void 0),o([i.Column,r("design:type",String)],a.prototype,"caution",void 0),o([i.Column,r("design:type",String)],a.prototype,"indications",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:1.33}),r("design:type",Number)],a.prototype,"markup",void 0),o([i.Column,r("design:type",String)],a.prototype,"active_ingredients",void 0),o([i.Column,r("design:type",String)],a.prototype,"drug_info",void 0),a=o([(0,i.Table)({tableName:"products",modelName:"Products",paranoid:!0})],a),t.Products=a},5338:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.PurchaseDetails=void 0;const i=n(4464),a=n(6612),d=n(3979),s=n(2083);let l=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"product",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"quantity",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"price",void 0),o([i.Column,r("design:type",String)],l.prototype,"unit",void 0),o([i.CreatedAt,r("design:type",String)],l.prototype,"created_on",void 0),o([(0,i.ForeignKey)((()=>s.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"created_by",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"markup",void 0),o([i.Index,(0,i.ForeignKey)((()=>d.Purchases)),i.Column,r("design:type",String)],l.prototype,"code",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],l.prototype,"date",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"selling_price",void 0),o([(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],l.prototype,"expiry",void 0),l=o([(0,i.Table)({tableName:"purchases",modelName:"PurchaseDetails",paranoid:!0})],l),t.PurchaseDetails=l},3979:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Purchases=void 0;const i=n(4464),a=n(5338),d=n(2083),s=n(887);let l=class extends i.Model{};o([(0,i.ForeignKey)((()=>s.Vendors)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"vendor",void 0),o([(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),r("design:type",String)],l.prototype,"date",void 0),o([i.Column,r("design:type",String)],l.prototype,"site",void 0),o([i.Index,i.Column,r("design:type",String)],l.prototype,"code",void 0),o([i.Column,r("design:type",String)],l.prototype,"status",void 0),o([i.CreatedAt,r("design:type",String)],l.prototype,"created_on",void 0),o([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"created_by",void 0),o([i.Index,i.Column,r("design:type",String)],l.prototype,"invoice",void 0),o([i.Index,i.Column,r("design:type",String)],l.prototype,"payment_method",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE}),r("design:type",Number)],l.prototype,"amount_paid",void 0),o([(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],l.prototype,"last_payment_date",void 0),o([(0,i.HasMany)((()=>a.PurchaseDetails),"code"),r("design:type",Array)],l.prototype,"details",void 0),l=o([(0,i.Table)({tableName:"purchases",modelName:"Purchases",paranoid:!0})],l),t.Purchases=l},7901:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ReceivedTransferDetails=void 0;const i=n(4464),a=n(6612),d=n(3082),s=n(2083);let l=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"product",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"quantity",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"price",void 0),o([i.Column,r("design:type",String)],l.prototype,"unit",void 0),o([i.CreatedAt,r("design:type",String)],l.prototype,"created_on",void 0),o([(0,i.ForeignKey)((()=>s.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"created_by",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"markup",void 0),o([i.Index,(0,i.ForeignKey)((()=>d.ReceivedTransfers)),i.Column,r("design:type",String)],l.prototype,"code",void 0),o([i.Index,i.Column,r("design:type",String)],l.prototype,"date",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"selling_price",void 0),l=o([(0,i.Table)({tableName:"received_transfer_details",modelName:"ReceivedTransferDetails",paranoid:!0})],l),t.ReceivedTransferDetails=l},3082:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ReceivedTransfers=void 0;const i=n(4464),a=n(5672),d=n(2083);let s=class extends i.Model{};o([(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),r("design:type",String)],s.prototype,"date",void 0),o([i.Index,(0,i.Column)({allowNull:!1}),r("design:type",String)],s.prototype,"code",void 0),o([i.Index,(0,i.Column)({allowNull:!1}),r("design:type",String)],s.prototype,"invoice",void 0),o([i.CreatedAt,r("design:type",String)],s.prototype,"created_on",void 0),o([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"created_by",void 0),o([(0,i.ForeignKey)((()=>a.Branches)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"sender",void 0),s=o([(0,i.Table)({tableName:"received_transfers",modelName:"ReceivedTransfers",paranoid:!0})],s),t.ReceivedTransfers=s},8899:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Refills=void 0;const i=n(4464),a=n(7501),d=n(6612),s=n(2083);let l=class extends i.Model{};o([i.Index,i.Column,r("design:type",String)],l.prototype,"product",void 0),o([(0,i.ForeignKey)((()=>d.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!0}),r("design:type",Number)],l.prototype,"product_id",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:1}),r("design:type",Number)],l.prototype,"quantity",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),r("design:type",String)],l.prototype,"start_date",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],l.prototype,"end_date",void 0),o([(0,i.ForeignKey)((()=>s.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"created_by",void 0),o([i.Index,i.Column,r("design:type",String)],l.prototype,"status",void 0),o([(0,i.ForeignKey)((()=>a.Customers)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"customer_id",void 0),o([i.Column,r("design:type",String)],l.prototype,"customer_name",void 0),o([i.CreatedAt,r("design:type",String)],l.prototype,"created_on",void 0),l=o([(0,i.Table)({tableName:"refills",modelName:"Refills",paranoid:!0})],l),t.Refills=l},128:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.RolePermissions=void 0;const i=n(4464),a=n(8801),d=n(4284);let s=class extends i.Model{};o([(0,i.ForeignKey)((()=>d.Roles)),(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",Number)],s.prototype,"role_id",void 0),o([(0,i.ForeignKey)((()=>a.Permissions)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"permission_id",void 0),o([i.CreatedAt,r("design:type",String)],s.prototype,"created_on",void 0),s=o([(0,i.Table)({tableName:"role_permissions",modelName:"RolePermissions",paranoid:!0})],s),t.RolePermissions=s},4284:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Roles=void 0;const i=n(4464);let a=class extends i.Model{};o([i.PrimaryKey,(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",Number)],a.prototype,"role_id",void 0),o([i.Column,r("design:type",String)],a.prototype,"role_name",void 0),o([i.Column,r("design:type",String)],a.prototype,"description",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),a=o([(0,i.Table)({tableName:"roles",modelName:"Roles",paranoid:!0})],a),t.Roles=a},9591:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Sales=void 0;const i=n(4464),a=n(7501),d=n(2083);let s=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Customers)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!0,defaultValue:null}),r("design:type",Number)],s.prototype,"customer",void 0),o([i.Index,(0,i.Column)({allowNull:!1}),r("design:type",String)],s.prototype,"code",void 0),o([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"created_by",void 0),o([i.CreatedAt,r("design:type",String)],s.prototype,"created_on",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,defaultValue:0}),r("design:type",Number)],s.prototype,"amount_paid",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"payment_method",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"momo_reference",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"insurance_provider",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"insurance_member_name",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"insurance_member_id",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"creditor_name",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE}),r("design:type",Number)],s.prototype,"credit_paid",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE}),r("design:type",Number)],s.prototype,"discount",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"shift",void 0),s=o([(0,i.Table)({tableName:"sales",modelName:"Sales",paranoid:!0})],s),t.Sales=s},7133:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.SalesDetails=void 0;const i=n(4464),a=n(6612),d=n(9591);let s=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"product",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],s.prototype,"quantity",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],s.prototype,"price",void 0),o([i.Column,r("design:type",String)],s.prototype,"unit",void 0),o([i.CreatedAt,r("design:type",String)],s.prototype,"created_on",void 0),o([i.Column,r("design:type",String)],s.prototype,"label",void 0),o([i.Index,(0,i.ForeignKey)((()=>d.Sales)),i.Column,r("design:type",String)],s.prototype,"code",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"date",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],s.prototype,"cost_price",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"expiry",void 0),s=o([(0,i.Table)({tableName:"sales_details",modelName:"SalesDetails",paranoid:!0})],s),t.SalesDetails=s},1530:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Index,(0,i.Column)({allowNull:!1,unique:!0}),r("design:type",String)],a.prototype,"name",void 0),o([i.Column,r("design:type",String)],a.prototype,"value",void 0),o([(0,i.Column)({allowNull:!1}),r("design:type",String)],a.prototype,"module",void 0),a=o([(0,i.Table)({tableName:"settings",modelName:"Settings",paranoid:!0,createdAt:!1})],a),t.Settings=a},2961:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StockAdjustment=void 0;const i=n(4464),a=n(6612),d=n(2083);let s=class extends i.Model{};o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],s.prototype,"date",void 0),o([(0,i.ForeignKey)((()=>a.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"product",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"quantity_counted",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"quantity_expected",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"current_price",void 0),o([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"created_by",void 0),o([i.Column,r("design:type",String)],s.prototype,"code",void 0),o([i.CreatedAt,r("design:type",String)],s.prototype,"created_on",void 0),o([i.Column,r("design:type",String)],s.prototype,"category",void 0),o([i.Column,r("design:type",String)],s.prototype,"size",void 0),o([(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],s.prototype,"expiry",void 0),o([i.Column,r("design:type",String)],s.prototype,"comments",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"quantity_expired",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"quantity_damaged",void 0),o([i.Column,r("design:type",String)],s.prototype,"shelf",void 0),o([i.Column,r("design:type",String)],s.prototype,"unit",void 0),s=o([(0,i.Table)({tableName:"stock_adjustment",modelName:"StockAdjustment",paranoid:!0})],s),t.StockAdjustment=s},2775:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StockAdjustmentPending=void 0;const i=n(4464),a=n(6612),d=n(2083);let s=class extends i.Model{};o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],s.prototype,"date",void 0),o([(0,i.ForeignKey)((()=>a.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"product",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"quantity_counted",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"quantity_expected",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"current_price",void 0),o([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"created_by",void 0),o([i.Column,r("design:type",String)],s.prototype,"code",void 0),o([i.CreatedAt,r("design:type",String)],s.prototype,"created_on",void 0),o([i.Column,r("design:type",String)],s.prototype,"category",void 0),o([i.Column,r("design:type",String)],s.prototype,"size",void 0),o([(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],s.prototype,"expiry",void 0),o([i.Column,r("design:type",String)],s.prototype,"comments",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"quantity_expired",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],s.prototype,"quantity_damaged",void 0),o([i.Column,r("design:type",String)],s.prototype,"shelf",void 0),o([i.Column,r("design:type",String)],s.prototype,"unit",void 0),s=o([(0,i.Table)({tableName:"stock_adjustment_pending",modelName:"StockAdjustmentPending",paranoid:!0})],s),t.StockAdjustmentPending=s},6324:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StockAdjustmentSessions=void 0;const i=n(4464),a=n(2083);let d=class extends i.Model{};o([i.Index,(0,i.Column)({type:i.DataType.DATE,allowNull:!1}),r("design:type",String)],d.prototype,"date",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"code",void 0),o([i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),o([(0,i.ForeignKey)((()=>a.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],d.prototype,"created_by",void 0),d=o([(0,i.Table)({tableName:"stock_adjustment_sessions",modelName:"StockAdjustmentSessions",paranoid:!0})],d),t.StockAdjustmentSessions=d},7527:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StockValues=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],a.prototype,"date",void 0),o([(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],a.prototype,"last_modified",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],a.prototype,"selling_value",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1,defaultValue:0}),r("design:type",Number)],a.prototype,"cost_value",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),a=o([(0,i.Table)({tableName:"stock_values",modelName:"StockValues",paranoid:!0})],a),t.StockValues=a},3591:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TransferDetails=void 0;const i=n(4464),a=n(6612),d=n(3417),s=n(2083);let l=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Products)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"product",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"quantity",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"cost_price",void 0),o([i.Column,r("design:type",String)],l.prototype,"unit",void 0),o([i.CreatedAt,r("design:type",String)],l.prototype,"created_on",void 0),o([(0,i.ForeignKey)((()=>s.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],l.prototype,"created_by",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"markup",void 0),o([i.Index,(0,i.ForeignKey)((()=>d.Transfers)),i.Column,r("design:type",String)],l.prototype,"code",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],l.prototype,"date",void 0),o([(0,i.Column)({type:i.DataType.DOUBLE,allowNull:!1}),r("design:type",Number)],l.prototype,"price",void 0),o([(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],l.prototype,"expiry",void 0),l=o([(0,i.Table)({tableName:"transfer_details",modelName:"TransferDetails",paranoid:!0})],l),t.TransferDetails=l},3417:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transfers=void 0;const i=n(4464),a=n(5672),d=n(2083);let s=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Branches)),(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",Number)],s.prototype,"receiver",void 0),o([i.Index,(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],s.prototype,"date",void 0),o([i.Index,i.Column,r("design:type",String)],s.prototype,"code",void 0),o([i.Column,r("design:type",String)],s.prototype,"status",void 0),o([i.CreatedAt,r("design:type",String)],s.prototype,"created_on",void 0),o([(0,i.ForeignKey)((()=>d.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],s.prototype,"created_by",void 0),s=o([(0,i.Table)({tableName:"transfers",modelName:"Transfers",paranoid:!0})],s),t.Transfers=s},4437:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.UserSessions=void 0;const i=n(4464),a=n(2083);let d=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Users)),(0,i.Column)({type:i.DataType.INTEGER,allowNull:!1}),r("design:type",Number)],d.prototype,"user_id",void 0),o([i.Index,i.Column,r("design:type",String)],d.prototype,"token",void 0),o([i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),o([(0,i.Column)({type:i.DataType.DATE}),r("design:type",String)],d.prototype,"expires",void 0),d=o([(0,i.Table)({tableName:"user_sessions",modelName:"UserSessions",paranoid:!0})],d),t.UserSessions=d},2083:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Users=void 0;const i=n(4464),a=n(4284);let d=class extends i.Model{};o([(0,i.ForeignKey)((()=>a.Roles)),(0,i.Column)({type:i.DataType.INTEGER}),r("design:type",Number)],d.prototype,"role_id",void 0),o([i.Index,(0,i.Column)({allowNull:!1,type:i.DataType.STRING,unique:!0}),r("design:type",String)],d.prototype,"email",void 0),o([i.Index,(0,i.Column)({allowNull:!1,type:i.DataType.STRING,unique:!0}),r("design:type",String)],d.prototype,"username",void 0),o([i.Index,(0,i.Column)({allowNull:!1,type:i.DataType.TEXT}),r("design:type",String)],d.prototype,"password_hash",void 0),o([(0,i.Column)({allowNull:!0,type:i.DataType.DATE}),r("design:type",String)],d.prototype,"last_login",void 0),o([(0,i.Column)({type:i.DataType.TEXT}),r("design:type",String)],d.prototype,"last_ip",void 0),o([i.CreatedAt,r("design:type",String)],d.prototype,"created_on",void 0),o([i.Column,r("design:type",String)],d.prototype,"display_name",void 0),o([i.Index,(0,i.Column)({type:i.DataType.INTEGER,defaultValue:1,allowNull:!1}),r("design:type",Number)],d.prototype,"active",void 0),o([i.Column,r("design:type",String)],d.prototype,"last_seen",void 0),o([i.Index,(0,i.Column)({allowNull:!1,type:i.DataType.TEXT,unique:!0}),r("design:type",String)],d.prototype,"phone",void 0),o([(0,i.BelongsTo)((()=>a.Roles)),r("design:type",a.Roles)],d.prototype,"userRole",void 0),d=o([(0,i.Table)({tableName:"users",modelName:"Users",paranoid:!0})],d),t.Users=d},887:function(e,t,n){var o=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var d=e.length-1;d>=0;d--)(r=e[d])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.Vendors=void 0;const i=n(4464);let a=class extends i.Model{};o([i.Index,i.Column,r("design:type",String)],a.prototype,"name",void 0),o([i.Column,r("design:type",String)],a.prototype,"location",void 0),o([i.Index,i.Column,r("design:type",String)],a.prototype,"phone",void 0),o([i.Index,i.Column,r("design:type",String)],a.prototype,"code",void 0),o([i.Index,i.Column,r("design:type",String)],a.prototype,"email",void 0),o([i.Column,r("design:type",String)],a.prototype,"notes",void 0),o([i.CreatedAt,r("design:type",String)],a.prototype,"created_on",void 0),o([i.Column,r("design:type",String)],a.prototype,"legacy_id",void 0),a=o([(0,i.Table)({tableName:"vendors",modelName:"Vendors",paranoid:!0})],a),t.Vendors=a},8728:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const o=n(3426),r=n(5672),i=n(4976),a=n(7501),d=n(7917),s=n(8431),l=n(314),u=n(993),c=n(7345),p=n(208),y=n(5559),f=n(7300),m=n(4155),_=n(7900),T=n(8801),E=n(688),g=n(6612),N=n(5338),v=n(3979),L=n(7901),R=n(3082),S=n(8899),D=n(4284),h=n(128),O=n(9591),A=n(7133),I=n(1530),b=n(2961),U=n(2775),C=n(6324),x=n(7527),w=n(3591),P=n(3417),F=n(2083),M=n(4437),k=n(887);t.default=[o.Activities,r.Branches,i.CustomerDiagnostics,a.Customers,d.DailyRecords,s.DbBackups,l.DbSync,u.DiagnosticTests,c.DrugInfo,p.IncomingPayments,y.InsuranceProviders,f.ItemActiveIngredients,m.OnlineBackups,_.OutgoingPayments,T.Permissions,E.ProductBatches,g.Products,N.PurchaseDetails,v.Purchases,L.ReceivedTransferDetails,R.ReceivedTransfers,S.Refills,h.RolePermissions,D.Roles,O.Sales,A.SalesDetails,I.Settings,b.StockAdjustment,U.StockAdjustmentPending,C.StockAdjustmentSessions,x.StockValues,w.TransferDetails,P.Transfers,F.Users,M.UserSessions,k.Vendors]},483:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidInt=t.isAdminPasswordSet=t.isCompanySet=t.app=void 0;const i=r(n(6860)),a=r(n(5142)),d=n(3553),s=r(n(6077)),l=n(5251),u=n(5486),c=n(1530),p=n(5276),y=n(1310);function f(e){return null!=e&&Number.isInteger(e)}new p.ServerEvents,a.default.config(),t.app=(0,i.default)(),t.isCompanySet=function(){return o(this,void 0,void 0,(function*(){const e=yield c.Settings.findOne({where:{name:"company_id"}});return null!=e&&f(e.value)}))},t.isAdminPasswordSet=function(){return o(this,void 0,void 0,(function*(){const e=yield c.Settings.findOne({where:{name:"admin_password"}});return null!=e&&e.value.trim().length>0}))},t.isValidInt=f;const m=r(n(3064)),_=r(n(4987)),T=r(n(7217)),E=r(n(3654)),g=r(n(4046)),N=r(n(5233)),v=r(n(8476)),L=r(n(1222));t.app.use("/api_admin",m.default),t.app.use("/api_staff",v.default),t.app.use("/api_customer",_.default),t.app.use("/api_product",T.default),t.app.use("/api_vendor",L.default),t.app.use("/api_purchase",E.default),t.app.use("/api_sale",g.default),t.app.use("/api_transfer",N.default),t.app.use(((e,t,n)=>o(void 0,void 0,void 0,(function*(){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept, Authorization, Token, Usertype, Userid, Type"),"OPTIONS"===e.method?(t.header("Access-Control-Allow-Methods","PUT, POST, PATCH, DELETE, GET"),t.status(200).json({})):n()})))),o(void 0,void 0,void 0,(function*(){try{t.app.listen(d.constants.port,(()=>{l.logger.info("server started successfully on "+d.constants.port);const e=s.default.address(),t=`http://${e}:${d.constants.port}`;process.send({message:t,event:y.SERVER_URL_UPDATED}),(0,u.runMigrations)();try{process.send({message:`Server running on http://${e}:${d.constants.port}`,event:y.SERVER_STATE_CHANGED}),l.logger.info("process.send defined")}catch(e){l.logger.error("process.send not defined."),process.send(`Error: ${e}`)}}))}catch(e){console.log(e)}}))},6:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function d(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,d)}s((o=o.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.get_role_excluded_permissions_function=t.get_role_permissions_function=t.get_roles_function=t.get_user_function=t.delete_user_function=t.save_user_function=t.get_users_function=t.get_user_activities_function=t.get_activities_function=t.get_all_activities_function=t.delete_insurer_function=t.add_insurer_function=t.get_insurers_function=t.save_branch_function=t.getSettings=t.get_logo_function=t.get_branches_function=t.login_function=void 0;const i=n(3553),a=r(n(1017)),d=n(2083),s=n(4284),l=n(1530),u=n(3426),c=n(5672),p=n(4437),y=n(5251),f=n(5559),m=n(496),_=r(n(8432)),T=n(8801),E=n(128);t.login_function=function(e){return o(this,void 0,void 0,(function*(){let t=e.username,n=e.password;try{let e=yield d.Users.findOne({where:{username:t},include:[s.Roles]}),o=!1;if(null!=e&&(o=_.default.compareSync(n,e.password_hash)),null==e||!o)throw new Error("User not found");const r=new Date;let i=_.default.hashSync(t+r,10),a=r.getDate()+3,l={user_id:e.id,token:`${i}`,expires:`${a}`};return p.UserSessions.create(l),e.token=i,e.role=e.role_id,e.type="staff",yield u.Activities.create({activity:"logged in",user_id:e.id,module:"System"}),e}catch(e){throw e instanceof Error?(y.logger.error(e),new Error(e.message)):new Error(e)}}))},t.get_branches_function=function(){return o(this,void 0,void 0,(function*(){try{return yield c.Branches.findAll()}catch(e){throw y.logger.error(e),new Error("Error getting branches")}}))},t.get_logo_function=function(){return o(this,void 0,void 0,(function*(){try{const e=n(7147);let t=yield l.Settings.findOne({where:{name:"logo"}}),o="jpg",r="";return null!=t&&(o=t.value.split(".").pop(),r=`data:image/${o};base64,`+e.readFileSync(a.default.join(i.constants.settings_location,t.value),"base64")),r}catch(e){throw y.logger.error(e),new Error("Error getting logo")}}))},t.getSettings=function(e){return o(this,void 0,void 0,(function*(){try{return yield l.Settings.findAll({where:e&&e.settings?{name:{[m.Op.in]:e.settings}}:{}})}catch(e){throw y.logger.error({message:e}),new Error("Error getting settings")}}))},t.save_branch_function=function(e){return o(this,void 0,void 0,(function*(){try{let t={name:`'${e.name}'`,phone:`'${e.phone}'`};return yield c.Branches.create(t)}catch(e){throw y.logger.error(e),new Error("Error creating branch")}}))},t.get_insurers_function=function(){return o(this,void 0,void 0,(function*(){try{return yield f.InsuranceProviders.findAll()}catch(e){throw y.logger.error(e),new Error("Error getting insurers")}}))},t.add_insurer_function=function(e){return o(this,void 0,void 0,(function*(){try{let t={name:`'${e.name}'`};return yield f.InsuranceProviders.create(t)}catch(e){throw y.logger.error(e),new Error("Error creating insurer")}}))},t.delete_insurer_function=function(e){return o(this,void 0,void 0,(function*(){const t=e.id.split(",");try{return yield f.InsuranceProviders.destroy({where:{[m.Op.or]:[{id:{[m.Op.in]:t}},{name:{[m.Op.in]:t}}]}}),!0}catch(e){throw y.logger.error(e),new Error("Error deleting insurer")}}))},t.get_all_activities_function=function(e){return o(this,void 0,void 0,(function*(){let t=null==e.offset?0:e.offset,n=null==e.limit?100:e.limit,o=null==e.start_date?null:e.start_date,r=null==e.end_date?null:e.end_date;try{let e;return e=null==o?yield u.Activities.findAll({limit:n,offset:t}):yield u.Activities.findAll({where:{created_on:{[m.Op.and]:{[m.Op.gte]:`${o} 00:00:00`,[m.Op.lte]:`${r} 23:59:59`}}}}),e}catch(e){throw y.logger.error(e),new Error("Error getting activities")}}))},t.get_activities_function=function(e){return o(this,void 0,void 0,(function*(){let t=e.r,n=null==e.offset?0:e.offset,o=null==e.limit?null:e.limit;try{return yield u.Activities.findAll({where:{object_id:t},limit:o,offset:n,include:{model:d.Users,as:"user"}})}catch(e){throw y.logger.error(e),new Error("Error getting Activities")}}))},t.get_user_activities_function=function(e){return o(this,void 0,void 0,(function*(){let t=null==e.offset?0:e.offset,n=null==e.limit?100:e.limit,o=null==e.start_date?null:e.start_date,r=null==e.end_date?null:e.end_date;try{let i={user_id:e.id};return null!=o&&(i.created_on={[m.Op.and]:{[m.Op.gte]:`${o} 00:00:00`,[m.Op.lte]:`${r} 23:59:59`}}),yield u.Activities.findAll({where:i,limit:n,offset:t})}catch(e){throw y.logger.error(e),new Error("Error getting Activities")}}))},t.get_users_function=function(e){return o(this,void 0,void 0,(function*(){try{return yield d.Users.findAll({limit:e.limit,offset:e.offset,include:{model:s.Roles}})}catch(e){throw console.log(e),y.logger.error(e),new Error("Error getting users")}}))},t.save_user_function=function(e){return o(this,void 0,void 0,(function*(){try{let t=d.Users.build(e),n=e.password;if(null!=n&&"undefined"!=n){let e=_.default.hashSync(n,10);t.password_hash=`${e}`}else delete t.password_hash;return yield t.save(),t}catch(e){throw y.logger.error(e),new Error("Error adding a user")}}))},t.delete_user_function=function(e){return o(this,void 0,void 0,(function*(){let t=e.id;try{let n=yield d.Users.findOne({where:{id:t}});return yield n.destroy(),yield u.Activities.create({activity:`deleted user ${n.toJSON()}`,user_id:`${e.userid}`,object_id:n.id,module:"users"}),!0}catch(e){throw y.logger.error(e),new Error("Error creating user")}}))},t.get_user_function=function(e){return o(this,void 0,void 0,(function*(){try{return yield d.Users.findOne({where:{id:e.id}})}catch(e){throw console.log(e),y.logger.error(e),new Error("Error getting user")}}))},t.get_roles_function=function(e){return o(this,void 0,void 0,(function*(){try{return yield s.Roles.findAll({limit:e.limit,offset:e.offset})}catch(e){throw y.logger.error(e),new Error("Error getting roles")}}))},t.get_role_permissions_function=function(e){return o(this,void 0,void 0,(function*(){try{return yield T.Permissions.findAll({where:{permission_id:{[m.Op.in]:m.Sequelize.literal(`select permission_id from ${E.RolePermissions.tableName} \n                    where role_id = ${e.id}`)}},include:[T.Permissions]})}catch(t){throw y.logger.error(t),new Error(`Error getting role permissions for role_id: ${e.id}`)}}))},t.get_role_excluded_permissions_function=function(e){return o(this,void 0,void 0,(function*(){try{return yield T.Permissions.findAll({where:{permission_id:{[m.Op.notIn]:m.Sequelize.literal(`select permission_id from ${E.RolePermissions.tableName} \n                    where role_id = ${e.id}`)}}})}catch(t){throw y.logger.error(t),new Error(`Unable to get excluded permissions for role id: ${e.id}`)}}))}},5276:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ServerEvents=void 0;const o=n(2781);class r extends o.EventEmitter{constructor(){super()}}t.ServerEvents=r},3553:function(e,t,n){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.constants=void 0;const r=process.env.PORT||5100,i=o(n(1017)),a=o(n(2037)),d="druglanev1.db",s=i.default.join(process.env.APPDATA,"druglaneServerV1");t.constants={appLongName:"Druglane Pharmacy Management System",appname:"Druglane",server_url:"https://druglanepms.calgadsoftwares.com",settings_location:s,customer_image_url:"assets/customer_images/",customer_image_thumbnail_url:"assets/customer_images/thumbnails/",product_image_url:"assets/product_images/",product_image_thumbnail_url:"assets/product_images/thumbnails/",port:r,firebase_user_collection:"users",firebase_requests_collection:"requests",firebase_responses_collection:"responses",settings_path:i.default.join(s,"system-settings.json"),db_path:i.default.join(s,d),backup_folder:i.default.join(a.default.homedir(),"DruglaneBackups"),settings_filename:"system-settings.json",db_filename:d,internal_backups_path:i.default.join(s,"backups"),backup_temp_location:i.default.join(s,"backupRestoreTemp"),company_id:"",default_functional_groups:["Adult Analgesics Tablets","Adult Analgesics Suppositories","Paediatric Analgesics Syrups","Paediatric Analgesics Suppositories","Adult Dry Cough Syrups","Adult Expectorant Syups","Adult Cough & Cold Syrups","Adult Dry Cough Tablets","Adult Expectorant Tablets","Adult Cough & Cold Tablets","Baby Cough Syrups (0-1 years)","Child Cough Syrups (up to 6 years)","Child Cough Syrups (up to 12 years)","Adult Catarrh Syrups","Adult Catarrh Tablets","Paediatric Catarrh Syrups","Adult Blood Tonics","Adult Multivitamins","Paediatric Blood Tonics","Paediatric Multivitamins"],default_config:{port:r,host:"localhost",dbversion:0,admin_set:"no",company_set:"no",auto_backup_time:19,last_sync:0,env:"production"},PERMISSION_VIEW_USER_ACTIVITIES:"View Sales History",PERMISSION_VIEW_PURCHASE_HISTORY:"View Purchase History",PERMISSION_VIEW_INVENTORY:"View Inventory",PERMISSION_VIEW_END_OF_DAY_REPORT:"View End Of Day Report",PERMISSION_VIEW_ACCOUNTS:"View Accounts",PERMISSION_TRANSFER_ITEMS:"Transfer Items",PERMISSION_RETURN_SOLD_ITEMS:"Return Sold Items",PERMISSION_RECEIVE_TRANSFERS:"Receive Transfers",PERMISSION_RECEIVE_PURCHASES:"Receive Purchases",PERMISSION_MANAGE_VENDORS:"Manage Vendors",PERMISSION_MANAGE_STAFF:"Manage Staff",PERMISSION_MANAGE_SETTINGS:"Manage Settings",PERMISSION_MANAGE_INVENTORY:"Manage Inventory",PERMISSION_MANAGE_CUSTOMERS:"Manage Customers",PERMISSION_MANAGE_ACCOUNTS:"Manage Accounts",PERMISSION_GIVE_DISCOUNT:"Give Discount",PERMISSION_EDIT_SALES:"Edit Sales",PERMISSION_DELETE_TRANSFERS:"Delete Transfers",PERMISSION_DELETE_SALES_RECORDS:"Sales Records",PERMISSION_DELETE_PURCHASES:"Delete Purchases",PERMISSION_CREATE_SALES:"Create Sales",PERMISSION_ADJUST_STOCK:"Adjust Stock",PERMISSION_VIEW_TRANSFER_HISTORY:"View Transfer History",PERMISSION_VIEW_SALES_REPORTS:"View Sales Reports",PERMISSION_VIEW_SALES_HISTORY:"View Sales History",STRING_DB_VERSION:"dbversion"}},1310:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SERVER_URL_RECEIVED=t.GET_SERVER_URL=t.SERVER_URL_UPDATED=t.COMPANY_NAME_RECEIVED=t.GET_COMPANY_NAME=t.GET_APP_DETAILS=t.GET_SERVER_STATE=t.SERVER_MESSAGE_RECEIVED=t.SERVER_STATE_CHANGED=void 0,t.SERVER_STATE_CHANGED="server_state_changed",t.SERVER_MESSAGE_RECEIVED="server_message_received",t.GET_SERVER_STATE="getServerState",t.GET_APP_DETAILS="getAppDetails",t.GET_COMPANY_NAME="getCompanyName",t.COMPANY_NAME_RECEIVED="companyNameReceived",t.SERVER_URL_UPDATED="server_url_updated",t.GET_SERVER_URL="get_server_url",t.SERVER_URL_RECEIVED="server_url_received"},8432:e=>{e.exports=require("bcryptjs")},5142:e=>{e.exports=require("dotenv")},6860:e=>{e.exports=require("express")},6077:e=>{e.exports=require("ip")},496:e=>{e.exports=require("sequelize")},4464:e=>{e.exports=require("sequelize-typescript")},7058:e=>{e.exports=require("ts-node/register")},714:e=>{e.exports=require("umzug")},7773:e=>{e.exports=require("winston")},7147:e=>{e.exports=require("fs")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")}},t={};!function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(483)})();