{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"error","message":"process.send not defined.","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"error","message":"process.send not defined.","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"error","message":"process.send not defined.","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"error","message":"process.send not defined.","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"app terminated","service":"user-service"}
{"level":"info","message":"app terminated","service":"user-service"}
{"code":"ENOTFOUND","hostname":"_mongodb._tcp.cluster0.ai5biiv\n            .mongodb.net","level":"error","service":"user-service","syscall":"querySrv"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"app terminated","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"code":"ECONNREFUSED","hostname":"_mongodb._tcp.cluster0.ai5biiv.mongodb.net","level":"error","service":"user-service","syscall":"querySrv"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"code":"ECONNREFUSED","hostname":"_mongodb._tcp.cluster0.ai5biiv.mongodb.net","level":"error","service":"user-service","syscall":"querySrv"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (baa866cf-9c75-45c6-83af-c027ac5ec462): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (baa866cf-9c75-45c6-83af-c027ac5ec462): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (95bce92a-5b60-4992-b932-ff31ac1c4f1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (95bce92a-5b60-4992-b932-ff31ac1c4f1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0dcc52cf-da2a-4f17-8335-7a8004932d49): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0dcc52cf-da2a-4f17-8335-7a8004932d49): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (509f2e0d-a822-4c6b-b30a-074173635dc7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (509f2e0d-a822-4c6b-b30a-074173635dc7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (95d5e802-78d1-4bb1-9d6f-8006ff318004): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (95d5e802-78d1-4bb1-9d6f-8006ff318004): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3fc03317-6a8b-4124-a9b3-15d8f5d88226): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (3fc03317-6a8b-4124-a9b3-15d8f5d88226): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7ff4fd2f-7908-4aff-ac28-81983b5f43d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (7ff4fd2f-7908-4aff-ac28-81983b5f43d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1a41688-2fd6-427e-b521-344abdff6a04): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (e1a41688-2fd6-427e-b521-344abdff6a04): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c15a9bb0-97dd-42a2-943a-efab5e4e52d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c15a9bb0-97dd-42a2-943a-efab5e4e52d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ae2216fb-b965-4533-8293-c98b333e257a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (ae2216fb-b965-4533-8293-c98b333e257a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c1c5f542-1e31-4cd9-bae7-5f87d5cc3238): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c1c5f542-1e31-4cd9-bae7-5f87d5cc3238): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0d7444fd-7f99-4a38-af26-f0f5c0db1f84): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (0d7444fd-7f99-4a38-af26-f0f5c0db1f84): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8c7c3ea7-9d9c-4492-a5fd-65cb37e5877b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8c7c3ea7-9d9c-4492-a5fd-65cb37e5877b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a6d0024-542c-45a0-910b-b601239a71a0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (9a6d0024-542c-45a0-910b-b601239a71a0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6898aa1a-2de7-482d-a265-cedb2dc2c0ff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6898aa1a-2de7-482d-a265-cedb2dc2c0ff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ad9dd87-a10c-4052-a6bf-e245e6eaa994): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (2ad9dd87-a10c-4052-a6bf-e245e6eaa994): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97fa512a-b6fe-402c-9314-f42025e12298): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (97fa512a-b6fe-402c-9314-f42025e12298): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ddc3f1b-29be-4812-8d2b-273900659957): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (5ddc3f1b-29be-4812-8d2b-273900659957): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0a728c3b-d2fc-439d-b5c1-130c6396ee32): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0a728c3b-d2fc-439d-b5c1-130c6396ee32): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f190a029-bc86-4255-8961-78a6826a6b5a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (f190a029-bc86-4255-8961-78a6826a6b5a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0a677a4-c10a-460e-90a0-2786867144f0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c0a677a4-c10a-460e-90a0-2786867144f0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ec713c86-acc3-4fc9-83e8-e5fc3e086bf3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ec713c86-acc3-4fc9-83e8-e5fc3e086bf3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4825545d-1679-4d04-a44f-ef82ef32c9d5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (4825545d-1679-4d04-a44f-ef82ef32c9d5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6285e5c5-6a41-49e6-80eb-4420672fb173): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (6285e5c5-6a41-49e6-80eb-4420672fb173): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7c7cff68-772c-4381-b8c2-165cbe1e2385): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7c7cff68-772c-4381-b8c2-165cbe1e2385): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1dfea2db-a2f8-4f87-8843-41f349f6f3d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (1dfea2db-a2f8-4f87-8843-41f349f6f3d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fb3a7602-25e5-4565-8d57-4e6b2fcae569): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fb3a7602-25e5-4565-8d57-4e6b2fcae569): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5cc029bc-7063-417f-ab08-37e28ac1a05f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (5cc029bc-7063-417f-ab08-37e28ac1a05f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ec54e99-8d07-465c-98e3-1f2677743e0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2ec54e99-8d07-465c-98e3-1f2677743e0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (07c93977-6f4d-48e9-83f1-527b8da5df7d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (07c93977-6f4d-48e9-83f1-527b8da5df7d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (56efaa1e-3e70-4797-b829-f61952e2a803): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (56efaa1e-3e70-4797-b829-f61952e2a803): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (29e8feb2-cb27-4d70-9146-32b845e14e57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (29e8feb2-cb27-4d70-9146-32b845e14e57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (facb56b5-821c-4b36-aae5-1741296694a9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (facb56b5-821c-4b36-aae5-1741296694a9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eea29f30-0cfc-4c9f-985b-30eeb05669f9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (eea29f30-0cfc-4c9f-985b-30eeb05669f9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ce3561e-2fae-4a5e-bc38-cbb522eb0cee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0ce3561e-2fae-4a5e-bc38-cbb522eb0cee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f806a46-75ab-4eef-bf8d-ef227b4b540b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (0f806a46-75ab-4eef-bf8d-ef227b4b540b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ec58723e-dfa9-4b92-aeaa-cd997bd5b317): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (ec58723e-dfa9-4b92-aeaa-cd997bd5b317): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (952d0a0b-f071-4d3a-a300-a0d7380d77af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (952d0a0b-f071-4d3a-a300-a0d7380d77af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0fe51e57-95bf-4f48-9066-df0fcbd0700c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0fe51e57-95bf-4f48-9066-df0fcbd0700c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d54ca6f7-70e1-4524-82e1-dd68c2425622): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (d54ca6f7-70e1-4524-82e1-dd68c2425622): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0dea0911-0c40-4a0c-8c69-5dc721ed9f97): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (0dea0911-0c40-4a0c-8c69-5dc721ed9f97): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f4ef66c-8099-42ee-9ee2-461d0788da72): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (6f4ef66c-8099-42ee-9ee2-461d0788da72): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5dff6762-5219-406f-b23c-bf2cbff1838a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (5dff6762-5219-406f-b23c-bf2cbff1838a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f791aee-f25e-4c78-8e3b-92e1d7b95645): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (9f791aee-f25e-4c78-8e3b-92e1d7b95645): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (90bf81f4-31e9-4d96-b064-d6ae8c677ab7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (90bf81f4-31e9-4d96-b064-d6ae8c677ab7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4335e2a-0a39-4b01-8ac1-5628db5fabbb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (e4335e2a-0a39-4b01-8ac1-5628db5fabbb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (85c8b2ac-207c-4c2c-82cf-476e2f2d0a5e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (85c8b2ac-207c-4c2c-82cf-476e2f2d0a5e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9aa3d3bc-4eb7-4048-95da-a32df9047753): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (9aa3d3bc-4eb7-4048-95da-a32df9047753): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e0a303ce-c29d-4a55-8105-c4ecf95b3972): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (e0a303ce-c29d-4a55-8105-c4ecf95b3972): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bfdb302c-3e07-4055-b962-6bbbc969747b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (bfdb302c-3e07-4055-b962-6bbbc969747b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c20a03d0-304e-4167-9f67-b5a56c7bef54): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (c20a03d0-304e-4167-9f67-b5a56c7bef54): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (508fd517-c4a4-40fe-9aef-ca991a146f2a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (508fd517-c4a4-40fe-9aef-ca991a146f2a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19d58a8b-c320-4461-be46-25ed26b13577): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (19d58a8b-c320-4461-be46-25ed26b13577): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7698307f-7fc1-4032-ba32-3ada879ffa0e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (7698307f-7fc1-4032-ba32-3ada879ffa0e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (624ba37f-6c71-42b5-ab85-cafa3c1b2745): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (624ba37f-6c71-42b5-ab85-cafa3c1b2745): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f94c6974-3199-4996-8a83-9e3d374c6267): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f94c6974-3199-4996-8a83-9e3d374c6267): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5d6cc46-ebba-401f-a4cf-fa3e158d9dba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d5d6cc46-ebba-401f-a4cf-fa3e158d9dba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea5feecf-a490-4083-a7f2-513c6dac4306): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ea5feecf-a490-4083-a7f2-513c6dac4306): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (21b4a5ec-4500-48a5-85b3-f2c9928af89f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (21b4a5ec-4500-48a5-85b3-f2c9928af89f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c1b321aa-65c0-450f-8cb7-3fc827eca15c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (c1b321aa-65c0-450f-8cb7-3fc827eca15c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc4919dc-8671-4d4e-8f77-933e0c92b201): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fc4919dc-8671-4d4e-8f77-933e0c92b201): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e26bb6fb-e55d-4bfe-89d1-1553999753e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (e26bb6fb-e55d-4bfe-89d1-1553999753e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7594cc71-2159-4138-923e-7fa2c448e9bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (7594cc71-2159-4138-923e-7fa2c448e9bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5712aab7-f52f-4269-829b-02c6a0188785): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5712aab7-f52f-4269-829b-02c6a0188785): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2528c4a9-5cf0-49d6-8b25-e85b97fadacd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (2528c4a9-5cf0-49d6-8b25-e85b97fadacd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (04e64927-9292-4c74-a5db-b46104b025b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (04e64927-9292-4c74-a5db-b46104b025b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bf6a4c2e-c5f0-48f9-bac8-db0265400c42): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (bf6a4c2e-c5f0-48f9-bac8-db0265400c42): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a05b726b-c089-43e1-8490-9c3a439b1d24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a05b726b-c089-43e1-8490-9c3a439b1d24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f86608a-fbc5-4718-aee7-7d7c26d82334): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (4f86608a-fbc5-4718-aee7-7d7c26d82334): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a4a18a4-4e4c-409e-931f-086f4dfdc3fa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6a4a18a4-4e4c-409e-931f-086f4dfdc3fa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (446cac08-aaa3-4a99-840f-fccd14049356): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (446cac08-aaa3-4a99-840f-fccd14049356): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (81be191a-218c-434a-b2db-7f10975cf2ff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (81be191a-218c-434a-b2db-7f10975cf2ff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71425e8a-7821-4b9d-995f-6bc8b723f0ee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (71425e8a-7821-4b9d-995f-6bc8b723f0ee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b4768f98-5c02-4e42-aad2-92d6754823bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b4768f98-5c02-4e42-aad2-92d6754823bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8c7f0739-05ac-437f-86b0-cb34bdffdfcf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8c7f0739-05ac-437f-86b0-cb34bdffdfcf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c5df0397-d05e-48e9-80c9-84b26e33def5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c5df0397-d05e-48e9-80c9-84b26e33def5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0663253-898b-4637-a787-949ac70690a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c0663253-898b-4637-a787-949ac70690a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (94db8e5e-6364-46bf-add1-c3cd960eb2bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (94db8e5e-6364-46bf-add1-c3cd960eb2bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f8a8210-ab16-4bdb-9641-42cee28d6edc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (9f8a8210-ab16-4bdb-9641-42cee28d6edc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05882e27-1874-4e31-9d79-1cc862a8f11c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (05882e27-1874-4e31-9d79-1cc862a8f11c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee0bca4b-1484-49c7-9250-894fb06840b8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ee0bca4b-1484-49c7-9250-894fb06840b8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9cb7a90-22c3-4312-bcaa-5a3fbe3128bf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b9cb7a90-22c3-4312-bcaa-5a3fbe3128bf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a2078ea4-e3dd-41d7-991e-11920d820ed6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a2078ea4-e3dd-41d7-991e-11920d820ed6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d4725b2-c6ec-4fea-9a86-a1389f6d046e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3d4725b2-c6ec-4fea-9a86-a1389f6d046e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10a9fa64-552e-428f-b5a3-1729ae5deb29): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (10a9fa64-552e-428f-b5a3-1729ae5deb29): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f153479-334d-418e-b852-8dfe3e13d0b3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4f153479-334d-418e-b852-8dfe3e13d0b3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4d1c4a81-6d47-4173-b390-f17cb5e02292): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (4d1c4a81-6d47-4173-b390-f17cb5e02292): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (74d24dff-c9d8-4959-a285-49aec688e7b5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (74d24dff-c9d8-4959-a285-49aec688e7b5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fbcb4be1-f529-4432-8842-b123a310ce7a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (fbcb4be1-f529-4432-8842-b123a310ce7a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b33698e4-11c3-4581-9ce5-7ecbdee8e2ec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (b33698e4-11c3-4581-9ce5-7ecbdee8e2ec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2377190-4a12-4732-acbe-a9f5df8d820f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (b2377190-4a12-4732-acbe-a9f5df8d820f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5de095de-326e-4249-9b03-fb913a6bbd76): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5de095de-326e-4249-9b03-fb913a6bbd76): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11038474-42fd-4bb6-a0b8-0095688823c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (11038474-42fd-4bb6-a0b8-0095688823c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e67775e0-6873-44c5-aba3-4c676a5c4d44): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (e67775e0-6873-44c5-aba3-4c676a5c4d44): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b8dddd1-dde4-41d3-bf3f-fd5055d146f1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (0b8dddd1-dde4-41d3-bf3f-fd5055d146f1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c3c09c2b-9ff3-4674-82f2-570b39739dd1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (c3c09c2b-9ff3-4674-82f2-570b39739dd1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (182dcca3-0a0c-4a52-8410-544ecacacccb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (182dcca3-0a0c-4a52-8410-544ecacacccb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (cebd7a90-cd1a-42f1-accb-cc3aa32b04ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cebd7a90-cd1a-42f1-accb-cc3aa32b04ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4439c467-88e4-4a74-8400-f10ea5eb3c7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4439c467-88e4-4a74-8400-f10ea5eb3c7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (046bf06c-0fed-49a2-880d-7146626d95d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (046bf06c-0fed-49a2-880d-7146626d95d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7ed20bb0-4879-4891-a03b-e1bb98cf30f2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (7ed20bb0-4879-4891-a03b-e1bb98cf30f2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (63f8fc7b-7001-4f8a-ae29-dc51fed34d1e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (63f8fc7b-7001-4f8a-ae29-dc51fed34d1e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd30a338-05f7-41e3-b716-8aa38bbb8f1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (fd30a338-05f7-41e3-b716-8aa38bbb8f1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b220d219-8605-4d8c-89ce-1fe414ee00d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (b220d219-8605-4d8c-89ce-1fe414ee00d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bd75b523-6f9f-4e75-bbf9-45fe20268fb1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (bd75b523-6f9f-4e75-bbf9-45fe20268fb1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee1feb22-a729-4f20-b0e5-6b094bcc08ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ee1feb22-a729-4f20-b0e5-6b094bcc08ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d1381125-399a-4b91-b8dc-87c784c08d7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (d1381125-399a-4b91-b8dc-87c784c08d7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2bd87fd8-a3dd-481a-b419-480e333e023c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2bd87fd8-a3dd-481a-b419-480e333e023c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (14880fbd-7d02-4d73-938d-5bcb25e25a77): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (14880fbd-7d02-4d73-938d-5bcb25e25a77): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (060ea7b9-4f7f-47e6-be26-8a110d1f27ff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (060ea7b9-4f7f-47e6-be26-8a110d1f27ff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97f80f38-67ce-4c36-bbfa-a4db3a1d8996): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (97f80f38-67ce-4c36-bbfa-a4db3a1d8996): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (721b3382-0d5d-467c-8673-d5562cac06fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (721b3382-0d5d-467c-8673-d5562cac06fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5d99704-32de-4805-97ed-5001d0c69a48): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (d5d99704-32de-4805-97ed-5001d0c69a48): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9db55d4b-a285-4b5e-849e-56059a295e0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9db55d4b-a285-4b5e-849e-56059a295e0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (20209957-dbb4-4266-b199-9631ca38ce7e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (20209957-dbb4-4266-b199-9631ca38ce7e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d7ac0ab-190d-4fc8-ae05-010a5dcf1961): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1d7ac0ab-190d-4fc8-ae05-010a5dcf1961): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4ac0fe91-2823-4388-ad7e-4d6bb505be0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (4ac0fe91-2823-4388-ad7e-4d6bb505be0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7460f85-b242-4a55-8864-021b6d781b8e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f7460f85-b242-4a55-8864-021b6d781b8e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (47738317-923a-43cd-a1e6-44dce7864eb0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (47738317-923a-43cd-a1e6-44dce7864eb0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5d02a79b-8a82-44e2-906d-6b90c850266a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (5d02a79b-8a82-44e2-906d-6b90c850266a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (84a04394-6f6f-4586-8ae6-57bbef2f2a52): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (84a04394-6f6f-4586-8ae6-57bbef2f2a52): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9fa93a82-7317-480f-97cc-3e533d046fee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9fa93a82-7317-480f-97cc-3e533d046fee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1aef85a6-c531-4881-a621-ea95fc236025): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (1aef85a6-c531-4881-a621-ea95fc236025): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (17354596-5209-43ad-8826-af88779963ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (17354596-5209-43ad-8826-af88779963ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a58f7013-8889-469a-82e9-b417e2dd3927): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (a58f7013-8889-469a-82e9-b417e2dd3927): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c3399071-e58b-4ae9-8abb-25628833746a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c3399071-e58b-4ae9-8abb-25628833746a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bf0600bf-d000-46c5-95e4-7c9150e6b9a6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (bf0600bf-d000-46c5-95e4-7c9150e6b9a6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (faa41fb6-dad1-44ac-869a-381957e0a236): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (faa41fb6-dad1-44ac-869a-381957e0a236): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a44179a7-ae56-4812-b4fb-ffc46c54580a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (a44179a7-ae56-4812-b4fb-ffc46c54580a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (466d2beb-37d3-477f-82fb-cd65e95046db): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (466d2beb-37d3-477f-82fb-cd65e95046db): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aabe9982-2cf0-40e2-bbcd-b01a191ad7e2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (aabe9982-2cf0-40e2-bbcd-b01a191ad7e2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a8d7587b-48c0-45da-a5da-42b681329cf1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a8d7587b-48c0-45da-a5da-42b681329cf1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4805fc13-38be-4005-b393-f63b203bafd2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (4805fc13-38be-4005-b393-f63b203bafd2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (41596967-d3de-46ec-bf7e-a2298100e850): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (41596967-d3de-46ec-bf7e-a2298100e850): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8dd38db2-ee9b-4b23-82f7-d66546909b05): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (8dd38db2-ee9b-4b23-82f7-d66546909b05): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a1d40df8-159a-4072-91ae-4ce9e6fa96d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a1d40df8-159a-4072-91ae-4ce9e6fa96d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d73caa9d-81f7-447e-aa06-24f0111e60ac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (d73caa9d-81f7-447e-aa06-24f0111e60ac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (60014c46-b001-40f8-9dc4-3ebddc228c66): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (60014c46-b001-40f8-9dc4-3ebddc228c66): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (682c1da3-afd5-4f85-ae29-09e2110202e5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (682c1da3-afd5-4f85-ae29-09e2110202e5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e9988d0-fac5-427f-a74b-1b824f50108e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (9e9988d0-fac5-427f-a74b-1b824f50108e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f8f4617-2449-4577-bef6-637d752d9974): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (0f8f4617-2449-4577-bef6-637d752d9974): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c6cfd629-db47-41cd-a633-86a1a966d028): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (c6cfd629-db47-41cd-a633-86a1a966d028): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (efc12fe5-e83d-4a82-8be4-9b70470a9e5f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (efc12fe5-e83d-4a82-8be4-9b70470a9e5f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fdfcc4db-fd98-4e9a-82aa-03b0189b3918): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (fdfcc4db-fd98-4e9a-82aa-03b0189b3918): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7c4e97de-89c0-4000-877a-3f69a591edec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (7c4e97de-89c0-4000-877a-3f69a591edec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (455a5d44-e5ea-499e-aade-369554e5365f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (455a5d44-e5ea-499e-aade-369554e5365f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9dfd0226-0fff-4e54-968a-946c41a03530): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (9dfd0226-0fff-4e54-968a-946c41a03530): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86a97182-52fd-4fce-adfb-659ac115a582): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (86a97182-52fd-4fce-adfb-659ac115a582): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c7008054-1e0c-4226-8733-6eb22c036aca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (c7008054-1e0c-4226-8733-6eb22c036aca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca397573-df52-46f5-a0bc-873e92954636): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ca397573-df52-46f5-a0bc-873e92954636): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (46e55779-ee8a-4dcb-ab94-5214c8d4627c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (46e55779-ee8a-4dcb-ab94-5214c8d4627c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f6d5d77-17fe-4930-b57a-5fbed5b9a389): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (9f6d5d77-17fe-4930-b57a-5fbed5b9a389): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c617c9c6-7e36-47a6-b80b-8f558e639538): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c617c9c6-7e36-47a6-b80b-8f558e639538): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3a123c4b-9ad0-41b5-9a0e-ecd70a575c16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3a123c4b-9ad0-41b5-9a0e-ecd70a575c16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7c53316a-6fb6-460b-957a-77b9bd153968): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7c53316a-6fb6-460b-957a-77b9bd153968): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c3349036-f62f-43a6-98a6-2a3a42567798): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (c3349036-f62f-43a6-98a6-2a3a42567798): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91d57909-89aa-4573-aa19-b008d1b8e0bb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (91d57909-89aa-4573-aa19-b008d1b8e0bb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12f2fb38-13e0-49a5-b10c-6132a0bf41b1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (12f2fb38-13e0-49a5-b10c-6132a0bf41b1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (716f4feb-9e11-4069-8576-eb40a1171500): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (716f4feb-9e11-4069-8576-eb40a1171500): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3110fc42-3815-4832-bc7f-b4a16491ca3c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (3110fc42-3815-4832-bc7f-b4a16491ca3c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b90ee573-e311-4c04-8bd6-e12c11cd35d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b90ee573-e311-4c04-8bd6-e12c11cd35d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d311afb4-1e35-472a-80d6-ac853ffa2a5c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (d311afb4-1e35-472a-80d6-ac853ffa2a5c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (72aeb834-a645-466b-9b0e-7824acff2f44): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (72aeb834-a645-466b-9b0e-7824acff2f44): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (294a7766-0585-4f7e-82e9-16f71a5232d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (294a7766-0585-4f7e-82e9-16f71a5232d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4ad2a789-0dc5-4817-8025-c75568148da6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4ad2a789-0dc5-4817-8025-c75568148da6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aab78efa-5da6-4fc2-af21-fc80f901d95e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (aab78efa-5da6-4fc2-af21-fc80f901d95e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fe860076-cefd-4a77-8a9a-4ce69ca91358): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fe860076-cefd-4a77-8a9a-4ce69ca91358): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7a060f55-d95f-4b2b-bfd0-6983ec1a2ef6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (7a060f55-d95f-4b2b-bfd0-6983ec1a2ef6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c99046d1-3a88-42fe-9103-1b6c546638fa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c99046d1-3a88-42fe-9103-1b6c546638fa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ce123a9-7f4c-4335-a6be-478a302479f2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (5ce123a9-7f4c-4335-a6be-478a302479f2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c49712d5-c298-4563-b652-0f9a9d1c4b5c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c49712d5-c298-4563-b652-0f9a9d1c4b5c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (462ebf6d-0c3c-4234-a9eb-0d7db383ffd5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (462ebf6d-0c3c-4234-a9eb-0d7db383ffd5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (956d5dfd-a848-4752-b943-8a540bc29e0e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (956d5dfd-a848-4752-b943-8a540bc29e0e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52084c16-9f11-4ca8-97db-a3e354322edd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (52084c16-9f11-4ca8-97db-a3e354322edd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f2e9951-d616-4713-b275-3fab44f52e72): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4f2e9951-d616-4713-b275-3fab44f52e72): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b7ce5e18-c050-448a-ba02-6f7faeeae55c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (b7ce5e18-c050-448a-ba02-6f7faeeae55c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d33cd475-a171-4dae-9e37-85ba824b29f0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d33cd475-a171-4dae-9e37-85ba824b29f0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eef5edcd-fa3a-4eb0-a51a-9342648889f0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (eef5edcd-fa3a-4eb0-a51a-9342648889f0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a3c5886-5eb7-4cb2-8ee3-3c395e89570d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1a3c5886-5eb7-4cb2-8ee3-3c395e89570d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b4661b8-11c9-44e1-8f95-be75aee7c2c6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0b4661b8-11c9-44e1-8f95-be75aee7c2c6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (729fb507-19b4-4956-8d60-384b391474b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (729fb507-19b4-4956-8d60-384b391474b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c906e9d-bd21-4f9e-96c8-b4182cbf9451): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (5c906e9d-bd21-4f9e-96c8-b4182cbf9451): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6383225e-48d3-4afb-be58-694f0d2a0483): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6383225e-48d3-4afb-be58-694f0d2a0483): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7b62838-a17b-44c8-a105-45685c7c5e58): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (f7b62838-a17b-44c8-a105-45685c7c5e58): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (382ad824-744e-46f1-83d9-08b35bb62245): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (382ad824-744e-46f1-83d9-08b35bb62245): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c8ff66ed-8359-41a3-bb09-536edc5fae27): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (c8ff66ed-8359-41a3-bb09-536edc5fae27): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42a7de26-c14a-450b-92a3-69f56d46168e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (42a7de26-c14a-450b-92a3-69f56d46168e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2919f7c9-1948-4c8f-88d2-e158887e2fdb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (2919f7c9-1948-4c8f-88d2-e158887e2fdb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (18b128b4-9645-4637-8e92-561492ea9b7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (18b128b4-9645-4637-8e92-561492ea9b7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8ec84fc4-385e-454d-8a19-a08051b20b2a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (8ec84fc4-385e-454d-8a19-a08051b20b2a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6451cc7-6803-43ec-ac09-ad93ceb6eecf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (a6451cc7-6803-43ec-ac09-ad93ceb6eecf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff06acb6-8659-4913-b812-b166241b4352): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (ff06acb6-8659-4913-b812-b166241b4352): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c65df098-b04d-48fd-b8d1-e50e1b180060): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (c65df098-b04d-48fd-b8d1-e50e1b180060): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc8ec827-e0ae-49fa-841c-0e9d286830d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (dc8ec827-e0ae-49fa-841c-0e9d286830d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (e3273142-567a-41bf-b618-ae1a4903179d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e3273142-567a-41bf-b618-ae1a4903179d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bb50da38-1af5-4aba-862f-d369fd142e4f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bb50da38-1af5-4aba-862f-d369fd142e4f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19b97835-99c4-4919-8e50-2fe795be8eed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (19b97835-99c4-4919-8e50-2fe795be8eed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef22bdec-2f8f-4037-b605-1853c28aa4fc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (ef22bdec-2f8f-4037-b605-1853c28aa4fc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ce200f14-f3e2-4502-aa44-52f7482cfc7d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ce200f14-f3e2-4502-aa44-52f7482cfc7d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (87069d02-cfcb-4d42-a91d-34ef85e38163): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (87069d02-cfcb-4d42-a91d-34ef85e38163): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7489d6a6-a29f-4a37-b67e-4409e73cb42b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (7489d6a6-a29f-4a37-b67e-4409e73cb42b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1fbd695f-9bc8-4c92-bea7-e2f9d515dff6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (1fbd695f-9bc8-4c92-bea7-e2f9d515dff6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f0d38399-4d37-4eeb-b6e2-6f774f2dfc53): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f0d38399-4d37-4eeb-b6e2-6f774f2dfc53): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4ceb86ba-bd1f-4e23-9581-d82ac48aa037): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (4ceb86ba-bd1f-4e23-9581-d82ac48aa037): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d09ee506-3bd7-49d4-bd51-7786ca68ff38): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d09ee506-3bd7-49d4-bd51-7786ca68ff38): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f559d2ba-36cd-4c35-b4db-a65646e4bf2d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (f559d2ba-36cd-4c35-b4db-a65646e4bf2d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (23ad438a-e180-4b2e-baf7-4c5cc2e28d96): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (23ad438a-e180-4b2e-baf7-4c5cc2e28d96): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b30eb10-1d1c-4afe-9a60-7bc82dc9381b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (2b30eb10-1d1c-4afe-9a60-7bc82dc9381b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b497a670-071a-446f-b1b9-939e076c3509): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b497a670-071a-446f-b1b9-939e076c3509): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a75ff97b-15dc-4f18-9ff5-1e9171969ae4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (a75ff97b-15dc-4f18-9ff5-1e9171969ae4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (555a3c14-54cd-4e62-95e4-8a08291757c6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (555a3c14-54cd-4e62-95e4-8a08291757c6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8fc9dff0-0126-4026-9980-5016ba6a571b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (8fc9dff0-0126-4026-9980-5016ba6a571b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5971a9bd-1465-47b4-818f-37262c2eebaf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5971a9bd-1465-47b4-818f-37262c2eebaf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca7f0477-7d85-4122-a259-2c7b36512659): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (ca7f0477-7d85-4122-a259-2c7b36512659): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (943de094-0ce0-424c-bf47-4db3358ce618): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (943de094-0ce0-424c-bf47-4db3358ce618): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (180bc2a2-f3cf-4f65-9a96-512a88adaa43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (180bc2a2-f3cf-4f65-9a96-512a88adaa43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c1554569-62fd-4157-ab0a-9d555fc0d873): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (c1554569-62fd-4157-ab0a-9d555fc0d873): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97a3cb3f-f3be-4bec-b91f-90d866daecae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (97a3cb3f-f3be-4bec-b91f-90d866daecae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5913047e-0b6e-4cd6-af0b-b5b2f1451e1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5913047e-0b6e-4cd6-af0b-b5b2f1451e1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (88ee6354-82ef-416b-bc4f-55dafc4e80ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (88ee6354-82ef-416b-bc4f-55dafc4e80ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7331e72e-7e40-423b-9908-22e4596b0c04): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7331e72e-7e40-423b-9908-22e4596b0c04): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d2b7174a-fa97-4702-84d1-25c8bcab0b7c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (d2b7174a-fa97-4702-84d1-25c8bcab0b7c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3089c05-786d-4846-9f2b-1b0742291a9f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f3089c05-786d-4846-9f2b-1b0742291a9f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (41f02941-8d19-4e97-913f-fb8814161bf1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (41f02941-8d19-4e97-913f-fb8814161bf1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6361b09e-27a5-4ef6-8b0b-8fbfc7cc6ad6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6361b09e-27a5-4ef6-8b0b-8fbfc7cc6ad6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (22068a86-e4b9-4199-897b-175025b27a9b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (22068a86-e4b9-4199-897b-175025b27a9b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fa4497c-c509-451f-8d42-3cb34d65e632): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7fa4497c-c509-451f-8d42-3cb34d65e632): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d83d63ee-0758-46ba-be28-98d2b297f08c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (d83d63ee-0758-46ba-be28-98d2b297f08c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8941f210-5e0d-4b8e-ac90-267be8b28ac9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8941f210-5e0d-4b8e-ac90-267be8b28ac9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (de65ff5e-9e00-4902-8b2d-4f8f76ff9e45): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (de65ff5e-9e00-4902-8b2d-4f8f76ff9e45): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ec764f15-8411-4062-8fe5-eba7a85aa267): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (ec764f15-8411-4062-8fe5-eba7a85aa267): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c49b3bea-cec0-4bd1-9a2d-4d639bd4f20c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (c49b3bea-cec0-4bd1-9a2d-4d639bd4f20c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (194635ce-450f-4246-9ec8-7d92e45b115f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (194635ce-450f-4246-9ec8-7d92e45b115f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6d9f58d8-e390-47be-8094-719ef2c6510e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (6d9f58d8-e390-47be-8094-719ef2c6510e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8d861ebd-9ece-462a-ad55-a5bc899752f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (8d861ebd-9ece-462a-ad55-a5bc899752f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f1187478-eb0f-46ad-a8fc-3aebe5a8c449): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (f1187478-eb0f-46ad-a8fc-3aebe5a8c449): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (68e81dac-f6c4-4ece-a4a3-7ea8fb19552b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (68e81dac-f6c4-4ece-a4a3-7ea8fb19552b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb172a9f-468a-4304-9876-bec2ead92c0c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (cb172a9f-468a-4304-9876-bec2ead92c0c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (686b0ce7-e1a4-4ccf-82ee-80d150032efe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (686b0ce7-e1a4-4ccf-82ee-80d150032efe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (73112124-4fba-45a3-941f-68863a54f2fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (73112124-4fba-45a3-941f-68863a54f2fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9d522670-c5ba-45fb-9da6-b99bd377f645): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (9d522670-c5ba-45fb-9da6-b99bd377f645): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15f4f589-a60f-4090-a1ad-a3c896b6d38e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (15f4f589-a60f-4090-a1ad-a3c896b6d38e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad8e3a92-4feb-429d-bc73-495abf9f088d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (ad8e3a92-4feb-429d-bc73-495abf9f088d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3c403db0-0193-440a-a093-bb04d3fd8262): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (3c403db0-0193-440a-a093-bb04d3fd8262): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (570bc26d-24d9-4d33-9b31-e8bf5aa84983): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (570bc26d-24d9-4d33-9b31-e8bf5aa84983): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f40aa950-4ddf-4561-a4a0-72d4a2375111): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (f40aa950-4ddf-4561-a4a0-72d4a2375111): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f2ad9a6a-7e09-46f7-9362-2425f4112dab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f2ad9a6a-7e09-46f7-9362-2425f4112dab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f888ea1-f4d9-48f5-8517-90b30d63874f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (1f888ea1-f4d9-48f5-8517-90b30d63874f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6bc6902c-55c2-46f4-8307-085c9658a18f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (6bc6902c-55c2-46f4-8307-085c9658a18f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f517fa2-8a65-40f8-acc7-90175446760f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5f517fa2-8a65-40f8-acc7-90175446760f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9dacf27b-1bcd-4c2a-ad5a-9f605853714a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9dacf27b-1bcd-4c2a-ad5a-9f605853714a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e2336bc7-ce93-4e6a-a416-557e16b4e920): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e2336bc7-ce93-4e6a-a416-557e16b4e920): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ab9f7c70-bc0a-42bb-a126-ade54acca577): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (ab9f7c70-bc0a-42bb-a126-ade54acca577): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (901b04de-c8c8-4d99-aff0-ead6fc1a5478): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (901b04de-c8c8-4d99-aff0-ead6fc1a5478): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3879f260-d9e7-47c6-b536-0ddc7d5db5af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3879f260-d9e7-47c6-b536-0ddc7d5db5af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (760443f3-95ee-496d-8048-07cf53641a3e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (760443f3-95ee-496d-8048-07cf53641a3e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (79c48149-f4da-4056-acce-ff416d572bb3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (79c48149-f4da-4056-acce-ff416d572bb3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db894c2c-c539-459b-90fc-fbccc3a19394): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (db894c2c-c539-459b-90fc-fbccc3a19394): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aef1953d-9560-46e9-b4d7-ba450fb59eba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (aef1953d-9560-46e9-b4d7-ba450fb59eba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4938795e-4c23-4ad0-866a-14a153d09f08): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4938795e-4c23-4ad0-866a-14a153d09f08): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d416a8c0-df75-4835-a1f7-82c450b320e5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (d416a8c0-df75-4835-a1f7-82c450b320e5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a24d84d4-1d33-41f4-9f64-1fc577893f5b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a24d84d4-1d33-41f4-9f64-1fc577893f5b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b87d7f4f-8b92-430f-ab17-7c9a96260c54): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (b87d7f4f-8b92-430f-ab17-7c9a96260c54): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b0a2211-8733-4ff2-86fb-b613d17b12a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1b0a2211-8733-4ff2-86fb-b613d17b12a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eba32107-71b8-4675-b1d4-7de7037fe3de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (eba32107-71b8-4675-b1d4-7de7037fe3de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (abebb2d7-6fb7-4c03-a006-24a9a64eecc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (abebb2d7-6fb7-4c03-a006-24a9a64eecc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (488d5753-6926-405d-ba59-187a4d493c51): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (488d5753-6926-405d-ba59-187a4d493c51): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42b5f76f-95b0-4277-82e1-c35833a739cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (42b5f76f-95b0-4277-82e1-c35833a739cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a99e8adf-309d-48b1-be3d-5b6a283a26e1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a99e8adf-309d-48b1-be3d-5b6a283a26e1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (96acb681-85a1-4346-93c7-cd5c202d1284): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (96acb681-85a1-4346-93c7-cd5c202d1284): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (94a43384-70a8-4135-9d54-41c6bc1bf948): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (94a43384-70a8-4135-9d54-41c6bc1bf948): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (748601c1-5e2a-4ead-a1ff-412725bcc3f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (748601c1-5e2a-4ead-a1ff-412725bcc3f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (efd92322-7081-42b5-9694-570ccf2e8f23): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (efd92322-7081-42b5-9694-570ccf2e8f23): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b0123d4c-af8b-42d9-85c2-ee5d18797661): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b0123d4c-af8b-42d9-85c2-ee5d18797661): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f11b378-971d-4d38-a044-c33827bcbcb8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4f11b378-971d-4d38-a044-c33827bcbcb8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f63081e-d703-4b01-9e54-4b2784db20fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3f63081e-d703-4b01-9e54-4b2784db20fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b4739915-4687-421d-a18b-731db4439060): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b4739915-4687-421d-a18b-731db4439060): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee49e475-fa71-47e2-9679-6d6923ecd968): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ee49e475-fa71-47e2-9679-6d6923ecd968): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d89437f3-e81a-41da-9aa9-10f77de0bde7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (d89437f3-e81a-41da-9aa9-10f77de0bde7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (85edf98a-85ab-48fb-a70a-8aca4b9df443): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (85edf98a-85ab-48fb-a70a-8aca4b9df443): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bade4ac3-5e25-4404-b4c0-6ec6e4db6a85): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (bade4ac3-5e25-4404-b4c0-6ec6e4db6a85): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3cc5177d-d785-4ca9-b6ba-c458b40f86f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (3cc5177d-d785-4ca9-b6ba-c458b40f86f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a7f87af-541c-481f-b3f7-063d6e16e05f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (6a7f87af-541c-481f-b3f7-063d6e16e05f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c9c07329-df7c-4faa-a3e5-13d034584f9b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (c9c07329-df7c-4faa-a3e5-13d034584f9b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f43e7274-0efa-46ec-96ec-9eae3f4e631b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (f43e7274-0efa-46ec-96ec-9eae3f4e631b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (48c96b89-aef5-4efb-962b-012c5ed2ed56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (48c96b89-aef5-4efb-962b-012c5ed2ed56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42c6bc30-5748-419a-9e8d-a72a0281c157): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (42c6bc30-5748-419a-9e8d-a72a0281c157): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c6fb9b81-31fa-47b8-8542-6e365fdc7d3c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (c6fb9b81-31fa-47b8-8542-6e365fdc7d3c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1373c8e7-bf28-4c5b-86d8-d140f1be3f1b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (1373c8e7-bf28-4c5b-86d8-d140f1be3f1b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2d69a813-7fdd-4a5e-80bb-fb8cf559701b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (2d69a813-7fdd-4a5e-80bb-fb8cf559701b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad4593fa-d3d9-42f5-b315-56b4a051f8d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (ad4593fa-d3d9-42f5-b315-56b4a051f8d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (9995133e-3083-4b70-805e-ef0f46446771): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9995133e-3083-4b70-805e-ef0f46446771): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb8fbad1-6a90-4c95-91f8-0b31d7ec9df7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eb8fbad1-6a90-4c95-91f8-0b31d7ec9df7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e2da558-f02c-4bb4-9eb1-0e8683b02a95): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2e2da558-f02c-4bb4-9eb1-0e8683b02a95): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7ba7a283-c6ec-4e57-af1c-1cca09e3d594): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (7ba7a283-c6ec-4e57-af1c-1cca09e3d594): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9d375297-a3eb-407b-8827-590542f0bd8e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9d375297-a3eb-407b-8827-590542f0bd8e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7ad34122-7cc3-47cc-a8de-fb48d156256c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (7ad34122-7cc3-47cc-a8de-fb48d156256c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (160c2077-0d83-4823-81a3-a76c4881571d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (160c2077-0d83-4823-81a3-a76c4881571d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (048056ab-ab12-4199-a624-d3710214326e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (048056ab-ab12-4199-a624-d3710214326e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (291d0f84-8e75-4030-98e6-4fd9948eb32e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (291d0f84-8e75-4030-98e6-4fd9948eb32e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ab09e041-dd2a-414e-940d-911a30968d86): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (ab09e041-dd2a-414e-940d-911a30968d86): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bc254898-e843-4735-b9fb-010f67862135): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bc254898-e843-4735-b9fb-010f67862135): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c97c6982-ab4f-4c4c-8ecf-4ab3dd8e191b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (c97c6982-ab4f-4c4c-8ecf-4ab3dd8e191b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c4f2e76b-4249-4662-af3e-5d7f0e361c57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c4f2e76b-4249-4662-af3e-5d7f0e361c57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2a8c0c9-dadf-4360-b030-79719f65eff7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (c2a8c0c9-dadf-4360-b030-79719f65eff7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (487ff122-ccf9-4b15-a816-83e60f6b2e25): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (487ff122-ccf9-4b15-a816-83e60f6b2e25): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d8b88f09-6087-4bea-beb7-01e23e6c1692): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (d8b88f09-6087-4bea-beb7-01e23e6c1692): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8d49291c-64af-4dfe-97c5-70f8175deaa1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8d49291c-64af-4dfe-97c5-70f8175deaa1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d7baa65-b756-40fd-a6fa-b2254a69a5ab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (3d7baa65-b756-40fd-a6fa-b2254a69a5ab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ce00961-fabd-48f1-816b-5b6602e147a0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5ce00961-fabd-48f1-816b-5b6602e147a0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f2072b9-df06-4ce7-992a-fa63ff2bcddb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (1f2072b9-df06-4ce7-992a-fa63ff2bcddb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cbb6bb7e-831c-45ed-a1d9-cdc8a4518b3a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cbb6bb7e-831c-45ed-a1d9-cdc8a4518b3a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9c79f90-a40f-48b2-93d9-7439bfe2aa83): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b9c79f90-a40f-48b2-93d9-7439bfe2aa83): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eeb3e410-b69f-4663-bff1-97dda29e13a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (eeb3e410-b69f-4663-bff1-97dda29e13a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a50b1ecf-800c-4240-8e2f-870a54582b60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (a50b1ecf-800c-4240-8e2f-870a54582b60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3edfb6ee-aafc-4be6-862b-687b8d24f3ec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3edfb6ee-aafc-4be6-862b-687b8d24f3ec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (07531ee1-e452-4ab9-aa85-5297c73efdb3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (07531ee1-e452-4ab9-aa85-5297c73efdb3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f01097dc-6f64-4b48-a1e4-4a23cf0854c6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f01097dc-6f64-4b48-a1e4-4a23cf0854c6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4e2cb1ee-c915-4d65-a3bc-2130dfd14425): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (4e2cb1ee-c915-4d65-a3bc-2130dfd14425): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (94dd65b3-0c3c-4828-9526-cc8e4c421726): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (94dd65b3-0c3c-4828-9526-cc8e4c421726): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70690ecb-0aec-42c4-ab3e-ccfc4b1b252c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (70690ecb-0aec-42c4-ab3e-ccfc4b1b252c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d214a02e-874f-47d4-82aa-c5096fffb4f1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d214a02e-874f-47d4-82aa-c5096fffb4f1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e8aca90-289f-4fb2-bc5e-462b0ff898d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (6e8aca90-289f-4fb2-bc5e-462b0ff898d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (00904695-e0ad-4327-80f5-e5b4d681be45): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (00904695-e0ad-4327-80f5-e5b4d681be45): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97d446c8-5141-4a6a-8f25-f7e6eaeb7d7d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (97d446c8-5141-4a6a-8f25-f7e6eaeb7d7d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c5074863-73f1-4ac9-9699-8908e08c738b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c5074863-73f1-4ac9-9699-8908e08c738b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (82500ddc-417f-470a-b4c0-b51e150558ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (82500ddc-417f-470a-b4c0-b51e150558ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4b68b86b-e177-45b9-8ac0-4997c3c90d34): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (4b68b86b-e177-45b9-8ac0-4997c3c90d34): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1250065e-1a7e-433c-bbac-2ecd3a0e7b60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (1250065e-1a7e-433c-bbac-2ecd3a0e7b60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05b20e8b-4302-4fb9-a1c3-8873f558d221): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (05b20e8b-4302-4fb9-a1c3-8873f558d221): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6caf51ed-88c4-4802-ab11-792969c93900): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (6caf51ed-88c4-4802-ab11-792969c93900): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (82949ce3-0f96-44c4-b81e-ffb226ea62e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (82949ce3-0f96-44c4-b81e-ffb226ea62e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee742242-3166-4114-a927-bc4cea5a6ab5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (ee742242-3166-4114-a927-bc4cea5a6ab5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (694152ab-ffc7-49d2-b289-b6ddb029c2cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (694152ab-ffc7-49d2-b289-b6ddb029c2cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (973ab295-1c53-4fd7-b238-88cf2600ae7e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (973ab295-1c53-4fd7-b238-88cf2600ae7e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (50bc0334-c1f5-43e6-82db-1d49d4734d87): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (50bc0334-c1f5-43e6-82db-1d49d4734d87): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f4be4487-038c-4d31-817c-9a41896eeb1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f4be4487-038c-4d31-817c-9a41896eeb1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (84555283-d54e-4dc3-b92f-4b9675173e1d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (84555283-d54e-4dc3-b92f-4b9675173e1d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d546517e-b978-4758-8442-edb1503fba65): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (d546517e-b978-4758-8442-edb1503fba65): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c35661f3-58fc-4e3b-b821-779f5b9264d5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (c35661f3-58fc-4e3b-b821-779f5b9264d5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (928a30e4-5c17-406d-abb4-0a721e9a7828): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (928a30e4-5c17-406d-abb4-0a721e9a7828): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dbe4fd05-e26f-4b3e-afbe-44ae8aa8b50c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (dbe4fd05-e26f-4b3e-afbe-44ae8aa8b50c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7f72c3a7-ef5d-4e9b-ad73-361fcbf87738): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (7f72c3a7-ef5d-4e9b-ad73-361fcbf87738): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d3888998-6b9d-4145-b050-85def9a7f46d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d3888998-6b9d-4145-b050-85def9a7f46d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed597053-78b0-4909-853b-d8b6fbd0a196): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (ed597053-78b0-4909-853b-d8b6fbd0a196): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2885c456-bd7d-41ad-bcdf-beb7a4c26bb6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (2885c456-bd7d-41ad-bcdf-beb7a4c26bb6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (21f020b1-50bc-4379-b4f8-f9c819ab5d15): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (21f020b1-50bc-4379-b4f8-f9c819ab5d15): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ec1c9f68-3d6e-44ff-ab10-341a70aa89dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ec1c9f68-3d6e-44ff-ab10-341a70aa89dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (426a629e-d5e5-4599-9b02-dbe6bffec2a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (426a629e-d5e5-4599-9b02-dbe6bffec2a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6cd3332-8a94-4a40-9380-3e6bccb21065): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (a6cd3332-8a94-4a40-9380-3e6bccb21065): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c93f1d6-9b6b-4d86-996e-c0891ba42eda): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (9c93f1d6-9b6b-4d86-996e-c0891ba42eda): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0a005fcd-37ed-49fd-a8ea-7c081c8e07fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0a005fcd-37ed-49fd-a8ea-7c081c8e07fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (760d2f03-0b2c-4bbc-8563-3c684aa5bf73): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (760d2f03-0b2c-4bbc-8563-3c684aa5bf73): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cef31d03-fbdb-4c5f-98d0-bdfcb7d71a7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (cef31d03-fbdb-4c5f-98d0-bdfcb7d71a7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (497fcc47-3bf8-4414-830c-4944d05f4ed8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (497fcc47-3bf8-4414-830c-4944d05f4ed8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f95fe87-e416-469a-aac5-3cf617a2eea3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (6f95fe87-e416-469a-aac5-3cf617a2eea3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (458e6850-d8f9-42f5-aac3-692623f17d0c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (458e6850-d8f9-42f5-aac3-692623f17d0c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55982f9c-1c24-4e4e-98c6-70c4f5ffbb14): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (55982f9c-1c24-4e4e-98c6-70c4f5ffbb14): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9bb67b22-8188-4b44-a24c-6b72b34aeca5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9bb67b22-8188-4b44-a24c-6b72b34aeca5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (baa88a15-c723-4b15-940b-1625b734534d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (baa88a15-c723-4b15-940b-1625b734534d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a500d72-476a-44dc-862d-bdaa19219ec4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4a500d72-476a-44dc-862d-bdaa19219ec4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad0c54fa-817e-4744-89dc-8f208048f828): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (ad0c54fa-817e-4744-89dc-8f208048f828): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b42a356a-0d07-4d99-81d7-3dc34345b5fd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b42a356a-0d07-4d99-81d7-3dc34345b5fd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3594e1fb-e1a5-45a9-a701-b7f44570b387): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (3594e1fb-e1a5-45a9-a701-b7f44570b387): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f1fcd0f-f1ee-48b2-954e-137c66aabfa2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6f1fcd0f-f1ee-48b2-954e-137c66aabfa2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c68ec08-769e-4360-a601-cea06a03a0b6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5c68ec08-769e-4360-a601-cea06a03a0b6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b5bf7426-7698-4196-b170-3751195e58a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b5bf7426-7698-4196-b170-3751195e58a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c683a244-bd21-4695-999e-6d3d5272a6a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c683a244-bd21-4695-999e-6d3d5272a6a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ffd142ff-8957-4c79-95fb-53dea29fda88): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ffd142ff-8957-4c79-95fb-53dea29fda88): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d9d93b11-c309-4bca-a78d-5e3f2189b0ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (d9d93b11-c309-4bca-a78d-5e3f2189b0ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (911f8519-c019-4799-b082-e9beba8636f8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (911f8519-c019-4799-b082-e9beba8636f8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9bedc0e8-be35-495b-8cd4-9d23adeb3f98): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9bedc0e8-be35-495b-8cd4-9d23adeb3f98): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c35b4ba7-2425-45f6-8680-0ba748429a0c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c35b4ba7-2425-45f6-8680-0ba748429a0c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f98d4d2-2f54-4060-8316-d77c15b43665): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4f98d4d2-2f54-4060-8316-d77c15b43665): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70ab64ef-2cfc-4e43-8d3b-deab29942610): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (70ab64ef-2cfc-4e43-8d3b-deab29942610): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ba0c2234-05c2-4047-a632-3bdca0a3c3d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (ba0c2234-05c2-4047-a632-3bdca0a3c3d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b31c95ba-e4bd-40b5-a318-eff40468f30c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b31c95ba-e4bd-40b5-a318-eff40468f30c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (851130d5-2d04-4ade-8910-fb182b64cbdc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (851130d5-2d04-4ade-8910-fb182b64cbdc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c396d9eb-7f78-4e4f-b628-6ff62487a974): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (c396d9eb-7f78-4e4f-b628-6ff62487a974): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (75cbcf32-b03b-4eb1-a218-3c43687b30a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (75cbcf32-b03b-4eb1-a218-3c43687b30a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ddef0e2e-cf65-46bc-ad40-0bbfeb19fb87): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (ddef0e2e-cf65-46bc-ad40-0bbfeb19fb87): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (81714a25-6769-4905-b829-ab3df4d50a56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (81714a25-6769-4905-b829-ab3df4d50a56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (776ee806-d225-4448-98a5-8e52c962b96d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (776ee806-d225-4448-98a5-8e52c962b96d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff10103e-2783-4095-b32d-3b3bdc0ff324): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (ff10103e-2783-4095-b32d-3b3bdc0ff324): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (22f98850-95c8-4e0b-b2ab-42fd3a98846e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (22f98850-95c8-4e0b-b2ab-42fd3a98846e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bcca1541-b8ea-4256-a056-cb08798d2ad1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (bcca1541-b8ea-4256-a056-cb08798d2ad1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a49c55e-8b88-49f1-a9f8-919999d560f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (4a49c55e-8b88-49f1-a9f8-919999d560f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea3208d4-e352-48ba-abd8-0bc55e73174e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (ea3208d4-e352-48ba-abd8-0bc55e73174e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (c6cfc39e-db38-4045-a232-daa1b915da71): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c6cfc39e-db38-4045-a232-daa1b915da71): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b6da2ae1-a812-449c-b3e1-6af8c5698608): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b6da2ae1-a812-449c-b3e1-6af8c5698608): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ebfdfbe2-061e-4876-936d-fa3ade40a544): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ebfdfbe2-061e-4876-936d-fa3ade40a544): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e14d27b0-2975-4cb2-8dec-2b8b7cf5be54): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (e14d27b0-2975-4cb2-8dec-2b8b7cf5be54): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8e56e8b4-6696-4d8c-8a48-bdad43f46bcf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8e56e8b4-6696-4d8c-8a48-bdad43f46bcf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5734275b-f623-4c2a-9454-b305681e1857): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (5734275b-f623-4c2a-9454-b305681e1857): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7c8de442-0881-42a7-a416-5ce183e47895): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (7c8de442-0881-42a7-a416-5ce183e47895): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (37b56d3d-0ce8-4f5f-acac-c07cfa395204): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (37b56d3d-0ce8-4f5f-acac-c07cfa395204): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0bb40989-cfd5-4cc2-a3b9-b62b628b7969): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0bb40989-cfd5-4cc2-a3b9-b62b628b7969): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (277cd3fa-c82e-4998-bc9d-9bf6dd90ca8a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (277cd3fa-c82e-4998-bc9d-9bf6dd90ca8a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7c344ef-ed1a-4bab-861d-14ce8318a74b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d7c344ef-ed1a-4bab-861d-14ce8318a74b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f0b486b1-dea8-4ff8-b96e-d28e28ba374e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (f0b486b1-dea8-4ff8-b96e-d28e28ba374e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1af128e0-f6e9-4e2f-8c7b-8d064b86739b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1af128e0-f6e9-4e2f-8c7b-8d064b86739b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (67058898-1226-4fdc-9689-2116bf98576f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (67058898-1226-4fdc-9689-2116bf98576f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4ac54903-cad3-4658-8c74-0fe86ca501d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4ac54903-cad3-4658-8c74-0fe86ca501d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (82244103-df3e-4ea2-85ad-011c2694ad0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (82244103-df3e-4ea2-85ad-011c2694ad0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d9dc1214-b8a7-4f59-9c90-f2a1d75909d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d9dc1214-b8a7-4f59-9c90-f2a1d75909d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dfa28564-52e5-4602-9e8d-c4f1072ba020): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (dfa28564-52e5-4602-9e8d-c4f1072ba020): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05e9d877-e792-4f47-99bf-be91cc5dc907): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (05e9d877-e792-4f47-99bf-be91cc5dc907): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (afa47da7-08a0-4326-b8f6-fa046a126bdf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (afa47da7-08a0-4326-b8f6-fa046a126bdf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef5e3378-21f5-4e05-b5d8-504aad1937ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ef5e3378-21f5-4e05-b5d8-504aad1937ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7e06cf6a-48cf-40c3-be72-860664b2cae5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7e06cf6a-48cf-40c3-be72-860664b2cae5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97cf88b9-5374-4ca1-afc5-968d389f967f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (97cf88b9-5374-4ca1-afc5-968d389f967f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (709c94f8-b2c4-4fd4-9278-5e0ad1b28056): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (709c94f8-b2c4-4fd4-9278-5e0ad1b28056): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ecad862-ee58-474a-abbb-6f7ecdaf4a9e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2ecad862-ee58-474a-abbb-6f7ecdaf4a9e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e2cc1bd-d65b-49c3-9e96-6a0d74bbd080): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (1e2cc1bd-d65b-49c3-9e96-6a0d74bbd080): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eddced10-2936-4b18-becb-646d78224e0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eddced10-2936-4b18-becb-646d78224e0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd8c6221-78db-4a98-b066-9fe0156dccb5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (cd8c6221-78db-4a98-b066-9fe0156dccb5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1c408a35-5369-4d52-83ee-2c53b25ec760): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1c408a35-5369-4d52-83ee-2c53b25ec760): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e44262ca-569c-4fef-9359-bf06d363d722): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (e44262ca-569c-4fef-9359-bf06d363d722): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (32a38f30-d99a-4f19-b00b-535a59ac4d26): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (32a38f30-d99a-4f19-b00b-535a59ac4d26): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d628e38-9176-44f4-b5d4-a95a20f29dee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (1d628e38-9176-44f4-b5d4-a95a20f29dee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (34f5ff11-41d4-488e-af19-15ef200f6e8a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (34f5ff11-41d4-488e-af19-15ef200f6e8a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5967ce99-ed70-422c-9992-34a9ca0ed521): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (5967ce99-ed70-422c-9992-34a9ca0ed521): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9632fa87-267e-4aff-9806-0d56c03a2f95): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9632fa87-267e-4aff-9806-0d56c03a2f95): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1999b1ee-7905-474d-83c1-0690cb97784c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (1999b1ee-7905-474d-83c1-0690cb97784c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7650edb2-c046-460f-a435-555f1d760b03): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (7650edb2-c046-460f-a435-555f1d760b03): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (44de5e5b-ebe5-42be-a303-fbb5f390e66d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (44de5e5b-ebe5-42be-a303-fbb5f390e66d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3930feea-6162-4ecb-aa85-8fe9c8bb6833): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3930feea-6162-4ecb-aa85-8fe9c8bb6833): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed579961-7faa-43be-b9d9-850ddb1957b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (ed579961-7faa-43be-b9d9-850ddb1957b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (841a8d49-e8e2-4088-be24-1fc6fb85d0b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (841a8d49-e8e2-4088-be24-1fc6fb85d0b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7bded15-c750-40fe-9678-c389b7b948e2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (d7bded15-c750-40fe-9678-c389b7b948e2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (111394cd-c110-4812-a921-6203d9d0d043): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (111394cd-c110-4812-a921-6203d9d0d043): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4bff1efa-63dd-470f-a60b-358292c26df7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (4bff1efa-63dd-470f-a60b-358292c26df7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91e7a6c9-c9d4-445d-a31e-3fe08cd96095): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (91e7a6c9-c9d4-445d-a31e-3fe08cd96095): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e860a67e-17d0-4827-ad29-7bd1211b929b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (e860a67e-17d0-4827-ad29-7bd1211b929b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9d3ba0e7-f9e2-4434-9457-c9a5c66bcae5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (9d3ba0e7-f9e2-4434-9457-c9a5c66bcae5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (62e71229-c39c-4266-ac3f-1f739e20cfa2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (62e71229-c39c-4266-ac3f-1f739e20cfa2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3100b960-40ba-4d1c-8489-f98f23ffd1f8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (3100b960-40ba-4d1c-8489-f98f23ffd1f8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4be773d6-cca0-4dca-98c7-c1763c7d270f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (4be773d6-cca0-4dca-98c7-c1763c7d270f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3a62ac9-933f-43d6-9c08-5a5386912f87): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (f3a62ac9-933f-43d6-9c08-5a5386912f87): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2a184abe-7696-46f1-83bb-b4c0fe61b044): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (2a184abe-7696-46f1-83bb-b4c0fe61b044): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8f329deb-93c2-4a19-a485-b9c5f9ac57c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8f329deb-93c2-4a19-a485-b9c5f9ac57c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3a15c4a-43c7-4214-922d-14df2e8fd52f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (f3a15c4a-43c7-4214-922d-14df2e8fd52f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a28f3f9e-5868-4ab2-95ab-f81156fc118e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (a28f3f9e-5868-4ab2-95ab-f81156fc118e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (62957d39-b9b1-4c88-b71f-a2f6342ff278): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (62957d39-b9b1-4c88-b71f-a2f6342ff278): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55226b48-9e2d-4667-a879-14516ecd8500): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (55226b48-9e2d-4667-a879-14516ecd8500): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd189ea3-69b2-473c-a086-9be05187be94): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fd189ea3-69b2-473c-a086-9be05187be94): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (007ad209-9150-4a71-a1ff-7fbcc9b0af47): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (007ad209-9150-4a71-a1ff-7fbcc9b0af47): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a9f67fdd-1e07-4a54-9acd-aba1066be366): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (a9f67fdd-1e07-4a54-9acd-aba1066be366): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (662a0e7a-3f53-42a3-bcf9-3009ea19969c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (662a0e7a-3f53-42a3-bcf9-3009ea19969c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (df55b34f-63d5-4cbf-9932-8b4948a3d989): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (df55b34f-63d5-4cbf-9932-8b4948a3d989): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f8f9ba0-3f8a-4785-b278-329b58b87800): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (1f8f9ba0-3f8a-4785-b278-329b58b87800): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f27696c-32d2-4380-8657-ff3f4c304a4f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9f27696c-32d2-4380-8657-ff3f4c304a4f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c3fb1f4-f7e5-483b-831e-c9475275d5cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (5c3fb1f4-f7e5-483b-831e-c9475275d5cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d670560-4243-4f8a-b8f4-31d86dd3e8ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3d670560-4243-4f8a-b8f4-31d86dd3e8ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0c98e880-e985-4dee-8f60-5ad99cea14ce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (0c98e880-e985-4dee-8f60-5ad99cea14ce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (00b3896d-deb3-47ca-b9cc-8a99ab46b45a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (00b3896d-deb3-47ca-b9cc-8a99ab46b45a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc8cfebb-927b-495e-ab89-818827cb79af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (cc8cfebb-927b-495e-ab89-818827cb79af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86c734ee-2771-40b5-82b7-e3f92248380d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (86c734ee-2771-40b5-82b7-e3f92248380d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (18948adf-ba17-4ac7-8485-da41dca93823): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (18948adf-ba17-4ac7-8485-da41dca93823): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7e0b4842-f658-4f1f-b7aa-3dadf8ccfc4a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7e0b4842-f658-4f1f-b7aa-3dadf8ccfc4a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (48989816-9c6d-4fbe-8c43-e8c5da36c75f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (48989816-9c6d-4fbe-8c43-e8c5da36c75f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ffc21e8f-3e51-4028-ad44-ca3043b07aa7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ffc21e8f-3e51-4028-ad44-ca3043b07aa7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b21dcf4c-55dd-4d87-9498-7900989c4872): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b21dcf4c-55dd-4d87-9498-7900989c4872): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40a88b81-dee3-4e24-b337-c0cdf0a4bde5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (40a88b81-dee3-4e24-b337-c0cdf0a4bde5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05412e90-3615-4070-8cec-20bc900c31d5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (05412e90-3615-4070-8cec-20bc900c31d5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f0b2aaa-0bfe-4e8c-94d5-b6e85f352a7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4f0b2aaa-0bfe-4e8c-94d5-b6e85f352a7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3be82ef8-33ef-46dc-9589-514c1c943794): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (3be82ef8-33ef-46dc-9589-514c1c943794): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (348e286a-dc5c-4ba1-87f4-53bd9bdc87a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (348e286a-dc5c-4ba1-87f4-53bd9bdc87a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (31cafe88-9846-476f-a499-324d6d17a158): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (31cafe88-9846-476f-a499-324d6d17a158): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0be226b8-49e2-4738-a8b5-70607c964325): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0be226b8-49e2-4738-a8b5-70607c964325): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ade0c67-0b76-49c2-8281-cf24fffc7376): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5ade0c67-0b76-49c2-8281-cf24fffc7376): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e3763205-e589-4ac3-ab1c-51f222f7031d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e3763205-e589-4ac3-ab1c-51f222f7031d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ac0e0a5-923c-4684-a071-59b41edf9cdd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (2ac0e0a5-923c-4684-a071-59b41edf9cdd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11fae2ec-e0c3-4c4f-b6fb-dc4b834af8ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (11fae2ec-e0c3-4c4f-b6fb-dc4b834af8ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b1d32e2-161b-4fce-84b4-15ba2af55627): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (2b1d32e2-161b-4fce-84b4-15ba2af55627): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e58ed478-cc49-4fcc-8197-88fc2e4ad085): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (e58ed478-cc49-4fcc-8197-88fc2e4ad085): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7643733-e422-4189-ac04-7112edb3d874): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (f7643733-e422-4189-ac04-7112edb3d874): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e46e009-d6b0-4118-826b-3aef48e7acbf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (6e46e009-d6b0-4118-826b-3aef48e7acbf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3fe0aad8-8a70-40d1-976b-8bb7806d0ea2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (3fe0aad8-8a70-40d1-976b-8bb7806d0ea2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8e8d4e46-77d0-4436-8c24-41582e317e15): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8e8d4e46-77d0-4436-8c24-41582e317e15): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef367cd8-3f46-4af3-8c46-4aa185633eaf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (ef367cd8-3f46-4af3-8c46-4aa185633eaf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5e439e41-ad82-4c23-a7db-378b20323823): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (5e439e41-ad82-4c23-a7db-378b20323823): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bcb6c848-81d6-447a-a15e-3f2ffdd2e175): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (bcb6c848-81d6-447a-a15e-3f2ffdd2e175): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (49a4e923-c777-4815-86bc-599f4cbd8aa5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (49a4e923-c777-4815-86bc-599f4cbd8aa5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e8b0bf77-1002-44d5-9220-f749b153ae41): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (e8b0bf77-1002-44d5-9220-f749b153ae41): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (fcd2c9a4-4b01-472a-8b53-1223e947bf00): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fcd2c9a4-4b01-472a-8b53-1223e947bf00): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (990c7602-cd9e-46ea-9006-a8987f765bb7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (990c7602-cd9e-46ea-9006-a8987f765bb7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8eb475c5-3924-4c96-a1f3-7be45ae39f0d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8eb475c5-3924-4c96-a1f3-7be45ae39f0d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (76a71014-726b-4157-b242-1b5d2d1a5abe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (76a71014-726b-4157-b242-1b5d2d1a5abe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (624ae2b9-3675-447b-82b6-2308630fb73a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (624ae2b9-3675-447b-82b6-2308630fb73a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (96d86ce3-554d-4890-a7b6-8a5110819d27): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (96d86ce3-554d-4890-a7b6-8a5110819d27): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (20a65b00-ec27-4a13-98ad-1eff1c47c169): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (20a65b00-ec27-4a13-98ad-1eff1c47c169): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f0f82f30-025e-4f32-80f0-bba01b9c7422): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (f0f82f30-025e-4f32-80f0-bba01b9c7422): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (51df5714-4feb-4930-8dba-e1875775c971): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (51df5714-4feb-4930-8dba-e1875775c971): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d34affc-2ac0-4db8-9fe8-a1a467004d60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (3d34affc-2ac0-4db8-9fe8-a1a467004d60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b7d556de-4dcb-46cb-8e8e-c7451ec0d3a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b7d556de-4dcb-46cb-8e8e-c7451ec0d3a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (040a2b7e-73cf-47c3-a1dd-2f842520e3f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (040a2b7e-73cf-47c3-a1dd-2f842520e3f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (699a3f08-4857-449e-8a85-39408db362fa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (699a3f08-4857-449e-8a85-39408db362fa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (17ac5c66-f941-43b0-be32-f92c7078c653): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (17ac5c66-f941-43b0-be32-f92c7078c653): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dbfdc901-4a11-40b2-bacc-b3797728196b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dbfdc901-4a11-40b2-bacc-b3797728196b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (066518e2-8be0-4b16-8416-9c3ed3b788cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (066518e2-8be0-4b16-8416-9c3ed3b788cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a74bbb91-f501-4b18-b64b-7a69792ef443): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a74bbb91-f501-4b18-b64b-7a69792ef443): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5210cb2f-200a-42b8-9d57-cc1e1df78483): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (5210cb2f-200a-42b8-9d57-cc1e1df78483): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (47b1d183-f473-4e7a-b231-70a8658dd73a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (47b1d183-f473-4e7a-b231-70a8658dd73a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3193fe69-aa47-49da-859d-1b0175d3f9f0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (3193fe69-aa47-49da-859d-1b0175d3f9f0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5a7cdd39-8e5e-42b2-bd36-9b9f0605d1f1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5a7cdd39-8e5e-42b2-bd36-9b9f0605d1f1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (89f4c266-92ec-43ab-b092-e8d016f40f53): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (89f4c266-92ec-43ab-b092-e8d016f40f53): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3be92dbf-4a3b-4529-85d8-aab773ee3de0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (3be92dbf-4a3b-4529-85d8-aab773ee3de0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (25247ab5-01b9-4240-9239-79f139ae4122): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (25247ab5-01b9-4240-9239-79f139ae4122): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (85d402ca-b0f4-4bef-a6d9-589915c440e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (85d402ca-b0f4-4bef-a6d9-589915c440e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a388c93e-dd37-4dd1-827e-12246cd04ce3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (a388c93e-dd37-4dd1-827e-12246cd04ce3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d8050dfc-bb16-4bf3-a435-bb98dfaba589): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d8050dfc-bb16-4bf3-a435-bb98dfaba589): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f514235-3e53-4512-a421-2db441c9fa14): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (3f514235-3e53-4512-a421-2db441c9fa14): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b55fd946-9658-487e-a018-5fdf6e3403cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b55fd946-9658-487e-a018-5fdf6e3403cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (41867826-7823-45f0-b248-39cd42ed5ab5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (41867826-7823-45f0-b248-39cd42ed5ab5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (558de6f0-646e-4d01-aca9-1eaa51e7ad5a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (558de6f0-646e-4d01-aca9-1eaa51e7ad5a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ecd9e76f-f5e7-4581-a2d8-18740bfa60f5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (ecd9e76f-f5e7-4581-a2d8-18740bfa60f5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91485e95-4bd2-45de-8197-901471bc4c71): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (91485e95-4bd2-45de-8197-901471bc4c71): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ad415ab-fb13-48f9-8f19-bb7333e33619): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (0ad415ab-fb13-48f9-8f19-bb7333e33619): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dd7eb876-b6a7-4879-a217-b6d1fa40b256): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dd7eb876-b6a7-4879-a217-b6d1fa40b256): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f91dbe6-4dd4-4577-addd-fc901f1f748d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (0f91dbe6-4dd4-4577-addd-fc901f1f748d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbe687ce-0330-42a2-b099-39f5f853a205): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (bbe687ce-0330-42a2-b099-39f5f853a205): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3616a769-af94-4d3e-b276-b7ccc02003d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (3616a769-af94-4d3e-b276-b7ccc02003d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12a23459-5dd3-41c3-bc8a-8169f9177e0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (12a23459-5dd3-41c3-bc8a-8169f9177e0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (49437721-34ed-4bfd-9f61-224dcad8ded2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (49437721-34ed-4bfd-9f61-224dcad8ded2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a2e07df-20c1-4fe6-8167-8860f688f3b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (1a2e07df-20c1-4fe6-8167-8860f688f3b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52ce265c-6e23-4c84-af3f-280d5bea92fc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (52ce265c-6e23-4c84-af3f-280d5bea92fc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (941c0276-53da-4a3a-995c-16ecba3d0b61): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (941c0276-53da-4a3a-995c-16ecba3d0b61): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (abe3cf66-3ed0-4bb2-901d-895428bc3d98): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (abe3cf66-3ed0-4bb2-901d-895428bc3d98): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f5efafb5-09ae-431e-ab2a-fad9e8a417d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f5efafb5-09ae-431e-ab2a-fad9e8a417d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70a67583-ab21-4fb0-9979-41bd47b0bac6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (70a67583-ab21-4fb0-9979-41bd47b0bac6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eec3e44b-91fb-4691-b202-b6b31652da3e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (eec3e44b-91fb-4691-b202-b6b31652da3e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f139f4d-43dd-4423-a635-200fe8235560): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (1f139f4d-43dd-4423-a635-200fe8235560): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24463286-371a-4a75-8a8d-a9c20387b773): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (24463286-371a-4a75-8a8d-a9c20387b773): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3e23833-8f67-41f6-9bb7-a95375f2b5df): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (f3e23833-8f67-41f6-9bb7-a95375f2b5df): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9a24561-f688-4223-895c-64924a69cf57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (b9a24561-f688-4223-895c-64924a69cf57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4fd72a38-5754-4b68-81d8-c48d74c7f080): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (4fd72a38-5754-4b68-81d8-c48d74c7f080): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d872fe26-a213-4941-8824-fe9a0fd0b23b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d872fe26-a213-4941-8824-fe9a0fd0b23b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2add349-ba08-4d1e-98c0-9f5787b74d5c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (b2add349-ba08-4d1e-98c0-9f5787b74d5c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9cf9631f-cd03-4465-ac01-69c20a2e3d7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (9cf9631f-cd03-4465-ac01-69c20a2e3d7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c46f36b6-fac0-44e9-bbbd-3dab92aff482): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c46f36b6-fac0-44e9-bbbd-3dab92aff482): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a7ee795-ac63-4db3-bc68-3475b62e1d99): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9a7ee795-ac63-4db3-bc68-3475b62e1d99): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc38d752-3055-4f71-a0a2-e1385a7c7036): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dc38d752-3055-4f71-a0a2-e1385a7c7036): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1dda0562-ffb7-447a-8557-11be4d677856): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (1dda0562-ffb7-447a-8557-11be4d677856): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (462467b1-2ecf-475b-a399-71abd73bf761): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (462467b1-2ecf-475b-a399-71abd73bf761): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7907dbf4-4194-4707-836e-bdb432c34b9d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7907dbf4-4194-4707-836e-bdb432c34b9d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6774bfcf-f19d-4952-8104-e38bb8535c30): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (6774bfcf-f19d-4952-8104-e38bb8535c30): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (01376f6f-9fee-4499-9df7-fba91af78c9f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (01376f6f-9fee-4499-9df7-fba91af78c9f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac0afdab-6358-42fa-bcfe-0af7858a9554): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ac0afdab-6358-42fa-bcfe-0af7858a9554): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bae8f5ac-7110-4078-9512-d7205205d35c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (bae8f5ac-7110-4078-9512-d7205205d35c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2182e039-25ce-4233-9fd1-0e699d96fca4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2182e039-25ce-4233-9fd1-0e699d96fca4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (457a2cf2-adb7-4e2d-b045-6c0f1e58aa25): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (457a2cf2-adb7-4e2d-b045-6c0f1e58aa25): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (96ca274c-b09b-471e-a1f8-f71f385d2058): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (96ca274c-b09b-471e-a1f8-f71f385d2058): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a018cfda-e98e-4f56-adb6-48252da2d186): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (a018cfda-e98e-4f56-adb6-48252da2d186): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (588400f6-1d56-4e81-8df2-b3ca41b13753): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (588400f6-1d56-4e81-8df2-b3ca41b13753): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (79f5567b-6e47-4c8c-b22d-dccc40c01a63): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (79f5567b-6e47-4c8c-b22d-dccc40c01a63): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1ebac8aa-e466-48fa-94b8-f4fd9708969e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1ebac8aa-e466-48fa-94b8-f4fd9708969e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a175802-ab58-4b66-82eb-7072b1c353d3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (4a175802-ab58-4b66-82eb-7072b1c353d3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05b52048-0cc3-41c6-af1d-8686469a569f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (05b52048-0cc3-41c6-af1d-8686469a569f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5e54a302-a75a-48f3-a250-bac2a5ff6faa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5e54a302-a75a-48f3-a250-bac2a5ff6faa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ce8ec56d-fa3f-42e3-81a8-64881d8d43f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ce8ec56d-fa3f-42e3-81a8-64881d8d43f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e25f7d8-7942-4c38-8b8e-08150c4536be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1e25f7d8-7942-4c38-8b8e-08150c4536be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ba30be3e-b10d-4837-b6fd-c94c46fa33bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ba30be3e-b10d-4837-b6fd-c94c46fa33bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e5d05b4-8559-4c82-b6a3-070e223167b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (2e5d05b4-8559-4c82-b6a3-070e223167b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0386609a-ebe3-4a6b-ad3b-d1c45511611a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0386609a-ebe3-4a6b-ad3b-d1c45511611a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b411ae42-9183-4693-900c-9bff489d1cbe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b411ae42-9183-4693-900c-9bff489d1cbe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4c2c6e30-9d61-4ddc-bb5f-d582b2dd4d9e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4c2c6e30-9d61-4ddc-bb5f-d582b2dd4d9e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e3449a29-5dc5-405b-9392-73b4e7430b8f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e3449a29-5dc5-405b-9392-73b4e7430b8f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8a303e3a-4bf1-4c91-9090-e40b86848b9e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8a303e3a-4bf1-4c91-9090-e40b86848b9e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52fa8739-9a8c-499e-b0c6-999e7ec972c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (52fa8739-9a8c-499e-b0c6-999e7ec972c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f74907b2-0447-43fb-92fc-ef4173815992): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f74907b2-0447-43fb-92fc-ef4173815992): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (133a35e5-6983-45e3-91c4-c9441ef4dbe1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (133a35e5-6983-45e3-91c4-c9441ef4dbe1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbcea514-5792-401c-bf24-7056fe955c4e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (bbcea514-5792-401c-bf24-7056fe955c4e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aae4ecc3-1f42-46a1-9d03-e0c7a2421e8c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (aae4ecc3-1f42-46a1-9d03-e0c7a2421e8c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12077c90-e7c9-4e0c-8c4c-63347c323368): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (12077c90-e7c9-4e0c-8c4c-63347c323368): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (385909de-6c23-4bff-8f88-058d9158cfae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (385909de-6c23-4bff-8f88-058d9158cfae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad64262e-cffd-4db3-88eb-05504a048394): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ad64262e-cffd-4db3-88eb-05504a048394): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (69a4ebac-514a-4da6-9b51-edc46cacb81c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (69a4ebac-514a-4da6-9b51-edc46cacb81c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f584b48a-6f02-45b2-a39c-d457a5f1b265): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (f584b48a-6f02-45b2-a39c-d457a5f1b265): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f1edae7-3695-44a5-84a4-41affdcd1ab5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (9f1edae7-3695-44a5-84a4-41affdcd1ab5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4cd6c777-63ed-4d70-a654-1432dc261fe1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (4cd6c777-63ed-4d70-a654-1432dc261fe1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7e1388c-8e6c-4581-bc3c-11b579720f2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (d7e1388c-8e6c-4581-bc3c-11b579720f2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (109c072f-b972-4613-b014-7f509f1bf8d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (109c072f-b972-4613-b014-7f509f1bf8d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c588ae0-f096-4d4d-9fb6-6ade08b3e30a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9c588ae0-f096-4d4d-9fb6-6ade08b3e30a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e85b9e46-e98f-4c11-8341-14938a79be63): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e85b9e46-e98f-4c11-8341-14938a79be63): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (44a3fc36-0337-49e4-a083-003abe67c7e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (44a3fc36-0337-49e4-a083-003abe67c7e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97a346c7-cdb5-4864-89fa-a78c91213ad0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (97a346c7-cdb5-4864-89fa-a78c91213ad0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5d20d958-4b82-40cc-bfbe-84edf5879db9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (5d20d958-4b82-40cc-bfbe-84edf5879db9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aac8eda8-7b9a-41c6-9537-5d5ca9a81db6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (aac8eda8-7b9a-41c6-9537-5d5ca9a81db6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0dcee23-086d-4bdb-bc02-6dc9ffe4b195): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (a0dcee23-086d-4bdb-bc02-6dc9ffe4b195): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0a8ea363-2097-4259-a0ed-ea828d2377c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0a8ea363-2097-4259-a0ed-ea828d2377c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (27dc9d38-6df0-4ebb-b6a7-8ac91a5fc589): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (27dc9d38-6df0-4ebb-b6a7-8ac91a5fc589): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1aa7bd6-aaaf-47ba-82a0-7149177ba332): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b1aa7bd6-aaaf-47ba-82a0-7149177ba332): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (084ca192-3f96-4c87-b345-47ccfc3adb01): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (084ca192-3f96-4c87-b345-47ccfc3adb01): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c95139a-da9a-40eb-a8b7-0e9dfad49421): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9c95139a-da9a-40eb-a8b7-0e9dfad49421): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (096375dc-678b-46e4-88b1-ca35b0cc85de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (096375dc-678b-46e4-88b1-ca35b0cc85de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d29bbe82-6655-4929-910a-17ff329f6d85): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d29bbe82-6655-4929-910a-17ff329f6d85): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (edc165a4-34ac-46c6-b647-dbc4ebeebf38): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (edc165a4-34ac-46c6-b647-dbc4ebeebf38): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aaa038cc-58e4-4ad5-8b08-05f5c672cf5c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (aaa038cc-58e4-4ad5-8b08-05f5c672cf5c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e6dbc8a1-8de4-4de1-9814-83af5871a3a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (e6dbc8a1-8de4-4de1-9814-83af5871a3a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55bdf300-9d81-4019-b941-f3d1227e746f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (55bdf300-9d81-4019-b941-f3d1227e746f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (970aa636-ee35-422e-b587-a545c9b824fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (970aa636-ee35-422e-b587-a545c9b824fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10441e0a-1399-41fd-8049-ddd02a6c9a70): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (10441e0a-1399-41fd-8049-ddd02a6c9a70): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fc0a77c-54ae-49d5-b7b0-ac31c4e343f8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7fc0a77c-54ae-49d5-b7b0-ac31c4e343f8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40a2677a-0a55-4c4d-94f8-332089dd6430): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (40a2677a-0a55-4c4d-94f8-332089dd6430): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc1cf3b3-56ea-4959-b39e-fd81f148ae40): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (dc1cf3b3-56ea-4959-b39e-fd81f148ae40): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (178e2ea8-3203-4c8d-8223-69fe17dcaa66): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (178e2ea8-3203-4c8d-8223-69fe17dcaa66): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac9e8ed5-3da7-4024-bb3b-28b3b6166064): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (ac9e8ed5-3da7-4024-bb3b-28b3b6166064): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4abf76e2-1ddc-4024-a9ff-6d758a975428): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4abf76e2-1ddc-4024-a9ff-6d758a975428): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1a7db78-9970-4e38-a632-6a5c03e356fc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (e1a7db78-9970-4e38-a632-6a5c03e356fc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0138c655-ee8f-4c32-833d-9e38c2860161): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0138c655-ee8f-4c32-833d-9e38c2860161): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (57945203-1f6c-4f72-acb4-a769e3b57ae7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (57945203-1f6c-4f72-acb4-a769e3b57ae7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91a50c3a-8615-4bbe-a199-0b99ee05d4a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (91a50c3a-8615-4bbe-a199-0b99ee05d4a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd530b41-898f-4b7c-8913-3026daea9c6f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (cd530b41-898f-4b7c-8913-3026daea9c6f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8483a575-8be7-41f8-ba03-53285187dee3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8483a575-8be7-41f8-ba03-53285187dee3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a4dc978-2cc3-45e8-8f22-1f2f53985561): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (9a4dc978-2cc3-45e8-8f22-1f2f53985561): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b0fbb35-5d37-42d6-b721-2b09159a9c7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0b0fbb35-5d37-42d6-b721-2b09159a9c7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3213c047-55f7-4ee5-809f-65d4645f5cda): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (3213c047-55f7-4ee5-809f-65d4645f5cda): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (77302677-8fa8-4397-b65d-eb3e39e50c8b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (77302677-8fa8-4397-b65d-eb3e39e50c8b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (51d6851c-5c29-4f67-a265-a231ce643392): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (51d6851c-5c29-4f67-a265-a231ce643392): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (50e61f1d-d107-4fcc-9da2-e184f7d37fd9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (50e61f1d-d107-4fcc-9da2-e184f7d37fd9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (216f9e5e-c284-4d42-8604-ed8b3c3c197d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (216f9e5e-c284-4d42-8604-ed8b3c3c197d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (609e4fd8-80ab-4d05-b9a9-065814bb1bd4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (609e4fd8-80ab-4d05-b9a9-065814bb1bd4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a15151d5-091d-468e-866f-3f78c437eddc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (a15151d5-091d-468e-866f-3f78c437eddc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c454064b-4f35-4e7b-8f62-98bd35e30d83): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (c454064b-4f35-4e7b-8f62-98bd35e30d83): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b05523cb-6d42-4ab0-88e7-80c5f5e7a3a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (b05523cb-6d42-4ab0-88e7-80c5f5e7a3a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (601946dd-0ae1-4d77-ae6f-a56c3f623751): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (601946dd-0ae1-4d77-ae6f-a56c3f623751): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (665bdee1-7614-492a-bd69-20e316f7d70a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (665bdee1-7614-492a-bd69-20e316f7d70a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f81d509d-75ff-47ef-8615-8038f01c974f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f81d509d-75ff-47ef-8615-8038f01c974f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d44f751c-6f03-4ac9-8c45-d4bf4c5ca233): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (d44f751c-6f03-4ac9-8c45-d4bf4c5ca233): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3b358b97-bbc7-496b-84c2-efaf25f68b2d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (3b358b97-bbc7-496b-84c2-efaf25f68b2d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70269a6d-7c84-4f5e-9b76-187456d1bd74): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (70269a6d-7c84-4f5e-9b76-187456d1bd74): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f91bd55d-b731-4c2b-bc26-73e52b11a059): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (f91bd55d-b731-4c2b-bc26-73e52b11a059): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (84bf83c4-d674-4d53-97d3-873e8b525057): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (84bf83c4-d674-4d53-97d3-873e8b525057): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b5585228-fb71-47df-9deb-591e2f13792e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b5585228-fb71-47df-9deb-591e2f13792e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa1dc828-13ad-483c-8ac1-cd0b7de5be53): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (aa1dc828-13ad-483c-8ac1-cd0b7de5be53): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (261f7ad6-c308-47d0-8f33-d1146ac9d36c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (261f7ad6-c308-47d0-8f33-d1146ac9d36c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dfd04232-0da9-495d-8076-75cddb27c2a6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (dfd04232-0da9-495d-8076-75cddb27c2a6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (44666e39-d4a6-40ed-951f-bf77f0f6e020): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (44666e39-d4a6-40ed-951f-bf77f0f6e020): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (77110e6e-05dd-4019-b035-20043e11431f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (77110e6e-05dd-4019-b035-20043e11431f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f05924b8-c6a8-4afe-b327-edc39a7a3fed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (f05924b8-c6a8-4afe-b327-edc39a7a3fed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (daa14c8e-e3a2-4c91-b90c-9060c15e20b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (daa14c8e-e3a2-4c91-b90c-9060c15e20b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (67973d81-bbeb-46fb-9f51-98f4e07a0e9c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (67973d81-bbeb-46fb-9f51-98f4e07a0e9c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (43feb293-466e-49ab-b0a4-e6ac373d07fd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (43feb293-466e-49ab-b0a4-e6ac373d07fd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b211471a-0e09-4850-912a-16e05bb8574a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (b211471a-0e09-4850-912a-16e05bb8574a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (43aadb3e-1dc0-448f-9f0d-01e652752d18): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (43aadb3e-1dc0-448f-9f0d-01e652752d18): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc410dad-ee82-4d81-a6c5-6d05aeca6dda): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (fc410dad-ee82-4d81-a6c5-6d05aeca6dda): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7cdca488-1894-4b17-bfac-f9aa06f863de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7cdca488-1894-4b17-bfac-f9aa06f863de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (abb338eb-63e3-4ad8-8a09-69a13cedf3fa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (abb338eb-63e3-4ad8-8a09-69a13cedf3fa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (60267e0e-d969-4ab5-8d2e-36f2529fb6de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (60267e0e-d969-4ab5-8d2e-36f2529fb6de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71398f93-d4d0-4d15-811d-2538924aab08): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (71398f93-d4d0-4d15-811d-2538924aab08): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b31f9598-fd30-47b1-98f9-730ee0359070): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b31f9598-fd30-47b1-98f9-730ee0359070): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12c75000-5f4a-42be-a1c1-827bc36f976c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (12c75000-5f4a-42be-a1c1-827bc36f976c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (48d3a384-8a83-41a5-bd5c-5b4efedfbd60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (48d3a384-8a83-41a5-bd5c-5b4efedfbd60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5d12b576-99ab-4539-bc71-afe9a27c80a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (5d12b576-99ab-4539-bc71-afe9a27c80a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0e60b03-e139-46a4-b69c-2ef2748b0544): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c0e60b03-e139-46a4-b69c-2ef2748b0544): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (33e48dd0-cb77-435e-83a6-1c9d042e0b1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (33e48dd0-cb77-435e-83a6-1c9d042e0b1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (57d4989c-daa3-446a-9f0f-6b8540b0d9f2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (57d4989c-daa3-446a-9f0f-6b8540b0d9f2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f12aee92-ed98-4600-9ffb-2cc218aa6364): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f12aee92-ed98-4600-9ffb-2cc218aa6364): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (98b9e346-2ba9-4773-93c1-162088d0e411): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (98b9e346-2ba9-4773-93c1-162088d0e411): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9ce08cde-121d-4052-a38e-ed2d1e7a5060): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (9ce08cde-121d-4052-a38e-ed2d1e7a5060): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (99b848f9-cc47-4b86-adc7-fcde82bb932b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (99b848f9-cc47-4b86-adc7-fcde82bb932b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (80f216fe-1b44-4b17-93a4-32971d89d303): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (80f216fe-1b44-4b17-93a4-32971d89d303): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (34150db1-615b-4cc3-a518-01a4837357a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (34150db1-615b-4cc3-a518-01a4837357a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (75a02045-ce2a-41d1-a8a2-e16994927011): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (75a02045-ce2a-41d1-a8a2-e16994927011): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b9e4efe-eace-42e9-a0a6-e1c68f6beb7c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0b9e4efe-eace-42e9-a0a6-e1c68f6beb7c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (99b1da6c-6616-4652-af57-55497f93456b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (99b1da6c-6616-4652-af57-55497f93456b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b28baf44-090a-4133-b169-5408d8d8de57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b28baf44-090a-4133-b169-5408d8d8de57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (29762be3-d5b8-4881-a346-59e75a674f61): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (29762be3-d5b8-4881-a346-59e75a674f61): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (79c32783-6a82-4707-b974-fec9b0d85c6e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (79c32783-6a82-4707-b974-fec9b0d85c6e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ddc887bc-7e87-4541-9d77-bd633efad71b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (ddc887bc-7e87-4541-9d77-bd633efad71b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b6575563-4b14-408f-883a-8ceea04b244f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (b6575563-4b14-408f-883a-8ceea04b244f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3cfabe0b-265e-42ab-98e7-cfe330b6a854): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (3cfabe0b-265e-42ab-98e7-cfe330b6a854): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (03e24f47-416e-421d-9ead-50860c39284e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (03e24f47-416e-421d-9ead-50860c39284e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (674d55d8-026d-4ab6-951c-00d20a344246): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (674d55d8-026d-4ab6-951c-00d20a344246): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b4ce8ca5-660e-49dc-8657-848fb42d3d71): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (b4ce8ca5-660e-49dc-8657-848fb42d3d71): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (50798820-b466-4983-9bc4-30f41fae4fb9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (50798820-b466-4983-9bc4-30f41fae4fb9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eeac5a11-1ef5-4f7d-9b2b-c658dfa3e961): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (eeac5a11-1ef5-4f7d-9b2b-c658dfa3e961): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cf6c9036-b711-4b3c-bf4c-6fbbd3a53096): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (cf6c9036-b711-4b3c-bf4c-6fbbd3a53096): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (5fd47cf2-1a5e-4fe2-91e3-89681f5699f2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5fd47cf2-1a5e-4fe2-91e3-89681f5699f2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (00c55d7a-98fa-4e7e-89e2-25e3fad68f60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (00c55d7a-98fa-4e7e-89e2-25e3fad68f60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bace437e-7574-4ddd-91c6-75a0974c8ba5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bace437e-7574-4ddd-91c6-75a0974c8ba5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (44a3f379-6a2f-4a61-a9ca-91916aa4052a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (44a3f379-6a2f-4a61-a9ca-91916aa4052a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (efb338ca-cd8e-4802-8380-8e08f14a7169): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (efb338ca-cd8e-4802-8380-8e08f14a7169): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6437521-9550-44d6-900e-2d19190ffb0e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (a6437521-9550-44d6-900e-2d19190ffb0e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d67f7627-8164-479f-9776-64bda508eaaf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (d67f7627-8164-479f-9776-64bda508eaaf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f5f4f2a0-8e3e-4964-9891-64f83f74befe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (f5f4f2a0-8e3e-4964-9891-64f83f74befe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bfd5fda6-6bb7-4a67-8147-5f884005908b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bfd5fda6-6bb7-4a67-8147-5f884005908b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7946625a-26ad-4fdb-89a4-c7fb95017206): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (7946625a-26ad-4fdb-89a4-c7fb95017206): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3522e14d-028b-4bf8-8f77-5b2cce79c3d3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3522e14d-028b-4bf8-8f77-5b2cce79c3d3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3bb8e90a-72bf-4693-8d56-93e562c4e8a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (3bb8e90a-72bf-4693-8d56-93e562c4e8a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6bbd0afb-a26a-4908-ad0c-0393ae12eba5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6bbd0afb-a26a-4908-ad0c-0393ae12eba5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0fba25a9-84ed-4af3-b39e-a477d078a5f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (0fba25a9-84ed-4af3-b39e-a477d078a5f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc463d92-9c33-478b-96e9-a7d54546e4f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dc463d92-9c33-478b-96e9-a7d54546e4f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c378162e-9987-42e9-b4ac-b54558cc1150): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (c378162e-9987-42e9-b4ac-b54558cc1150): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (466d3597-6e13-4d42-833e-6d79d7674102): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (466d3597-6e13-4d42-833e-6d79d7674102): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e71bd03a-d448-4d71-8716-c0b54bc56f36): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (e71bd03a-d448-4d71-8716-c0b54bc56f36): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bc3a6b8d-be9d-4316-8486-b5d4534c7343): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bc3a6b8d-be9d-4316-8486-b5d4534c7343): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (59f57f33-5a66-4ec3-ae4c-58378c4976a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (59f57f33-5a66-4ec3-ae4c-58378c4976a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dd7024e0-c404-4302-be47-de82ce227a30): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dd7024e0-c404-4302-be47-de82ce227a30): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (070d716c-b24d-4415-95b7-ea971dda0278): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (070d716c-b24d-4415-95b7-ea971dda0278): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a81a4f7b-1d5f-432a-9d1c-2eec055fecb0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a81a4f7b-1d5f-432a-9d1c-2eec055fecb0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (061b95ac-e6ef-4bd1-a1ec-9fd2a69357e9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (061b95ac-e6ef-4bd1-a1ec-9fd2a69357e9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a2f00801-9d61-496e-9d95-d6cd7db059ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a2f00801-9d61-496e-9d95-d6cd7db059ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (73ca992c-6573-4c7d-a6dc-6fa1967feb72): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (73ca992c-6573-4c7d-a6dc-6fa1967feb72): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0949cfa-133e-412d-aeaf-6cbe7aa90bdc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c0949cfa-133e-412d-aeaf-6cbe7aa90bdc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24830e39-e26d-4960-b8de-99fd39ba2169): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (24830e39-e26d-4960-b8de-99fd39ba2169): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c81a4af6-b389-400e-9c0d-dd4de53e3d3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c81a4af6-b389-400e-9c0d-dd4de53e3d3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (57e2674f-ea71-474d-9b31-23c7058020da): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (57e2674f-ea71-474d-9b31-23c7058020da): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e9cadb86-80d7-42b7-b5f4-4c70d346a0ac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e9cadb86-80d7-42b7-b5f4-4c70d346a0ac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2588c942-9283-4804-8a48-18ad2679a55a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (2588c942-9283-4804-8a48-18ad2679a55a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e43194d3-55e0-488e-85a9-18eba902105b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e43194d3-55e0-488e-85a9-18eba902105b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff519c5b-4473-40e3-9ad6-27ed87e3e674): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (ff519c5b-4473-40e3-9ad6-27ed87e3e674): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (df480cf8-e1ab-4960-ae43-9a3c5753afd2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (df480cf8-e1ab-4960-ae43-9a3c5753afd2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (48b5b895-e77f-42b9-a5b6-4b79148d04dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (48b5b895-e77f-42b9-a5b6-4b79148d04dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5a38ba65-3865-4871-b4a5-ac1e2973b772): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (5a38ba65-3865-4871-b4a5-ac1e2973b772): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (83227794-e7b7-477e-aeb2-995f79bb24b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (83227794-e7b7-477e-aeb2-995f79bb24b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (21264a7c-85d8-4506-b073-c24d69c3473f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (21264a7c-85d8-4506-b073-c24d69c3473f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9683f4e8-99f8-4dac-b498-7af7f080af2b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (9683f4e8-99f8-4dac-b498-7af7f080af2b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef4b5be7-1441-466e-a5cd-fd3987dfc596): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (ef4b5be7-1441-466e-a5cd-fd3987dfc596): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f651093e-4c4a-494d-bc93-42db2da1e880): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (f651093e-4c4a-494d-bc93-42db2da1e880): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a67b1762-a899-4294-a9d0-6f3169cd093a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (a67b1762-a899-4294-a9d0-6f3169cd093a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (57992119-d97f-4604-b87d-7449a12878bb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (57992119-d97f-4604-b87d-7449a12878bb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a51c4ab2-86ff-49f8-a5d5-8ec52fd88a7e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (a51c4ab2-86ff-49f8-a5d5-8ec52fd88a7e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (196c52d3-51a2-438b-b391-8fc7072d31d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (196c52d3-51a2-438b-b391-8fc7072d31d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7f8bd917-806f-40f2-9144-e590a3e6ed8d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (7f8bd917-806f-40f2-9144-e590a3e6ed8d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e36ad4ac-e50c-46b5-82cb-b275b454cd18): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e36ad4ac-e50c-46b5-82cb-b275b454cd18): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f73c6cdd-ad75-46c5-a5c9-6d9d2e5212dd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (f73c6cdd-ad75-46c5-a5c9-6d9d2e5212dd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5bc323e0-d05e-4bc8-bfb9-6a9f700996f8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (5bc323e0-d05e-4bc8-bfb9-6a9f700996f8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8fca74b7-0bfa-4371-9d82-781c86ba64dd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (8fca74b7-0bfa-4371-9d82-781c86ba64dd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bf0fb2bf-c994-42a5-888d-505428788627): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (bf0fb2bf-c994-42a5-888d-505428788627): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f0943ee-e988-436e-91b0-5e5449ee4a1a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3f0943ee-e988-436e-91b0-5e5449ee4a1a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4ce4f27-feb6-4ea9-9a00-4fe469551f55): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (d4ce4f27-feb6-4ea9-9a00-4fe469551f55): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3bf22fb1-e97a-4ac5-9072-c11961539a24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (3bf22fb1-e97a-4ac5-9072-c11961539a24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db738073-cb26-4801-93cd-3675eaaf74c9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (db738073-cb26-4801-93cd-3675eaaf74c9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4acfaf3-d4c1-471d-9e19-f3568db9a94d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e4acfaf3-d4c1-471d-9e19-f3568db9a94d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0eaab9da-b827-4331-8ed2-9bb20dc06a4d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0eaab9da-b827-4331-8ed2-9bb20dc06a4d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (03e1158b-df25-4683-85ac-146d4ab313d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (03e1158b-df25-4683-85ac-146d4ab313d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c1d8c72c-da69-440a-85f5-a641822d7810): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (c1d8c72c-da69-440a-85f5-a641822d7810): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (08cad5b3-e628-481f-96c5-7ed648b2164c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (08cad5b3-e628-481f-96c5-7ed648b2164c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (feaf0ae8-6e52-494a-a346-b6db6c62e29c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (feaf0ae8-6e52-494a-a346-b6db6c62e29c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a3b210be-eaeb-48c8-8e19-6f569bb84362): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (a3b210be-eaeb-48c8-8e19-6f569bb84362): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bfcba1fc-fc16-4822-aecf-2c0df9a89c0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bfcba1fc-fc16-4822-aecf-2c0df9a89c0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d16ca59b-905a-4c79-9c75-f81f306b7bc9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (d16ca59b-905a-4c79-9c75-f81f306b7bc9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (25e3e503-d4b2-4963-8b8c-40be17aac24f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (25e3e503-d4b2-4963-8b8c-40be17aac24f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bcf8739d-4d47-4220-85de-1aed5f6bba35): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (bcf8739d-4d47-4220-85de-1aed5f6bba35): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2215f3f-c6e1-4f26-8b1a-160ea8e0b95f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c2215f3f-c6e1-4f26-8b1a-160ea8e0b95f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (238c1dae-fe69-48d5-a21d-9b68dcf2342b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (238c1dae-fe69-48d5-a21d-9b68dcf2342b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (255efb86-d830-4212-a59c-305171abc35a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (255efb86-d830-4212-a59c-305171abc35a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (af5f47b0-b1e9-4b41-85a0-458c36c99c41): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (af5f47b0-b1e9-4b41-85a0-458c36c99c41): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39fa575a-7866-4ae8-a2dc-7e717a06743a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (39fa575a-7866-4ae8-a2dc-7e717a06743a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (253040c4-df76-45b2-b2a9-8fe25e5b13a0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (253040c4-df76-45b2-b2a9-8fe25e5b13a0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb459bdb-0c9e-49a1-aac1-b1bcd2978514): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (eb459bdb-0c9e-49a1-aac1-b1bcd2978514): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a60df494-acdd-4295-92d4-668937690f69): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a60df494-acdd-4295-92d4-668937690f69): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4c4bae3e-2033-4147-ac8f-dca112f294aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4c4bae3e-2033-4147-ac8f-dca112f294aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (16839d54-3f7c-41ee-a5b0-a8d1b38658fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (16839d54-3f7c-41ee-a5b0-a8d1b38658fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d955a5da-6b0c-44fd-903c-1a9de5b789cd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d955a5da-6b0c-44fd-903c-1a9de5b789cd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (38e0a460-8ca5-490d-b1e8-b2a308415e8a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (38e0a460-8ca5-490d-b1e8-b2a308415e8a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2fb0ae2e-c2e3-4319-8b04-570273328982): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2fb0ae2e-c2e3-4319-8b04-570273328982): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fcb775e7-ea9d-463d-b860-fb8d33902c18): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fcb775e7-ea9d-463d-b860-fb8d33902c18): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7ce21116-2b6a-4ad8-a8a1-561fea105cc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7ce21116-2b6a-4ad8-a8a1-561fea105cc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (37b30443-9f95-48f3-9a57-c44a8e256d17): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (37b30443-9f95-48f3-9a57-c44a8e256d17): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71a2f424-460c-42dd-8a91-ae535aaec94b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (71a2f424-460c-42dd-8a91-ae535aaec94b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0fc083d2-b5bc-467d-af74-ba1c91e84e49): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (0fc083d2-b5bc-467d-af74-ba1c91e84e49): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (25ae9c11-d231-4cf4-85aa-95713c3ff089): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (25ae9c11-d231-4cf4-85aa-95713c3ff089): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e7c6ef19-90f0-4447-b36c-7edfc86eec8f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (e7c6ef19-90f0-4447-b36c-7edfc86eec8f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b5f0e82-7285-4a06-82a5-738eac95a957): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (2b5f0e82-7285-4a06-82a5-738eac95a957): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0577cc1c-e080-4c05-832d-18706cc429e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (0577cc1c-e080-4c05-832d-18706cc429e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8943aa7d-4e43-457f-bbc9-a6d0dfef2ffd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (8943aa7d-4e43-457f-bbc9-a6d0dfef2ffd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97af8291-bfb7-453e-89d2-71b16843a6b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (97af8291-bfb7-453e-89d2-71b16843a6b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (07147a9b-586f-4e17-9827-24be286f33c3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (07147a9b-586f-4e17-9827-24be286f33c3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a8ecf66-4c48-4f3d-91a4-39fe44491e61): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (6a8ecf66-4c48-4f3d-91a4-39fe44491e61): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0d78a43b-dac2-48f0-bf9f-ff5b417fe0be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (0d78a43b-dac2-48f0-bf9f-ff5b417fe0be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (183231d0-0e62-41c0-9b7f-9d42b1f7e55c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (183231d0-0e62-41c0-9b7f-9d42b1f7e55c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8b383c00-410e-4c01-8cf3-5ecdb2a6b61a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (8b383c00-410e-4c01-8cf3-5ecdb2a6b61a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad180a4c-8e73-4177-a38e-f8f38e7bc31d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (ad180a4c-8e73-4177-a38e-f8f38e7bc31d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"mongo db ocnnected","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (879d70a1-542f-4ee0-a347-89409332ad84): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (879d70a1-542f-4ee0-a347-89409332ad84): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b095cca4-b4d9-4f9b-9947-48ff52c148ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b095cca4-b4d9-4f9b-9947-48ff52c148ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8bf08db5-dc3e-4636-8d8e-9afc7f10c49c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8bf08db5-dc3e-4636-8d8e-9afc7f10c49c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4c51ef6a-3bef-405d-b710-b1a62b90d8e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (4c51ef6a-3bef-405d-b710-b1a62b90d8e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0527f545-7cc1-4408-8ee7-099ae88a54fa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0527f545-7cc1-4408-8ee7-099ae88a54fa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (023ae815-36e7-4f2e-b009-494c0d79d3b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (023ae815-36e7-4f2e-b009-494c0d79d3b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (678967bd-befb-4576-9e6f-0fc0ba68ec4f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (678967bd-befb-4576-9e6f-0fc0ba68ec4f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (80ad9fde-16cc-4f83-aab3-03d4c51fb9ac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (80ad9fde-16cc-4f83-aab3-03d4c51fb9ac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4670e31b-a715-4acc-99a6-a48a2540b76a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4670e31b-a715-4acc-99a6-a48a2540b76a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b1c6313-3e4f-4adb-ba2e-0642901409d3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (7b1c6313-3e4f-4adb-ba2e-0642901409d3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b3dec66-d8b8-4679-9811-05ea83837fd1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0b3dec66-d8b8-4679-9811-05ea83837fd1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (03b23841-8abd-4a4a-8a78-1654ab4316a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (03b23841-8abd-4a4a-8a78-1654ab4316a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ade74dae-1325-47f4-81f1-828666ebc94d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ade74dae-1325-47f4-81f1-828666ebc94d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (75534841-995f-48db-87e6-029d35af6702): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (75534841-995f-48db-87e6-029d35af6702): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d9bac3f7-fe3b-4f80-8eb0-19c78f61b356): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d9bac3f7-fe3b-4f80-8eb0-19c78f61b356): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a4b94361-eae9-4157-89ee-dd18190ab2d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (a4b94361-eae9-4157-89ee-dd18190ab2d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (37c7d8a1-1568-43e3-9f04-92cf2d990a48): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (37c7d8a1-1568-43e3-9f04-92cf2d990a48): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8f83651c-f907-4352-a68a-f9a8a5e36be5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (8f83651c-f907-4352-a68a-f9a8a5e36be5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (deacd0b7-67aa-48d5-8a3e-54748b90fa71): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (deacd0b7-67aa-48d5-8a3e-54748b90fa71): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7f42028a-b122-4942-8ef5-65a9fe841615): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (7f42028a-b122-4942-8ef5-65a9fe841615): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c54a8d7-7893-4995-80d0-543b3a38d962): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5c54a8d7-7893-4995-80d0-543b3a38d962): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3126918a-4dd5-4447-b1c3-533a3d16ebb8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3126918a-4dd5-4447-b1c3-533a3d16ebb8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (197d90b9-5aea-4ac4-b4ad-b2955d80b983): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (197d90b9-5aea-4ac4-b4ad-b2955d80b983): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9b5d6221-872f-4c0e-8973-f34e230a99a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (9b5d6221-872f-4c0e-8973-f34e230a99a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (858514f3-8282-402e-8ebf-4c2c71ec9071): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (858514f3-8282-402e-8ebf-4c2c71ec9071): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (88536132-4481-43d6-8f8e-556f3a5c6f64): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (88536132-4481-43d6-8f8e-556f3a5c6f64): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e20e60e8-a356-46dd-8149-c16c5d3080af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e20e60e8-a356-46dd-8149-c16c5d3080af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (04369720-fd10-4f10-80ef-e970b94a2885): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (04369720-fd10-4f10-80ef-e970b94a2885): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ba0cecb5-3c9c-42da-926b-914d7d87b1d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ba0cecb5-3c9c-42da-926b-914d7d87b1d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff9591ee-9f2a-4564-823d-aaf8fa9fad9a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (ff9591ee-9f2a-4564-823d-aaf8fa9fad9a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa57605c-21a1-4516-844a-4d6ed66cc6a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (aa57605c-21a1-4516-844a-4d6ed66cc6a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (84a7f815-e1ae-4159-acde-111e0b959357): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (84a7f815-e1ae-4159-acde-111e0b959357): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (73c17017-17cc-4f4f-acde-5b8b3479c838): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (73c17017-17cc-4f4f-acde-5b8b3479c838): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (92851cde-a0d0-4abc-a87d-9baf6f176d3d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (92851cde-a0d0-4abc-a87d-9baf6f176d3d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (633c8159-0584-432b-9997-649f0412ce45): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (633c8159-0584-432b-9997-649f0412ce45): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c7863a8-892f-4819-b19c-6ba67d5bae13): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (9c7863a8-892f-4819-b19c-6ba67d5bae13): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (430876d4-8e7c-44d6-af1f-f3eae56881fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (430876d4-8e7c-44d6-af1f-f3eae56881fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (82c849af-d408-4e89-8ef4-ad428b3926cd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (82c849af-d408-4e89-8ef4-ad428b3926cd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e3175eab-d166-42d2-9997-a3638021934d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e3175eab-d166-42d2-9997-a3638021934d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (72c52379-557b-49c8-8d48-9765913a81e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (72c52379-557b-49c8-8d48-9765913a81e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3fb137af-ee01-4b58-8a20-e884b7f8fd4a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (3fb137af-ee01-4b58-8a20-e884b7f8fd4a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e539ebe6-5a0d-4835-9017-76fc47c2ad77): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (e539ebe6-5a0d-4835-9017-76fc47c2ad77): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c6e656e1-bd04-4446-89ba-4f8002a61e13): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (c6e656e1-bd04-4446-89ba-4f8002a61e13): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4b8ffc11-79ac-4ee2-90c5-176b78a7164e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (4b8ffc11-79ac-4ee2-90c5-176b78a7164e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5bf746d7-0d3e-4966-b4cc-0cf952741314): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (5bf746d7-0d3e-4966-b4cc-0cf952741314): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f4800f4-9809-4fc9-a8cf-8d5d15501721): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (5f4800f4-9809-4fc9-a8cf-8d5d15501721): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e95bcf7c-613a-463b-8c13-6085de6fa4d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (e95bcf7c-613a-463b-8c13-6085de6fa4d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71f5a696-eb37-45d2-a977-af451f1645dd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (71f5a696-eb37-45d2-a977-af451f1645dd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (019cb655-320e-43e5-b6bb-ba234441fcfa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (019cb655-320e-43e5-b6bb-ba234441fcfa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f136e849-72c0-430f-89b5-a595e5783920): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (f136e849-72c0-430f-89b5-a595e5783920): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3826aa7-a2eb-4778-914a-d7df99008ce7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (b3826aa7-a2eb-4778-914a-d7df99008ce7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58babca0-5c3f-4fec-9ffc-ccce7282b6a0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (58babca0-5c3f-4fec-9ffc-ccce7282b6a0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24eb25bf-5686-42e4-960c-7b2b9263bd73): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (24eb25bf-5686-42e4-960c-7b2b9263bd73): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b581ecf3-50ca-4119-88d4-21a5b580468f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (b581ecf3-50ca-4119-88d4-21a5b580468f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (64c5a839-ea63-44e6-8019-a1d988c0ff3c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (64c5a839-ea63-44e6-8019-a1d988c0ff3c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (26cbf411-636b-4d74-8374-38766db43a71): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (26cbf411-636b-4d74-8374-38766db43a71): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d08a515e-6adf-4406-bbb4-705aa2fde834): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d08a515e-6adf-4406-bbb4-705aa2fde834): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c1461b66-a18b-4f9b-8bd0-099c87f44d02): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c1461b66-a18b-4f9b-8bd0-099c87f44d02): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f395e14-b12c-4d6e-be21-96e4981a58b5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (0f395e14-b12c-4d6e-be21-96e4981a58b5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (940494a2-dd24-4e45-bbb3-2d88208fb9be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (940494a2-dd24-4e45-bbb3-2d88208fb9be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8916d153-cda6-4a89-8aca-1649917f9885): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8916d153-cda6-4a89-8aca-1649917f9885): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2cbe925f-ec9c-48e5-b21e-8a0dfc3178e0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (2cbe925f-ec9c-48e5-b21e-8a0dfc3178e0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b7d639e-4b7b-4c73-bac0-70f7471f3068): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (1b7d639e-4b7b-4c73-bac0-70f7471f3068): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a3d69f9-26ce-4907-879b-10a962066293): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1a3d69f9-26ce-4907-879b-10a962066293): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (62865323-7f8d-4616-9c21-7d1048c7bb69): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (62865323-7f8d-4616-9c21-7d1048c7bb69): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8547e060-25bb-4f25-87dc-906e811d565a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8547e060-25bb-4f25-87dc-906e811d565a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8b9f8c20-e1bc-4649-9c7d-3944328237b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (8b9f8c20-e1bc-4649-9c7d-3944328237b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9496b2dd-d62f-4d2c-bdc5-88b63d63d7bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9496b2dd-d62f-4d2c-bdc5-88b63d63d7bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8057b0c6-b165-4e05-b4a9-c85672195c46): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (8057b0c6-b165-4e05-b4a9-c85672195c46): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ae410c5f-e58d-4035-8ada-54a60e2ec0a0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ae410c5f-e58d-4035-8ada-54a60e2ec0a0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b6d25f86-c43c-4299-b478-d1a82e554c81): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (b6d25f86-c43c-4299-b478-d1a82e554c81): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f72815f6-9fc8-4029-9ea4-fe7a04759c29): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f72815f6-9fc8-4029-9ea4-fe7a04759c29): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e53163e-7f1f-4f20-82c0-a59192f3b6da): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (3e53163e-7f1f-4f20-82c0-a59192f3b6da): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0a8f3ad-0a96-436e-a000-befdd3740b92): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c0a8f3ad-0a96-436e-a000-befdd3740b92): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a9419d23-a664-43c8-8bf7-4c5066685f18): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a9419d23-a664-43c8-8bf7-4c5066685f18): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee913f52-cc9f-4181-bded-1f16e691fb33): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ee913f52-cc9f-4181-bded-1f16e691fb33): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4941f097-3e9d-453d-b6bc-34ee809da50c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4941f097-3e9d-453d-b6bc-34ee809da50c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (467955c5-b3eb-48ba-b305-8b74e49a8414): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (467955c5-b3eb-48ba-b305-8b74e49a8414): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc4e548b-2a12-4040-8399-49a74a8e0eb2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (dc4e548b-2a12-4040-8399-49a74a8e0eb2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (140c0f06-3ba3-450a-9373-743e6c0e3199): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (140c0f06-3ba3-450a-9373-743e6c0e3199): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (686922c0-12ed-42c7-a653-60d9ad7331e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (686922c0-12ed-42c7-a653-60d9ad7331e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (671fa14d-75cc-495c-aafe-6f53c28785e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (671fa14d-75cc-495c-aafe-6f53c28785e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ecd92639-4e98-4076-a744-fa4b6cd92a3c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ecd92639-4e98-4076-a744-fa4b6cd92a3c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8cacb372-6221-4917-9ad1-bcac2b33ac26): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8cacb372-6221-4917-9ad1-bcac2b33ac26): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d076ceb0-297f-4d5d-8235-0d4a7f44e468): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (d076ceb0-297f-4d5d-8235-0d4a7f44e468): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0be9d711-95a2-4b74-9b11-456bac4a49c8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0be9d711-95a2-4b74-9b11-456bac4a49c8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (76eadee7-02a5-4a2c-a30e-54034cd89aa6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (76eadee7-02a5-4a2c-a30e-54034cd89aa6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (728026ff-c671-4f62-b906-1ee1f70ed658): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (728026ff-c671-4f62-b906-1ee1f70ed658): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c5a3c2db-1053-4874-a4c1-cdca9bd37284): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (c5a3c2db-1053-4874-a4c1-cdca9bd37284): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9d41dc59-9006-4fea-a617-15457496ee7c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (9d41dc59-9006-4fea-a617-15457496ee7c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8e8ff88b-cf7a-47df-a096-e30d1035b6f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (8e8ff88b-cf7a-47df-a096-e30d1035b6f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3592ec9d-ddef-425c-a092-92687190685e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3592ec9d-ddef-425c-a092-92687190685e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f6522e78-e2fc-46c7-8ce1-7df7ba566680): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (f6522e78-e2fc-46c7-8ce1-7df7ba566680): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70911747-b14b-4f32-ab77-8df2debab434): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (70911747-b14b-4f32-ab77-8df2debab434): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (abcc6e4e-02ca-4730-9ca0-092ed0bb9754): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (abcc6e4e-02ca-4730-9ca0-092ed0bb9754): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12cfbd96-e1e8-4fdd-b930-8dd4f4f0b703): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (12cfbd96-e1e8-4fdd-b930-8dd4f4f0b703): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05c70445-bb57-4a23-8a99-7d0ed242b2a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (05c70445-bb57-4a23-8a99-7d0ed242b2a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (b653850f-f94b-452e-a219-522cb93cd7f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b653850f-f94b-452e-a219-522cb93cd7f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (66d723c5-a0f8-421b-8734-41de1e6fa5cd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (66d723c5-a0f8-421b-8734-41de1e6fa5cd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e395ac7-1309-428b-b786-3f717136adbc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1e395ac7-1309-428b-b786-3f717136adbc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71a41a8f-1dc3-4639-95da-25a19c967afa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (71a41a8f-1dc3-4639-95da-25a19c967afa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (66df5f7d-9c55-452a-a68d-4d436f3a9daf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (66df5f7d-9c55-452a-a68d-4d436f3a9daf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4750f249-f4ad-4b3d-a88d-5b1394a57241): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (4750f249-f4ad-4b3d-a88d-5b1394a57241): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fcc73fa5-6e35-4c3e-8016-fcaa92689928): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (fcc73fa5-6e35-4c3e-8016-fcaa92689928): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (badaa8d5-7436-4482-959b-c48eb4907ad4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (badaa8d5-7436-4482-959b-c48eb4907ad4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (33bd8efc-dd2c-4e57-ad5b-791911abed8e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (33bd8efc-dd2c-4e57-ad5b-791911abed8e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (af9b7223-f49a-4c9e-bbd7-21ebb0cdf070): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (af9b7223-f49a-4c9e-bbd7-21ebb0cdf070): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1526a92-be0d-4bd9-8794-ff25fbd1b065): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b1526a92-be0d-4bd9-8794-ff25fbd1b065): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (07aa8e8b-17fa-4678-b4b4-45dde8b42e52): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (07aa8e8b-17fa-4678-b4b4-45dde8b42e52): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (002306c0-ae33-4e6b-9eaf-50b45f4b420d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (002306c0-ae33-4e6b-9eaf-50b45f4b420d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (30425973-a9a3-408b-84bf-4921b5b01621): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (30425973-a9a3-408b-84bf-4921b5b01621): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6c192b9-bae2-43e7-901a-b6eb5f0ea557): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a6c192b9-bae2-43e7-901a-b6eb5f0ea557): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fb18850-7aae-44c5-8004-0e6bde60ec39): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (7fb18850-7aae-44c5-8004-0e6bde60ec39): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fad16e9-dc5d-45c5-b5de-e4445642a78c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7fad16e9-dc5d-45c5-b5de-e4445642a78c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (963cdc92-84d4-498e-a2fc-02bdbf48a8bb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (963cdc92-84d4-498e-a2fc-02bdbf48a8bb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11adb975-e200-46c9-8600-4f3d6c75ffc9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (11adb975-e200-46c9-8600-4f3d6c75ffc9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (85a50c66-e07d-47cf-885b-b3d5decdd794): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (85a50c66-e07d-47cf-885b-b3d5decdd794): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (695b1bd0-96e8-4442-ac0e-3c9ad047c1e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (695b1bd0-96e8-4442-ac0e-3c9ad047c1e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c8ee899a-a867-47f5-a6e1-64d8069b8bbb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c8ee899a-a867-47f5-a6e1-64d8069b8bbb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8c422763-07db-4bf9-9043-f67539a3f564): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (8c422763-07db-4bf9-9043-f67539a3f564): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6560134e-6aaf-4ad0-abc5-3c4246b1f5a4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (6560134e-6aaf-4ad0-abc5-3c4246b1f5a4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (80890af2-a2c4-491c-8e93-4d1a541b833b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (80890af2-a2c4-491c-8e93-4d1a541b833b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb4fd354-5de8-4355-a981-799a8eb228c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (eb4fd354-5de8-4355-a981-799a8eb228c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1cd9e6ec-3d1e-468a-bf28-baae32ab6e0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1cd9e6ec-3d1e-468a-bf28-baae32ab6e0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6341da95-515c-433b-8615-8e4bfaa7ba60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (6341da95-515c-433b-8615-8e4bfaa7ba60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a023904e-226c-4b52-9511-0b6f53f2d540): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a023904e-226c-4b52-9511-0b6f53f2d540): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1cb3ae4-753f-43c2-b73c-e154b74df82e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (b1cb3ae4-753f-43c2-b73c-e154b74df82e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b912017-703e-49e0-bf8c-171b73446836): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0b912017-703e-49e0-bf8c-171b73446836): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7a7514d3-ac33-43ee-bdda-62905e6b07a0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (7a7514d3-ac33-43ee-bdda-62905e6b07a0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (95000498-670f-42fc-b0e5-87256a06129c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (95000498-670f-42fc-b0e5-87256a06129c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ade33ba8-1966-4a23-b8f8-e47b65004be5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (ade33ba8-1966-4a23-b8f8-e47b65004be5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (87907504-c29d-45bc-9586-f63d180237e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (87907504-c29d-45bc-9586-f63d180237e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7323c5c-a21b-4e3f-a3fd-3b60ca33e567): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (d7323c5c-a21b-4e3f-a3fd-3b60ca33e567): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f71f83e-6479-44c5-848c-6d5525009b2c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (0f71f83e-6479-44c5-848c-6d5525009b2c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc10da88-463d-4ebc-91fb-56eae7b9d339): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (cc10da88-463d-4ebc-91fb-56eae7b9d339): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7e1b87c-749e-4aaf-9398-cdfb3eef1593): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d7e1b87c-749e-4aaf-9398-cdfb3eef1593): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed8da84c-93df-4050-9b97-cd4776c55029): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (ed8da84c-93df-4050-9b97-cd4776c55029): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (41a7106a-06a4-4f83-9cf8-23415cad4f2c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (41a7106a-06a4-4f83-9cf8-23415cad4f2c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1b036b5-150a-43d5-be30-c336b820dfc5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (e1b036b5-150a-43d5-be30-c336b820dfc5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (835fa23b-50e3-4506-a199-a48bcb324372): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (835fa23b-50e3-4506-a199-a48bcb324372): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (af7635b6-e123-4aeb-9019-af64f51facc8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (af7635b6-e123-4aeb-9019-af64f51facc8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fdc1eda2-32ac-41d9-8753-922f7a422536): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (fdc1eda2-32ac-41d9-8753-922f7a422536): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b81265b2-c0a8-4cda-bf5e-3addf8e07110): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (b81265b2-c0a8-4cda-bf5e-3addf8e07110): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (30528db3-c932-4710-95da-c073d5bf7513): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (30528db3-c932-4710-95da-c073d5bf7513): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6445fdbe-2552-443d-afde-6f7857f1762c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (6445fdbe-2552-443d-afde-6f7857f1762c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc0958db-1b2b-4bbd-a3dc-70396391aef4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (cc0958db-1b2b-4bbd-a3dc-70396391aef4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fe845ce-137c-427d-a178-a83ab013c0f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (7fe845ce-137c-427d-a178-a83ab013c0f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (22a486c5-981d-4d67-904b-c5745379cd41): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (22a486c5-981d-4d67-904b-c5745379cd41): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (89ec05b4-959c-4880-b669-28b6c655a9b8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (89ec05b4-959c-4880-b669-28b6c655a9b8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3b071e3-e12d-41ee-9911-d19d6643bdaa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b3b071e3-e12d-41ee-9911-d19d6643bdaa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5e09eb6-354a-4c71-ba97-e20ad8511d38): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (d5e09eb6-354a-4c71-ba97-e20ad8511d38): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e684c82c-2223-408a-a458-cd8e3c417bde): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (e684c82c-2223-408a-a458-cd8e3c417bde): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4d93ef20-3b71-469f-808e-c48ea9c6d150): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4d93ef20-3b71-469f-808e-c48ea9c6d150): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4fd31f48-6a97-447b-8df8-55522aab6c7c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4fd31f48-6a97-447b-8df8-55522aab6c7c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ebf2a7a-b933-4d74-a329-5875c7424425): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5ebf2a7a-b933-4d74-a329-5875c7424425): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad8fe443-6a7c-44ae-b125-7c9f088d91ef): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (ad8fe443-6a7c-44ae-b125-7c9f088d91ef): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd45af3c-573e-4f84-baff-c19894ec46e0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (fd45af3c-573e-4f84-baff-c19894ec46e0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c4fa3b9c-e785-4dde-b1fb-0df1565cd26f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c4fa3b9c-e785-4dde-b1fb-0df1565cd26f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bdddbab6-05d8-4d6e-9193-6d803ac6e491): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (bdddbab6-05d8-4d6e-9193-6d803ac6e491): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6c9ed343-edf3-4293-9a90-0a55e65c16e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (6c9ed343-edf3-4293-9a90-0a55e65c16e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (afe8d966-c0cb-4a1c-81e7-897bee8bfabf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (afe8d966-c0cb-4a1c-81e7-897bee8bfabf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c8df72a7-6c12-48c1-9b02-3e9aa2270d3d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (c8df72a7-6c12-48c1-9b02-3e9aa2270d3d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6ca971e2-b6d5-461c-9c88-af8ec21b4b44): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6ca971e2-b6d5-461c-9c88-af8ec21b4b44): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (35baf8e1-ae09-4a8e-ae52-93e58c7e5bf1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (35baf8e1-ae09-4a8e-ae52-93e58c7e5bf1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (06f7b082-1928-4d48-8027-db7ed3d395a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (06f7b082-1928-4d48-8027-db7ed3d395a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a3f95ff9-701b-4dc9-bddc-cc66c74062fc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (a3f95ff9-701b-4dc9-bddc-cc66c74062fc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24b9012c-a747-44dd-b5dc-7f846ff07fdc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (24b9012c-a747-44dd-b5dc-7f846ff07fdc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5fdb255e-62f8-4b36-af8a-99989f595753): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (5fdb255e-62f8-4b36-af8a-99989f595753): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36aa72a1-f9c7-4d6e-a426-854b55a3fffa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (36aa72a1-f9c7-4d6e-a426-854b55a3fffa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4b9bb989-3dc1-4cac-b9d0-fba332b33dde): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (4b9bb989-3dc1-4cac-b9d0-fba332b33dde): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1480ca48-f55f-4bef-9150-776780288a1e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1480ca48-f55f-4bef-9150-776780288a1e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7c81b478-ae68-4e02-94ee-2f722e1f24a2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7c81b478-ae68-4e02-94ee-2f722e1f24a2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5a6a81b2-bd4a-4026-9629-481cb4a0f77d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5a6a81b2-bd4a-4026-9629-481cb4a0f77d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (716bc47d-b22f-4fe8-bd13-fa6283abd9e6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (716bc47d-b22f-4fe8-bd13-fa6283abd9e6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd63a920-b66d-403a-9205-85c5e6c629cd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fd63a920-b66d-403a-9205-85c5e6c629cd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a2965630-bc29-47be-a04f-83e537aad2e6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (a2965630-bc29-47be-a04f-83e537aad2e6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f1028959-5556-4754-9827-05e74824aec2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f1028959-5556-4754-9827-05e74824aec2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea060286-24cb-4e00-8f35-640e9c9ac277): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ea060286-24cb-4e00-8f35-640e9c9ac277): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b6680007-54fa-4466-8a9e-4361b765b5e9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b6680007-54fa-4466-8a9e-4361b765b5e9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1266f0e7-5dcf-4ee1-be5a-fc3b9ad06132): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1266f0e7-5dcf-4ee1-be5a-fc3b9ad06132): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dac6d7ab-f1b9-464f-bd21-a87af40c77c0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (dac6d7ab-f1b9-464f-bd21-a87af40c77c0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea8373aa-8d1e-40eb-9f77-4553039fbe32): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (ea8373aa-8d1e-40eb-9f77-4553039fbe32): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (202dfb37-ef45-4608-b197-b96773f15251): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (202dfb37-ef45-4608-b197-b96773f15251): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d434acaa-519e-4195-8c0f-91a1d284cb95): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (d434acaa-519e-4195-8c0f-91a1d284cb95): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc89af19-e9d9-43da-b5b0-8f2733372554): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (cc89af19-e9d9-43da-b5b0-8f2733372554): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3a50e1b5-a88c-4841-964e-970536f5a265): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (3a50e1b5-a88c-4841-964e-970536f5a265): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (22ebd3b8-810d-4eb6-8ef5-650fa678b693): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (22ebd3b8-810d-4eb6-8ef5-650fa678b693): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4552f7f4-3866-4c8a-8e01-d9bc9899c813): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (4552f7f4-3866-4c8a-8e01-d9bc9899c813): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1157f665-1dab-4133-b1e8-cfafab85d86c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1157f665-1dab-4133-b1e8-cfafab85d86c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (adc2b632-35cf-4515-a567-1b2bd294f938): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (adc2b632-35cf-4515-a567-1b2bd294f938): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (77aafbaa-8b6c-49d9-9350-5e9ad770e896): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (77aafbaa-8b6c-49d9-9350-5e9ad770e896): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (081ea9a4-b24b-4a8b-bd0e-370467de1e59): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (081ea9a4-b24b-4a8b-bd0e-370467de1e59): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (81de9739-8f21-4d87-a9c4-29382b64dbf4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (81de9739-8f21-4d87-a9c4-29382b64dbf4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (20c94644-4d69-4acc-821a-9557d56153f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (20c94644-4d69-4acc-821a-9557d56153f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (cbd023e3-94af-40e8-9362-0b0a7d910c77): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cbd023e3-94af-40e8-9362-0b0a7d910c77): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (01c13f87-8e8d-47ee-8ae6-832ff7190f2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (01c13f87-8e8d-47ee-8ae6-832ff7190f2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (557e3ca5-1194-4ac6-b224-2bfed14f4ec3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (557e3ca5-1194-4ac6-b224-2bfed14f4ec3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b61f50fb-1f6e-4e91-a082-62f68c77ca1d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (b61f50fb-1f6e-4e91-a082-62f68c77ca1d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3579c988-779b-4edd-8a20-4e34ac474306): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3579c988-779b-4edd-8a20-4e34ac474306): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05e79d64-00e8-48d7-95a6-93e1ead824eb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (05e79d64-00e8-48d7-95a6-93e1ead824eb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4d1c6050-aca1-4318-969f-10fecb7661f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (4d1c6050-aca1-4318-969f-10fecb7661f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a146e651-59ae-46e5-b0cd-80f843ff0fa7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (a146e651-59ae-46e5-b0cd-80f843ff0fa7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fcccebb5-4a45-4491-b4f5-06ede34a57a4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fcccebb5-4a45-4491-b4f5-06ede34a57a4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ba3ad84-296b-4270-9eb4-3be924932be7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (3ba3ad84-296b-4270-9eb4-3be924932be7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f82da01-d63c-49aa-884a-909edfc1c496): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6f82da01-d63c-49aa-884a-909edfc1c496): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0120815d-6c34-436d-8448-b5a878827ca2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (0120815d-6c34-436d-8448-b5a878827ca2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (249b6de1-9234-4210-8dc2-312304724943): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (249b6de1-9234-4210-8dc2-312304724943): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (453855ba-7889-4a1c-8760-978688b94325): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (453855ba-7889-4a1c-8760-978688b94325): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f37b1a36-e238-4c4e-9a12-b55a79e2249a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f37b1a36-e238-4c4e-9a12-b55a79e2249a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (37d4d71d-762f-434d-9ea6-fc7c36310cde): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (37d4d71d-762f-434d-9ea6-fc7c36310cde): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f0f6f5d5-cadc-4df2-b919-f4a9d829377e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f0f6f5d5-cadc-4df2-b919-f4a9d829377e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0b25655-6143-4a94-bd29-427f59f8e6c8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (a0b25655-6143-4a94-bd29-427f59f8e6c8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2985c34f-c54b-44c3-b8e5-5ade2f0b803f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2985c34f-c54b-44c3-b8e5-5ade2f0b803f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (825e20d2-c6f6-41d6-8e8d-fe537c1d8063): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (825e20d2-c6f6-41d6-8e8d-fe537c1d8063): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71334529-09c3-472f-ae4f-a64a391afa3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (71334529-09c3-472f-ae4f-a64a391afa3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f081226c-fe5f-4db5-af40-665de8c9dc43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f081226c-fe5f-4db5-af40-665de8c9dc43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b858f4fa-ed4f-4a5b-b851-fd0922bbd416): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (b858f4fa-ed4f-4a5b-b851-fd0922bbd416): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cac691e4-0528-477f-9bab-6a4eb46e3311): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (cac691e4-0528-477f-9bab-6a4eb46e3311): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19ea9b4f-99d3-4b41-8231-96b95dda6c43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (19ea9b4f-99d3-4b41-8231-96b95dda6c43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ef9260c-1a79-4147-b5d3-1acfcaa9c94a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (0ef9260c-1a79-4147-b5d3-1acfcaa9c94a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5572ba24-a852-4a99-ade0-1df27267fb89): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5572ba24-a852-4a99-ade0-1df27267fb89): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fbf98a54-38a8-4b78-998c-d579a0e3bf9a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (fbf98a54-38a8-4b78-998c-d579a0e3bf9a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (46d82df7-6360-4d8b-8b8e-e59b7c4f3b27): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (46d82df7-6360-4d8b-8b8e-e59b7c4f3b27): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (89c7b205-e8cf-4114-ab21-8f2d2e0745d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (89c7b205-e8cf-4114-ab21-8f2d2e0745d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8efadc6c-5474-4b2a-8189-4bbb3ddb3266): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8efadc6c-5474-4b2a-8189-4bbb3ddb3266): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b7759fb-899c-48df-823f-15f2175e9187): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (2b7759fb-899c-48df-823f-15f2175e9187): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (517db278-3220-4e1a-a672-5b1687907ad2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (517db278-3220-4e1a-a672-5b1687907ad2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (125214e3-6d1a-4254-95c6-9307f581165d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (125214e3-6d1a-4254-95c6-9307f581165d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4c9881e-cfe8-49ce-85f0-babdb455e10b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e4c9881e-cfe8-49ce-85f0-babdb455e10b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (912cad43-fcff-4806-a052-205585c27546): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (912cad43-fcff-4806-a052-205585c27546): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c692b6c9-42db-4928-855d-990ef56b1316): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (c692b6c9-42db-4928-855d-990ef56b1316): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a784a9f9-734c-4f83-94b0-d5ecb6070705): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (a784a9f9-734c-4f83-94b0-d5ecb6070705): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f6295676-9c0f-4642-abce-0969d78c0112): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f6295676-9c0f-4642-abce-0969d78c0112): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7811ce73-70a4-4ec0-8d0e-13aaf1a365eb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (7811ce73-70a4-4ec0-8d0e-13aaf1a365eb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3decbf4a-2ad4-4aae-a6fd-19a5584d03e6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (3decbf4a-2ad4-4aae-a6fd-19a5584d03e6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4631711a-a3ff-42b0-acc2-9e4945ebaef0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (4631711a-a3ff-42b0-acc2-9e4945ebaef0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e287ceb3-cf22-4647-ba88-a4d074d28403): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (e287ceb3-cf22-4647-ba88-a4d074d28403): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (27e4ea46-bea1-43d2-acec-f7da10b8246e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (27e4ea46-bea1-43d2-acec-f7da10b8246e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (25b52804-4b46-4e7a-9933-bd5e17726517): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (25b52804-4b46-4e7a-9933-bd5e17726517): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (87bc4976-fc77-4bdf-8422-802aaf82f526): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (87bc4976-fc77-4bdf-8422-802aaf82f526): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0883290a-9dee-430a-99de-5fbea4980faf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (0883290a-9dee-430a-99de-5fbea4980faf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (589a00ad-4ee5-4a45-8290-d66de3b08e67): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (589a00ad-4ee5-4a45-8290-d66de3b08e67): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (412bce0d-269f-4289-a0fd-12a2afe65fdd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (412bce0d-269f-4289-a0fd-12a2afe65fdd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (74e7472f-3020-4f0b-9a96-1594dca5488d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (74e7472f-3020-4f0b-9a96-1594dca5488d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d234be96-a23d-4344-9fa8-dac627d9ebae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (d234be96-a23d-4344-9fa8-dac627d9ebae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3da6cab5-51d7-49b0-80cd-d8800f9669bf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (3da6cab5-51d7-49b0-80cd-d8800f9669bf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (990722ee-b6b8-4eae-8370-4631ff5be7b6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (990722ee-b6b8-4eae-8370-4631ff5be7b6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97ff5a9c-ed95-4072-83ec-1ed092327693): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (97ff5a9c-ed95-4072-83ec-1ed092327693): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cddbc941-19af-4564-a41b-f1b4c10e9d7c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (cddbc941-19af-4564-a41b-f1b4c10e9d7c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7a69d377-16d0-464d-8630-c38bbe1a3556): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7a69d377-16d0-464d-8630-c38bbe1a3556): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (68974534-9735-4503-a529-0aea08bc89a4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (68974534-9735-4503-a529-0aea08bc89a4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (98bfe1eb-3abb-44b1-b4ba-ba416dafb288): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (98bfe1eb-3abb-44b1-b4ba-ba416dafb288): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f2034b17-dc80-4258-9d76-abb67f26c988): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (f2034b17-dc80-4258-9d76-abb67f26c988): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5d9f714-7fb9-4554-a688-4b8326ee6789): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (d5d9f714-7fb9-4554-a688-4b8326ee6789): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (224349a4-3ff8-4df6-8c99-58971eba8a8e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (224349a4-3ff8-4df6-8c99-58971eba8a8e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b010250-8dfb-401a-87bf-b5592b7831ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (7b010250-8dfb-401a-87bf-b5592b7831ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c64e3988-d42a-469f-8632-714b04eceeb9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (c64e3988-d42a-469f-8632-714b04eceeb9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52afa4ed-8a21-46f5-889a-6a2e32f1cdec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (52afa4ed-8a21-46f5-889a-6a2e32f1cdec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3ed3b70-1535-4a50-bed7-47ba5d070733): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (f3ed3b70-1535-4a50-bed7-47ba5d070733): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dfb9098b-e423-489f-8c45-844c7cc0fdd6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dfb9098b-e423-489f-8c45-844c7cc0fdd6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (94c4c7d7-7cf7-42eb-972c-9c337198d9e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (94c4c7d7-7cf7-42eb-972c-9c337198d9e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca020c36-5b9f-455a-b528-7744bb054d7e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ca020c36-5b9f-455a-b528-7744bb054d7e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (989cad63-aac5-4760-86a9-8f5c01bbb717): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (989cad63-aac5-4760-86a9-8f5c01bbb717): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa7f31be-1397-4722-816d-10af71a50352): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fa7f31be-1397-4722-816d-10af71a50352): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef47d0c9-03d9-4e02-bfc2-96ca3334ff87): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (ef47d0c9-03d9-4e02-bfc2-96ca3334ff87): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f1012f58-e158-4aad-ba3e-50fa8784ff91): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f1012f58-e158-4aad-ba3e-50fa8784ff91): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1629bb59-9174-4b1f-b11a-0ed7bead5357): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (1629bb59-9174-4b1f-b11a-0ed7bead5357): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a1eccd3d-d497-4b7b-924a-ad79635cb512): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a1eccd3d-d497-4b7b-924a-ad79635cb512): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8e1b0e9a-5a43-405f-8353-4dd25273a374): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8e1b0e9a-5a43-405f-8353-4dd25273a374): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70c79b91-428e-490f-882f-4db5cb2c64a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (70c79b91-428e-490f-882f-4db5cb2c64a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb5abdab-0811-46e5-af91-d10e27d5fcdc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (eb5abdab-0811-46e5-af91-d10e27d5fcdc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (228d8a85-b35d-4b55-860d-48d5e639d13e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (228d8a85-b35d-4b55-860d-48d5e639d13e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ce640716-9e51-4fe7-b99e-1d0ed6a151ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (ce640716-9e51-4fe7-b99e-1d0ed6a151ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aef0a64e-3209-4542-9000-77e30760c8aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (aef0a64e-3209-4542-9000-77e30760c8aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c8bb3b1-5333-4daa-b781-2802a7aca98e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9c8bb3b1-5333-4daa-b781-2802a7aca98e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6810a173-ae11-4987-90af-f56f211aff9c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6810a173-ae11-4987-90af-f56f211aff9c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b53c8241-8dd0-4ad6-93c8-d238cf51a8d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b53c8241-8dd0-4ad6-93c8-d238cf51a8d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (484aad36-c878-42cc-91c9-1a39b100ec7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (484aad36-c878-42cc-91c9-1a39b100ec7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (47174508-33e2-4d33-99b2-ddb59f60ffe2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (47174508-33e2-4d33-99b2-ddb59f60ffe2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (419eff85-6c9a-452e-acf9-92103c8c3019): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (419eff85-6c9a-452e-acf9-92103c8c3019): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f94f8f8-7a56-4383-9074-9400182aa2cd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (3f94f8f8-7a56-4383-9074-9400182aa2cd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40684240-fbea-4889-8dab-273cfd0de434): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (40684240-fbea-4889-8dab-273cfd0de434): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24f6223b-3b06-475a-aa23-4a8fe6b204e9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (24f6223b-3b06-475a-aa23-4a8fe6b204e9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc015389-c861-456d-aaf0-1ca82e1440cc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (dc015389-c861-456d-aaf0-1ca82e1440cc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e63d462b-2fc1-4efa-9d41-ef505859bc95): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (e63d462b-2fc1-4efa-9d41-ef505859bc95): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (53a34769-cf58-4c87-900e-2038860c8f22): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (53a34769-cf58-4c87-900e-2038860c8f22): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca1dc7f7-0d49-448b-9eb7-8c3f3da0af6b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (ca1dc7f7-0d49-448b-9eb7-8c3f3da0af6b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e064101-df86-48d0-9f4a-c40fb79e7721): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (3e064101-df86-48d0-9f4a-c40fb79e7721): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d964c6a8-6b84-4a17-9c26-ef14ae37f170): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (d964c6a8-6b84-4a17-9c26-ef14ae37f170): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa2e6a29-d7f6-4902-a5ec-11c1d17fa87b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (aa2e6a29-d7f6-4902-a5ec-11c1d17fa87b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1621e73-2be3-4f63-9924-d59c1d7fb38c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (e1621e73-2be3-4f63-9924-d59c1d7fb38c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (fcab4977-e5dd-4bc4-8ba8-e2ba45b49167): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fcab4977-e5dd-4bc4-8ba8-e2ba45b49167): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e6ebbb3c-78b0-4e66-b4e1-efc988571932): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e6ebbb3c-78b0-4e66-b4e1-efc988571932): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6d743b7d-4d3f-4181-b843-921f005f43e5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6d743b7d-4d3f-4181-b843-921f005f43e5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa61d125-d847-431f-bd78-da12e41f71ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (fa61d125-d847-431f-bd78-da12e41f71ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (834a08e0-f6cf-421f-a1e2-d89d15629ec3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (834a08e0-f6cf-421f-a1e2-d89d15629ec3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5edc3ea4-e071-47fa-b8ed-88eb850e9794): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (5edc3ea4-e071-47fa-b8ed-88eb850e9794): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c7c849ac-61f0-4a37-b204-fe73983c37ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (c7c849ac-61f0-4a37-b204-fe73983c37ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (714e5a00-7fc4-435d-a588-57c80caa7788): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (714e5a00-7fc4-435d-a588-57c80caa7788): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7bd09850-0c25-419c-a04b-ad124a1cf04e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7bd09850-0c25-419c-a04b-ad124a1cf04e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed95f30d-c6c1-4178-ac9c-8a71c252085c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (ed95f30d-c6c1-4178-ac9c-8a71c252085c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6dccd221-8f39-400e-bd20-97871c346696): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6dccd221-8f39-400e-bd20-97871c346696): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b0c22f1-5aa6-40f6-b6e1-19f47297a3c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (2b0c22f1-5aa6-40f6-b6e1-19f47297a3c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (453ca617-ec2a-42aa-a1ab-83735df7c058): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (453ca617-ec2a-42aa-a1ab-83735df7c058): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (289d7905-4580-43d7-8cda-faa0eccd4c52): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (289d7905-4580-43d7-8cda-faa0eccd4c52): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b8325218-3305-46df-8e88-dada81b51e15): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b8325218-3305-46df-8e88-dada81b51e15): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e86efc96-eef0-47fe-8c4b-14666f641e69): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e86efc96-eef0-47fe-8c4b-14666f641e69): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8afc88b7-2fab-4ed7-ad0b-3c3fd9bbd361): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8afc88b7-2fab-4ed7-ad0b-3c3fd9bbd361): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd2a7995-18f4-449b-869a-ca2fa0dc0835): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (fd2a7995-18f4-449b-869a-ca2fa0dc0835): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5b8f0f93-5963-4fc7-8b66-97466b567082): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5b8f0f93-5963-4fc7-8b66-97466b567082): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e81d43b-076e-4a1d-be13-3ef039bcecc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (3e81d43b-076e-4a1d-be13-3ef039bcecc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb91ba54-a591-4a19-ba84-7f574a25b1e1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eb91ba54-a591-4a19-ba84-7f574a25b1e1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5fd420b1-0f6b-4ade-a4fc-23615681a40b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5fd420b1-0f6b-4ade-a4fc-23615681a40b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f19528b-8740-4f29-84b1-5e23da972157): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (3f19528b-8740-4f29-84b1-5e23da972157): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6ff640f8-f518-46d7-9140-9aa9c06c7945): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (6ff640f8-f518-46d7-9140-9aa9c06c7945): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (30de2891-ca2e-4333-855c-01b82e53276c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (30de2891-ca2e-4333-855c-01b82e53276c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (333751dd-3638-46ff-a022-69ad097e418e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (333751dd-3638-46ff-a022-69ad097e418e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (754a08e3-2c92-44f1-b33a-1045c55ec464): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (754a08e3-2c92-44f1-b33a-1045c55ec464): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f642bce3-725f-4137-81ee-6229f5d973eb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (f642bce3-725f-4137-81ee-6229f5d973eb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d834a20c-435f-40b3-b0bf-df372ac2246d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d834a20c-435f-40b3-b0bf-df372ac2246d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1cc68f77-1f06-4a1a-93c6-705240dec1de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (1cc68f77-1f06-4a1a-93c6-705240dec1de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dbcb1952-c1de-4960-a70a-1016b2ece232): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dbcb1952-c1de-4960-a70a-1016b2ece232): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5edfc45f-16cd-45ee-a19d-170d5c8ff470): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (5edfc45f-16cd-45ee-a19d-170d5c8ff470): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b424ce1-7ce1-4138-8524-a82262a32e90): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7b424ce1-7ce1-4138-8524-a82262a32e90): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5845b995-50c1-4dd7-8466-2138ee22534b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (5845b995-50c1-4dd7-8466-2138ee22534b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7e8e6408-1cdd-49bb-bfda-90ef5988389a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7e8e6408-1cdd-49bb-bfda-90ef5988389a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b1b7365-9399-43ec-8fa9-4fe288f76a43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (2b1b7365-9399-43ec-8fa9-4fe288f76a43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fdd0cf21-2a78-4a4f-8c87-1f1d36577c65): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (fdd0cf21-2a78-4a4f-8c87-1f1d36577c65): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fcb73b24-99f2-4f35-b490-230f924a3e4b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (fcb73b24-99f2-4f35-b490-230f924a3e4b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e2ac4bf7-17dd-4cf0-9769-1e9121c6202b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e2ac4bf7-17dd-4cf0-9769-1e9121c6202b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9352684c-8fbb-4cfd-9a90-d2be04f5e1f5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (9352684c-8fbb-4cfd-9a90-d2be04f5e1f5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40390bf1-26bf-486b-984a-7e6dd2ac7986): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (40390bf1-26bf-486b-984a-7e6dd2ac7986): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1ac4e097-bdd2-466a-ae1b-9e840d3baa0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (1ac4e097-bdd2-466a-ae1b-9e840d3baa0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8aeb39b3-af7d-4045-a245-4c5054165f07): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (8aeb39b3-af7d-4045-a245-4c5054165f07): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c49c5414-1262-4366-bd20-0cad2a625991): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (c49c5414-1262-4366-bd20-0cad2a625991): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a4d6f52-f58b-4312-8961-997bf63867b8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (6a4d6f52-f58b-4312-8961-997bf63867b8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a82e18f-5733-4c2b-83a2-8b86f306fa90): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (9a82e18f-5733-4c2b-83a2-8b86f306fa90): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7b70ad2-bf28-4936-ac34-9b8a5e9319fa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f7b70ad2-bf28-4936-ac34-9b8a5e9319fa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c85e8b6e-52f3-41a5-9e96-c74d8e86ee02): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (c85e8b6e-52f3-41a5-9e96-c74d8e86ee02): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5daa0ac5-1aab-450c-9b84-a2142b27b49e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (5daa0ac5-1aab-450c-9b84-a2142b27b49e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8dd48346-d850-48c6-9ca4-744f048e866d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (8dd48346-d850-48c6-9ca4-744f048e866d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0c318d7-8c3a-479b-a461-07a493b3c77b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (a0c318d7-8c3a-479b-a461-07a493b3c77b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c671e6e4-b27a-4a89-b01c-df5dffe12885): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (c671e6e4-b27a-4a89-b01c-df5dffe12885): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd057a6f-9500-4675-b7ab-f39d69f51c97): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cd057a6f-9500-4675-b7ab-f39d69f51c97): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (29a16afa-0dba-44d3-a255-b1a16fb9f026): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (29a16afa-0dba-44d3-a255-b1a16fb9f026): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6ad5a231-7c62-462c-a390-1eb2e6f9031e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (6ad5a231-7c62-462c-a390-1eb2e6f9031e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (61a6a630-ad1b-405e-8f29-48f4c18b087a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (61a6a630-ad1b-405e-8f29-48f4c18b087a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a2c5291f-07da-479b-80f8-cb2780a22d64): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a2c5291f-07da-479b-80f8-cb2780a22d64): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d40ca121-0872-41a8-b006-f524c9a206ef): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d40ca121-0872-41a8-b006-f524c9a206ef): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cbc26c7d-09ba-43b0-9122-d67ed9a1c412): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (cbc26c7d-09ba-43b0-9122-d67ed9a1c412): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d887610-73a1-4914-8174-ce7fb9ccbeac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (3d887610-73a1-4914-8174-ce7fb9ccbeac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e93bfba2-b667-4250-b8fb-6724e57671fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e93bfba2-b667-4250-b8fb-6724e57671fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e504238-f82b-4557-ba65-9a4dda84370f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (6e504238-f82b-4557-ba65-9a4dda84370f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55fc31f9-8117-46b5-a417-badbce2eed5a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (55fc31f9-8117-46b5-a417-badbce2eed5a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbdc2b83-b7a7-4c7f-9f6a-f3baff653b9e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bbdc2b83-b7a7-4c7f-9f6a-f3baff653b9e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (34c20666-9bbd-4fff-8445-066375629996): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (34c20666-9bbd-4fff-8445-066375629996): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff311e4b-f854-48e1-bb48-ae1b2051267c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ff311e4b-f854-48e1-bb48-ae1b2051267c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (31ae769e-2135-4bc5-97aa-1e88c8249c75): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (31ae769e-2135-4bc5-97aa-1e88c8249c75): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e12eff0-5386-483e-9880-44ed1abe0bdf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3e12eff0-5386-483e-9880-44ed1abe0bdf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c2d7c8d-9a88-491b-a6d1-8effb5a0808a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (5c2d7c8d-9a88-491b-a6d1-8effb5a0808a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3805411f-65b0-4c2e-8ae7-833d41e9cd9c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3805411f-65b0-4c2e-8ae7-833d41e9cd9c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a3d3469-0a50-4dae-9ad9-c36573ac07b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (4a3d3469-0a50-4dae-9ad9-c36573ac07b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ff0753b-4f35-4d0b-b778-aeaf7a82cd46): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3ff0753b-4f35-4d0b-b778-aeaf7a82cd46): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (23074ab2-9fc9-441d-8ab5-15ffc171d241): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (23074ab2-9fc9-441d-8ab5-15ffc171d241): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f161b068-38a2-44c7-baff-4eca0193da44): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f161b068-38a2-44c7-baff-4eca0193da44): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11fe2ed7-f38a-4636-bf4d-72ef1a8ac7b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (11fe2ed7-f38a-4636-bf4d-72ef1a8ac7b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8f4562fe-0cf3-4ebc-866c-ac80c6528f51): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8f4562fe-0cf3-4ebc-866c-ac80c6528f51): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0b56329-050d-4a4e-8ac9-da8f278fdb94): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a0b56329-050d-4a4e-8ac9-da8f278fdb94): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e371a37-b20c-4b7b-bb3e-49ce6e437397): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6e371a37-b20c-4b7b-bb3e-49ce6e437397): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aabf772f-c35a-425a-8275-73408bc187d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (aabf772f-c35a-425a-8275-73408bc187d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca7d551e-2266-466e-965f-9e0b042342ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ca7d551e-2266-466e-965f-9e0b042342ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac408684-b018-4472-969e-63769b3988d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ac408684-b018-4472-969e-63769b3988d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e62f62df-83ed-4a79-9c68-f21f40a3bab4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e62f62df-83ed-4a79-9c68-f21f40a3bab4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cf51a8ef-7525-45f3-8f18-815f4b9c4b75): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cf51a8ef-7525-45f3-8f18-815f4b9c4b75): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d2b37097-954d-4198-bf1c-80d1a602bfd3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d2b37097-954d-4198-bf1c-80d1a602bfd3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0212a30-956f-40c6-a2d5-9caecae8cf4c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (c0212a30-956f-40c6-a2d5-9caecae8cf4c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f8aa88f9-54de-46ef-a5ac-75748217ce41): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f8aa88f9-54de-46ef-a5ac-75748217ce41): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91a29a71-bde7-4824-a5f4-bdf7ab19720b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (91a29a71-bde7-4824-a5f4-bdf7ab19720b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36f73d5e-b53f-4bad-9245-17160fe3a5dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (36f73d5e-b53f-4bad-9245-17160fe3a5dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d9a6c0eb-737f-4269-bc16-b2c5b13aea34): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (d9a6c0eb-737f-4269-bc16-b2c5b13aea34): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (93d77e75-fb61-4689-bbec-10b049b8104c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (93d77e75-fb61-4689-bbec-10b049b8104c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e9e643a6-d05e-4461-8736-9d2c572d9cc8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (e9e643a6-d05e-4461-8736-9d2c572d9cc8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0c52600-1239-45a8-9b59-aa7809005fb0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c0c52600-1239-45a8-9b59-aa7809005fb0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c019e901-4924-40ef-ae99-b689b08cd5ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (c019e901-4924-40ef-ae99-b689b08cd5ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0feaa38b-d7f9-40cf-833b-44c7374fcd0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (0feaa38b-d7f9-40cf-833b-44c7374fcd0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b47c1db1-bd75-4295-8615-75198c87bd05): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (b47c1db1-bd75-4295-8615-75198c87bd05): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3109fae3-7ebb-4b49-a309-990549d815cc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (3109fae3-7ebb-4b49-a309-990549d815cc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f47f37df-94a9-4be1-91fe-e5978a3f2d17): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (f47f37df-94a9-4be1-91fe-e5978a3f2d17): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"_message":"Log validation failed","errors":{"_id":{"kind":"ObjectId","message":"Cast to ObjectId failed for value \"48115\" (type number) at path \"_id\" because of \"BSONTypeError\"","name":"CastError","path":"_id","reason":{},"stringValue":"\"48115\"","value":48115,"valueType":"number"}},"level":"error","message":"Log validation failed: _id: Cast to ObjectId failed for value \"48115\" (type number) at path \"_id\" because of \"BSONTypeError\"","name":"ValidationError","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (b5c55ad1-5dcf-4541-b279-a07c4515d493): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b5c55ad1-5dcf-4541-b279-a07c4515d493): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a7199c6f-c436-4462-a4d6-5aedb00421cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a7199c6f-c436-4462-a4d6-5aedb00421cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f52b93f3-8151-4837-8224-828707e7e3ee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f52b93f3-8151-4837-8224-828707e7e3ee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d2998adb-1e8b-4063-9d35-4bd8550808ac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (d2998adb-1e8b-4063-9d35-4bd8550808ac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6d6a32d8-4c70-470d-9a33-6c07160aeab5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6d6a32d8-4c70-470d-9a33-6c07160aeab5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f46eb9eb-cfa4-4f99-b153-c69017e42328): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (f46eb9eb-cfa4-4f99-b153-c69017e42328): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bb67829e-0d5d-40b5-bfdb-bda4fbafd384): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (bb67829e-0d5d-40b5-bfdb-bda4fbafd384): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a9c5cc8f-5394-4d89-9b98-17164a340dea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (a9c5cc8f-5394-4d89-9b98-17164a340dea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee62dc70-4224-4b0d-8551-90e256a0025b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ee62dc70-4224-4b0d-8551-90e256a0025b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (567bc0d1-3115-45b5-b787-b90adc14ce48): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (567bc0d1-3115-45b5-b787-b90adc14ce48): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6734831f-20d7-465a-8909-ac4e6da579e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6734831f-20d7-465a-8909-ac4e6da579e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db30cfe4-e7e6-40d2-b33d-d8ba58effb7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (db30cfe4-e7e6-40d2-b33d-d8ba58effb7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a63ad0dc-5632-4da9-8b9e-87377ae4d7ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a63ad0dc-5632-4da9-8b9e-87377ae4d7ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bf034b42-5c57-45c8-8bc4-be492d7b5920): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (bf034b42-5c57-45c8-8bc4-be492d7b5920): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb580511-ddb8-4788-a698-5534991b6e90): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eb580511-ddb8-4788-a698-5534991b6e90): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a04a413d-58de-4caa-b68c-3d0c2fc36cc9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (a04a413d-58de-4caa-b68c-3d0c2fc36cc9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0cda2dff-5559-46d3-ac35-0368437a4d45): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0cda2dff-5559-46d3-ac35-0368437a4d45): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb6bb73f-333f-4f4b-b9b9-085e264d05f5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (cb6bb73f-333f-4f4b-b9b9-085e264d05f5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc768667-8787-4ff7-9b52-c62733f17633): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fc768667-8787-4ff7-9b52-c62733f17633): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7935e0f0-d5bc-4a65-9517-a9fd5c7f5c57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (7935e0f0-d5bc-4a65-9517-a9fd5c7f5c57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (feb51631-890f-43dd-8b6d-14a18ff36f05): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (feb51631-890f-43dd-8b6d-14a18ff36f05): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a02fe4b7-1426-4948-8f57-be2d95c46c6d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a02fe4b7-1426-4948-8f57-be2d95c46c6d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a3891204-76d0-4e8f-8793-1e3dec54e834): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a3891204-76d0-4e8f-8793-1e3dec54e834): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (64b186bb-b3a5-4d77-8275-8a9c409185cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (64b186bb-b3a5-4d77-8275-8a9c409185cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3782cf2-b435-413e-9057-58d14aa8f1f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b3782cf2-b435-413e-9057-58d14aa8f1f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (914b6cb3-bba8-4324-92e0-f8c2201a093e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (914b6cb3-bba8-4324-92e0-f8c2201a093e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8343fdbe-878a-4641-9216-d26f25369c8c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8343fdbe-878a-4641-9216-d26f25369c8c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (32c746c3-e8ce-413a-8595-ba02ce84d9d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (32c746c3-e8ce-413a-8595-ba02ce84d9d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b10c14df-08c2-48f2-90eb-4b0f9d1482b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b10c14df-08c2-48f2-90eb-4b0f9d1482b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3087d576-54b0-43af-b0e2-2b273042212c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (3087d576-54b0-43af-b0e2-2b273042212c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (95f602e3-e661-4eae-ab93-85ea12e15995): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (95f602e3-e661-4eae-ab93-85ea12e15995): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (47217f86-8a83-4045-b381-9d2d1642b03f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (47217f86-8a83-4045-b381-9d2d1642b03f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d17c4cf1-dde7-432d-912a-3733c3fd33c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d17c4cf1-dde7-432d-912a-3733c3fd33c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6bc1ea2f-b18c-4637-ac22-f0c62fa4fda3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (6bc1ea2f-b18c-4637-ac22-f0c62fa4fda3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (56c662e0-01be-4c14-b1c9-854556917866): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (56c662e0-01be-4c14-b1c9-854556917866): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d1a67839-9636-49a4-84b0-f854c425696c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (d1a67839-9636-49a4-84b0-f854c425696c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15e53095-798c-4e1b-b1f3-1509f73753dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (15e53095-798c-4e1b-b1f3-1509f73753dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a72ced34-a5ce-43c7-a6ee-dd3c95203329): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (a72ced34-a5ce-43c7-a6ee-dd3c95203329): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (74469845-075c-4ec2-8962-54bb59eda9d5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (74469845-075c-4ec2-8962-54bb59eda9d5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f60a1cf-a215-4fe1-bbef-e19afb450d29): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (9f60a1cf-a215-4fe1-bbef-e19afb450d29): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (648aae12-ba3f-45b2-b18a-226770eaecd2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (648aae12-ba3f-45b2-b18a-226770eaecd2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2018bb1-7f5e-42d2-be18-db4c9b7419ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (b2018bb1-7f5e-42d2-be18-db4c9b7419ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (027269f4-1888-4393-948c-f2b6cb7e6fb7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (027269f4-1888-4393-948c-f2b6cb7e6fb7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7334b243-2378-4ba9-ba96-723497d3bbdb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (7334b243-2378-4ba9-ba96-723497d3bbdb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15db1f47-bc02-4159-adbf-386951794801): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (15db1f47-bc02-4159-adbf-386951794801): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a8327578-eebd-4a44-a18c-f8462bce1cc2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (a8327578-eebd-4a44-a18c-f8462bce1cc2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (35b4da8d-deda-4458-9816-620a7c7d4325): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (35b4da8d-deda-4458-9816-620a7c7d4325): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5b65806a-1c25-4b17-a7e1-78a75963d464): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (5b65806a-1c25-4b17-a7e1-78a75963d464): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86f30491-a2f6-4fdf-824d-c5d7c4ee2be7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (86f30491-a2f6-4fdf-824d-c5d7c4ee2be7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2a0bd8ea-bfca-4a83-b7e7-1accb777638e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (2a0bd8ea-bfca-4a83-b7e7-1accb777638e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8447ab84-a20d-4dd4-b464-95b37f010d24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (8447ab84-a20d-4dd4-b464-95b37f010d24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d6371ca0-28d1-472f-9fb4-529feb1102ac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (d6371ca0-28d1-472f-9fb4-529feb1102ac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2d391a13-b2ae-4b8a-be58-1880be9fda0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2d391a13-b2ae-4b8a-be58-1880be9fda0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (512a034f-0ed3-4da0-aeb6-c3a1ffee4bd8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (512a034f-0ed3-4da0-aeb6-c3a1ffee4bd8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (68b356d9-2516-4998-90f7-3032f46a150b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (68b356d9-2516-4998-90f7-3032f46a150b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1de568b7-a0df-4c7d-8ecd-7075caeb9358): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1de568b7-a0df-4c7d-8ecd-7075caeb9358): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (303d2628-6542-4a2e-85a6-58ad679a21f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (303d2628-6542-4a2e-85a6-58ad679a21f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (deec37bc-22ea-4d5a-9364-3d71140e5dec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (deec37bc-22ea-4d5a-9364-3d71140e5dec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c79ff69-c4dc-40c7-b817-04af4ed4e910): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (9c79ff69-c4dc-40c7-b817-04af4ed4e910): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b9c25f2-76ee-44d2-a2c4-cacbaeaaf752): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (1b9c25f2-76ee-44d2-a2c4-cacbaeaaf752): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8806a1b6-ec0a-4d6a-bbde-6db3cac65476): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8806a1b6-ec0a-4d6a-bbde-6db3cac65476): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0a5946f2-d7c4-4c42-b896-d6c4492d2235): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (0a5946f2-d7c4-4c42-b896-d6c4492d2235): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9cdeee19-d24f-4877-82ee-4354fa5245a6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (9cdeee19-d24f-4877-82ee-4354fa5245a6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e7e47e9b-4d8d-4594-8383-90601ae589f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e7e47e9b-4d8d-4594-8383-90601ae589f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (46b2a02a-c833-440a-a964-37c0c94d6b26): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (46b2a02a-c833-440a-a964-37c0c94d6b26): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a208ec86-e0e5-450b-9d7f-38faf1ec32d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a208ec86-e0e5-450b-9d7f-38faf1ec32d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa832588-49a6-46bc-83b1-4ef4b613fb12): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (fa832588-49a6-46bc-83b1-4ef4b613fb12): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5be35174-1135-4688-9635-c3a01fbd428b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5be35174-1135-4688-9635-c3a01fbd428b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d0ba99c1-2be1-4ebe-a893-2920c065c70b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (d0ba99c1-2be1-4ebe-a893-2920c065c70b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (822f929e-d47a-4efb-9a7a-27cb74f4f14f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (822f929e-d47a-4efb-9a7a-27cb74f4f14f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bc4aa185-5feb-4312-af90-05c09c3c1c8b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (bc4aa185-5feb-4312-af90-05c09c3c1c8b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ab46a623-b891-4cba-889c-da6c107a04ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ab46a623-b891-4cba-889c-da6c107a04ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3bddafef-9d52-4a74-890d-ac002dd3965c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (3bddafef-9d52-4a74-890d-ac002dd3965c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8858c9d7-296f-4bc1-aa3b-7218e3e685ce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8858c9d7-296f-4bc1-aa3b-7218e3e685ce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2f47cc1-c8a1-4285-a415-34e420e9e367): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c2f47cc1-c8a1-4285-a415-34e420e9e367): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e9571215-926c-4002-92b8-f3c5391d2b23): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e9571215-926c-4002-92b8-f3c5391d2b23): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c680b4aa-86c2-48c9-aa91-e5ad9a860d04): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c680b4aa-86c2-48c9-aa91-e5ad9a860d04): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (968aff62-81dc-4b2b-ba5f-8776a1f1468b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (968aff62-81dc-4b2b-ba5f-8776a1f1468b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (79943bf5-41ef-4ce9-9217-e56ce834623a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (79943bf5-41ef-4ce9-9217-e56ce834623a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12da2318-f5e0-4f32-88d5-02e2dd890542): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (12da2318-f5e0-4f32-88d5-02e2dd890542): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (374cb782-e5a7-4ba0-8ac0-7c840f510cb1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (374cb782-e5a7-4ba0-8ac0-7c840f510cb1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8d2dbf5f-03a7-4125-8d32-1b7ebc63adc2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8d2dbf5f-03a7-4125-8d32-1b7ebc63adc2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c627f7cf-7d6b-43ca-b16a-4d3d00cc0c8d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c627f7cf-7d6b-43ca-b16a-4d3d00cc0c8d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5e1fcabe-8fda-47a1-bce4-c62875171287): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5e1fcabe-8fda-47a1-bce4-c62875171287): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3c490e09-2909-4fb7-84ea-9f2d4fb24a58): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (3c490e09-2909-4fb7-84ea-9f2d4fb24a58): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (30b3a0cb-1f67-47c6-9d82-017c6f2f70b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (30b3a0cb-1f67-47c6-9d82-017c6f2f70b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0661107-b8fa-4c99-88b0-0957476cf3aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (c0661107-b8fa-4c99-88b0-0957476cf3aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b47df483-a02b-4e1f-b0a3-6f967c779603): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (b47df483-a02b-4e1f-b0a3-6f967c779603): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5935870b-0a8e-4041-b606-898f3a9a4297): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (5935870b-0a8e-4041-b606-898f3a9a4297): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc77040d-c4f5-4c3f-9f11-c20182d89caf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (cc77040d-c4f5-4c3f-9f11-c20182d89caf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2f9e1c1-d038-4115-a976-beba66a25528): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (c2f9e1c1-d038-4115-a976-beba66a25528): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e345923-7e9f-4be9-a160-6a411d387f08): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6e345923-7e9f-4be9-a160-6a411d387f08): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f955721-e4fe-4a32-96fc-3912e873182e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (3f955721-e4fe-4a32-96fc-3912e873182e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f369b5e-fae8-490e-b886-8fb79052360a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (2f369b5e-fae8-490e-b886-8fb79052360a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a9f604ec-ede3-4e18-ad7b-1f3a254ecd94): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (a9f604ec-ede3-4e18-ad7b-1f3a254ecd94): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (83b1545b-72a2-4fdb-b08e-0dadf6e80a3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (83b1545b-72a2-4fdb-b08e-0dadf6e80a3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71104a3d-9339-497c-bc76-3c4b10770e05): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (71104a3d-9339-497c-bc76-3c4b10770e05): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (f3b720cf-f3be-41ae-97f5-424fd4cef355): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f3b720cf-f3be-41ae-97f5-424fd4cef355): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f5b430f-ed5e-4801-87d0-081ac7b17bba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2f5b430f-ed5e-4801-87d0-081ac7b17bba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8786023a-8128-49fe-8f08-7b214dc694da): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8786023a-8128-49fe-8f08-7b214dc694da): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ecdd920-bbbc-4fff-9a21-1e7dd12db0bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (3ecdd920-bbbc-4fff-9a21-1e7dd12db0bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef964227-b4ba-49db-abe9-9981b077bb5a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ef964227-b4ba-49db-abe9-9981b077bb5a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e5db95c2-2476-4456-8fd9-fe390abcecbc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (e5db95c2-2476-4456-8fd9-fe390abcecbc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (14554699-59e6-4f76-8816-1c137ebc23a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (14554699-59e6-4f76-8816-1c137ebc23a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7671dc2b-71ac-4a96-af8e-a822b924a13c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (7671dc2b-71ac-4a96-af8e-a822b924a13c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (27bc188d-3ec5-4c51-89ce-d7032a995736): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (27bc188d-3ec5-4c51-89ce-d7032a995736): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (89417355-9ea4-4902-9408-4c5844daa8d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (89417355-9ea4-4902-9408-4c5844daa8d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e152c50-a83b-418a-b3b7-07462b55039d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3e152c50-a83b-418a-b3b7-07462b55039d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7024083-9567-4af5-8f94-d10dfb016bc7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (f7024083-9567-4af5-8f94-d10dfb016bc7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a1670df7-5aa1-462b-bdc5-71476ec32926): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a1670df7-5aa1-462b-bdc5-71476ec32926): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2dcfae2-dc5b-4cc2-942c-fde87eb593c0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (c2dcfae2-dc5b-4cc2-942c-fde87eb593c0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dcb04f9f-bd0e-4a1c-afb2-0a4a897a81eb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dcb04f9f-bd0e-4a1c-afb2-0a4a897a81eb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (225c9019-6271-4903-b1f5-6d911f9d4079): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (225c9019-6271-4903-b1f5-6d911f9d4079): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0d51c5c8-bcac-4ee4-849d-c0078dc86b83): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0d51c5c8-bcac-4ee4-849d-c0078dc86b83): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c52a89a8-2d81-4be2-a931-f3dbca5d31cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (c52a89a8-2d81-4be2-a931-f3dbca5d31cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1ccd10b-9b01-4398-b39c-d8d337e7ba12): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e1ccd10b-9b01-4398-b39c-d8d337e7ba12): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bb9e30e3-9db4-443c-9ed0-b321eb59aa17): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (bb9e30e3-9db4-443c-9ed0-b321eb59aa17): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8126e693-d004-4843-bd13-6f3882ab58ab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8126e693-d004-4843-bd13-6f3882ab58ab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (31a218d0-1cc7-4124-b382-2cb89844a065): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (31a218d0-1cc7-4124-b382-2cb89844a065): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (004debaf-163d-45df-808f-8a3cc1c9fbd3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (004debaf-163d-45df-808f-8a3cc1c9fbd3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbac3d96-3c4a-4f9f-8423-8d584fd4ccfa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (bbac3d96-3c4a-4f9f-8423-8d584fd4ccfa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b5d0a455-b35e-48de-8bfd-e83cb338697f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b5d0a455-b35e-48de-8bfd-e83cb338697f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71c70c19-b01b-4bcc-897d-bd53496683ab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (71c70c19-b01b-4bcc-897d-bd53496683ab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca719952-bf21-4ba0-b0aa-18785000844b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ca719952-bf21-4ba0-b0aa-18785000844b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (69b430b6-a11f-4eff-a342-6563975df281): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (69b430b6-a11f-4eff-a342-6563975df281): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (de116200-74af-41b0-bee2-5efd2b4b8919): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (de116200-74af-41b0-bee2-5efd2b4b8919): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e10afdd4-906a-4864-8279-79d6f683a89c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (e10afdd4-906a-4864-8279-79d6f683a89c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f1100b1-cd08-4366-9411-ceba341d2b3e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5f1100b1-cd08-4366-9411-ceba341d2b3e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (82158e97-111f-4bd7-9027-0225f7e6dde7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (82158e97-111f-4bd7-9027-0225f7e6dde7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d00ccb7-5b68-4965-96a0-d015095c3692): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1d00ccb7-5b68-4965-96a0-d015095c3692): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f502f1b0-445e-45be-bfeb-4c8629a062aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (f502f1b0-445e-45be-bfeb-4c8629a062aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (74690b93-8d46-4f6e-be0b-7117ffd4b4c6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (74690b93-8d46-4f6e-be0b-7117ffd4b4c6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b6e8ea14-ab47-4372-932d-413f2e9282ab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (b6e8ea14-ab47-4372-932d-413f2e9282ab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3eec1655-9e2e-424e-b92d-4767c6f79bee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (3eec1655-9e2e-424e-b92d-4767c6f79bee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f4380a9-0989-4e0e-a0ea-429722dd5b43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (3f4380a9-0989-4e0e-a0ea-429722dd5b43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (098f798e-b9ce-4979-b659-ab004f09d76a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (098f798e-b9ce-4979-b659-ab004f09d76a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (260afb1f-f776-4d38-b003-ccc03b442670): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (260afb1f-f776-4d38-b003-ccc03b442670): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da589653-5fc7-451f-9e5c-58e6fbb3e289): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (da589653-5fc7-451f-9e5c-58e6fbb3e289): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (07a1035a-5514-41ff-97ca-4b57e8ac6792): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (07a1035a-5514-41ff-97ca-4b57e8ac6792): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (72f60860-5b83-4090-af75-659e1ef1aa16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (72f60860-5b83-4090-af75-659e1ef1aa16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c7dcf69b-f071-425b-ab8f-3a0e314b458c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (c7dcf69b-f071-425b-ab8f-3a0e314b458c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad095ca5-1f74-4d27-a55b-96f95255bcbe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (ad095ca5-1f74-4d27-a55b-96f95255bcbe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e7cf0e9-4ce3-4322-a42a-24d1d523eb59): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (9e7cf0e9-4ce3-4322-a42a-24d1d523eb59): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (815074ab-cdfe-4e06-b291-3380fa470cda): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (815074ab-cdfe-4e06-b291-3380fa470cda): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b788daca-5590-4768-8e91-26f5ba5ee6dd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (b788daca-5590-4768-8e91-26f5ba5ee6dd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0be3fe18-027c-4968-af0d-8647a854c46d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (0be3fe18-027c-4968-af0d-8647a854c46d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d0b1b059-8fe9-4cb3-8dc9-04ee8a22b37e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (d0b1b059-8fe9-4cb3-8dc9-04ee8a22b37e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d2e509e8-b968-4323-86cf-90d327040183): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (d2e509e8-b968-4323-86cf-90d327040183): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f1aaf2c4-ff76-46f4-b4c2-f7b2bf51c6db): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (f1aaf2c4-ff76-46f4-b4c2-f7b2bf51c6db): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c6900e86-4cf0-4b32-8063-e8af8efa723c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c6900e86-4cf0-4b32-8063-e8af8efa723c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ca539c8-1a48-47df-bfef-05ae846f1188): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (2ca539c8-1a48-47df-bfef-05ae846f1188): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bc3d92d0-c737-4a22-b105-daf0f3e49358): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (bc3d92d0-c737-4a22-b105-daf0f3e49358): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c64f264a-1843-4f96-8ce9-c75789c5a5bb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c64f264a-1843-4f96-8ce9-c75789c5a5bb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a55923cc-02b7-4349-bbb3-a2b61ac4acf5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a55923cc-02b7-4349-bbb3-a2b61ac4acf5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b51d16fb-a363-4d98-a8fc-18ec890342d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b51d16fb-a363-4d98-a8fc-18ec890342d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a168e8f4-551e-4eb1-87ae-cccc65baeb7d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (a168e8f4-551e-4eb1-87ae-cccc65baeb7d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6623fe07-6581-4f40-ae91-71fb7bdac56e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (6623fe07-6581-4f40-ae91-71fb7bdac56e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bae05dd3-ffcb-4a9f-8499-5eb1d4f1f3e5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bae05dd3-ffcb-4a9f-8499-5eb1d4f1f3e5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (33cf2391-0343-42be-833b-237b6c583f61): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (33cf2391-0343-42be-833b-237b6c583f61): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e66da3c-03df-45ca-b088-1e47b75a52af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (2e66da3c-03df-45ca-b088-1e47b75a52af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (399531b4-495d-405e-af40-8b95e393d4ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (399531b4-495d-405e-af40-8b95e393d4ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed23f4c4-3434-4ac1-9784-ed93fb36c05f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (ed23f4c4-3434-4ac1-9784-ed93fb36c05f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2effbd2a-2991-487b-b644-9eeeaa196898): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2effbd2a-2991-487b-b644-9eeeaa196898): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3cf2bc0a-2ddb-421c-ab5f-88fb572b3758): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (3cf2bc0a-2ddb-421c-ab5f-88fb572b3758): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12be9e3f-e32b-4257-befb-b1f6c67f38e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (12be9e3f-e32b-4257-befb-b1f6c67f38e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (08694742-f131-4a5a-a0b1-397a49dcb518): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (08694742-f131-4a5a-a0b1-397a49dcb518): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ddd224d9-1992-477f-8948-1f051b4e6a8d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ddd224d9-1992-477f-8948-1f051b4e6a8d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f879c662-0017-4ce0-8cdb-1a21fe7c6676): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (f879c662-0017-4ce0-8cdb-1a21fe7c6676): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86825325-fb9c-497b-96c1-2622abd0e8d5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (86825325-fb9c-497b-96c1-2622abd0e8d5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0afe61c7-19a8-4d12-81e8-859c9595b85c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (0afe61c7-19a8-4d12-81e8-859c9595b85c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (435ba067-585f-4fad-a3f2-17b685e47e74): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (435ba067-585f-4fad-a3f2-17b685e47e74): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1570f21a-11a5-48db-bbe3-3a0359ec682b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1570f21a-11a5-48db-bbe3-3a0359ec682b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40e8d5c8-0580-4ecf-bb42-43352b172900): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (40e8d5c8-0580-4ecf-bb42-43352b172900): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12d2d40e-0177-4d20-869a-de6a66b4333c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (12d2d40e-0177-4d20-869a-de6a66b4333c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36ba4358-7b9d-4848-8d37-d9cda5a7cfc3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (36ba4358-7b9d-4848-8d37-d9cda5a7cfc3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71850e9f-dea9-4995-b8c4-325739c5f8fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (71850e9f-dea9-4995-b8c4-325739c5f8fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f606673-e55e-402e-8f19-97c687d5c53c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1f606673-e55e-402e-8f19-97c687d5c53c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e213cff-88a9-4c36-8594-af0c03d4244f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9e213cff-88a9-4c36-8594-af0c03d4244f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc6c6d9d-d363-4067-b35f-c126f473024a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cc6c6d9d-d363-4067-b35f-c126f473024a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (41e11b7e-8654-45d2-9f89-914528ac22cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (41e11b7e-8654-45d2-9f89-914528ac22cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cfde2f1c-8015-48e7-a4b9-f632d6592615): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cfde2f1c-8015-48e7-a4b9-f632d6592615): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eabef547-d3e4-46bf-99d1-d66ccd7d27f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (eabef547-d3e4-46bf-99d1-d66ccd7d27f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f63082ab-92a4-436c-a1ff-1280495a5e20): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f63082ab-92a4-436c-a1ff-1280495a5e20): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (03e2787e-e01e-4b48-8d24-6eadcd35147d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (03e2787e-e01e-4b48-8d24-6eadcd35147d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7f891d17-3f01-4399-8f17-9db498725c8b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (7f891d17-3f01-4399-8f17-9db498725c8b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4986b2b3-7e77-4623-8227-39d63742d8de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (4986b2b3-7e77-4623-8227-39d63742d8de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (75b7b180-1fb8-43dc-bfc3-c0e3a575636f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (75b7b180-1fb8-43dc-bfc3-c0e3a575636f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (88b6a805-cf29-4522-ad31-fa58071956cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (88b6a805-cf29-4522-ad31-fa58071956cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (241389c4-cad8-466f-8105-38e4ca777ed1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (241389c4-cad8-466f-8105-38e4ca777ed1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f8439a33-5508-4bd3-b693-fbebfe09a994): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (f8439a33-5508-4bd3-b693-fbebfe09a994): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e5f5aebe-1260-448e-8776-2268633ae4ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (e5f5aebe-1260-448e-8776-2268633ae4ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (150ab50f-5811-4c2a-a11c-f86626b349fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (150ab50f-5811-4c2a-a11c-f86626b349fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (23c478c5-0ce8-4a22-b918-f0373e4ddd7a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (23c478c5-0ce8-4a22-b918-f0373e4ddd7a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86e9f862-a304-4378-8d58-635d6f059a16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (86e9f862-a304-4378-8d58-635d6f059a16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `SequelizeMeta` (`name` VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `customers` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255), `sex` DATETIME, `phone` VARCHAR(255), `email` INTEGER);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customers` ADD `date_of_birth` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `ProductBatches` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `batch_number` VARCHAR(255), `expiry` DATETIME, `barcode` VARCHAR(255), `product` INTEGER, `purchase_code` VARCHAR(255), `createdAt` DATETIME, `updatedAt` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `productbatches` ADD `quantity` DOUBLE PRECISION;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `productbatches` ADD `quantity_sold` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `dailyRecords` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `date` DATETIME, `amount` DOUBLE PRECISION, `shift` VARCHAR(255), `created_by` INTEGER, `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `cash` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `momo` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `insurance` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `credit` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `pos` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `cheque` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `other` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `sales_batches` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `date` DATETIME, `batch_number` VARCHAR(255), `product` INTEGER, `quantity` DOUBLE PRECISION, `code` VARCHAR(255), `created_by` INTEGER, `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_batches` ADD `expiry` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `preferred_vendor` INTEGER;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `tokens` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255), `token` VARCHAR(255), `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `users` ADD `allow_online` VARCHAR(255) DEFAULT 'no';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('tax','System','0');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales` ADD `tax` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('activate_batch_mode','System','no');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('logo','System',''),('receipt_logo','System','no');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `is_drug` VARCHAR(255) DEFAULT 'yes';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `generic_name` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `contraindications` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `pregnancy` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `side_effects` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `caution` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `indications` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `stores` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255), `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `store_inventory` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `store` INTEGER, `max_stock` DOUBLE PRECISION, `min_stock` DOUBLE PRECISION, `current_stock` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='store_inventory';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`store_inventory`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`store_inventory`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`store_inventory`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `store_inventory_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `store` INTEGER, `max_stock` DOUBLE PRECISION, `min_stock` DOUBLE PRECISION, `current_stock` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, CONSTRAINT `products_storeInventory_product` FOREIGN KEY (`product`) REFERENCES `products` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `store_inventory_backup` SELECT `id`, `product`, `store`, `max_stock`, `min_stock`, `current_stock`, `expiry`, `created_on` FROM `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `store_inventory_backup` RENAME TO `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='store_inventory';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`store_inventory`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`store_inventory`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`store_inventory`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `store_inventory_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `store` INTEGER, `max_stock` DOUBLE PRECISION, `min_stock` DOUBLE PRECISION, `current_stock` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, CONSTRAINT `products_storeInventory_product` FOREIGN KEY (`product`) REFERENCES `products` (`id`) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT `products_storeInventory_store` FOREIGN KEY (`store`) REFERENCES `stores` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `store_inventory_backup` SELECT `id`, `product`, `store`, `max_stock`, `min_stock`, `current_stock`, `expiry`, `created_on` FROM `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `store_inventory_backup` RENAME TO `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `requisitions` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `sender` INTEGER NOT NULL, `recipient` INTEGER NOT NULL, `created_on` DATETIME, `created_by` INTEGER DEFAULT NULL, `status` VARCHAR(255) NOT NULL DEFAULT 'Pending');","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `requisition_details` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `code` VARCHAR(255), `price` DOUBLE PRECISION, `cost_price` DOUBLE PRECISION, `quantity` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, `date` DATETIME NOT NULL, `created_by` INTEGER DEFAULT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisitions';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisitions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisitions_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `sender` INTEGER NOT NULL, `recipient` INTEGER NOT NULL, `created_on` DATETIME, `created_by` INTEGER DEFAULT NULL, `status` VARCHAR(255) NOT NULL DEFAULT 'Pending', CONSTRAINT `requisitions_code_key` UNIQUE (`code`));","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisitions_backup` SELECT `id`, `code`, `sender`, `recipient`, `created_on`, `created_by`, `status` FROM `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisitions_backup` RENAME TO `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisitions';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisitions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_requisitions_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisitions_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `sender` INTEGER NOT NULL, `recipient` INTEGER NOT NULL, `created_on` DATETIME, `created_by` INTEGER DEFAULT NULL, `status` VARCHAR(255) NOT NULL DEFAULT 'Pending', CONSTRAINT `requisitions_code_key` UNIQUE (`code`), CONSTRAINT `requisitions_store_sender` FOREIGN KEY (`sender`) REFERENCES `stores` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisitions_backup` SELECT `id`, `code`, `sender`, `recipient`, `created_on`, `created_by`, `status` FROM `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisitions_backup` RENAME TO `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisitions';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisitions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_requisitions_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisitions_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `sender` INTEGER NOT NULL, `recipient` INTEGER NOT NULL, `created_on` DATETIME, `created_by` INTEGER DEFAULT NULL, `status` VARCHAR(255) NOT NULL DEFAULT 'Pending', CONSTRAINT `requisitions_code_key` UNIQUE (`code`), CONSTRAINT `requisitions_store_sender` FOREIGN KEY (`sender`) REFERENCES `stores` (`id`) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT `requisitions_store_recipient` FOREIGN KEY (`recipient`) REFERENCES `stores` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisitions_backup` SELECT `id`, `code`, `sender`, `recipient`, `created_on`, `created_by`, `status` FROM `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisitions_backup` RENAME TO `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisition_details';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisition_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisition_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisition_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisition_details_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `code` VARCHAR(255), `price` DOUBLE PRECISION, `cost_price` DOUBLE PRECISION, `quantity` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, `date` DATETIME NOT NULL, `created_by` INTEGER DEFAULT NULL, CONSTRAINT `requisition_details_product_key` FOREIGN KEY (`product`) REFERENCES `products` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisition_details_backup` SELECT `id`, `product`, `code`, `price`, `cost_price`, `quantity`, `expiry`, `created_on`, `date`, `created_by` FROM `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisition_details_backup` RENAME TO `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisition_details';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisition_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisition_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisition_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisition_details_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `code` VARCHAR(255), `price` DOUBLE PRECISION, `cost_price` DOUBLE PRECISION, `quantity` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, `date` DATETIME NOT NULL, `created_by` INTEGER DEFAULT NULL, CONSTRAINT `requisition_details_product_key` FOREIGN KEY (`product`) REFERENCES `products` (`id`) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT `requisition_details_code_key` FOREIGN KEY (`code`) REFERENCES `requisitions` (`code`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisition_details_backup` SELECT `id`, `product`, `code`, `price`, `cost_price`, `quantity`, `expiry`, `created_on`, `date`, `created_by` FROM `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisition_details_backup` RENAME TO `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stores` ADD `description` VARCHAR(255) DEFAULT '';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('tax_title','System','Local Sale Tax'),('show_tax_on_receipt','System','yes'),('receipt_show_credits','System','yes'),('receipt_extra_info','System',''),('receipt_footer','System','');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `markup` DOUBLE PRECISION DEFAULT '1.33';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `active_ingredients` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `drug_info` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `purchase_details` ADD `expiry` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('receipt_show_customer','System','yes'),('receipt_product_data','System',''),('receipt_font_size','System','13px'),('receipt_show_borders','System','yes');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `expiry` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `unit` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `label` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `permissions` (`permission_id`,`name`,`description`) VALUES ('88','Edit Sales Prices','Allow user to change the price of items during sales');","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `role_permissions` (`permission_id`,`role_id`) VALUES (88,1);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `sales_payment_methods` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `payment_method` VARCHAR(255) NOT NULL, `created_on` DATETIME, `date` DATETIME DEFAULT NULL, `amount_paid` DOUBLE PRECISION NOT NULL, `transaction_id` VARCHAR(255) DEFAULT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE INDEX `sales_payment_methods_payment_method` ON `sales_payment_methods` (`payment_method`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE INDEX `sales_payment_methods_created_on` ON `sales_payment_methods` (`created_on`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE INDEX `sales_payment_methods_date` ON `sales_payment_methods` (`date`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE INDEX `sales_payment_methods_amount_paid` ON `sales_payment_methods` (`amount_paid`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='sales_payment_methods';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_payment_methods`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_payment_methods`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_payment_methods_payment_method`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_payment_methods_created_on`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_payment_methods_date`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_payment_methods_amount_paid`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_payment_methods`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `sales_payment_methods_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `payment_method` VARCHAR(255) NOT NULL, `created_on` DATETIME, `date` DATETIME DEFAULT NULL, `amount_paid` DOUBLE PRECISION NOT NULL, `transaction_id` VARCHAR(255) DEFAULT NULL, CONSTRAINT `sales_payment_methods_code_key` FOREIGN KEY (`code`) REFERENCES `sales` (`code`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `sales_payment_methods_backup` SELECT `id`, `code`, `payment_method`, `created_on`, `date`, `amount_paid`, `transaction_id` FROM `sales_payment_methods`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `sales_payment_methods`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_payment_methods_backup` RENAME TO `sales_payment_methods`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('duplicate_record_timeout','System','10');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `reminders` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `type` VARCHAR(255) NOT NULL, `dayOfWeek` VARCHAR(255) NOT NULL DEFAULT 'Monday', `hourOfDay` VARCHAR(255) NOT NULL DEFAULT '9', `recipient` VARCHAR(255) NOT NULL, `cc` VARCHAR(255) NOT NULL DEFAULT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `reminders` (`type`,`dayOfWeek`,`hourOfDay`,`recipient`,`cc`) VALUES ('upcoming refills','Monday','10','none','');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (5e4266ec-6d3c-4e28-ada8-4df4794c2cdc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5e4266ec-6d3c-4e28-ada8-4df4794c2cdc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d660ada6-73ab-4cf6-802c-e7b9d6d944e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d660ada6-73ab-4cf6-802c-e7b9d6d944e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (335e918e-21ff-4a59-ba0f-6575886ec697): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (335e918e-21ff-4a59-ba0f-6575886ec697): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4b2f77f-ef46-4c22-878b-efd8621eca13): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (d4b2f77f-ef46-4c22-878b-efd8621eca13): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (04c64616-24ce-42c9-97b6-961cbb3d6e4a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (04c64616-24ce-42c9-97b6-961cbb3d6e4a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e152f71-0c86-4f9c-9cd4-1fc57f91cca5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (2e152f71-0c86-4f9c-9cd4-1fc57f91cca5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2f79309-1630-46d7-a481-1dcd66d0b66a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (c2f79309-1630-46d7-a481-1dcd66d0b66a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3098788-ae7c-425a-a52d-c92c3b59722a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (b3098788-ae7c-425a-a52d-c92c3b59722a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e6831d38-e5d0-456e-901f-eb38bad41ed2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e6831d38-e5d0-456e-901f-eb38bad41ed2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c5222cb4-28e4-46c0-993a-b06779387980): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (c5222cb4-28e4-46c0-993a-b06779387980): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b920bd64-410e-4b57-a7a0-12afa11aa50f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b920bd64-410e-4b57-a7a0-12afa11aa50f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (41d7c301-ec92-4a2b-a807-bf52b5b9adb1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (41d7c301-ec92-4a2b-a807-bf52b5b9adb1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (93d62f4f-1c90-4684-8834-85a90386659a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (93d62f4f-1c90-4684-8834-85a90386659a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1c2c5928-7348-4e44-993e-722d2aa376fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (1c2c5928-7348-4e44-993e-722d2aa376fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5424efcf-a211-49ed-80c7-006363cd8de5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5424efcf-a211-49ed-80c7-006363cd8de5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ed02809-095c-49ca-991b-992c7f99f6f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (2ed02809-095c-49ca-991b-992c7f99f6f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9bc61f86-ed49-428c-a564-73aa4fd97645): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9bc61f86-ed49-428c-a564-73aa4fd97645): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb1f08dc-8e7f-4231-ac71-2ab337416fe7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (eb1f08dc-8e7f-4231-ac71-2ab337416fe7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (43a4b83d-a138-4075-8119-5fdba0b9ecb7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (43a4b83d-a138-4075-8119-5fdba0b9ecb7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e7b13799-afcd-4930-9dd2-16a801b5c625): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e7b13799-afcd-4930-9dd2-16a801b5c625): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (de0ed2a4-80a0-4278-8ac5-bc3fcf14b19d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (de0ed2a4-80a0-4278-8ac5-bc3fcf14b19d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52055742-c679-48bc-97c0-acf9e41377be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (52055742-c679-48bc-97c0-acf9e41377be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (04fc7f1e-e082-4cac-a14b-249d39d99725): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (04fc7f1e-e082-4cac-a14b-249d39d99725): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6df4042a-ad83-4be9-87df-6447608c562c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (6df4042a-ad83-4be9-87df-6447608c562c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2d7a8da9-3b30-4031-85bc-34e51ced033c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2d7a8da9-3b30-4031-85bc-34e51ced033c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bb7efb7c-1bb3-4631-a6f8-6be7857f2164): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (bb7efb7c-1bb3-4631-a6f8-6be7857f2164): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e5d86204-0fd3-46c5-b2d2-1304500747aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e5d86204-0fd3-46c5-b2d2-1304500747aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (66c1465a-4b23-408b-b923-4f00f8efd001): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (66c1465a-4b23-408b-b923-4f00f8efd001): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b96f79e2-1e17-4a2b-b3fc-ffdc4232409f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b96f79e2-1e17-4a2b-b3fc-ffdc4232409f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (419257f0-d776-4542-9fd0-0c7ebaffcdb2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (419257f0-d776-4542-9fd0-0c7ebaffcdb2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea5cbe83-145b-44f7-9a13-142422056017): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ea5cbe83-145b-44f7-9a13-142422056017): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (045de2ea-f9a9-4be3-8a7c-b4beb6a97f96): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (045de2ea-f9a9-4be3-8a7c-b4beb6a97f96): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (889a8ba7-08f8-4778-b234-1ad25c81c722): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (889a8ba7-08f8-4778-b234-1ad25c81c722): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (23e92685-391a-452d-91d2-0f7bbcbe5253): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (23e92685-391a-452d-91d2-0f7bbcbe5253): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e17c3d4d-96cc-4d74-8706-9e5e4d62c4bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e17c3d4d-96cc-4d74-8706-9e5e4d62c4bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e5c41c7-77c3-4654-be84-9229c5b4f0c6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (9e5c41c7-77c3-4654-be84-9229c5b4f0c6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (37f049b5-4946-45a1-90f2-22ee217b9cc6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (37f049b5-4946-45a1-90f2-22ee217b9cc6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (335894e5-7d20-4fba-ba48-2ac00cd20f71): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (335894e5-7d20-4fba-ba48-2ac00cd20f71): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10946edb-67d6-47f4-9448-27270c961101): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (10946edb-67d6-47f4-9448-27270c961101): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (139a87aa-2fda-496d-92bf-2a4aa2fc16af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (139a87aa-2fda-496d-92bf-2a4aa2fc16af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e7840b78-9965-4204-acd6-f0afaa3b6217): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (e7840b78-9965-4204-acd6-f0afaa3b6217): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (840fa36b-567b-4a90-b2de-df5ecc2e2168): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (840fa36b-567b-4a90-b2de-df5ecc2e2168): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e585f07f-6395-4d87-856e-c12a8c8702f2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (e585f07f-6395-4d87-856e-c12a8c8702f2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (615272df-e1ab-4232-a088-5e924d41fc4d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (615272df-e1ab-4232-a088-5e924d41fc4d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (63c596f5-f120-4996-906b-d7c67dd59350): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (63c596f5-f120-4996-906b-d7c67dd59350): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad49607f-b2c0-4d83-8599-0952cc0ab1f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (ad49607f-b2c0-4d83-8599-0952cc0ab1f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (792a3e13-9f50-4593-ae4d-64ff64af3c98): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (792a3e13-9f50-4593-ae4d-64ff64af3c98): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa632cde-ff7e-4135-b00a-4d8f30876f7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (aa632cde-ff7e-4135-b00a-4d8f30876f7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (be86665e-f1f7-48c3-a1f9-3aa3eaff22c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (be86665e-f1f7-48c3-a1f9-3aa3eaff22c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fb74a4de-d930-48c1-b967-ef5b165466aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (fb74a4de-d930-48c1-b967-ef5b165466aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3bc1b6ca-0b3e-4140-afdd-e5129e964eeb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (3bc1b6ca-0b3e-4140-afdd-e5129e964eeb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ac347a1-8b44-4265-9ef8-26b840b37793): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (5ac347a1-8b44-4265-9ef8-26b840b37793): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4d91d544-0ce4-4e96-85a4-5b49afbc92fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4d91d544-0ce4-4e96-85a4-5b49afbc92fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dce4caa7-029e-44cf-b0f5-347e3b57fe7d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (dce4caa7-029e-44cf-b0f5-347e3b57fe7d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (61e7c5a0-941c-476e-9f9f-063c0e6fbfce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (61e7c5a0-941c-476e-9f9f-063c0e6fbfce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d6b8fc66-1722-458b-b9c6-df1e2323c2e9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d6b8fc66-1722-458b-b9c6-df1e2323c2e9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7a5a2f6c-2b66-40a3-99c6-42ec9cad39c0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7a5a2f6c-2b66-40a3-99c6-42ec9cad39c0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a72c6a6-3905-4224-a8b9-dd80bc5f1fb5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1a72c6a6-3905-4224-a8b9-dd80bc5f1fb5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0a7aa3b4-2b3f-41fe-a542-3c4607e8d726): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (0a7aa3b4-2b3f-41fe-a542-3c4607e8d726): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d2949a73-ef31-46f9-ad79-dbd0b26e7040): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (d2949a73-ef31-46f9-ad79-dbd0b26e7040): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a11dd925-75b2-4077-bd7e-8439831ca765): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a11dd925-75b2-4077-bd7e-8439831ca765): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19260c8c-184a-4e97-af43-5c5b124e60fa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (19260c8c-184a-4e97-af43-5c5b124e60fa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7edd913-0e81-4f9c-8e95-af8d9c4d6303): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (d7edd913-0e81-4f9c-8e95-af8d9c4d6303): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ebe0ae1e-ac77-434a-8b1b-f0af68cf2525): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ebe0ae1e-ac77-434a-8b1b-f0af68cf2525): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e51c40ad-6d08-486c-a049-981070ccc908): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (e51c40ad-6d08-486c-a049-981070ccc908): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6be62fe6-6bc6-4538-a06e-697859565007): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6be62fe6-6bc6-4538-a06e-697859565007): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (863d067c-58f6-41c7-80bc-722a972dc99b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (863d067c-58f6-41c7-80bc-722a972dc99b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d57f9d77-75f6-46ef-8472-aecd4013f9cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d57f9d77-75f6-46ef-8472-aecd4013f9cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2212f06-6fda-4935-a7ca-76a224188e6e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (c2212f06-6fda-4935-a7ca-76a224188e6e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b8e397b8-03ce-4971-87e7-1fc3e7e117d0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b8e397b8-03ce-4971-87e7-1fc3e7e117d0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (76eb4447-08de-438d-a0fd-7dfaaee26cb9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (76eb4447-08de-438d-a0fd-7dfaaee26cb9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1e17845-a08e-4703-ab79-342f44b065b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b1e17845-a08e-4703-ab79-342f44b065b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2140662-3e87-4fb3-a003-962a9978c2ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (c2140662-3e87-4fb3-a003-962a9978c2ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (987b2345-98d6-4a96-849d-3963c769a670): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (987b2345-98d6-4a96-849d-3963c769a670): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f4dd1aa-cbdc-473f-90c4-b4a4386dc738): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6f4dd1aa-cbdc-473f-90c4-b4a4386dc738): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42640283-c055-4a28-866d-4890332de4c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (42640283-c055-4a28-866d-4890332de4c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cf416f8f-0cb3-4e54-bc22-a848e651085d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cf416f8f-0cb3-4e54-bc22-a848e651085d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (88a201b4-2f54-4e44-8f13-09ee644779d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (88a201b4-2f54-4e44-8f13-09ee644779d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (463ab601-d860-422f-ae00-5e2ef38a853c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (463ab601-d860-422f-ae00-5e2ef38a853c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f002bfd4-4f24-4e5e-866e-397ae23bc85a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f002bfd4-4f24-4e5e-866e-397ae23bc85a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f31281a4-88e2-4155-94d8-60a0e21e4d91): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f31281a4-88e2-4155-94d8-60a0e21e4d91): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (171c92f2-712f-44ae-b2ae-f479f3a493f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (171c92f2-712f-44ae-b2ae-f479f3a493f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d98aae6d-641e-40e9-aef0-4b33457a0f3a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d98aae6d-641e-40e9-aef0-4b33457a0f3a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6dbd3b4d-2d36-4d28-a204-76d72fa1112f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6dbd3b4d-2d36-4d28-a204-76d72fa1112f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f51e8cc3-5083-407c-af74-e8d2bc816901): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (f51e8cc3-5083-407c-af74-e8d2bc816901): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (67be866c-868d-4bc5-b1d4-21338914ce1e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (67be866c-868d-4bc5-b1d4-21338914ce1e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5cb5dc3f-c1b2-44ee-8c16-812d509201d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (5cb5dc3f-c1b2-44ee-8c16-812d509201d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fca296a8-6771-4e21-82db-28439d64665b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (fca296a8-6771-4e21-82db-28439d64665b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52efd7d2-acd1-4a52-9684-0416b9c90965): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (52efd7d2-acd1-4a52-9684-0416b9c90965): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2d9a363e-b0ac-4760-a9ff-7256ef1498a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (2d9a363e-b0ac-4760-a9ff-7256ef1498a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f932a5a5-84a4-4d33-a9ef-87d5b8421f74): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (f932a5a5-84a4-4d33-a9ef-87d5b8421f74): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cf1948f0-9a1d-47ef-9794-1927c6f83388): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cf1948f0-9a1d-47ef-9794-1927c6f83388): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f06e6cc9-d317-4fb4-ac84-ce7a1a4f6c32): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (f06e6cc9-d317-4fb4-ac84-ce7a1a4f6c32): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc0443a4-5fb6-4d22-8af9-4c959674b967): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (dc0443a4-5fb6-4d22-8af9-4c959674b967): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (77a57ef6-9824-4102-8732-24a301cf38fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (77a57ef6-9824-4102-8732-24a301cf38fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc53c149-812b-4f8f-beef-08bb4270ef92): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (fc53c149-812b-4f8f-beef-08bb4270ef92): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed2b959c-279c-4be5-a950-817981365eb6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (ed2b959c-279c-4be5-a950-817981365eb6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `SequelizeMeta` (`name` VARCHAR(255) NOT NULL UNIQUE PRIMARY KEY);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `customers` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255), `sex` DATETIME, `phone` VARCHAR(255), `email` INTEGER);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customers` ADD `date_of_birth` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `ProductBatches` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `batch_number` VARCHAR(255), `expiry` DATETIME, `barcode` VARCHAR(255), `product` INTEGER, `purchase_code` VARCHAR(255), `createdAt` DATETIME, `updatedAt` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `productbatches` ADD `quantity` DOUBLE PRECISION;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `productbatches` ADD `quantity_sold` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `dailyRecords` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `date` DATETIME, `amount` DOUBLE PRECISION, `shift` VARCHAR(255), `created_by` INTEGER, `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `cash` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `momo` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `insurance` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `credit` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `pos` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `cheque` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `other` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `sales_batches` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `date` DATETIME, `batch_number` VARCHAR(255), `product` INTEGER, `quantity` DOUBLE PRECISION, `code` VARCHAR(255), `created_by` INTEGER, `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_batches` ADD `expiry` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `preferred_vendor` INTEGER;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `tokens` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255), `token` VARCHAR(255), `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `users` ADD `allow_online` VARCHAR(255) DEFAULT 'no';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('tax','System','0');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales` ADD `tax` DOUBLE PRECISION DEFAULT '0';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('activate_batch_mode','System','no');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('logo','System',''),('receipt_logo','System','no');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `is_drug` VARCHAR(255) DEFAULT 'yes';","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `generic_name` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `contraindications` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `pregnancy` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `side_effects` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `caution` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `indications` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `stores` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `name` VARCHAR(255), `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `store_inventory` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `store` INTEGER, `max_stock` DOUBLE PRECISION, `min_stock` DOUBLE PRECISION, `current_stock` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='store_inventory';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`store_inventory`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`store_inventory`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`store_inventory`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `store_inventory_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `store` INTEGER, `max_stock` DOUBLE PRECISION, `min_stock` DOUBLE PRECISION, `current_stock` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, CONSTRAINT `products_storeInventory_product` FOREIGN KEY (`product`) REFERENCES `products` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `store_inventory_backup` SELECT `id`, `product`, `store`, `max_stock`, `min_stock`, `current_stock`, `expiry`, `created_on` FROM `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `store_inventory_backup` RENAME TO `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='store_inventory';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`store_inventory`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`store_inventory`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`store_inventory`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `store_inventory_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `store` INTEGER, `max_stock` DOUBLE PRECISION, `min_stock` DOUBLE PRECISION, `current_stock` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, CONSTRAINT `products_storeInventory_product` FOREIGN KEY (`product`) REFERENCES `products` (`id`) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT `products_storeInventory_store` FOREIGN KEY (`store`) REFERENCES `stores` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `store_inventory_backup` SELECT `id`, `product`, `store`, `max_stock`, `min_stock`, `current_stock`, `expiry`, `created_on` FROM `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `store_inventory_backup` RENAME TO `store_inventory`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `requisitions` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `sender` INTEGER NOT NULL, `recipient` INTEGER NOT NULL, `created_on` DATETIME, `created_by` INTEGER DEFAULT NULL, `status` VARCHAR(255) NOT NULL DEFAULT 'Pending');","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `requisition_details` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `code` VARCHAR(255), `price` DOUBLE PRECISION, `cost_price` DOUBLE PRECISION, `quantity` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, `date` DATETIME NOT NULL, `created_by` INTEGER DEFAULT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisitions';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisitions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisitions_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `sender` INTEGER NOT NULL, `recipient` INTEGER NOT NULL, `created_on` DATETIME, `created_by` INTEGER DEFAULT NULL, `status` VARCHAR(255) NOT NULL DEFAULT 'Pending', CONSTRAINT `requisitions_code_key` UNIQUE (`code`));","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisitions_backup` SELECT `id`, `code`, `sender`, `recipient`, `created_on`, `created_by`, `status` FROM `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisitions_backup` RENAME TO `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisitions';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisitions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_requisitions_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisitions_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `sender` INTEGER NOT NULL, `recipient` INTEGER NOT NULL, `created_on` DATETIME, `created_by` INTEGER DEFAULT NULL, `status` VARCHAR(255) NOT NULL DEFAULT 'Pending', CONSTRAINT `requisitions_code_key` UNIQUE (`code`), CONSTRAINT `requisitions_store_sender` FOREIGN KEY (`sender`) REFERENCES `stores` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisitions_backup` SELECT `id`, `code`, `sender`, `recipient`, `created_on`, `created_by`, `status` FROM `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisitions_backup` RENAME TO `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisitions';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisitions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_requisitions_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisitions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisitions_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `sender` INTEGER NOT NULL, `recipient` INTEGER NOT NULL, `created_on` DATETIME, `created_by` INTEGER DEFAULT NULL, `status` VARCHAR(255) NOT NULL DEFAULT 'Pending', CONSTRAINT `requisitions_code_key` UNIQUE (`code`), CONSTRAINT `requisitions_store_sender` FOREIGN KEY (`sender`) REFERENCES `stores` (`id`) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT `requisitions_store_recipient` FOREIGN KEY (`recipient`) REFERENCES `stores` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisitions_backup` SELECT `id`, `code`, `sender`, `recipient`, `created_on`, `created_by`, `status` FROM `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisitions_backup` RENAME TO `requisitions`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisition_details';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisition_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisition_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisition_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisition_details_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `code` VARCHAR(255), `price` DOUBLE PRECISION, `cost_price` DOUBLE PRECISION, `quantity` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, `date` DATETIME NOT NULL, `created_by` INTEGER DEFAULT NULL, CONSTRAINT `requisition_details_product_key` FOREIGN KEY (`product`) REFERENCES `products` (`id`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisition_details_backup` SELECT `id`, `product`, `code`, `price`, `cost_price`, `quantity`, `expiry`, `created_on`, `date`, `created_by` FROM `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisition_details_backup` RENAME TO `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='requisition_details';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`requisition_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`requisition_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`requisition_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `requisition_details_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `product` INTEGER, `code` VARCHAR(255), `price` DOUBLE PRECISION, `cost_price` DOUBLE PRECISION, `quantity` DOUBLE PRECISION, `expiry` DATETIME, `created_on` DATETIME, `date` DATETIME NOT NULL, `created_by` INTEGER DEFAULT NULL, CONSTRAINT `requisition_details_product_key` FOREIGN KEY (`product`) REFERENCES `products` (`id`) ON UPDATE CASCADE ON DELETE CASCADE, CONSTRAINT `requisition_details_code_key` FOREIGN KEY (`code`) REFERENCES `requisitions` (`code`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `requisition_details_backup` SELECT `id`, `product`, `code`, `price`, `cost_price`, `quantity`, `expiry`, `created_on`, `date`, `created_by` FROM `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `requisition_details_backup` RENAME TO `requisition_details`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stores` ADD `description` VARCHAR(255) DEFAULT '';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('tax_title','System','Local Sale Tax'),('show_tax_on_receipt','System','yes'),('receipt_show_credits','System','yes'),('receipt_extra_info','System',''),('receipt_footer','System','');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `markup` DOUBLE PRECISION DEFAULT '1.33';","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `active_ingredients` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `drug_info` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `purchase_details` ADD `expiry` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('receipt_show_customer','System','yes'),('receipt_product_data','System',''),('receipt_font_size','System','13px'),('receipt_show_borders','System','yes');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `expiry` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `unit` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `label` VARCHAR(255) DEFAULT NULL;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `permissions` (`permission_id`,`name`,`description`) VALUES ('88','Edit Sales Prices','Allow user to change the price of items during sales');","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `role_permissions` (`permission_id`,`role_id`) VALUES (88,1);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `sales_payment_methods` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `payment_method` VARCHAR(255) NOT NULL, `created_on` DATETIME, `date` DATETIME DEFAULT NULL, `amount_paid` DOUBLE PRECISION NOT NULL, `transaction_id` VARCHAR(255) DEFAULT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE INDEX `sales_payment_methods_payment_method` ON `sales_payment_methods` (`payment_method`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE INDEX `sales_payment_methods_created_on` ON `sales_payment_methods` (`created_on`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE INDEX `sales_payment_methods_date` ON `sales_payment_methods` (`date`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE INDEX `sales_payment_methods_amount_paid` ON `sales_payment_methods` (`amount_paid`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT sql FROM sqlite_master WHERE tbl_name='sales_payment_methods';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_payment_methods`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_payment_methods`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_payment_methods_payment_method`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_payment_methods_created_on`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_payment_methods_date`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_payment_methods_amount_paid`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_payment_methods`)","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE `sales_payment_methods_backup` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `code` VARCHAR(255) NOT NULL, `payment_method` VARCHAR(255) NOT NULL, `created_on` DATETIME, `date` DATETIME DEFAULT NULL, `amount_paid` DOUBLE PRECISION NOT NULL, `transaction_id` VARCHAR(255) DEFAULT NULL, CONSTRAINT `sales_payment_methods_code_key` FOREIGN KEY (`code`) REFERENCES `sales` (`code`) ON UPDATE CASCADE ON DELETE CASCADE);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `sales_payment_methods_backup` SELECT `id`, `code`, `payment_method`, `created_on`, `date`, `amount_paid`, `transaction_id` FROM `sales_payment_methods`;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP TABLE `sales_payment_methods`;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_payment_methods_backup` RENAME TO `sales_payment_methods`;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `settings` (`name`,`module`,`value`) VALUES ('duplicate_record_timeout','System','10');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS `reminders` (`id` INTEGER PRIMARY KEY AUTOINCREMENT, `type` VARCHAR(255) NOT NULL, `dayOfWeek` VARCHAR(255) NOT NULL DEFAULT 'Monday', `hourOfDay` VARCHAR(255) NOT NULL DEFAULT '9', `recipient` VARCHAR(255) NOT NULL, `cc` VARCHAR(255) NOT NULL DEFAULT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `reminders` (`type`,`dayOfWeek`,`hourOfDay`,`recipient`,`cc`) VALUES ('upcoming refills','Monday','10','none','');","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (0dcff3fb-73fb-43d6-abb1-ca8665dc1862): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0dcff3fb-73fb-43d6-abb1-ca8665dc1862): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fedb370d-cf60-4406-b0b9-8de6300f69f1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fedb370d-cf60-4406-b0b9-8de6300f69f1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1668e439-6ccf-4c59-9b0c-f491f6e6f78b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1668e439-6ccf-4c59-9b0c-f491f6e6f78b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ecffbdf6-1f14-453c-bff0-f3bcfe4e0a3a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (ecffbdf6-1f14-453c-bff0-f3bcfe4e0a3a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e46db6c2-6240-47fc-a52b-4cba4539b60b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e46db6c2-6240-47fc-a52b-4cba4539b60b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (329cad7e-0978-4eed-b8df-066cafdec09f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (329cad7e-0978-4eed-b8df-066cafdec09f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (61eaf1c5-a9c0-41a6-8870-96196176437f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (61eaf1c5-a9c0-41a6-8870-96196176437f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bfa4b2eb-9d9d-41ef-9ca0-9e7b0b37be56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (bfa4b2eb-9d9d-41ef-9ca0-9e7b0b37be56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2583520a-bc5b-43c2-ba5f-0fe10792c33c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2583520a-bc5b-43c2-ba5f-0fe10792c33c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac71f665-761c-4e5c-8a8a-459b5eab9443): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (ac71f665-761c-4e5c-8a8a-459b5eab9443): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2203aa60-396f-4276-bde2-d462feea80ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2203aa60-396f-4276-bde2-d462feea80ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a79a2b6a-9d00-45d1-8850-cb87328afe5c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (a79a2b6a-9d00-45d1-8850-cb87328afe5c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (998d35cc-10cd-40b2-b18a-2a46527e759c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (998d35cc-10cd-40b2-b18a-2a46527e759c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b7158c93-3f7c-4eb4-b3c5-61ae166af382): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (b7158c93-3f7c-4eb4-b3c5-61ae166af382): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (37d68c0f-1866-4d6d-ba7a-1595638a9c3c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (37d68c0f-1866-4d6d-ba7a-1595638a9c3c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (588a7795-f5f4-4f24-8f86-ff2d06a42d65): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (588a7795-f5f4-4f24-8f86-ff2d06a42d65): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d85a317f-51c3-4402-8d9a-b6ff5b923cb1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d85a317f-51c3-4402-8d9a-b6ff5b923cb1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7d6631f-9a74-40e5-b43b-a444b3eca245): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (d7d6631f-9a74-40e5-b43b-a444b3eca245): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (75de966d-5f65-46de-aca5-8bd9bf8a6847): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (75de966d-5f65-46de-aca5-8bd9bf8a6847): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (358bb0f2-0072-4af0-8486-c3f867f58ae6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (358bb0f2-0072-4af0-8486-c3f867f58ae6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52031cf8-fddc-46f0-9df7-36e1d43cdcfb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (52031cf8-fddc-46f0-9df7-36e1d43cdcfb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0946f6c3-a149-49cc-9b90-c178fd7ba95a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0946f6c3-a149-49cc-9b90-c178fd7ba95a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0eacc591-4950-4fc5-99c0-9c4f78eef607): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (0eacc591-4950-4fc5-99c0-9c4f78eef607): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a962b665-1f90-47b2-81e9-69e37a03afeb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (a962b665-1f90-47b2-81e9-69e37a03afeb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9ee49055-8408-43c3-859c-c1cb0a76e773): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9ee49055-8408-43c3-859c-c1cb0a76e773): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b461b35-64cc-4a38-be81-e24738b3062e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (0b461b35-64cc-4a38-be81-e24738b3062e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10c66e1a-f3e9-4bdc-ac6c-15f49a7fe43f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (10c66e1a-f3e9-4bdc-ac6c-15f49a7fe43f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (93872c06-e985-4717-a114-48cdcfbae108): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (93872c06-e985-4717-a114-48cdcfbae108): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24e36914-bed9-40d6-a0f7-f0b62b761c51): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (24e36914-bed9-40d6-a0f7-f0b62b761c51): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (086f9958-bed5-463a-989b-4b20013ee752): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (086f9958-bed5-463a-989b-4b20013ee752): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (61f0bbdf-1c4a-4b8c-b457-1298ef8d3845): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (61f0bbdf-1c4a-4b8c-b457-1298ef8d3845): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e0496450-a8ca-4916-a713-de6858c0ea8e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (e0496450-a8ca-4916-a713-de6858c0ea8e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b5003c18-c8ac-4a06-af15-8a5c8e00e2fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b5003c18-c8ac-4a06-af15-8a5c8e00e2fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d89d5f50-8096-4f00-9eac-b6e803c57260): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (d89d5f50-8096-4f00-9eac-b6e803c57260): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4b21c2b1-466b-4c98-941d-44b7e964e01f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4b21c2b1-466b-4c98-941d-44b7e964e01f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (62d0fba5-0a4c-4865-9955-e1e370fd46ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (62d0fba5-0a4c-4865-9955-e1e370fd46ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b88b9fbd-f006-453a-b7e8-9524ae7e04d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (b88b9fbd-f006-453a-b7e8-9524ae7e04d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (21f9cebf-4b83-48fb-bdd8-4646f66bfe90): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (21f9cebf-4b83-48fb-bdd8-4646f66bfe90): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bf2ba471-f4d3-4513-95c5-ae53b36385a6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bf2ba471-f4d3-4513-95c5-ae53b36385a6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca3137ac-17ab-4099-ba12-9e1f8cf66c57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (ca3137ac-17ab-4099-ba12-9e1f8cf66c57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (17f9e68d-e2b2-4f3f-8c18-4f012ab289ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (17f9e68d-e2b2-4f3f-8c18-4f012ab289ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd2173c7-275d-48cd-b153-a997f075ac35): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (fd2173c7-275d-48cd-b153-a997f075ac35): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e8a48657-80c0-4b93-8881-fd4c34433181): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (e8a48657-80c0-4b93-8881-fd4c34433181): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1743c094-e0e0-4b49-b8a7-bc9be3a0ff02): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (1743c094-e0e0-4b49-b8a7-bc9be3a0ff02): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c398e47f-a7ee-49e8-bb11-05a78cf2da2c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (c398e47f-a7ee-49e8-bb11-05a78cf2da2c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (137dd777-f518-4cca-99a1-54213b4c234f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (137dd777-f518-4cca-99a1-54213b4c234f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f8680cb-a5e5-4985-9610-4f638ad182b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (9f8680cb-a5e5-4985-9610-4f638ad182b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8b11798c-9dd5-419c-b322-6a80e0628a6c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (8b11798c-9dd5-419c-b322-6a80e0628a6c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (de4f45a7-08f3-42b9-a89e-5e749be8948b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (de4f45a7-08f3-42b9-a89e-5e749be8948b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (89b7e763-ee30-4d26-875d-97fb25084d97): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (89b7e763-ee30-4d26-875d-97fb25084d97): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (29d92b96-aec2-45a3-a0ec-1fe4825d7677): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (29d92b96-aec2-45a3-a0ec-1fe4825d7677): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9ec47140-77a1-450b-987f-f47fa93d9f4e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (9ec47140-77a1-450b-987f-f47fa93d9f4e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (697a2b9c-e280-4412-ae4d-8930009f0af7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (697a2b9c-e280-4412-ae4d-8930009f0af7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a811f758-9ffc-4423-a71a-14922058bc6c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (a811f758-9ffc-4423-a71a-14922058bc6c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1331bce9-991c-4872-b1a6-96041278eeeb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (1331bce9-991c-4872-b1a6-96041278eeeb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b19dbb1e-a102-421a-9a7d-edec0928ea62): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b19dbb1e-a102-421a-9a7d-edec0928ea62): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e84cd3b-32e2-4d6e-866f-d2a1d753b6b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6e84cd3b-32e2-4d6e-866f-d2a1d753b6b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0719b47f-9739-46ad-921f-c78b78a0d3c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0719b47f-9739-46ad-921f-c78b78a0d3c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ec77f10-af13-4dfb-8f7a-b885c2205632): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (5ec77f10-af13-4dfb-8f7a-b885c2205632): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ddfe1c03-e131-4023-9e41-c8fc64a6064c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (ddfe1c03-e131-4023-9e41-c8fc64a6064c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (beefb21a-ca44-4f4d-bd79-42aa55f1b799): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (beefb21a-ca44-4f4d-bd79-42aa55f1b799): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a8880ae3-9231-4470-afdc-ce44fea222e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (a8880ae3-9231-4470-afdc-ce44fea222e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (420fa501-434d-4391-9df5-df79b78d6c7c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (420fa501-434d-4391-9df5-df79b78d6c7c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d32e2a87-eccc-4c55-9e59-8ff5e3d3a66f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d32e2a87-eccc-4c55-9e59-8ff5e3d3a66f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f970133f-afe3-414d-9af9-843d2dbe7106): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (f970133f-afe3-414d-9af9-843d2dbe7106): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (044afc16-f3fc-4554-8ca2-78c8e5e0e63a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (044afc16-f3fc-4554-8ca2-78c8e5e0e63a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa932572-dae6-4161-94f0-90bf58131a7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (fa932572-dae6-4161-94f0-90bf58131a7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4dd825db-7db6-42e4-9383-60d53b639821): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4dd825db-7db6-42e4-9383-60d53b639821): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8c0debe7-2ef2-426d-a316-57c0fb154ccb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (8c0debe7-2ef2-426d-a316-57c0fb154ccb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ffa6cfe4-de48-43ce-ab78-6a5b7c43fbc1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ffa6cfe4-de48-43ce-ab78-6a5b7c43fbc1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7302d841-7d6a-4e80-a03c-c64d8a298994): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (7302d841-7d6a-4e80-a03c-c64d8a298994): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (28b1d6ba-6722-47e8-8822-9cebd9587fdf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (28b1d6ba-6722-47e8-8822-9cebd9587fdf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (084305e8-8a9f-4551-996f-358c7f7ecb3f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (084305e8-8a9f-4551-996f-358c7f7ecb3f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b7e4ec25-3cb5-4fee-b064-8bb8cb142b89): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b7e4ec25-3cb5-4fee-b064-8bb8cb142b89): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (69525cac-1f26-40f9-ad77-614d6b7eacc5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (69525cac-1f26-40f9-ad77-614d6b7eacc5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a27c623b-dddc-4ce6-b4e1-f23787b5244b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a27c623b-dddc-4ce6-b4e1-f23787b5244b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (acbf8953-199f-4b9a-ae85-71df4c47e6b6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (acbf8953-199f-4b9a-ae85-71df4c47e6b6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3f2380e-21c6-468d-b0e1-89acaa1dd89d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f3f2380e-21c6-468d-b0e1-89acaa1dd89d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (14805e3c-0d77-4e8a-8f51-332e216694c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (14805e3c-0d77-4e8a-8f51-332e216694c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fad8834-d46a-4615-9580-901cae1ebfb5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7fad8834-d46a-4615-9580-901cae1ebfb5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9db6932-b4f4-467d-a9f4-c6520ec6e0ef): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b9db6932-b4f4-467d-a9f4-c6520ec6e0ef): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bcc9f341-7a53-45e6-b808-fc7e4ce1af84): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bcc9f341-7a53-45e6-b808-fc7e4ce1af84): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9489bc6e-d2fe-4e7a-ada3-b98723cbac59): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9489bc6e-d2fe-4e7a-ada3-b98723cbac59): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (95a16bfd-d26e-4064-8051-1c59017b631e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (95a16bfd-d26e-4064-8051-1c59017b631e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7d1c32eb-b3ec-42b4-aae0-3af5491e2b64): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (7d1c32eb-b3ec-42b4-aae0-3af5491e2b64): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c4d40b15-a4d9-440c-b545-4dc86b0de88a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c4d40b15-a4d9-440c-b545-4dc86b0de88a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (28fe8607-5e32-4505-9815-0c95cc8d621c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (28fe8607-5e32-4505-9815-0c95cc8d621c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (77387238-b61c-4a81-ace5-bb3ebad38354): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (77387238-b61c-4a81-ace5-bb3ebad38354): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c97d553-5edd-44e6-81de-21d017235396): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (9c97d553-5edd-44e6-81de-21d017235396): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9cd16b28-6759-48c8-b21c-e76edc1e668d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (9cd16b28-6759-48c8-b21c-e76edc1e668d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee8ffa51-7301-4c53-bc2c-4f61292d29a0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (ee8ffa51-7301-4c53-bc2c-4f61292d29a0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d68a6d63-7cc4-470f-847f-3da7441809d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d68a6d63-7cc4-470f-847f-3da7441809d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55568c49-3013-4c20-a3ca-b3efabf85649): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (55568c49-3013-4c20-a3ca-b3efabf85649): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f8ee3a6c-2161-49e0-8415-018f8134104f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (f8ee3a6c-2161-49e0-8415-018f8134104f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f718693-e2ca-4717-a965-7d44023fcfbc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (6f718693-e2ca-4717-a965-7d44023fcfbc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91912028-9ab9-4366-aba3-68bd13de4260): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (91912028-9ab9-4366-aba3-68bd13de4260): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2660b7b0-7218-4d67-85fd-e67628893c39): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (2660b7b0-7218-4d67-85fd-e67628893c39): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `insurance_providers` (`id`,`name`,`createdAt`,`updatedAt`) VALUES (NULL,$1,$2,$3);","service":"user-service"}
{"level":"debug","message":"Executing (fc4ed5bc-a5d2-41af-aee4-04c4bddcadaf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fc4ed5bc-a5d2-41af-aee4-04c4bddcadaf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bcd76395-3419-424d-a116-3d962bb667f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bcd76395-3419-424d-a116-3d962bb667f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (61743ac3-cf81-4a96-97e4-ae6e00c5f009): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (61743ac3-cf81-4a96-97e4-ae6e00c5f009): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d086b9f3-eac8-4427-bef3-8654f0fa5abe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (d086b9f3-eac8-4427-bef3-8654f0fa5abe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (84fee8e3-cf72-4203-b832-662793b6c4ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (84fee8e3-cf72-4203-b832-662793b6c4ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (760a01a0-1ca9-4d73-a838-dd60c3e871c0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (760a01a0-1ca9-4d73-a838-dd60c3e871c0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6383bd84-9204-43af-8ab7-f747ac1c201e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (6383bd84-9204-43af-8ab7-f747ac1c201e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d0aee626-30ce-46ff-b42c-57ccdced4db9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (d0aee626-30ce-46ff-b42c-57ccdced4db9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9faf493b-2dda-46ae-8a11-b77a18987326): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9faf493b-2dda-46ae-8a11-b77a18987326): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (479cc3c4-da0c-4174-84d6-570dbebecd5d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (479cc3c4-da0c-4174-84d6-570dbebecd5d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c17c86f4-9796-4b7e-a2ed-838ddfd2c372): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c17c86f4-9796-4b7e-a2ed-838ddfd2c372): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa42ee38-13f1-4730-96b3-2706c4054de5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (fa42ee38-13f1-4730-96b3-2706c4054de5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f919c41-1f25-4027-8607-629e4f42fefa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5f919c41-1f25-4027-8607-629e4f42fefa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e0aad456-0f97-4b33-80d5-ecda45c9306c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (e0aad456-0f97-4b33-80d5-ecda45c9306c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d50d6bd-b931-4063-acb3-c610fd04c404): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1d50d6bd-b931-4063-acb3-c610fd04c404): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36c124b7-7684-4bdf-9e48-f1310e9d4693): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (36c124b7-7684-4bdf-9e48-f1310e9d4693): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58767151-166e-4745-a003-6005946849e1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (58767151-166e-4745-a003-6005946849e1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ead2bb7c-a8d1-42c4-a685-40a12f71c608): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (ead2bb7c-a8d1-42c4-a685-40a12f71c608): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dec3e000-0cbd-4f6a-b283-f73dbbaca18b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dec3e000-0cbd-4f6a-b283-f73dbbaca18b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (914806a9-7cb2-497f-a75c-28e2332afcd7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (914806a9-7cb2-497f-a75c-28e2332afcd7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3296553-a9de-48c5-8367-c7aa611b9fd6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b3296553-a9de-48c5-8367-c7aa611b9fd6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b4841f5a-6076-418d-8b67-5f273bdf68d0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b4841f5a-6076-418d-8b67-5f273bdf68d0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19b87b0d-be1c-488f-a073-4ce56fb7622b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (19b87b0d-be1c-488f-a073-4ce56fb7622b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (614712f4-d142-4578-86a1-97dc1821ee84): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (614712f4-d142-4578-86a1-97dc1821ee84): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4fcd5c1-eabe-4462-b056-8ea957e7c25c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d4fcd5c1-eabe-4462-b056-8ea957e7c25c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8fd7517b-1b69-401c-b05b-daebfff0e126): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (8fd7517b-1b69-401c-b05b-daebfff0e126): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (04429d7c-fbb8-49e2-adad-f64ef4c5d604): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (04429d7c-fbb8-49e2-adad-f64ef4c5d604): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (af2ed4c4-b2dd-4346-9ba4-8d4f1a59948e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (af2ed4c4-b2dd-4346-9ba4-8d4f1a59948e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (28715ee9-7d5c-4561-a322-9d05036721ef): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (28715ee9-7d5c-4561-a322-9d05036721ef): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (65fb0f14-28f6-40d0-8277-3c7e92a9a34f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (65fb0f14-28f6-40d0-8277-3c7e92a9a34f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e0b30dc7-02d6-4ecd-a285-cfda9afd9d4a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e0b30dc7-02d6-4ecd-a285-cfda9afd9d4a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0d83f04b-4189-454d-addd-455afe48d22a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (0d83f04b-4189-454d-addd-455afe48d22a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5aae3a24-a7fb-4ba1-b40e-520c9e3f09dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5aae3a24-a7fb-4ba1-b40e-520c9e3f09dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e28de4ca-bf80-40c7-a65d-609a35133e27): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (e28de4ca-bf80-40c7-a65d-609a35133e27): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e2b3dfe6-b420-49af-a042-b426ff4eb66b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e2b3dfe6-b420-49af-a042-b426ff4eb66b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55b9b942-ed13-4819-857b-53eafe09c874): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (55b9b942-ed13-4819-857b-53eafe09c874): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f48327d-25e9-4150-bf51-dc5874efbb82): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (5f48327d-25e9-4150-bf51-dc5874efbb82): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97a87621-4459-4224-bf17-1bcd5948adfe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (97a87621-4459-4224-bf17-1bcd5948adfe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da5d79e1-4150-470a-9810-1e1c24f2e4c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (da5d79e1-4150-470a-9810-1e1c24f2e4c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (edd61485-33a9-4ddd-9eeb-33f5f751e613): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (edd61485-33a9-4ddd-9eeb-33f5f751e613): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (430b80ad-b3b2-4f3b-8f36-fc0aa51d8521): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (430b80ad-b3b2-4f3b-8f36-fc0aa51d8521): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e2f50cd-35f9-48bd-b801-5da8e16968b9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (3e2f50cd-35f9-48bd-b801-5da8e16968b9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6b3c9685-a8af-44e3-a1ec-c5dd9ab804fc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (6b3c9685-a8af-44e3-a1ec-c5dd9ab804fc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a579b67-6576-4a81-b9cc-063b8af906e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (6a579b67-6576-4a81-b9cc-063b8af906e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b24c3d1d-3711-47ee-b751-a040d036f94a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (b24c3d1d-3711-47ee-b751-a040d036f94a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (32e7034e-6a26-456b-93a4-cabbe645e8b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (32e7034e-6a26-456b-93a4-cabbe645e8b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b1e2260-bbf9-4582-a2c6-ffef9655edef): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (2b1e2260-bbf9-4582-a2c6-ffef9655edef): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (831f2a8c-8cff-46f2-bd83-c7290289968d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (831f2a8c-8cff-46f2-bd83-c7290289968d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (362c5617-e2c5-4fa0-b10a-96c4b834039a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (362c5617-e2c5-4fa0-b10a-96c4b834039a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (80c005f4-8377-4a24-b685-351d6bee71cd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (80c005f4-8377-4a24-b685-351d6bee71cd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40910138-13bd-4b5a-a984-c9dc81e14bf0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (40910138-13bd-4b5a-a984-c9dc81e14bf0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b7c8037a-b128-4984-8031-0e6c5aa449da): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (b7c8037a-b128-4984-8031-0e6c5aa449da): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1153ee35-cc7f-4de1-b71a-2fe5bc8e92b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1153ee35-cc7f-4de1-b71a-2fe5bc8e92b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0cb1c7e4-1c8c-449a-8f50-370be87ab31b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (0cb1c7e4-1c8c-449a-8f50-370be87ab31b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b3c9a3f-40ae-46fe-9b51-adb1411e533f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (1b3c9a3f-40ae-46fe-9b51-adb1411e533f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (73d8289e-c91d-439b-a60a-02e70298f446): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (73d8289e-c91d-439b-a60a-02e70298f446): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d6d006f1-a688-4b8a-806c-979053c2d4b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d6d006f1-a688-4b8a-806c-979053c2d4b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ea0bde9-9228-4fe8-80ae-861d4b6c3b77): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0ea0bde9-9228-4fe8-80ae-861d4b6c3b77): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9440a552-ceca-47dc-a781-44e791dc4ec2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (9440a552-ceca-47dc-a781-44e791dc4ec2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbdb017a-6890-4d27-a394-8ace6dd73725): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (bbdb017a-6890-4d27-a394-8ace6dd73725): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3c83b798-ce31-4b6d-b443-e6c5228a90de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3c83b798-ce31-4b6d-b443-e6c5228a90de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9bbd0095-cc44-49c7-89d2-a31ae7b00517): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (9bbd0095-cc44-49c7-89d2-a31ae7b00517): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac1a41de-0f72-4c23-a52b-abea347e768d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (ac1a41de-0f72-4c23-a52b-abea347e768d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2962a7b8-cab3-4227-9b27-7ea1a14389f9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2962a7b8-cab3-4227-9b27-7ea1a14389f9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6452d34c-3f36-4390-9f0b-c70ce1f7d9ff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (6452d34c-3f36-4390-9f0b-c70ce1f7d9ff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (320fb381-3181-4442-9c49-08e7fc6b7685): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (320fb381-3181-4442-9c49-08e7fc6b7685): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (98ab60f3-598c-4aa2-a31c-8bad8c6fa9dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (98ab60f3-598c-4aa2-a31c-8bad8c6fa9dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5eedab95-dde7-4739-bb3e-bda1b8cafb0b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5eedab95-dde7-4739-bb3e-bda1b8cafb0b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aaa3c3b8-124c-48ea-886e-b54f1805c96d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (aaa3c3b8-124c-48ea-886e-b54f1805c96d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b4ee52c6-121b-462a-8d4a-618bf312402b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b4ee52c6-121b-462a-8d4a-618bf312402b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5a101d68-5838-4f08-8bbf-e488ace1d7f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (5a101d68-5838-4f08-8bbf-e488ace1d7f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (99b4e91f-64cf-49de-94c1-a2ba78bef05c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (99b4e91f-64cf-49de-94c1-a2ba78bef05c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a1809632-b3b6-49e2-bdc1-38c3654966c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (a1809632-b3b6-49e2-bdc1-38c3654966c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4ea09c56-aa73-450b-a598-c86ce13467be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4ea09c56-aa73-450b-a598-c86ce13467be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (29cc603d-c77a-4084-9d52-41ede18045d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (29cc603d-c77a-4084-9d52-41ede18045d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15d79c89-55d4-4174-9709-7f1e8e43a65a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (15d79c89-55d4-4174-9709-7f1e8e43a65a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f08311d-2b38-4665-b240-45b94230154e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1f08311d-2b38-4665-b240-45b94230154e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5965019c-4bde-418b-a246-8d64ce3ca7d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5965019c-4bde-418b-a246-8d64ce3ca7d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a4cb3f91-1d77-4bdd-97fb-d95ad50da527): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (a4cb3f91-1d77-4bdd-97fb-d95ad50da527): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3d65117-4987-4395-a062-d051a8ee3c4e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f3d65117-4987-4395-a062-d051a8ee3c4e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (555a0948-33eb-4f5d-bfe4-4d8bc4f65a66): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (555a0948-33eb-4f5d-bfe4-4d8bc4f65a66): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8d4f9368-069e-4d44-aa42-2707f7e0e0df): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8d4f9368-069e-4d44-aa42-2707f7e0e0df): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (850452be-8643-45ae-990e-bffcd7be7894): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (850452be-8643-45ae-990e-bffcd7be7894): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f64fdaa8-0de9-4c54-b3d7-8777d2a4d1b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f64fdaa8-0de9-4c54-b3d7-8777d2a4d1b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6dbd5bb7-726a-4c68-ba07-fea333b3d0c8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (6dbd5bb7-726a-4c68-ba07-fea333b3d0c8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (50c202e1-4698-48a1-9739-19f1e3e4a1a3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (50c202e1-4698-48a1-9739-19f1e3e4a1a3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0755bcb5-e6e7-436e-85f0-963bf29bb545): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (0755bcb5-e6e7-436e-85f0-963bf29bb545): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (047e0f2d-8e38-4af7-833d-7e48e13baef1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (047e0f2d-8e38-4af7-833d-7e48e13baef1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa29b04a-ccbd-45ed-8853-2c1fc9c68f42): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (aa29b04a-ccbd-45ed-8853-2c1fc9c68f42): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1cb21f48-823b-4144-a70a-8cd3cf79079e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (1cb21f48-823b-4144-a70a-8cd3cf79079e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (050b6af6-07ac-4543-a3ea-0609cdbcea2c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (050b6af6-07ac-4543-a3ea-0609cdbcea2c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5b947710-8c20-4551-a578-3338f00316e9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5b947710-8c20-4551-a578-3338f00316e9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (51715979-0875-48a9-868b-afa71440f780): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (51715979-0875-48a9-868b-afa71440f780): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58aa64ba-0c56-42d6-b5eb-3c3847274c13): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (58aa64ba-0c56-42d6-b5eb-3c3847274c13): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2d1be6c0-f9a6-455d-aacb-307720bf4ddd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (2d1be6c0-f9a6-455d-aacb-307720bf4ddd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d051ba37-355a-4fbb-9bd6-26ecf2888e16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (d051ba37-355a-4fbb-9bd6-26ecf2888e16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (96f2f82f-60be-4cb9-9c6a-cb8ae1e1abab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (96f2f82f-60be-4cb9-9c6a-cb8ae1e1abab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `insurance_providers` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `drug_info` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `reminders` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `insurance_providers` (`id`,`name`,`createdAt`,`updatedAt`) VALUES (NULL,$1,$2,$3);","service":"user-service"}
{"level":"debug","message":"Executing (9c92b59a-a963-4d37-b508-3236dbde440a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9c92b59a-a963-4d37-b508-3236dbde440a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5f76cfc-8660-4462-8be4-7dc592bf3e08): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d5f76cfc-8660-4462-8be4-7dc592bf3e08): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e8bccd52-f965-457a-8696-a6990784469c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e8bccd52-f965-457a-8696-a6990784469c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e7b056f4-4b51-452c-bd25-555265164101): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (e7b056f4-4b51-452c-bd25-555265164101): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (49791834-786d-41ae-86f8-4cf77e9c35d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (49791834-786d-41ae-86f8-4cf77e9c35d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f65a9f13-90df-4db3-b169-0c4ea8efc646): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (f65a9f13-90df-4db3-b169-0c4ea8efc646): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (be4d5e7f-ac75-4efb-a73d-a99a32d717c8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (be4d5e7f-ac75-4efb-a73d-a99a32d717c8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0c8fe1ac-1f26-41ad-9ebe-bf6a463149e0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (0c8fe1ac-1f26-41ad-9ebe-bf6a463149e0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0c8435d7-5df9-43ba-9d4f-331fb12cd7d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0c8435d7-5df9-43ba-9d4f-331fb12cd7d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8b9b4836-298a-49b5-8af4-f970a6903be0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (8b9b4836-298a-49b5-8af4-f970a6903be0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b07e50da-ef89-49ea-a1eb-755f1b2fbd9a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b07e50da-ef89-49ea-a1eb-755f1b2fbd9a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (87865379-8ff7-48fe-a91b-31aeabe31105): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (87865379-8ff7-48fe-a91b-31aeabe31105): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0be0131-606c-4174-9238-7678c02aad21): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a0be0131-606c-4174-9238-7678c02aad21): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (277ed33d-d053-4681-b465-97f8403f1ae9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (277ed33d-d053-4681-b465-97f8403f1ae9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (160fa4eb-b270-4dc4-acb2-2f63dc24fbf4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (160fa4eb-b270-4dc4-acb2-2f63dc24fbf4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff0f6c65-f561-488a-8265-ffe04b376540): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (ff0f6c65-f561-488a-8265-ffe04b376540): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c98acef3-4748-4cb6-ba98-4f5d61d5fac2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c98acef3-4748-4cb6-ba98-4f5d61d5fac2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5af6394-7b7d-49e6-9bac-b3af54b4d99a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (d5af6394-7b7d-49e6-9bac-b3af54b4d99a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7212a951-63d0-4075-a31b-758fb2ad9352): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7212a951-63d0-4075-a31b-758fb2ad9352): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac4c074c-be5c-4dcc-a2f6-e7d9373f3fe3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (ac4c074c-be5c-4dcc-a2f6-e7d9373f3fe3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ec78d0ac-180c-4888-85dc-96d88584979c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ec78d0ac-180c-4888-85dc-96d88584979c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7ff4ad2b-4146-4163-8d9c-0b0a7195578a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7ff4ad2b-4146-4163-8d9c-0b0a7195578a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e5fb1a2e-d01f-4d07-b86d-d39ce2ae1819): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (e5fb1a2e-d01f-4d07-b86d-d39ce2ae1819): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fdb2f522-fbbb-4ce0-a8bf-a8dcf6ef767e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (fdb2f522-fbbb-4ce0-a8bf-a8dcf6ef767e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad977655-0b0b-4966-aaeb-e6d560c343b6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ad977655-0b0b-4966-aaeb-e6d560c343b6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f773cdd-283f-4296-a6dd-0d22fc91b87e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (2f773cdd-283f-4296-a6dd-0d22fc91b87e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (125749f9-7b9e-4ad9-b32a-4efd10007589): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (125749f9-7b9e-4ad9-b32a-4efd10007589): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (417e6e8f-b7c1-4cb1-9d31-cdd40c4923c1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (417e6e8f-b7c1-4cb1-9d31-cdd40c4923c1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aeaee03a-57d4-4a48-a65b-b0bbb34263c6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (aeaee03a-57d4-4a48-a65b-b0bbb34263c6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b26d26ba-d482-48aa-9587-69d1c364f7ec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (b26d26ba-d482-48aa-9587-69d1c364f7ec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3991e18e-056b-47bd-90b8-8264debbd2a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3991e18e-056b-47bd-90b8-8264debbd2a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (de41c6cf-43d8-4141-8c15-791b35caa55f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (de41c6cf-43d8-4141-8c15-791b35caa55f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac75ee93-fa07-42e1-b92b-776707ac754e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ac75ee93-fa07-42e1-b92b-776707ac754e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4c6a686f-e95f-49e8-b64f-c72da64bcc64): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (4c6a686f-e95f-49e8-b64f-c72da64bcc64): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11976751-51ea-43fd-a62e-6a2d444fd9d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (11976751-51ea-43fd-a62e-6a2d444fd9d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (31e52d43-51bc-4a42-b4f3-3192dc06693f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (31e52d43-51bc-4a42-b4f3-3192dc06693f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f958fd1b-9f15-412e-bb2e-6a0a2b792d6c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (f958fd1b-9f15-412e-bb2e-6a0a2b792d6c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10bc4dc9-823f-4965-abef-c1b9b4e4d0ce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (10bc4dc9-823f-4965-abef-c1b9b4e4d0ce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd973c87-20f9-4778-9221-32b0bb25d273): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cd973c87-20f9-4778-9221-32b0bb25d273): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a5c8647-483e-4012-ab3b-bf143b40d9af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (6a5c8647-483e-4012-ab3b-bf143b40d9af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4c14867d-bde9-4437-8198-fe96f779a1e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (4c14867d-bde9-4437-8198-fe96f779a1e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5888b97e-c223-4a33-b6e6-3aabdb9ff1e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (5888b97e-c223-4a33-b6e6-3aabdb9ff1e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a7c82e53-277f-4847-92f1-127f365cc6cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (a7c82e53-277f-4847-92f1-127f365cc6cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e697d1c9-6a13-49b8-bbe7-3cf9a49a5709): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (e697d1c9-6a13-49b8-bbe7-3cf9a49a5709): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed420e9d-3c6d-4a7e-b82a-4558965fab83): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (ed420e9d-3c6d-4a7e-b82a-4558965fab83): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef86d7c6-60d7-4a40-848c-77375ea19ce2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (ef86d7c6-60d7-4a40-848c-77375ea19ce2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ebca754d-ee38-421e-b068-606c87ba1d43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (ebca754d-ee38-421e-b068-606c87ba1d43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (98c7e88d-8a6e-49dd-b115-324fb730fb9b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (98c7e88d-8a6e-49dd-b115-324fb730fb9b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (59728ec1-3f7b-46c8-8cab-99baec9cb872): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (59728ec1-3f7b-46c8-8cab-99baec9cb872): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b52ce640-bf57-47b9-b08d-a08475d9f2f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (b52ce640-bf57-47b9-b08d-a08475d9f2f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f662321-1b64-4135-9f61-4f18de05d282): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (9f662321-1b64-4135-9f61-4f18de05d282): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d0edf7ea-43ea-48b0-82d7-e765549ad3be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (d0edf7ea-43ea-48b0-82d7-e765549ad3be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bba2f5eb-72d2-475c-aee0-db06088678ec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bba2f5eb-72d2-475c-aee0-db06088678ec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0f69589-b4c3-419a-83cc-8c1cf1d0b9f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (c0f69589-b4c3-419a-83cc-8c1cf1d0b9f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a25e8ba-4aa1-4984-b403-58ffb3d6023a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (9a25e8ba-4aa1-4984-b403-58ffb3d6023a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42b10509-d6d1-45c8-bbf4-df3c93326fa0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (42b10509-d6d1-45c8-bbf4-df3c93326fa0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c3f3baa0-49b0-4e43-98c2-6443a4e28697): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c3f3baa0-49b0-4e43-98c2-6443a4e28697): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (22c95c51-93c5-4b7b-80e8-c09109c36baf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (22c95c51-93c5-4b7b-80e8-c09109c36baf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (709bdbd4-297f-4adf-a710-0c7dd93090b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (709bdbd4-297f-4adf-a710-0c7dd93090b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39848550-3032-4023-b68f-50951c6f2f93): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (39848550-3032-4023-b68f-50951c6f2f93): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (62f0c6af-557b-43fb-b990-48a812a5a389): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (62f0c6af-557b-43fb-b990-48a812a5a389): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (29ee7f22-38d6-4b18-8a20-e29950eab885): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (29ee7f22-38d6-4b18-8a20-e29950eab885): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b97fa057-a2f2-4e26-b014-e54f1e5c3fb5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (b97fa057-a2f2-4e26-b014-e54f1e5c3fb5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (adeb9542-d32a-489e-8764-72c86d0e063b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (adeb9542-d32a-489e-8764-72c86d0e063b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4ef9d8a-aa01-4426-8688-b88fd224ba8c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (e4ef9d8a-aa01-4426-8688-b88fd224ba8c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4797693-8e5b-44d7-b80d-d6ac5b4cbe94): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e4797693-8e5b-44d7-b80d-d6ac5b4cbe94): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6354cc89-5d5b-434f-945c-e04290e14a67): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (6354cc89-5d5b-434f-945c-e04290e14a67): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (48fbbae9-5ab7-4cca-a182-a22e123c3e55): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (48fbbae9-5ab7-4cca-a182-a22e123c3e55): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f040e468-5cf7-4fd0-86df-8fc9dbe7ba0e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (f040e468-5cf7-4fd0-86df-8fc9dbe7ba0e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a836c2ea-ba9f-4923-9a5c-6b589e00e41a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a836c2ea-ba9f-4923-9a5c-6b589e00e41a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8bda994a-cfe4-46ea-a7db-46b3be216c4c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (8bda994a-cfe4-46ea-a7db-46b3be216c4c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb571a2a-1ac4-41be-8f3f-af36b01b8df3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cb571a2a-1ac4-41be-8f3f-af36b01b8df3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (44953548-6220-4f01-968a-8e9d62bfa0bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (44953548-6220-4f01-968a-8e9d62bfa0bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f2437dfc-1f17-4c0c-b2b1-ee86e9f0ef8d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f2437dfc-1f17-4c0c-b2b1-ee86e9f0ef8d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c9018844-f2b2-4135-9c42-4649c51cd01a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c9018844-f2b2-4135-9c42-4649c51cd01a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (99ad21bd-e94e-42e1-9df0-e581561d054c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (99ad21bd-e94e-42e1-9df0-e581561d054c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (587af2e0-ae95-4839-a4d9-47f94e1358c1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (587af2e0-ae95-4839-a4d9-47f94e1358c1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (905ac3f1-ce40-495f-94f7-ab77e06e2a09): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (905ac3f1-ce40-495f-94f7-ab77e06e2a09): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e89e28b4-0893-4e58-a47d-e45d8182790c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (e89e28b4-0893-4e58-a47d-e45d8182790c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39787802-c10d-40fd-b94b-1de7263d0f9d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (39787802-c10d-40fd-b94b-1de7263d0f9d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5019d81a-4b57-43a3-a4b3-768bf96f504e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5019d81a-4b57-43a3-a4b3-768bf96f504e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b50c47d5-7316-41ff-a9cd-995ac9369862): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b50c47d5-7316-41ff-a9cd-995ac9369862): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7723cd30-2b7e-4c2b-b9ff-5a8da2cc077b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7723cd30-2b7e-4c2b-b9ff-5a8da2cc077b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (886b76cb-15ac-4e1b-8804-5fa328e86982): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (886b76cb-15ac-4e1b-8804-5fa328e86982): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (49b85506-0040-4aff-a0ec-2a04f97cde00): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (49b85506-0040-4aff-a0ec-2a04f97cde00): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8950b554-eecf-4f8c-8164-37847c239597): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8950b554-eecf-4f8c-8164-37847c239597): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9aab4aae-1c54-48b6-9810-02c080e932a2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (9aab4aae-1c54-48b6-9810-02c080e932a2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a4cb5dfd-7794-4944-8b72-3ee19e09086e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (a4cb5dfd-7794-4944-8b72-3ee19e09086e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4dfb220f-1246-4606-86a9-b4f03b5f2791): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (4dfb220f-1246-4606-86a9-b4f03b5f2791): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f56f94b1-6910-4dd1-89de-8af9336580d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (f56f94b1-6910-4dd1-89de-8af9336580d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb90367c-d695-4dcf-a481-0374b029fdaf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (eb90367c-d695-4dcf-a481-0374b029fdaf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9637b5c1-167e-4bc8-b336-f4d6b2d395e0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9637b5c1-167e-4bc8-b336-f4d6b2d395e0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa9c1886-874a-4321-974a-45fd8abda5a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (aa9c1886-874a-4321-974a-45fd8abda5a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c126a5be-3337-4a91-9d0d-b9d9f088cec2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (c126a5be-3337-4a91-9d0d-b9d9f088cec2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fece671c-0265-45b3-a356-d2e916711430): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (fece671c-0265-45b3-a356-d2e916711430): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36bc52a6-3052-4758-a725-8e16047d10b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (36bc52a6-3052-4758-a725-8e16047d10b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b8b971ee-a54b-4c48-b4a5-6ba81e370f7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (b8b971ee-a54b-4c48-b4a5-6ba81e370f7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `insurance_providers` (`id`,`name`,`created_on`,`updatedAt`) VALUES (NULL,$1,$2,$3);","service":"user-service"}
{"level":"debug","message":"Executing (084e78a4-0dac-4c1e-9fc5-8090b84459a2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (084e78a4-0dac-4c1e-9fc5-8090b84459a2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b5b360c1-29d3-442f-b32d-622c98d07dc8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b5b360c1-29d3-442f-b32d-622c98d07dc8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c8811e7-567e-4c09-b6ec-0fd2364288ac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5c8811e7-567e-4c09-b6ec-0fd2364288ac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c3e8efd-0c70-489a-940d-4aea52b601f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (5c3e8efd-0c70-489a-940d-4aea52b601f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2a1ae14-bc25-49db-a45e-545ddc6957d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c2a1ae14-bc25-49db-a45e-545ddc6957d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9226c65-c739-4053-acbf-6a6106d8c05c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (b9226c65-c739-4053-acbf-6a6106d8c05c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (191ea150-a627-4af8-a4e5-3ee46d48c797): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (191ea150-a627-4af8-a4e5-3ee46d48c797): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd9c43ff-9b0b-40e3-b4e8-38b35ad07134): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (fd9c43ff-9b0b-40e3-b4e8-38b35ad07134): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c5adacae-ecc9-4bc1-9c82-716360e98983): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c5adacae-ecc9-4bc1-9c82-716360e98983): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fb53b40d-0ec9-425b-9ad3-3b20a93b4fa7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (fb53b40d-0ec9-425b-9ad3-3b20a93b4fa7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8d41e817-41d8-464e-a758-cfaeec04ba40): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8d41e817-41d8-464e-a758-cfaeec04ba40): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b89ca17c-f07b-456c-8dba-4a8be476bfb8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (b89ca17c-f07b-456c-8dba-4a8be476bfb8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c41cc89-1c95-4b7d-9e21-961fbeea43a4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9c41cc89-1c95-4b7d-9e21-961fbeea43a4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (43c4eda1-2285-41e2-878b-982934cb330c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (43c4eda1-2285-41e2-878b-982934cb330c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dd0040cb-8a99-4f5c-80d9-40a4bf52247c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dd0040cb-8a99-4f5c-80d9-40a4bf52247c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42d19dbe-580f-42f3-87e0-7a2fa621069c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (42d19dbe-580f-42f3-87e0-7a2fa621069c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1483ad1-7791-4338-979e-d05d7a90c86c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b1483ad1-7791-4338-979e-d05d7a90c86c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (65b08903-5122-4ef1-850c-3bcd5a4c17fc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (65b08903-5122-4ef1-850c-3bcd5a4c17fc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f1bda93c-dde0-42bd-9dc0-b8082330865a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f1bda93c-dde0-42bd-9dc0-b8082330865a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15c8b996-00a4-473c-af9c-ce2e178dbbab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (15c8b996-00a4-473c-af9c-ce2e178dbbab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4ca24d75-0495-4d34-b80d-406b5009b478): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4ca24d75-0495-4d34-b80d-406b5009b478): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8326ee1b-3580-44a9-96b4-c6513c45742a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8326ee1b-3580-44a9-96b4-c6513c45742a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (286e1a81-8122-4628-a57d-0c07c14dfc36): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (286e1a81-8122-4628-a57d-0c07c14dfc36): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a428e4ad-9182-4b91-8beb-653086801696): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (a428e4ad-9182-4b91-8beb-653086801696): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4bff353-f926-46c3-8a55-f6d3f269805b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e4bff353-f926-46c3-8a55-f6d3f269805b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed38fafa-e4a2-45c4-9b0f-3136831c83fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (ed38fafa-e4a2-45c4-9b0f-3136831c83fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b8801598-5d52-4945-8803-1c0ef257b838): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b8801598-5d52-4945-8803-1c0ef257b838): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (00ce3e56-2e65-4bba-afcd-3ceab6f88a71): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (00ce3e56-2e65-4bba-afcd-3ceab6f88a71): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1cd797d-4464-4c28-9cd3-b6e872f78b50): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b1cd797d-4464-4c28-9cd3-b6e872f78b50): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11270fbb-4151-4dcf-bed6-ef94d002ebe0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (11270fbb-4151-4dcf-bed6-ef94d002ebe0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (60d7528b-6f5c-4548-bc3b-48eb1daa80da): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (60d7528b-6f5c-4548-bc3b-48eb1daa80da): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (99fa0bf0-4a1f-4b3b-8f0e-628ef1b4279a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (99fa0bf0-4a1f-4b3b-8f0e-628ef1b4279a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b5f2ea2a-ac14-4305-ad7c-c3b49379cc3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b5f2ea2a-ac14-4305-ad7c-c3b49379cc3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (63eedd4d-64fe-42d7-82a6-bbdfdd5cd0bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (63eedd4d-64fe-42d7-82a6-bbdfdd5cd0bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (703e9755-6da5-4d1e-b8be-0b6bc0052f95): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (703e9755-6da5-4d1e-b8be-0b6bc0052f95): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea613757-9f82-4a0f-98b4-2f41860ee2ec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (ea613757-9f82-4a0f-98b4-2f41860ee2ec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91ad41c1-0e92-40e6-837d-db78b52cc36f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (91ad41c1-0e92-40e6-837d-db78b52cc36f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8a2524d0-37d4-4536-9270-dcc7822094a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (8a2524d0-37d4-4536-9270-dcc7822094a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7a95c76-26e4-4d38-8a89-c4eb5cde1ebb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f7a95c76-26e4-4d38-8a89-c4eb5cde1ebb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (77e10991-17cc-4a06-b708-cd54e28d2fc3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (77e10991-17cc-4a06-b708-cd54e28d2fc3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f429be24-88b9-4ba2-b0a0-cd6057ed9714): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (f429be24-88b9-4ba2-b0a0-cd6057ed9714): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42cb5ce5-cb6b-4b7a-bec4-9f04bfa7c0d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (42cb5ce5-cb6b-4b7a-bec4-9f04bfa7c0d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa20afea-b9a7-4960-a649-5ac4a290787b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (aa20afea-b9a7-4960-a649-5ac4a290787b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (41cb1f65-d28a-4528-b29b-bde1b9e3912a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (41cb1f65-d28a-4528-b29b-bde1b9e3912a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (53f5258f-8bbd-46c5-ba47-75c48c8ed5dd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (53f5258f-8bbd-46c5-ba47-75c48c8ed5dd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (67fbe714-4a50-4316-b0fd-8802ab2a75db): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (67fbe714-4a50-4316-b0fd-8802ab2a75db): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f4cbb968-8f13-4077-8079-3f515e262ee4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f4cbb968-8f13-4077-8079-3f515e262ee4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (412298b4-61b7-4730-afbe-4ec7c0cd8a76): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (412298b4-61b7-4730-afbe-4ec7c0cd8a76): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e05d296e-32fe-4be2-ad31-b9d1ecfce6dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (e05d296e-32fe-4be2-ad31-b9d1ecfce6dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8e0420be-a879-4280-8ed9-dc6b182fcc0d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (8e0420be-a879-4280-8ed9-dc6b182fcc0d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a79cf827-dd1a-433e-acab-03261e5f147c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (a79cf827-dd1a-433e-acab-03261e5f147c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9b6f12fc-0293-4b0e-9fd9-a7e81b5b5e94): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (9b6f12fc-0293-4b0e-9fd9-a7e81b5b5e94): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (600559b3-99e4-4622-a3ea-91f941ffcbd5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (600559b3-99e4-4622-a3ea-91f941ffcbd5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e637b276-0fa8-4284-9593-1993864caa45): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (e637b276-0fa8-4284-9593-1993864caa45): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4256f381-b96d-4eb2-a399-e7d13f018eaa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (4256f381-b96d-4eb2-a399-e7d13f018eaa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (173df8da-d203-4fa2-a74c-a89b4d5db708): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (173df8da-d203-4fa2-a74c-a89b4d5db708): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e9842135-3e9f-4109-bc4d-0fe3a9ba89b8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e9842135-3e9f-4109-bc4d-0fe3a9ba89b8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7afd76ad-fb5f-4290-ac5f-5d2d545811c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7afd76ad-fb5f-4290-ac5f-5d2d545811c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f1db1e5-2158-4eb3-9d76-9535a1cd81a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (0f1db1e5-2158-4eb3-9d76-9535a1cd81a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (23ef9d3f-a144-4bbd-9b6e-547f8fe79498): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (23ef9d3f-a144-4bbd-9b6e-547f8fe79498): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f36ea0bc-56f3-4624-ad1b-6583f393fbcd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f36ea0bc-56f3-4624-ad1b-6583f393fbcd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a2a85a6-b79a-431d-b9e4-7c2d84e77217): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (1a2a85a6-b79a-431d-b9e4-7c2d84e77217): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7d240b11-c43b-476b-b0d3-70ec66bc2d43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (7d240b11-c43b-476b-b0d3-70ec66bc2d43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ba51d1b3-4b76-4df7-9ba2-f9f1f1e7c1d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ba51d1b3-4b76-4df7-9ba2-f9f1f1e7c1d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (64b9ff56-124a-4b89-bded-79aa6a11de98): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (64b9ff56-124a-4b89-bded-79aa6a11de98): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (be216812-c6a0-4975-a8a8-d57503eb1119): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (be216812-c6a0-4975-a8a8-d57503eb1119): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71cabe39-4525-480d-b958-65743b787d92): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (71cabe39-4525-480d-b958-65743b787d92): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f6fbff8-d3b3-4669-b5ea-e2e66c9ccd41): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0f6fbff8-d3b3-4669-b5ea-e2e66c9ccd41): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c3665d64-3472-4997-94c1-47f69cefe933): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (c3665d64-3472-4997-94c1-47f69cefe933): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (948176e9-0229-4232-81cc-16d2c4c5c813): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (948176e9-0229-4232-81cc-16d2c4c5c813): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c955cf6c-6071-494d-abf1-51ea5947addd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (c955cf6c-6071-494d-abf1-51ea5947addd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5cc1c311-e077-4975-b8bf-01ee24872c5d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5cc1c311-e077-4975-b8bf-01ee24872c5d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6d483809-7ab6-4314-a2bc-9375303b6c6a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (6d483809-7ab6-4314-a2bc-9375303b6c6a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2fd3a5bf-d7cb-49fc-9487-a14249f95e36): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2fd3a5bf-d7cb-49fc-9487-a14249f95e36): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b02a2bd-267b-4055-a1cc-46b109530259): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1b02a2bd-267b-4055-a1cc-46b109530259): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (08872116-6a73-4d22-999f-15c7d4c69c7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (08872116-6a73-4d22-999f-15c7d4c69c7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12e9db9e-23a7-4f9f-a5ae-4eab1e2e033b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (12e9db9e-23a7-4f9f-a5ae-4eab1e2e033b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1178ee6-6e16-4720-b040-f5aaa0233db4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b1178ee6-6e16-4720-b040-f5aaa0233db4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24eb88ea-2f02-4f29-8cbf-efa03ecdc679): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (24eb88ea-2f02-4f29-8cbf-efa03ecdc679): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ba11705-b645-4556-978e-7334bfa643bb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3ba11705-b645-4556-978e-7334bfa643bb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e31dba1-6f13-406b-942b-577a35ba5d19): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2e31dba1-6f13-406b-942b-577a35ba5d19): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6c555ecb-6c9a-400c-b36e-0f95c8cda87f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6c555ecb-6c9a-400c-b36e-0f95c8cda87f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f504448-8161-49f3-9f9d-3768c96f3093): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5f504448-8161-49f3-9f9d-3768c96f3093): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c9587bc8-595c-40ed-ac09-543afb23e9c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c9587bc8-595c-40ed-ac09-543afb23e9c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55d1a2a3-814e-4a52-840d-6100a8be08b1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (55d1a2a3-814e-4a52-840d-6100a8be08b1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5262fb35-2e39-43ef-9e61-0b94a5b5496e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5262fb35-2e39-43ef-9e61-0b94a5b5496e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4ee45267-c6f9-4625-a01b-3e1632f99787): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (4ee45267-c6f9-4625-a01b-3e1632f99787): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (482d9b95-6bee-4f99-bcde-90a4e17bbc2e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (482d9b95-6bee-4f99-bcde-90a4e17bbc2e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7aa208d-c537-457b-af81-6efafc57d6da): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (d7aa208d-c537-457b-af81-6efafc57d6da): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac041c8b-e1d9-4d59-b7fa-46467d2b85e5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (ac041c8b-e1d9-4d59-b7fa-46467d2b85e5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (449112d0-a335-4d51-9cb9-18f106c241eb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (449112d0-a335-4d51-9cb9-18f106c241eb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15110af4-52d2-4ca6-b1b7-106be203e3ec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (15110af4-52d2-4ca6-b1b7-106be203e3ec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e1f8deb-d7cf-45c1-8394-19057076c3c1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (6e1f8deb-d7cf-45c1-8394-19057076c3c1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (66122504-8063-4712-a551-637bca039a17): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (66122504-8063-4712-a551-637bca039a17): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5df053b3-d759-4fa5-abf6-ee384a839494): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (5df053b3-d759-4fa5-abf6-ee384a839494): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (09320199-c86a-4c05-906f-11170d66c41e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (09320199-c86a-4c05-906f-11170d66c41e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (35365aa1-d3ca-4fb9-86ca-011d69ad3e9f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (35365aa1-d3ca-4fb9-86ca-011d69ad3e9f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `activities` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `branches` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customer_diagnostics` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `daily_records` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dbbackups` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `db_sync` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `diagnostic_tests` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `drug_info` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `incoming_payments` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `insurance_providers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `item_active_ingredients` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `online_backups` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `outgoing_payments` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `permissions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `outgoing_payments` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `purchases` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `purchases` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `received_transfer_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `received_transfers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `refills` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `settings` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment_pending` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment_sessions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_values` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `transfer_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `transfers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `users` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `user_sessions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `vendors` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `insurance_providers` (`id`,`name`,`created_on`,`updatedAt`) VALUES (NULL,$1,$2,$3);","service":"user-service"}
{"level":"debug","message":"Executing (ed0dc0b4-ee75-476b-b0bb-d205239e22d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ed0dc0b4-ee75-476b-b0bb-d205239e22d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ccdef09-a27d-4df9-b2d3-29c5016d1aeb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2ccdef09-a27d-4df9-b2d3-29c5016d1aeb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fce3a17-8e5a-4819-9d5b-918d531b4075): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7fce3a17-8e5a-4819-9d5b-918d531b4075): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fbc413d3-a233-48d0-a237-fdef742c0901): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (fbc413d3-a233-48d0-a237-fdef742c0901): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f7e817b-d807-4b62-9a80-13da4819505a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5f7e817b-d807-4b62-9a80-13da4819505a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (32cd8dea-f1d7-4385-9d5d-607ca25118e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (32cd8dea-f1d7-4385-9d5d-607ca25118e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (72217e2e-08b8-48a7-a7ec-6a5c7e58f0e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (72217e2e-08b8-48a7-a7ec-6a5c7e58f0e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (72e9c89b-8276-4236-840a-dd10885225d0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (72e9c89b-8276-4236-840a-dd10885225d0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b26627f2-391e-4b19-9a22-a2b41b6636b9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b26627f2-391e-4b19-9a22-a2b41b6636b9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (80257fac-6915-4a96-82f3-5f9b6cccd1d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (80257fac-6915-4a96-82f3-5f9b6cccd1d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3dbacea2-fd24-49e5-8022-a14af0af0e7d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3dbacea2-fd24-49e5-8022-a14af0af0e7d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a161273d-da75-4084-a55f-406a2abab656): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (a161273d-da75-4084-a55f-406a2abab656): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (274441c8-598d-4acd-b03c-3cb3b81874ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (274441c8-598d-4acd-b03c-3cb3b81874ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e6d9e36-07bf-46c2-9bed-e78c017815d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (1e6d9e36-07bf-46c2-9bed-e78c017815d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (753816ff-c6b0-447e-b185-5c73d9540f13): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (753816ff-c6b0-447e-b185-5c73d9540f13): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9728e45c-6554-4577-a422-68aa99fda41e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (9728e45c-6554-4577-a422-68aa99fda41e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e7e9f508-a79c-4128-80ab-d7af72e99233): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e7e9f508-a79c-4128-80ab-d7af72e99233): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (062df8a4-daed-430c-8112-4e7cd616bfad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (062df8a4-daed-430c-8112-4e7cd616bfad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d2fe558a-157c-4164-83f1-8c915c4608b3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d2fe558a-157c-4164-83f1-8c915c4608b3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c44e7a23-9f13-4d39-b9bf-dfc487ea6fcc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (c44e7a23-9f13-4d39-b9bf-dfc487ea6fcc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8ff4899f-4cab-478a-809d-b13eee589aea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8ff4899f-4cab-478a-809d-b13eee589aea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c47a3479-6df6-4d83-8546-bb345f60d5f9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c47a3479-6df6-4d83-8546-bb345f60d5f9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b7e5569-deb2-4e54-b51b-d7a1778fc96c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (2b7e5569-deb2-4e54-b51b-d7a1778fc96c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb10e6dd-7a9a-40ae-bf3c-704cb3419996): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (cb10e6dd-7a9a-40ae-bf3c-704cb3419996): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c122d64-bc80-4b48-b5d5-edbfc904bcc8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5c122d64-bc80-4b48-b5d5-edbfc904bcc8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9cef0fb0-af3e-44ba-be4e-885c811826b6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (9cef0fb0-af3e-44ba-be4e-885c811826b6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7982422f-3706-4d66-ba52-67d6e02ffb52): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7982422f-3706-4d66-ba52-67d6e02ffb52): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (14118aba-b019-481c-88eb-6acac7b55a8f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (14118aba-b019-481c-88eb-6acac7b55a8f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (45953343-df6c-4532-b3cf-55bb88d1dfbd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (45953343-df6c-4532-b3cf-55bb88d1dfbd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8f08cf26-bbb2-4169-af2d-e1583d50e042): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (8f08cf26-bbb2-4169-af2d-e1583d50e042): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c0e4be5-1b0d-4233-a387-483f8a58b144): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5c0e4be5-1b0d-4233-a387-483f8a58b144): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (78cb5897-4d65-44a2-b0ba-bb3aadecabc6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (78cb5897-4d65-44a2-b0ba-bb3aadecabc6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (83bb050f-6bc3-4f36-96bf-3911245156d5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (83bb050f-6bc3-4f36-96bf-3911245156d5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d735c88a-6bc4-4ed6-930e-961cb75e786b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (d735c88a-6bc4-4ed6-930e-961cb75e786b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (df3bf6b8-c381-47b0-b2d9-251a395d2ea1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (df3bf6b8-c381-47b0-b2d9-251a395d2ea1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a22db7e-daab-43fb-83b0-b592b5db3078): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (9a22db7e-daab-43fb-83b0-b592b5db3078): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e6547d8-b1db-4fd3-bbf4-c9c7cb9faf4c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (1e6547d8-b1db-4fd3-bbf4-c9c7cb9faf4c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58342b60-6a13-405d-b67d-361f95c5266e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (58342b60-6a13-405d-b67d-361f95c5266e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3c3e458b-3529-4c7e-9b4d-fe51e4847303): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3c3e458b-3529-4c7e-9b4d-fe51e4847303): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7887a7b0-f600-4d3c-8aad-a57abf9bff3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (7887a7b0-f600-4d3c-8aad-a57abf9bff3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4af203e4-64db-4732-adac-947795a24571): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (4af203e4-64db-4732-adac-947795a24571): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db22f95a-5cf7-43aa-9845-a5996fbd5f92): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (db22f95a-5cf7-43aa-9845-a5996fbd5f92): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (34b16ef8-17db-4a8c-9b4c-51df6e614b78): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (34b16ef8-17db-4a8c-9b4c-51df6e614b78): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (33b6b427-7e95-4463-9944-531a73470838): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (33b6b427-7e95-4463-9944-531a73470838): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7aeb54c2-ae25-4c81-a080-a25f97aabb12): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (7aeb54c2-ae25-4c81-a080-a25f97aabb12): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (143fbee3-e2c3-4d9a-9f1b-9457a015e1e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (143fbee3-e2c3-4d9a-9f1b-9457a015e1e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d267d0f-a54e-4c45-865a-acea63214017): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (3d267d0f-a54e-4c45-865a-acea63214017): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (17fe7fd4-b215-4a74-9952-d44193c630f8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (17fe7fd4-b215-4a74-9952-d44193c630f8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (997f7c1d-6315-49ad-abbe-76030bbd2d31): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (997f7c1d-6315-49ad-abbe-76030bbd2d31): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (23ea9aad-1889-4b2b-b18d-2ab9c6f0f93f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (23ea9aad-1889-4b2b-b18d-2ab9c6f0f93f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7796f845-55a4-44d4-b74f-f7abc1a32fff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (7796f845-55a4-44d4-b74f-f7abc1a32fff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7cec9ef5-8ff1-4b37-a28f-b317223d282d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (7cec9ef5-8ff1-4b37-a28f-b317223d282d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb2b4b39-529e-4089-a611-0d3fd3a09002): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cb2b4b39-529e-4089-a611-0d3fd3a09002): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9887279a-67cc-46a7-8a71-93111ae2268d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (9887279a-67cc-46a7-8a71-93111ae2268d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f886efc7-dae9-4aa6-9a3f-1dfbd7cfd546): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (f886efc7-dae9-4aa6-9a3f-1dfbd7cfd546): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c9d834d8-ffba-427a-8415-aa3f5c58e55c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c9d834d8-ffba-427a-8415-aa3f5c58e55c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d8878ff9-21e8-4ea0-9d58-1f2e3fa19ab9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d8878ff9-21e8-4ea0-9d58-1f2e3fa19ab9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e989d76f-8005-4ec6-82d4-f60fc70d3a20): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e989d76f-8005-4ec6-82d4-f60fc70d3a20): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cef84de5-3ca0-45e0-8621-caf147dbcb58): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (cef84de5-3ca0-45e0-8621-caf147dbcb58): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8d633aad-85b6-4da9-8cfa-5ec6940d8d8c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (8d633aad-85b6-4da9-8cfa-5ec6940d8d8c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (503d1d58-c094-451c-bd92-9462ce6dbe83): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (503d1d58-c094-451c-bd92-9462ce6dbe83): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e306d45-44f6-43a4-beb0-0386169b3967): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (3e306d45-44f6-43a4-beb0-0386169b3967): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d0c0eada-f8e1-4752-9548-cf4c39fb084a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (d0c0eada-f8e1-4752-9548-cf4c39fb084a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e548e417-7387-40fc-9df4-dcd33bfd469b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e548e417-7387-40fc-9df4-dcd33bfd469b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a84c5f1-3958-49f1-9804-64fba6bde499): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (4a84c5f1-3958-49f1-9804-64fba6bde499): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a990bd4b-5dfe-49fd-af8a-547c1ecde702): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a990bd4b-5dfe-49fd-af8a-547c1ecde702): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (44f14092-cae1-4bb0-98d6-91a66c785d06): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (44f14092-cae1-4bb0-98d6-91a66c785d06): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (47ee619d-b5d4-4734-8dfe-c7a385838d4c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (47ee619d-b5d4-4734-8dfe-c7a385838d4c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d15b292-a8df-49ce-89b4-53617f07ead9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (3d15b292-a8df-49ce-89b4-53617f07ead9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da9e3500-6ba9-49b7-81dd-0e2da30a723f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (da9e3500-6ba9-49b7-81dd-0e2da30a723f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3de13b96-68bb-4945-bd7a-d7ffad55069e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (3de13b96-68bb-4945-bd7a-d7ffad55069e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2970e6e-b69c-4384-9a36-51558c46d46b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b2970e6e-b69c-4384-9a36-51558c46d46b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d414ef65-7aa0-4c28-94a3-d11823cc1526): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (d414ef65-7aa0-4c28-94a3-d11823cc1526): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cba69f03-dd3e-4de9-adc6-d71f406207e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cba69f03-dd3e-4de9-adc6-d71f406207e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d0b5c9b1-dbbe-4f91-9c21-44cadb8e2cf0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d0b5c9b1-dbbe-4f91-9c21-44cadb8e2cf0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbffa77a-ca13-4c4c-bf26-0a41b1a9fe6e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bbffa77a-ca13-4c4c-bf26-0a41b1a9fe6e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5b18284e-abaf-4c04-b759-4c986c4f02cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5b18284e-abaf-4c04-b759-4c986c4f02cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f67ab6e-ffd0-4ee3-90a4-60c2165308b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3f67ab6e-ffd0-4ee3-90a4-60c2165308b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8adf9112-b980-4f97-81c4-c8abfeb27405): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (8adf9112-b980-4f97-81c4-c8abfeb27405): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a5f0a39-f44b-48f5-96b7-b1f208e7f9be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1a5f0a39-f44b-48f5-96b7-b1f208e7f9be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3569f810-a6dd-470b-a153-e9552783fd1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3569f810-a6dd-470b-a153-e9552783fd1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef2589ed-7f61-46e0-b213-8357e293217d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ef2589ed-7f61-46e0-b213-8357e293217d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (934d1b4c-826f-47b0-933e-02b54aa64afb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (934d1b4c-826f-47b0-933e-02b54aa64afb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9619c6ba-0a80-48a4-a859-803eb9a88bf4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9619c6ba-0a80-48a4-a859-803eb9a88bf4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (69c279ed-28a4-41f3-9d55-5985a159f0e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (69c279ed-28a4-41f3-9d55-5985a159f0e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (49f2eb57-d03b-4d66-86de-5e7eaba86cdd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (49f2eb57-d03b-4d66-86de-5e7eaba86cdd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1df4c06c-956d-4a1c-a8c1-7856fc8de19b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (1df4c06c-956d-4a1c-a8c1-7856fc8de19b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a9d3f444-82f2-490c-a0bc-192bbf65b6ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (a9d3f444-82f2-490c-a0bc-192bbf65b6ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b5caf47b-c3f3-4ebe-b65c-08a2bd5e4881): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (b5caf47b-c3f3-4ebe-b65c-08a2bd5e4881): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (776a6f59-cd9d-4d99-9cd1-cafec1874a3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (776a6f59-cd9d-4d99-9cd1-cafec1874a3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (469138d7-08d6-4f59-84d7-f9755d74717b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (469138d7-08d6-4f59-84d7-f9755d74717b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca2f66f7-bd5a-4f17-b7e8-46fb3993c881): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ca2f66f7-bd5a-4f17-b7e8-46fb3993c881): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d19a3267-f7c0-4f35-807d-2b52fbbaefbc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (d19a3267-f7c0-4f35-807d-2b52fbbaefbc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (78eefee0-3d06-4f19-9864-61840d507c42): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (78eefee0-3d06-4f19-9864-61840d507c42): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7eac3924-b41f-4d3a-a20a-816967be51d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (7eac3924-b41f-4d3a-a20a-816967be51d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e3fe2982-8241-4034-bcce-a531f0d21932): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (e3fe2982-8241-4034-bcce-a531f0d21932): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (216d5f32-8f98-4f68-88ec-eeef8e6e8d2c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (216d5f32-8f98-4f68-88ec-eeef8e6e8d2c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `insurance_providers` (`id`,`name`,`created_on`,`updatedAt`) VALUES (NULL,$1,$2,$3);","service":"user-service"}
{"level":"debug","message":"Executing (ebf29080-c21c-4d4a-a9fb-f8db215c46f2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ebf29080-c21c-4d4a-a9fb-f8db215c46f2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7d1d5d09-c58a-498c-80f3-26e64fc91c3a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7d1d5d09-c58a-498c-80f3-26e64fc91c3a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3f646e6-721b-4561-b018-3df01addd28e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b3f646e6-721b-4561-b018-3df01addd28e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3a24d449-8c38-4f48-89b5-29c6c8e4d299): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (3a24d449-8c38-4f48-89b5-29c6c8e4d299): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aac568fd-3479-4649-9397-c2588e38efde): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (aac568fd-3479-4649-9397-c2588e38efde): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (04797038-90ba-4aa4-85fa-a8ea6a5ec623): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (04797038-90ba-4aa4-85fa-a8ea6a5ec623): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40bc65db-3b4e-45ed-8c1a-02da97c72661): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (40bc65db-3b4e-45ed-8c1a-02da97c72661): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e585c537-6633-493e-89c8-826bbc6874d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (e585c537-6633-493e-89c8-826bbc6874d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1340670f-94ac-48c6-acff-22fbd09a3988): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1340670f-94ac-48c6-acff-22fbd09a3988): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac136a60-3515-4439-96d6-dfcd9e4ecb1c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (ac136a60-3515-4439-96d6-dfcd9e4ecb1c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb7b8dc0-8515-4b91-b603-c4e0ab59acd9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eb7b8dc0-8515-4b91-b603-c4e0ab59acd9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6fbf3646-57ee-4630-99f2-dd4e0a1967af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (6fbf3646-57ee-4630-99f2-dd4e0a1967af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6387b59f-6eda-4d3a-9f09-47fc8fafd040): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6387b59f-6eda-4d3a-9f09-47fc8fafd040): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4389fb6f-ee2a-409d-9128-214f15dfc03f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (4389fb6f-ee2a-409d-9128-214f15dfc03f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb54d586-11cf-4d8f-b2d1-96354df7ff98): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eb54d586-11cf-4d8f-b2d1-96354df7ff98): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a311b6f5-6aab-4a0d-859d-8253e67ceba1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (a311b6f5-6aab-4a0d-859d-8253e67ceba1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (545cc1f4-7b21-4cca-9748-55f212825a5f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (545cc1f4-7b21-4cca-9748-55f212825a5f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e618e30-af8f-422f-8777-3a387e396eee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (2e618e30-af8f-422f-8777-3a387e396eee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (83c494fa-4259-46e0-be1b-fc448dc8e997): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (83c494fa-4259-46e0-be1b-fc448dc8e997): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (498ede0f-436c-4258-bc60-1ffd2844bce1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (498ede0f-436c-4258-bc60-1ffd2844bce1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3acc8cc3-1c51-4cd6-ba88-9d4c2ddc5d1a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3acc8cc3-1c51-4cd6-ba88-9d4c2ddc5d1a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e3333bc0-7af4-4301-850f-6745dbf83794): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e3333bc0-7af4-4301-850f-6745dbf83794): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6148fc0a-1ac9-4974-864e-df344a940332): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (6148fc0a-1ac9-4974-864e-df344a940332): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (240b1a76-1e87-4d84-8944-0ee5a1cf5f00): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (240b1a76-1e87-4d84-8944-0ee5a1cf5f00): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (09c1b1d7-a9d9-489f-bb17-697c6d66de5b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (09c1b1d7-a9d9-489f-bb17-697c6d66de5b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (50547cdb-448e-4e3e-ad7d-4746a18acc88): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (50547cdb-448e-4e3e-ad7d-4746a18acc88): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ddd33ac-68a8-4189-9854-b2794d93a7fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3ddd33ac-68a8-4189-9854-b2794d93a7fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e05a29f0-9b8b-4df2-b68b-5f0dd0a226c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (e05a29f0-9b8b-4df2-b68b-5f0dd0a226c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (afb30e49-8b57-4977-9763-b12aa15beb68): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (afb30e49-8b57-4977-9763-b12aa15beb68): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (81e9eb08-4654-42bd-a107-5937241a957d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (81e9eb08-4654-42bd-a107-5937241a957d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (325ae4b8-8fc4-4734-a23e-27eeca0a5faa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (325ae4b8-8fc4-4734-a23e-27eeca0a5faa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (850444db-438f-4f22-bf59-90084d736cb5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (850444db-438f-4f22-bf59-90084d736cb5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (232e9fc9-79aa-4a89-b8c4-2c8d7a1475a3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (232e9fc9-79aa-4a89-b8c4-2c8d7a1475a3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0c2851a0-7fe3-4cd2-8704-4f5e01f6347e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (0c2851a0-7fe3-4cd2-8704-4f5e01f6347e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e33e04a2-9877-4a92-b11e-d0a9f5d4eced): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e33e04a2-9877-4a92-b11e-d0a9f5d4eced): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (35f56913-c71a-4e79-a269-418510c2b716): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (35f56913-c71a-4e79-a269-418510c2b716): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a1a9081a-2615-4a83-b116-6d95f1cb07d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a1a9081a-2615-4a83-b116-6d95f1cb07d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e64cbf6e-fedd-4209-8218-f67793ac2659): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (e64cbf6e-fedd-4209-8218-f67793ac2659): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d40cb2f5-489b-465f-b399-80909998ebae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d40cb2f5-489b-465f-b399-80909998ebae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c6258b5f-6e41-4cb9-9a44-5043d01a6a90): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (c6258b5f-6e41-4cb9-9a44-5043d01a6a90): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (749dbf0d-f799-42b8-b630-ac2ca75bae6f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (749dbf0d-f799-42b8-b630-ac2ca75bae6f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (245219d1-2382-4bed-9213-57cc72506c56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (245219d1-2382-4bed-9213-57cc72506c56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c5c1118c-a2fa-4695-85cd-f69a42d3ebea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (c5c1118c-a2fa-4695-85cd-f69a42d3ebea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (468ecd81-4412-4c7c-99bf-536c06c400aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (468ecd81-4412-4c7c-99bf-536c06c400aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a425366a-9d3d-4109-bc86-db76631a2969): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (a425366a-9d3d-4109-bc86-db76631a2969): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f22b4d92-34e2-4bde-a0bd-9614e6f2e42e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f22b4d92-34e2-4bde-a0bd-9614e6f2e42e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5a565330-617f-460c-811c-620fbfce1b53): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (5a565330-617f-460c-811c-620fbfce1b53): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4d05190-d454-415a-9e27-9c92e58f1b04): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e4d05190-d454-415a-9e27-9c92e58f1b04): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2672180-0ab4-4c4d-a9b7-34e29f0c6b39): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (b2672180-0ab4-4c4d-a9b7-34e29f0c6b39): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (61a2275e-1732-4b83-993e-d16a970c0fbd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (61a2275e-1732-4b83-993e-d16a970c0fbd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c8043d09-45e4-41e8-a9c1-f96e1948ccc4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (c8043d09-45e4-41e8-a9c1-f96e1948ccc4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2fc44a14-7dc5-4bd1-86dc-64291f7441c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (2fc44a14-7dc5-4bd1-86dc-64291f7441c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ebee40c3-2e8b-4beb-9cf2-ca7194101550): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ebee40c3-2e8b-4beb-9cf2-ca7194101550): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f03e863-8277-4a77-863f-6771542ccf4d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (2f03e863-8277-4a77-863f-6771542ccf4d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4383f390-bbe9-4d54-92b4-60f028b5b75d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (4383f390-bbe9-4d54-92b4-60f028b5b75d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1779a1b7-d04f-44f1-a690-d9184c6d9e56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1779a1b7-d04f-44f1-a690-d9184c6d9e56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b8d89ad-77a8-4780-9a0a-953a6ef6bd30): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1b8d89ad-77a8-4780-9a0a-953a6ef6bd30): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b63f46e-2fe5-4e3b-b6fa-c06080f0d639): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7b63f46e-2fe5-4e3b-b6fa-c06080f0d639): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6d818bd5-e1f5-4d77-ba00-46a54a3e80c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (6d818bd5-e1f5-4d77-ba00-46a54a3e80c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (209e767f-7506-4ad4-b81b-85ef2811fe8f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (209e767f-7506-4ad4-b81b-85ef2811fe8f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f097a0a-b516-4194-84ae-715f614e3b7c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6f097a0a-b516-4194-84ae-715f614e3b7c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (90bf9f96-03a6-464f-90c0-eb6fb6e877d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (90bf9f96-03a6-464f-90c0-eb6fb6e877d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3db5d32c-0a53-43ee-8447-93ea5c46744c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (3db5d32c-0a53-43ee-8447-93ea5c46744c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4bd2af56-ba26-44aa-824e-c151244d970c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4bd2af56-ba26-44aa-824e-c151244d970c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b0f81e28-6ed8-44d0-bc8c-79804acf80d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (b0f81e28-6ed8-44d0-bc8c-79804acf80d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4c537a36-a353-423c-b7ea-ddacdab1d823): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4c537a36-a353-423c-b7ea-ddacdab1d823): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (effdbd66-43a2-4022-9378-86eace29a1d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (effdbd66-43a2-4022-9378-86eace29a1d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58642e39-44fb-4f29-8d8c-d1f9cc56d4e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (58642e39-44fb-4f29-8d8c-d1f9cc56d4e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef3fcfbd-2593-48ec-8da2-f4afa7f5955a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (ef3fcfbd-2593-48ec-8da2-f4afa7f5955a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f9731bef-f0fa-46d3-865e-07e07986354f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f9731bef-f0fa-46d3-865e-07e07986354f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8500e435-2d9d-402d-86c4-4295d00c3d5b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (8500e435-2d9d-402d-86c4-4295d00c3d5b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c179b8e7-d54c-4862-9465-34b80f49daf4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c179b8e7-d54c-4862-9465-34b80f49daf4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (28859215-dbad-4528-bad3-0cb4b24921ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (28859215-dbad-4528-bad3-0cb4b24921ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (68b258f3-79db-42e7-ba6c-8afaabea458a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (68b258f3-79db-42e7-ba6c-8afaabea458a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3c6ded01-198c-4c3e-b222-98d098ee62d0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3c6ded01-198c-4c3e-b222-98d098ee62d0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e7d0b843-e140-4331-8037-c5eda99b9c44): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e7d0b843-e140-4331-8037-c5eda99b9c44): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3cda059c-618c-405b-8771-b6028d141c35): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3cda059c-618c-405b-8771-b6028d141c35): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e7c7c0b-244b-4f01-a8e9-0ce0363d28a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9e7c7c0b-244b-4f01-a8e9-0ce0363d28a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a7bbaba-6582-41b3-8156-08292159c142): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (6a7bbaba-6582-41b3-8156-08292159c142): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d9d07616-69a7-4ff3-8281-4e3d0940291e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d9d07616-69a7-4ff3-8281-4e3d0940291e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6ace2101-1cf4-4b66-8d37-ed2d84778853): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6ace2101-1cf4-4b66-8d37-ed2d84778853): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (07832972-53d3-4db2-aa07-a339b707f552): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (07832972-53d3-4db2-aa07-a339b707f552): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b038d6d-92ad-4697-ad36-e236af69d9c8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0b038d6d-92ad-4697-ad36-e236af69d9c8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (07f340af-40c5-41e1-ac8d-e1a5dada591d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (07f340af-40c5-41e1-ac8d-e1a5dada591d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55f72e5b-a078-4b4d-881d-e527efb20941): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (55f72e5b-a078-4b4d-881d-e527efb20941): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbf86c91-4507-4e0b-a60a-46c94eb1b0f9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bbf86c91-4507-4e0b-a60a-46c94eb1b0f9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d52ccad2-325d-4e32-b569-4beb03ddd018): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (d52ccad2-325d-4e32-b569-4beb03ddd018): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f729bea3-626d-4b15-bb34-5580465a2f47): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (f729bea3-626d-4b15-bb34-5580465a2f47): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ba6663c-e6bd-4d3a-b838-7197c865f8f9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (2ba6663c-e6bd-4d3a-b838-7197c865f8f9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9800614-656d-4c15-8b74-cdb32ca448c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (b9800614-656d-4c15-8b74-cdb32ca448c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e037b47e-8383-4792-bfef-216a21c75033): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (e037b47e-8383-4792-bfef-216a21c75033): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a3c3991c-86a5-4523-9a36-41c96367894b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a3c3991c-86a5-4523-9a36-41c96367894b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40e6b5f6-ad4d-4449-b7c8-3786671d3ae5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (40e6b5f6-ad4d-4449-b7c8-3786671d3ae5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (adf80a09-8a41-4fd3-901f-e454b65c358d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (adf80a09-8a41-4fd3-901f-e454b65c358d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2a9b75a2-1df4-42f9-8fc5-2e6758108bd1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (2a9b75a2-1df4-42f9-8fc5-2e6758108bd1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6d4e1c4e-d065-4337-a842-35ce1be400e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (6d4e1c4e-d065-4337-a842-35ce1be400e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9a2b9a1-bbc7-4ddc-8176-b199bc063e82): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (b9a2b9a1-bbc7-4ddc-8176-b199bc063e82): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (1702e37f-6c4e-4cdb-9c01-507b448521c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1702e37f-6c4e-4cdb-9c01-507b448521c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ecbcf55-4ed2-4361-8f93-98b864bad3ec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0ecbcf55-4ed2-4361-8f93-98b864bad3ec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db3798f2-1ad7-4634-998b-17044db2357d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (db3798f2-1ad7-4634-998b-17044db2357d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (04f1852a-187e-4230-80d7-aa6c06a0150d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (04f1852a-187e-4230-80d7-aa6c06a0150d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f1d15f9-8c4f-4fac-9ad3-d9373163bbe9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0f1d15f9-8c4f-4fac-9ad3-d9373163bbe9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (85eba214-2a23-4039-a422-6409384421b1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (85eba214-2a23-4039-a422-6409384421b1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a15d7333-6730-4b97-967d-922920e02d7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (a15d7333-6730-4b97-967d-922920e02d7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e301d6f4-41e8-45d0-9c83-52ccb36a98ac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (e301d6f4-41e8-45d0-9c83-52ccb36a98ac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d13eef5a-01a2-45a2-9e77-867252e6b5d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d13eef5a-01a2-45a2-9e77-867252e6b5d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7446a55-da0b-4a09-9418-251b5ca7d1e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (f7446a55-da0b-4a09-9418-251b5ca7d1e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (acdf0113-6894-4c1b-8bea-9f9efc3d97b3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (acdf0113-6894-4c1b-8bea-9f9efc3d97b3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (65d82d56-f151-402f-996e-fcf34d9ba12b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (65d82d56-f151-402f-996e-fcf34d9ba12b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bfd338e9-056e-403d-a9fb-7a64327b8018): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bfd338e9-056e-403d-a9fb-7a64327b8018): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36e6714e-3772-4451-8909-b24574336a9f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (36e6714e-3772-4451-8909-b24574336a9f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (154edee5-586a-457d-a2d4-8bf79a9a2e07): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (154edee5-586a-457d-a2d4-8bf79a9a2e07): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e28af720-a6bf-4269-a659-6b5253382ae5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e28af720-a6bf-4269-a659-6b5253382ae5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (300bdafc-fae3-46ad-945d-9d71654763e2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (300bdafc-fae3-46ad-945d-9d71654763e2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0209c575-2653-4a2d-ba95-914ee13c6c6f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (0209c575-2653-4a2d-ba95-914ee13c6c6f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a664e70-4113-46fd-91ff-571fef81c8c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6a664e70-4113-46fd-91ff-571fef81c8c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (59863be4-bf9e-4c61-ad09-42d5d3058668): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (59863be4-bf9e-4c61-ad09-42d5d3058668): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (953df15c-7d53-41c7-a28d-a53a1c4c1ff8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (953df15c-7d53-41c7-a28d-a53a1c4c1ff8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0621efb-2e50-4e2a-95c6-d78f7a237ecb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c0621efb-2e50-4e2a-95c6-d78f7a237ecb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19c019f9-abad-4488-a418-d563a1ce13a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (19c019f9-abad-4488-a418-d563a1ce13a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea9903f3-5e2d-4df6-a058-6d13b57b1ca3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (ea9903f3-5e2d-4df6-a058-6d13b57b1ca3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7b9f478-7086-4a94-bb40-0fdffe3e14f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f7b9f478-7086-4a94-bb40-0fdffe3e14f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (355ef1b9-538a-4cbb-9fc2-2e21772fff99): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (355ef1b9-538a-4cbb-9fc2-2e21772fff99): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d40fa58f-1c1e-4d55-a07b-542d14df2920): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d40fa58f-1c1e-4d55-a07b-542d14df2920): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc5ce8f8-9a1b-4636-b059-778bb67f360c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (fc5ce8f8-9a1b-4636-b059-778bb67f360c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bde7cabe-31ff-44fb-bf01-422ecf2e63d5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bde7cabe-31ff-44fb-bf01-422ecf2e63d5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4ee19f9-7954-4001-a79d-6a73d96cbd0b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (d4ee19f9-7954-4001-a79d-6a73d96cbd0b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f74883c-9575-4393-8f5b-19bc1382a9ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2f74883c-9575-4393-8f5b-19bc1382a9ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cca664dc-4d12-4ca6-9e95-49fc4c3e95ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (cca664dc-4d12-4ca6-9e95-49fc4c3e95ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (df40d231-6099-4d6b-a337-6322a654ef23): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (df40d231-6099-4d6b-a337-6322a654ef23): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1ca607e4-9051-48e4-b0d8-2c95f128a2a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (1ca607e4-9051-48e4-b0d8-2c95f128a2a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f790757e-a4bf-4eb1-aa6b-9883c97d7458): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f790757e-a4bf-4eb1-aa6b-9883c97d7458): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (82c105ef-8964-4648-a274-0c2776d31319): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (82c105ef-8964-4648-a274-0c2776d31319): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f8b76644-9be1-4130-9b44-f779b6fee0e1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (f8b76644-9be1-4130-9b44-f779b6fee0e1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f863d46-f585-4297-ba4d-cb8bffab2e24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (9f863d46-f585-4297-ba4d-cb8bffab2e24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f4622fe9-1e79-4290-be68-48f1dadfa93e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f4622fe9-1e79-4290-be68-48f1dadfa93e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3fa45f67-0108-449e-b87c-2df355e01049): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (3fa45f67-0108-449e-b87c-2df355e01049): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8ac85bf5-3fa3-4c83-808e-ea00c7396421): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (8ac85bf5-3fa3-4c83-808e-ea00c7396421): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dac40445-8036-4211-95e1-c668bb9d724b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (dac40445-8036-4211-95e1-c668bb9d724b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5b38a88b-5ad7-415c-be68-8b7c50b4fdc9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (5b38a88b-5ad7-415c-be68-8b7c50b4fdc9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7475f99b-920a-49ca-b060-80505eb10ee0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (7475f99b-920a-49ca-b060-80505eb10ee0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (921bb35a-d75e-4eb4-8276-5dcab4404e80): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (921bb35a-d75e-4eb4-8276-5dcab4404e80): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad041bf6-2520-419d-ba49-c3efc1b5999c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (ad041bf6-2520-419d-ba49-c3efc1b5999c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a8e4e509-8757-4abd-b233-6db9df04a2dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (a8e4e509-8757-4abd-b233-6db9df04a2dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0d019814-17f9-455a-aee9-6dd9928dd592): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (0d019814-17f9-455a-aee9-6dd9928dd592): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (38ec6b9b-843f-4313-bad1-6ab2d905776a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (38ec6b9b-843f-4313-bad1-6ab2d905776a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24876ef3-981d-4637-b81e-b8bd01421b7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (24876ef3-981d-4637-b81e-b8bd01421b7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0f7ad47-39d1-435b-a05d-39dd13c9bdbf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (a0f7ad47-39d1-435b-a05d-39dd13c9bdbf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ffa97913-a8bb-4fe2-82be-103dc0e730fd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (ffa97913-a8bb-4fe2-82be-103dc0e730fd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc26fa80-3868-4918-90dd-5c8a6bde4fe7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fc26fa80-3868-4918-90dd-5c8a6bde4fe7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2dc22b04-8805-4d0c-9a08-593c4701d5cc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (2dc22b04-8805-4d0c-9a08-593c4701d5cc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5329d601-51d8-473e-8b2e-a05af89bb208): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (5329d601-51d8-473e-8b2e-a05af89bb208): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1ad7339-88cc-4c67-82b0-3915051486a3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b1ad7339-88cc-4c67-82b0-3915051486a3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4e0a709a-fd79-44df-a2f3-242a91fb3b50): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4e0a709a-fd79-44df-a2f3-242a91fb3b50): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (34689227-5cf9-4db0-b523-f81b3a03ee7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (34689227-5cf9-4db0-b523-f81b3a03ee7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7e43685b-2819-4b47-8e0c-9bc0ea16798d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (7e43685b-2819-4b47-8e0c-9bc0ea16798d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0426d874-b565-4259-b5d7-74b910432ae1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (0426d874-b565-4259-b5d7-74b910432ae1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db034ab9-3717-4f25-96a1-6a96012718f9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (db034ab9-3717-4f25-96a1-6a96012718f9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cae5cc81-6344-4a61-9a14-4b07c568a912): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (cae5cc81-6344-4a61-9a14-4b07c568a912): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5b610f31-794e-44ff-a8fa-e67efbcfa949): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (5b610f31-794e-44ff-a8fa-e67efbcfa949): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (85f1c6b0-7252-4304-9ca2-de25e82be2e2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (85f1c6b0-7252-4304-9ca2-de25e82be2e2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (89e960cc-7586-49f3-9c94-41b485875dc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (89e960cc-7586-49f3-9c94-41b485875dc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (81a8b731-5141-4fba-a354-f79a055c70df): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (81a8b731-5141-4fba-a354-f79a055c70df): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f0e5cce-64e5-46f1-bb54-d22f1f5945ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (4f0e5cce-64e5-46f1-bb54-d22f1f5945ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0bac3ec6-d83d-4676-aa16-398379219db7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0bac3ec6-d83d-4676-aa16-398379219db7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6c938a48-1666-4414-a9bd-3233ed1b6bf0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (6c938a48-1666-4414-a9bd-3233ed1b6bf0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c8382187-15f9-4720-ae09-6e51c3236bee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c8382187-15f9-4720-ae09-6e51c3236bee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f21c7d7-bbf8-4fc9-b5ab-53d5c7fac189): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (1f21c7d7-bbf8-4fc9-b5ab-53d5c7fac189): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b4b03003-e32b-47a2-add9-579566a90e86): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b4b03003-e32b-47a2-add9-579566a90e86): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (51bccfc2-0447-4104-bdba-f64817f1ffc1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (51bccfc2-0447-4104-bdba-f64817f1ffc1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4888f029-b78b-40fd-bd38-ffb8a393508a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4888f029-b78b-40fd-bd38-ffb8a393508a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (51c43cc5-c6cb-43ae-ae80-b8704e352b59): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (51c43cc5-c6cb-43ae-ae80-b8704e352b59): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (efec7896-c27c-4af6-99da-e91293aac2d5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (efec7896-c27c-4af6-99da-e91293aac2d5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (764b7e9e-d31d-4e97-8204-7b6037d8dba8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (764b7e9e-d31d-4e97-8204-7b6037d8dba8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5d2e8e5c-a9c0-4c62-a6af-fa391f56cad5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5d2e8e5c-a9c0-4c62-a6af-fa391f56cad5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ba08360e-84ab-4b3f-bce3-739c18b29ead): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (ba08360e-84ab-4b3f-bce3-739c18b29ead): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9ed68f0c-93d4-47d5-b2d8-f1e9045f8778): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9ed68f0c-93d4-47d5-b2d8-f1e9045f8778): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb642c9a-fbd9-413d-9122-9d7325cfd6ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cb642c9a-fbd9-413d-9122-9d7325cfd6ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c95e2ed1-639d-4690-87d4-6b6e858990d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c95e2ed1-639d-4690-87d4-6b6e858990d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4fffac92-e234-4d58-951b-416a12e8cd2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4fffac92-e234-4d58-951b-416a12e8cd2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3eebfe8f-eec4-405f-8ec2-97b944fa3c09): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3eebfe8f-eec4-405f-8ec2-97b944fa3c09): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f9b1c065-940b-48a2-9190-a43c96f5d944): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (f9b1c065-940b-48a2-9190-a43c96f5d944): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bdfb8094-decb-47cb-a8eb-ccf09de95481): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bdfb8094-decb-47cb-a8eb-ccf09de95481): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86bfa9c9-90c2-47fa-9081-93c393321832): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (86bfa9c9-90c2-47fa-9081-93c393321832): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6ea90a1f-6b48-4bdb-a8f9-9a887b9d218a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (6ea90a1f-6b48-4bdb-a8f9-9a887b9d218a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7d417685-3f04-4c5b-a216-cfcfb6f5f365): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (7d417685-3f04-4c5b-a216-cfcfb6f5f365): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3a241dc8-4202-42ab-b964-1ce562798bee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (3a241dc8-4202-42ab-b964-1ce562798bee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (887be20a-8295-4702-a7e8-8f0bdab9d036): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (887be20a-8295-4702-a7e8-8f0bdab9d036): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (304c7bae-4fbf-42ba-af78-235c336c8a78): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (304c7bae-4fbf-42ba-af78-235c336c8a78): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e390cb9c-3a9e-4b62-a114-1fdc620073ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (e390cb9c-3a9e-4b62-a114-1fdc620073ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (69ea6ce6-9833-43b0-96d8-e8d6527f67c8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (69ea6ce6-9833-43b0-96d8-e8d6527f67c8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (82bee029-2406-4dc5-b567-7a10e667578b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (82bee029-2406-4dc5-b567-7a10e667578b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb9c8883-400c-4a13-9c24-2e6bdfc0199e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (cb9c8883-400c-4a13-9c24-2e6bdfc0199e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b39ecdd-9dbf-41f4-857e-2f863bfa9b34): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (7b39ecdd-9dbf-41f4-857e-2f863bfa9b34): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): DELETE FROM `insurance_providers`","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `insurance_providers` (`id`,`name`,`created_on`,`updatedAt`) VALUES (NULL,$1,$2,$3);","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (dd5f575c-f9af-425d-b3ba-3a0d7528b3b1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dd5f575c-f9af-425d-b3ba-3a0d7528b3b1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c652a482-eb1e-4eae-88fc-e75be5f5dabc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c652a482-eb1e-4eae-88fc-e75be5f5dabc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86ad217e-5d60-47ab-ac4f-efd4845bfadd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (86ad217e-5d60-47ab-ac4f-efd4845bfadd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (84530774-da72-4fb7-a3cd-b1b7172e2fd1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (84530774-da72-4fb7-a3cd-b1b7172e2fd1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a9d867e8-34ba-4ffe-9533-b7b4b43d2f8d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a9d867e8-34ba-4ffe-9533-b7b4b43d2f8d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ecc0742-e48b-4040-b73d-558e039745d3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (0ecc0742-e48b-4040-b73d-558e039745d3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a3faae9a-5f60-4243-822b-e9944642ff33): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (a3faae9a-5f60-4243-822b-e9944642ff33): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2c6ae029-10ce-46c0-8461-9ea6e8b73ec9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (2c6ae029-10ce-46c0-8461-9ea6e8b73ec9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5d0d18a9-5ab0-454f-9b4a-4c578bc4c3e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5d0d18a9-5ab0-454f-9b4a-4c578bc4c3e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d649904b-f9cf-4cac-a3f1-e093ae5d09ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (d649904b-f9cf-4cac-a3f1-e093ae5d09ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (88c933c9-3df9-4ac0-8521-1bd2ec89f3e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (88c933c9-3df9-4ac0-8521-1bd2ec89f3e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b77b94c-bcb0-49ac-ad56-c45c29f051aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (1b77b94c-bcb0-49ac-ad56-c45c29f051aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f87a16ed-374f-4ed4-9ef8-0f8211b059fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f87a16ed-374f-4ed4-9ef8-0f8211b059fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (13fe5e6c-47ed-45fe-b735-39e8482653e5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (13fe5e6c-47ed-45fe-b735-39e8482653e5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fe489f97-5580-4b6d-9f15-d0d83cd7237e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fe489f97-5580-4b6d-9f15-d0d83cd7237e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (13a052b0-a96c-411c-b67c-afeb3aed217e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (13a052b0-a96c-411c-b67c-afeb3aed217e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d904c726-1d63-4571-8b1f-954b5cc70f10): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d904c726-1d63-4571-8b1f-954b5cc70f10): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10d772e9-f443-4c91-a1dd-9d5a96f6dddc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (10d772e9-f443-4c91-a1dd-9d5a96f6dddc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e5dd570a-b666-4dd9-9792-caf7171965fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e5dd570a-b666-4dd9-9792-caf7171965fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3c33da8a-dbc9-40ce-b0a5-e89f3228c5de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (3c33da8a-dbc9-40ce-b0a5-e89f3228c5de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (49c76fb2-fa4b-4eb5-ae3b-12c49f3cb86b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (49c76fb2-fa4b-4eb5-ae3b-12c49f3cb86b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2243b4e-e100-4732-89ad-8adf93b56374): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b2243b4e-e100-4732-89ad-8adf93b56374): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (72a78ec7-9800-4471-80c9-aae0ed330667): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (72a78ec7-9800-4471-80c9-aae0ed330667): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (301e7b93-a40f-4cb1-9a5e-1ebee1c8a0cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (301e7b93-a40f-4cb1-9a5e-1ebee1c8a0cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3b7abced-366f-4bd2-ba9a-43396da4677e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3b7abced-366f-4bd2-ba9a-43396da4677e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10138c1b-6d58-451b-acb7-33f360016460): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (10138c1b-6d58-451b-acb7-33f360016460): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e007baf5-7cc7-49ef-98be-40da05715276): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e007baf5-7cc7-49ef-98be-40da05715276): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5e199724-eacd-47f5-acb9-41f545c38f5a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (5e199724-eacd-47f5-acb9-41f545c38f5a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (157fae14-9f90-4511-ba6a-590c8e0a8c20): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (157fae14-9f90-4511-ba6a-590c8e0a8c20): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c9ee2349-0ddb-467d-b7da-b859fc88e76c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (c9ee2349-0ddb-467d-b7da-b859fc88e76c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (76c0bd74-b812-4572-b1da-cd2955b39a1e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (76c0bd74-b812-4572-b1da-cd2955b39a1e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91ba5c68-6f78-4abe-825f-8ab04a9bb5ab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (91ba5c68-6f78-4abe-825f-8ab04a9bb5ab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (207166bf-b11d-416a-9f36-1240fde8e72b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (207166bf-b11d-416a-9f36-1240fde8e72b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (973f4c8a-e210-4c12-b5bd-49398d249919): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (973f4c8a-e210-4c12-b5bd-49398d249919): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3af8fba1-e3ee-46ad-82d0-7f1d3686a269): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3af8fba1-e3ee-46ad-82d0-7f1d3686a269): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97212f85-cd05-4171-abd8-f2acf24bd956): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (97212f85-cd05-4171-abd8-f2acf24bd956): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58b4f8d1-4f15-4833-933a-23b680cf3877): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (58b4f8d1-4f15-4833-933a-23b680cf3877): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5cec848d-2995-4f98-8449-e415223317ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (5cec848d-2995-4f98-8449-e415223317ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (72f0bcd7-16d5-41e3-87b1-ad47f931fa7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (72f0bcd7-16d5-41e3-87b1-ad47f931fa7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (29fc10bf-c258-430a-a940-dd95d0ef0771): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (29fc10bf-c258-430a-a940-dd95d0ef0771): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d2f5c783-8b9e-4e20-98ed-0aa2eb7c8da1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (d2f5c783-8b9e-4e20-98ed-0aa2eb7c8da1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (17923831-f9ec-4124-86ea-7a8c6e64c0fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (17923831-f9ec-4124-86ea-7a8c6e64c0fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a408fcc3-0e2d-4628-b180-799c0e616805): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (a408fcc3-0e2d-4628-b180-799c0e616805): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dd8301c8-9142-4f85-b434-008e09ba871c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (dd8301c8-9142-4f85-b434-008e09ba871c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0e087fa-df40-4376-b2ea-1c177d57890d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (a0e087fa-df40-4376-b2ea-1c177d57890d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f998203-e08f-4c4e-8906-3bfac9d8a6d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (3f998203-e08f-4c4e-8906-3bfac9d8a6d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (948e11dd-fd2e-4a95-b3e9-4645b26e4b28): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (948e11dd-fd2e-4a95-b3e9-4645b26e4b28): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d600cbfb-042e-41ae-aee8-ec16869f9685): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (d600cbfb-042e-41ae-aee8-ec16869f9685): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d8e69be-2a6f-4880-b670-6a29973fc93d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (3d8e69be-2a6f-4880-b670-6a29973fc93d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8312a1ea-7451-494d-8d35-b5df3fdf497a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (8312a1ea-7451-494d-8d35-b5df3fdf497a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6087f5b8-0954-49bd-b728-8a3eb36d8b0b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (6087f5b8-0954-49bd-b728-8a3eb36d8b0b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f9e36385-6fd5-44c8-a40e-0c04de7d27bf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (f9e36385-6fd5-44c8-a40e-0c04de7d27bf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3a89430-9466-455f-854b-22ed5f898de8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f3a89430-9466-455f-854b-22ed5f898de8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc3d7188-2a4f-4853-bd4e-1c76d7b9099f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (fc3d7188-2a4f-4853-bd4e-1c76d7b9099f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36d8f606-5eea-449b-84eb-64b8ea73cd18): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (36d8f606-5eea-449b-84eb-64b8ea73cd18): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0d83875b-7d1d-4c45-875c-f369b22e73e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0d83875b-7d1d-4c45-875c-f369b22e73e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fe9b1672-fed8-4138-8e03-50c2a8e793da): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fe9b1672-fed8-4138-8e03-50c2a8e793da): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2c939049-f652-46ee-b776-19bc32a96383): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2c939049-f652-46ee-b776-19bc32a96383): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ec1f4bf-7cc1-4b27-83e1-6a3a088b4bc7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (2ec1f4bf-7cc1-4b27-83e1-6a3a088b4bc7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3287099c-c246-400e-a895-9970b9ba30d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (3287099c-c246-400e-a895-9970b9ba30d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (848b8eb1-9df9-4575-bd74-1624adffe207): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (848b8eb1-9df9-4575-bd74-1624adffe207): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9bb28b46-4207-4a12-9b6d-b6e0374f141b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (9bb28b46-4207-4a12-9b6d-b6e0374f141b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6ac5d8da-6b03-4272-abac-b22a0e551287): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (6ac5d8da-6b03-4272-abac-b22a0e551287): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (835c727b-3401-4951-8f81-96fce0a451ee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (835c727b-3401-4951-8f81-96fce0a451ee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f2fc646-c7d5-4d3d-a3bf-0e1fa5a63fd8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (4f2fc646-c7d5-4d3d-a3bf-0e1fa5a63fd8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f8c7c539-2d24-4d53-ae17-dd860890cf2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f8c7c539-2d24-4d53-ae17-dd860890cf2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5cf53b0-e11f-413e-81c7-4c10e1b615b3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (d5cf53b0-e11f-413e-81c7-4c10e1b615b3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5aa373e6-562a-4960-8a32-8e721e8bc8ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5aa373e6-562a-4960-8a32-8e721e8bc8ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6008d054-8eaf-4763-a9f7-6d935a5dee6c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (6008d054-8eaf-4763-a9f7-6d935a5dee6c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7647f8db-ee3c-480c-bff6-3811acc136bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7647f8db-ee3c-480c-bff6-3811acc136bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c47d9227-d296-43c0-8df1-4fcc19d78cde): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (c47d9227-d296-43c0-8df1-4fcc19d78cde): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (09927492-9c07-4e5f-b5d5-b8a1ad9d3982): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (09927492-9c07-4e5f-b5d5-b8a1ad9d3982): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aed08f72-5f1d-4376-b970-33915762ac1a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (aed08f72-5f1d-4376-b970-33915762ac1a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a656a6e0-eea6-428a-a524-b52f587704cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a656a6e0-eea6-428a-a524-b52f587704cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7f28ded-48d3-4415-9ad0-9f4f34306e3e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d7f28ded-48d3-4415-9ad0-9f4f34306e3e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dff1f165-85ed-4dfd-b35e-7a72fb565a56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (dff1f165-85ed-4dfd-b35e-7a72fb565a56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a88312fe-2d27-449f-9a9f-3b5719a3a684): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a88312fe-2d27-449f-9a9f-3b5719a3a684): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db641822-75a2-4055-8a9e-2d8957724c57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (db641822-75a2-4055-8a9e-2d8957724c57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (abdc1333-0297-4ce9-9642-0bb4969be4ce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (abdc1333-0297-4ce9-9642-0bb4969be4ce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6eb6428f-30ed-4254-a68b-cc1c1688dd8e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6eb6428f-30ed-4254-a68b-cc1c1688dd8e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fe9bdd94-df3b-46a7-aa7a-cd8fc804670b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fe9bdd94-df3b-46a7-aa7a-cd8fc804670b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da75b925-45c8-471f-b678-549554df653e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (da75b925-45c8-471f-b678-549554df653e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (068ad2b0-fbc9-417a-b2da-f9e2db925304): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (068ad2b0-fbc9-417a-b2da-f9e2db925304): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (778d80a6-5288-4d87-832c-bc27be9f9666): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (778d80a6-5288-4d87-832c-bc27be9f9666): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c61d003f-1f54-481a-92bc-e030bcb1ef28): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (c61d003f-1f54-481a-92bc-e030bcb1ef28): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (684f2fd7-ade3-43c3-8593-828f1ebf1d8c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (684f2fd7-ade3-43c3-8593-828f1ebf1d8c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f2989f9-193b-4277-bb6e-9ec5c8fd965a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (4f2989f9-193b-4277-bb6e-9ec5c8fd965a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f43fee5-b00a-4e74-8502-e5d3f9d8021b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (1f43fee5-b00a-4e74-8502-e5d3f9d8021b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2eea53a3-10a1-422d-8eea-63dd13d51b1b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (2eea53a3-10a1-422d-8eea-63dd13d51b1b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bef9ac67-3031-404e-8f44-4e5e8625236c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (bef9ac67-3031-404e-8f44-4e5e8625236c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0db11cfb-20cf-4885-97e5-d9ebffd26f00): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (0db11cfb-20cf-4885-97e5-d9ebffd26f00): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (16fffee5-bee0-456d-94a6-cd1578b02476): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (16fffee5-bee0-456d-94a6-cd1578b02476): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b8b1b10e-32e8-42ca-9b6c-eebec46e89bb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (b8b1b10e-32e8-42ca-9b6c-eebec46e89bb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c05ad6b3-4156-44ac-a688-fe878cb0fb32): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (c05ad6b3-4156-44ac-a688-fe878cb0fb32): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (be37fa6a-4449-4d1b-8c33-3a30bde054ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (be37fa6a-4449-4d1b-8c33-3a30bde054ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e07f6d64-8ff8-4cc9-85f7-aa7ea91ca679): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (e07f6d64-8ff8-4cc9-85f7-aa7ea91ca679): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (83b93e1a-10e4-4677-a47f-0ee8b88387dd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (83b93e1a-10e4-4677-a47f-0ee8b88387dd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `insurance_providers` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `drug_info` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `reminders` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (1d2fb009-4b90-4810-8d3b-3493c823c9fd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1d2fb009-4b90-4810-8d3b-3493c823c9fd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da05f206-e91a-4f2c-afdd-e26f2de97501): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (da05f206-e91a-4f2c-afdd-e26f2de97501): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (62c3b87f-d77a-41d9-9ef7-7c075acbc701): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (62c3b87f-d77a-41d9-9ef7-7c075acbc701): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10576295-4cd2-4283-864f-799810161d21): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (10576295-4cd2-4283-864f-799810161d21): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (61a63fba-b571-4906-87e7-6b1b21290db6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (61a63fba-b571-4906-87e7-6b1b21290db6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (73cf1299-3c42-4f59-b8ac-a2d8ff7c9bee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (73cf1299-3c42-4f59-b8ac-a2d8ff7c9bee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f3a6c93-8f31-4828-af2e-3efb822e04e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (1f3a6c93-8f31-4828-af2e-3efb822e04e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ad04f56-c7b7-4cbb-9377-79b5a065b331): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (2ad04f56-c7b7-4cbb-9377-79b5a065b331): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fbb99d87-14de-4fcf-9821-07013d0d5cbf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fbb99d87-14de-4fcf-9821-07013d0d5cbf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e82002e0-0ebf-4f45-9d35-c703f1c09f35): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (e82002e0-0ebf-4f45-9d35-c703f1c09f35): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e8e3db25-a38d-4c87-af8a-c5d1af976ddd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e8e3db25-a38d-4c87-af8a-c5d1af976ddd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3b4c6eb1-7e93-42f7-98d0-0f394440b141): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (3b4c6eb1-7e93-42f7-98d0-0f394440b141): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (443f0b97-b90f-408f-a460-7564e80782a4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (443f0b97-b90f-408f-a460-7564e80782a4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4bba1813-8f97-4ed9-8c12-e8b2cbf368fd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (4bba1813-8f97-4ed9-8c12-e8b2cbf368fd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8626828d-7612-47cc-a6b8-3aa1613f8ffb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8626828d-7612-47cc-a6b8-3aa1613f8ffb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (071e08be-ba90-4536-846b-c140f5cd22a2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (071e08be-ba90-4536-846b-c140f5cd22a2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e948795a-5c6a-400c-af28-71abd894ffe8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e948795a-5c6a-400c-af28-71abd894ffe8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b8af3016-0441-4211-aeae-a7eeb73b75cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (b8af3016-0441-4211-aeae-a7eeb73b75cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7903af8c-2f70-4f4a-ba80-411ad6fb5138): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7903af8c-2f70-4f4a-ba80-411ad6fb5138): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4efc45aa-5ed2-467e-874d-40e821816a51): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (4efc45aa-5ed2-467e-874d-40e821816a51): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a06176a-4dba-4dc4-a1d5-68a8800d4928): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6a06176a-4dba-4dc4-a1d5-68a8800d4928): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (445279a4-b94e-4869-a42b-d255c6b08705): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (445279a4-b94e-4869-a42b-d255c6b08705): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11137446-7a07-4bb7-84e3-cdb80483849e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (11137446-7a07-4bb7-84e3-cdb80483849e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a809aa2c-f60f-4187-a1e9-dcd679ddc92c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (a809aa2c-f60f-4187-a1e9-dcd679ddc92c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ae697b86-cdef-436c-be15-7e8555e490ab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ae697b86-cdef-436c-be15-7e8555e490ab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (56320c1f-671b-42c4-8463-8900c2af69ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (56320c1f-671b-42c4-8463-8900c2af69ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7cbb3429-713a-4137-a922-b0f097885a89): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7cbb3429-713a-4137-a922-b0f097885a89): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (51a0f2fc-35ee-440b-9bd0-6bff069e45a3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (51a0f2fc-35ee-440b-9bd0-6bff069e45a3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (098181cf-3798-4569-a1b5-ed1d00377df2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (098181cf-3798-4569-a1b5-ed1d00377df2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c5690097-b23f-45ac-a42e-c110a37d1611): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (c5690097-b23f-45ac-a42e-c110a37d1611): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca078f54-bc40-4b5e-8450-a57c748fb554): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ca078f54-bc40-4b5e-8450-a57c748fb554): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (389a142b-ea0c-43fb-aa37-6a12e7460aa5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (389a142b-ea0c-43fb-aa37-6a12e7460aa5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ecd8834c-e965-4f1f-a84b-851e28d3e5cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ecd8834c-e965-4f1f-a84b-851e28d3e5cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb7087d1-e4d1-4e1a-a859-d805ace65f56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (eb7087d1-e4d1-4e1a-a859-d805ace65f56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10f44057-de0b-4571-ab8e-15355185a340): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (10f44057-de0b-4571-ab8e-15355185a340): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a4346e42-f79c-4afa-b618-4f65454a92dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (a4346e42-f79c-4afa-b618-4f65454a92dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6a13f7d-b3a0-419f-9489-7753d02587f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a6a13f7d-b3a0-419f-9489-7753d02587f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bba93c00-59e5-4583-ac0f-bba95d35dc04): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (bba93c00-59e5-4583-ac0f-bba95d35dc04): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (034d665f-6b1b-4015-a364-f2ecfea5813e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (034d665f-6b1b-4015-a364-f2ecfea5813e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c7d9b995-38e8-4035-b6a1-28820c096857): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (c7d9b995-38e8-4035-b6a1-28820c096857): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (02bf5ed0-7fd0-40cc-9d33-f7a847cebbf0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (02bf5ed0-7fd0-40cc-9d33-f7a847cebbf0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f2ddc048-d66a-4bea-bba2-f28cb2eec210): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (f2ddc048-d66a-4bea-bba2-f28cb2eec210): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5169c0f5-5ed1-4f0d-8808-9c4f7727ee68): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (5169c0f5-5ed1-4f0d-8808-9c4f7727ee68): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f5893011-c154-41b0-a908-f88d504d5fef): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f5893011-c154-41b0-a908-f88d504d5fef): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (185bb7f2-62d8-4e4a-a060-b135b6026e93): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (185bb7f2-62d8-4e4a-a060-b135b6026e93): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1398f988-18b7-4559-ad7c-0442c18ce019): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (1398f988-18b7-4559-ad7c-0442c18ce019): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9039915e-607f-4246-95fc-efc7c391bbbd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (9039915e-607f-4246-95fc-efc7c391bbbd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b7a042c7-15c0-493a-a095-3c3927ca0760): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (b7a042c7-15c0-493a-a095-3c3927ca0760): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da39a6eb-0d1e-464f-8f6d-e1592c7b1e39): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (da39a6eb-0d1e-464f-8f6d-e1592c7b1e39): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7cbd4a27-5072-4325-b9c2-7c2c5e91a2d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (7cbd4a27-5072-4325-b9c2-7c2c5e91a2d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (24819a22-0717-4a5e-8b15-706820d64371): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (24819a22-0717-4a5e-8b15-706820d64371): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (daf1c88c-1608-42cd-b2f4-1415b75cfe23): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (daf1c88c-1608-42cd-b2f4-1415b75cfe23): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4be38bae-95f0-4ba1-a33c-f2620be8116b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4be38bae-95f0-4ba1-a33c-f2620be8116b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef87bff3-1680-4007-8c66-49324612b055): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (ef87bff3-1680-4007-8c66-49324612b055): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a7d09f7-e750-4240-96fa-4d7fdd7d2818): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (6a7d09f7-e750-4240-96fa-4d7fdd7d2818): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8b910928-d355-43f3-8dc3-105096a109dd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8b910928-d355-43f3-8dc3-105096a109dd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bc281eef-105c-4f00-9ddb-b4b7334acd2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bc281eef-105c-4f00-9ddb-b4b7334acd2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (93728991-06a7-4432-b642-9bffedc4fa43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (93728991-06a7-4432-b642-9bffedc4fa43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (50cb97f4-9d4b-4a92-9b88-58cf1a4735f1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (50cb97f4-9d4b-4a92-9b88-58cf1a4735f1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (142b1813-d541-461b-8263-5aec2ceaa244): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (142b1813-d541-461b-8263-5aec2ceaa244): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (de3d92ae-a998-4cdb-9c01-8cd234868215): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (de3d92ae-a998-4cdb-9c01-8cd234868215): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4d81e3bf-8aeb-4be9-b5a1-4338d1cd4e39): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (4d81e3bf-8aeb-4be9-b5a1-4338d1cd4e39): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6c1850f8-afbd-409c-85ad-35d826766de8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (6c1850f8-afbd-409c-85ad-35d826766de8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (18926312-6a2d-477a-9bc2-28a93718c901): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (18926312-6a2d-477a-9bc2-28a93718c901): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6cd2fe71-264c-4da2-b805-0eef1b84bbed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (6cd2fe71-264c-4da2-b805-0eef1b84bbed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c08671d8-45c4-4b4c-93b4-af8cb0e5f386): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c08671d8-45c4-4b4c-93b4-af8cb0e5f386): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5bd0601-10be-4a9e-915b-230f2d50b9f1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (d5bd0601-10be-4a9e-915b-230f2d50b9f1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (46690b68-7130-4553-8b72-2554d3165252): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (46690b68-7130-4553-8b72-2554d3165252): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b282f0cd-7316-4a5c-883a-5caf79b78af7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (b282f0cd-7316-4a5c-883a-5caf79b78af7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (45fd7881-8837-4c8f-865a-805b987ae550): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (45fd7881-8837-4c8f-865a-805b987ae550): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eee74eb3-c999-46db-8bec-dd1593aab0b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (eee74eb3-c999-46db-8bec-dd1593aab0b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed5ecd97-153c-4b91-8e97-dbf45f65e8ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ed5ecd97-153c-4b91-8e97-dbf45f65e8ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (27f0719d-cfee-473c-86d6-cf7ef0ad9749): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (27f0719d-cfee-473c-86d6-cf7ef0ad9749): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e987d6e7-a55b-401a-963b-b3c20cc2baf2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e987d6e7-a55b-401a-963b-b3c20cc2baf2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (20f28fff-7fdf-417a-a321-06b86e5b1252): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (20f28fff-7fdf-417a-a321-06b86e5b1252): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5cc0c411-adb1-4873-ad1b-cbe1070ceada): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5cc0c411-adb1-4873-ad1b-cbe1070ceada): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e98af355-2b9a-4f4b-9d6f-22775da173f8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e98af355-2b9a-4f4b-9d6f-22775da173f8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3320f323-fb36-4c98-ad79-00cb6384cdcb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3320f323-fb36-4c98-ad79-00cb6384cdcb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0713aac-738f-4ea3-9249-bcc3f48d715c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (a0713aac-738f-4ea3-9249-bcc3f48d715c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (45791a99-c21f-4f90-9484-380c2fcf5ead): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (45791a99-c21f-4f90-9484-380c2fcf5ead): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea56b648-06d8-4c28-9f2a-13e27f965294): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ea56b648-06d8-4c28-9f2a-13e27f965294): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3921365b-fe8f-45f9-9090-7bb6d9dfcdaf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3921365b-fe8f-45f9-9090-7bb6d9dfcdaf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff6bd85a-5e30-4d65-a04a-7cf38204bc6d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ff6bd85a-5e30-4d65-a04a-7cf38204bc6d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (66eacc85-0d3f-41ec-a41b-ed4fab8ccfad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (66eacc85-0d3f-41ec-a41b-ed4fab8ccfad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f2210a1-1d34-476b-a04c-51363afacc73): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (9f2210a1-1d34-476b-a04c-51363afacc73): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (021ee3a1-c2a1-403e-a79c-8f7609f70021): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (021ee3a1-c2a1-403e-a79c-8f7609f70021): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12c4dc6d-def4-45c3-bd68-f01a776daa57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (12c4dc6d-def4-45c3-bd68-f01a776daa57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c735827d-0f4e-4e49-9d3a-65489ab65156): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (c735827d-0f4e-4e49-9d3a-65489ab65156): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (22454458-a861-422a-80c1-375b7f588ecb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (22454458-a861-422a-80c1-375b7f588ecb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7038f8d4-780b-4d6c-8dd6-396c8c381938): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (7038f8d4-780b-4d6c-8dd6-396c8c381938): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d53347b-12ec-4f85-9dee-53868ea173f5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (3d53347b-12ec-4f85-9dee-53868ea173f5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e400371-7842-4a99-88cd-2c4b114cc686): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1e400371-7842-4a99-88cd-2c4b114cc686): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa954315-69cb-4ba9-a24c-87d7048a92e6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (fa954315-69cb-4ba9-a24c-87d7048a92e6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (509f75b1-e8ff-4919-9df4-f5e038aa3fc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (509f75b1-e8ff-4919-9df4-f5e038aa3fc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (64b9c135-b6d5-4088-beeb-69457c984f92): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (64b9c135-b6d5-4088-beeb-69457c984f92): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fcc5d914-ebf4-4b4f-a135-01f2620ba154): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (fcc5d914-ebf4-4b4f-a135-01f2620ba154): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6356802-041d-433d-8534-d84c8602e4cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (a6356802-041d-433d-8534-d84c8602e4cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `insurance_providers` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `reminders` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (d124e0b4-9d64-4e55-860a-4f3e7dc849ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d124e0b4-9d64-4e55-860a-4f3e7dc849ad): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d124e0b4-9d64-4e55-860a-4f3e7dc849ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f825b3b-ad2b-4c47-a154-c0c63d00ee38): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1f825b3b-ad2b-4c47-a154-c0c63d00ee38): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1f825b3b-ad2b-4c47-a154-c0c63d00ee38): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6b926789-1b4c-4061-a6fd-012d695efcd7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6b926789-1b4c-4061-a6fd-012d695efcd7): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6b926789-1b4c-4061-a6fd-012d695efcd7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e91125a0-34df-4a0c-9ee2-22f79e7936ce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e91125a0-34df-4a0c-9ee2-22f79e7936ce): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (e91125a0-34df-4a0c-9ee2-22f79e7936ce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (642b6554-30ef-477f-ac00-85e2bcd0bf60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (642b6554-30ef-477f-ac00-85e2bcd0bf60): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (642b6554-30ef-477f-ac00-85e2bcd0bf60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10b872a3-e1ec-43de-bd0d-0be6a6027944): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (10b872a3-e1ec-43de-bd0d-0be6a6027944): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (10b872a3-e1ec-43de-bd0d-0be6a6027944): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e316979-26bb-497a-8d53-17730113a561): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3e316979-26bb-497a-8d53-17730113a561): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (3e316979-26bb-497a-8d53-17730113a561): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (552f72ba-1535-4598-b56c-a46dd01ef993): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (552f72ba-1535-4598-b56c-a46dd01ef993): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (552f72ba-1535-4598-b56c-a46dd01ef993): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (501fa7fd-d355-4470-b4fe-d41b7e2cc5bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (501fa7fd-d355-4470-b4fe-d41b7e2cc5bc): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (501fa7fd-d355-4470-b4fe-d41b7e2cc5bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1ded98ce-c7a9-4d1b-a7a0-84919131f6eb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1ded98ce-c7a9-4d1b-a7a0-84919131f6eb): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (1ded98ce-c7a9-4d1b-a7a0-84919131f6eb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (08337b78-71f9-42fc-a6e9-d16568aa3096): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (08337b78-71f9-42fc-a6e9-d16568aa3096): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (08337b78-71f9-42fc-a6e9-d16568aa3096): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (376a1e51-5eeb-4446-b1a1-b171e7954bc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (376a1e51-5eeb-4446-b1a1-b171e7954bc0): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (376a1e51-5eeb-4446-b1a1-b171e7954bc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8878b4c7-5e3b-4358-b7f7-6ea857fce7bf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8878b4c7-5e3b-4358-b7f7-6ea857fce7bf): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8878b4c7-5e3b-4358-b7f7-6ea857fce7bf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1ff06706-03f8-4e88-a248-9fb0788dfd21): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1ff06706-03f8-4e88-a248-9fb0788dfd21): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (1ff06706-03f8-4e88-a248-9fb0788dfd21): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db90c2de-7809-4d27-8647-5e8656a751e0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (db90c2de-7809-4d27-8647-5e8656a751e0): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (db90c2de-7809-4d27-8647-5e8656a751e0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d67ead6-f207-4db3-98cc-87929d1e0be6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3d67ead6-f207-4db3-98cc-87929d1e0be6): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (3d67ead6-f207-4db3-98cc-87929d1e0be6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f64b5a15-58bd-44ab-a900-26370cde17ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f64b5a15-58bd-44ab-a900-26370cde17ba): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f64b5a15-58bd-44ab-a900-26370cde17ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (310eea3b-4841-4b26-8f30-659081217a3f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (310eea3b-4841-4b26-8f30-659081217a3f): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (310eea3b-4841-4b26-8f30-659081217a3f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f729dfc0-16f6-4a42-9e5a-636fcda62364): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f729dfc0-16f6-4a42-9e5a-636fcda62364): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f729dfc0-16f6-4a42-9e5a-636fcda62364): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (abb35020-074b-4534-a9c1-b8af3c3ed4c6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (abb35020-074b-4534-a9c1-b8af3c3ed4c6): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (abb35020-074b-4534-a9c1-b8af3c3ed4c6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91457c4f-9a99-47bf-a1d2-5340869cfa2c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (91457c4f-9a99-47bf-a1d2-5340869cfa2c): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (91457c4f-9a99-47bf-a1d2-5340869cfa2c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4b700b93-c03a-4aaf-a669-af103f9d1ae0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4b700b93-c03a-4aaf-a669-af103f9d1ae0): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4b700b93-c03a-4aaf-a669-af103f9d1ae0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a1672141-30d5-41d2-a2d1-ffc7d81bed2a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a1672141-30d5-41d2-a2d1-ffc7d81bed2a): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a1672141-30d5-41d2-a2d1-ffc7d81bed2a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ced9e884-0c42-4720-8ebd-901f6e9a30df): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ced9e884-0c42-4720-8ebd-901f6e9a30df): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (ced9e884-0c42-4720-8ebd-901f6e9a30df): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd9d97b7-dedd-4d33-9526-29c49af99987): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cd9d97b7-dedd-4d33-9526-29c49af99987): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cd9d97b7-dedd-4d33-9526-29c49af99987): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (88e33eed-1cfb-4713-9990-a71fcc2d7c42): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (88e33eed-1cfb-4713-9990-a71fcc2d7c42): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (88e33eed-1cfb-4713-9990-a71fcc2d7c42): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (be5f2d6c-21c8-43ac-88b3-764dbf97bf56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (be5f2d6c-21c8-43ac-88b3-764dbf97bf56): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (be5f2d6c-21c8-43ac-88b3-764dbf97bf56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (85b13787-3b89-44c8-bc06-8d193bf7c18b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (85b13787-3b89-44c8-bc06-8d193bf7c18b): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (85b13787-3b89-44c8-bc06-8d193bf7c18b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd522d25-44a3-411d-9c00-5f888a1ef5c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fd522d25-44a3-411d-9c00-5f888a1ef5c5): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fd522d25-44a3-411d-9c00-5f888a1ef5c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (95a0ff58-7df3-490d-8441-8872abbe8bee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (95a0ff58-7df3-490d-8441-8872abbe8bee): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (95a0ff58-7df3-490d-8441-8872abbe8bee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (871383f8-1356-42de-963a-1cf155961908): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (871383f8-1356-42de-963a-1cf155961908): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (871383f8-1356-42de-963a-1cf155961908): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d3f7a367-79a5-46c5-b5bc-39c2b9820481): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d3f7a367-79a5-46c5-b5bc-39c2b9820481): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (d3f7a367-79a5-46c5-b5bc-39c2b9820481): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f9a3bcc-c012-42d2-9edc-04c2c7ecd9bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3f9a3bcc-c012-42d2-9edc-04c2c7ecd9bd): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3f9a3bcc-c012-42d2-9edc-04c2c7ecd9bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb388dbe-ad7e-4a6c-a8d8-6515f373f0ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eb388dbe-ad7e-4a6c-a8d8-6515f373f0ae): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (eb388dbe-ad7e-4a6c-a8d8-6515f373f0ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11a3386b-5c7e-4cae-bff3-a0a1a4d4bf05): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (11a3386b-5c7e-4cae-bff3-a0a1a4d4bf05): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (11a3386b-5c7e-4cae-bff3-a0a1a4d4bf05): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0538050c-c1d7-4332-970e-31f2314c5466): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0538050c-c1d7-4332-970e-31f2314c5466): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (0538050c-c1d7-4332-970e-31f2314c5466): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aed328a3-5f53-4f73-a73f-08bc24c378ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (aed328a3-5f53-4f73-a73f-08bc24c378ad): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (aed328a3-5f53-4f73-a73f-08bc24c378ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc63cbcb-ecd5-4086-b04b-e8522093b65f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dc63cbcb-ecd5-4086-b04b-e8522093b65f): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (dc63cbcb-ecd5-4086-b04b-e8522093b65f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa145c03-7159-4926-b971-ad36e4b3cc3d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (aa145c03-7159-4926-b971-ad36e4b3cc3d): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (aa145c03-7159-4926-b971-ad36e4b3cc3d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ecc054d3-1238-469c-b406-3d715852a45c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ecc054d3-1238-469c-b406-3d715852a45c): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (ecc054d3-1238-469c-b406-3d715852a45c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (381f6603-4697-4fee-81a4-5e8ce05d5fc6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (381f6603-4697-4fee-81a4-5e8ce05d5fc6): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (381f6603-4697-4fee-81a4-5e8ce05d5fc6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (baa242c7-9594-4475-827c-b7bfd6e72c70): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (baa242c7-9594-4475-827c-b7bfd6e72c70): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (baa242c7-9594-4475-827c-b7bfd6e72c70): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d78a4927-c196-4162-992e-919c5705de8a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d78a4927-c196-4162-992e-919c5705de8a): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (d78a4927-c196-4162-992e-919c5705de8a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6496c84f-8fa8-47f9-a626-a357ca523395): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6496c84f-8fa8-47f9-a626-a357ca523395): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (6496c84f-8fa8-47f9-a626-a357ca523395): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (228ff74b-f91d-4e49-ad83-dd0c93e1aab9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (228ff74b-f91d-4e49-ad83-dd0c93e1aab9): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (228ff74b-f91d-4e49-ad83-dd0c93e1aab9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (effc22d2-a44d-40e5-9c61-3cf0a7063e2c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (effc22d2-a44d-40e5-9c61-3cf0a7063e2c): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (effc22d2-a44d-40e5-9c61-3cf0a7063e2c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b15a14ce-9452-4bf7-860e-ccf0913e4b32): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b15a14ce-9452-4bf7-860e-ccf0913e4b32): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (b15a14ce-9452-4bf7-860e-ccf0913e4b32): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b895f202-c9dd-4af9-a65f-12bb83b4068e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b895f202-c9dd-4af9-a65f-12bb83b4068e): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (b895f202-c9dd-4af9-a65f-12bb83b4068e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e0c76f0c-7840-45db-83aa-724226a417a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e0c76f0c-7840-45db-83aa-724226a417a1): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (e0c76f0c-7840-45db-83aa-724226a417a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6c6f2341-41ab-49a1-88ab-1accf8e39659): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6c6f2341-41ab-49a1-88ab-1accf8e39659): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (6c6f2341-41ab-49a1-88ab-1accf8e39659): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd76deb7-dd44-4712-98d2-3eae9547b1af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fd76deb7-dd44-4712-98d2-3eae9547b1af): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (fd76deb7-dd44-4712-98d2-3eae9547b1af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (440038f1-0cf0-4bdf-b257-a5f6a08da681): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (440038f1-0cf0-4bdf-b257-a5f6a08da681): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (440038f1-0cf0-4bdf-b257-a5f6a08da681): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4152897-5573-49c3-b846-ebfe69f0bdbb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e4152897-5573-49c3-b846-ebfe69f0bdbb): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e4152897-5573-49c3-b846-ebfe69f0bdbb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1328dc88-3034-4a1e-96b3-e159e1e71a9b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1328dc88-3034-4a1e-96b3-e159e1e71a9b): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (1328dc88-3034-4a1e-96b3-e159e1e71a9b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d853e57b-9433-42c6-a288-7320f4378c01): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d853e57b-9433-42c6-a288-7320f4378c01): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (d853e57b-9433-42c6-a288-7320f4378c01): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36fbfd2e-f92b-41b3-a86a-90c47b85ea3d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (36fbfd2e-f92b-41b3-a86a-90c47b85ea3d): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (36fbfd2e-f92b-41b3-a86a-90c47b85ea3d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd82cf6d-b07e-441e-88c6-6f9a3fc8e720): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cd82cf6d-b07e-441e-88c6-6f9a3fc8e720): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cd82cf6d-b07e-441e-88c6-6f9a3fc8e720): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3826de9e-1ce1-4426-b6b7-a500ea7b4618): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3826de9e-1ce1-4426-b6b7-a500ea7b4618): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3826de9e-1ce1-4426-b6b7-a500ea7b4618): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc8b974e-c21b-4a09-a45d-9abdfc297cbd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fc8b974e-c21b-4a09-a45d-9abdfc297cbd): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (fc8b974e-c21b-4a09-a45d-9abdfc297cbd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4d4ba59a-c851-47ec-a535-329f3bcdaba5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4d4ba59a-c851-47ec-a535-329f3bcdaba5): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (4d4ba59a-c851-47ec-a535-329f3bcdaba5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (158f23e4-f904-4a7f-9f57-a336e1e56d4d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (158f23e4-f904-4a7f-9f57-a336e1e56d4d): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (158f23e4-f904-4a7f-9f57-a336e1e56d4d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a048256e-1263-49a7-9e74-0ceeebb9e197): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a048256e-1263-49a7-9e74-0ceeebb9e197): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (a048256e-1263-49a7-9e74-0ceeebb9e197): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9fa82e23-2d0d-4fe6-b55d-4708ef8b14d3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9fa82e23-2d0d-4fe6-b55d-4708ef8b14d3): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (9fa82e23-2d0d-4fe6-b55d-4708ef8b14d3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (69afe92a-5e23-4b79-b90a-1761ce5bf00f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (69afe92a-5e23-4b79-b90a-1761ce5bf00f): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (69afe92a-5e23-4b79-b90a-1761ce5bf00f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b1d42f7-b5bc-4d17-909c-ede93dac1897): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7b1d42f7-b5bc-4d17-909c-ede93dac1897): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (7b1d42f7-b5bc-4d17-909c-ede93dac1897): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4cda34f7-a936-4ae9-ad90-45688400b55f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4cda34f7-a936-4ae9-ad90-45688400b55f): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4cda34f7-a936-4ae9-ad90-45688400b55f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15ed3d48-5d83-4ad7-a237-efe4e8003829): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (15ed3d48-5d83-4ad7-a237-efe4e8003829): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (15ed3d48-5d83-4ad7-a237-efe4e8003829): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (988087f4-a05e-45df-8e4e-9040b410f323): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (988087f4-a05e-45df-8e4e-9040b410f323): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (988087f4-a05e-45df-8e4e-9040b410f323): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (418b3c77-5152-4730-b211-8f62ba39ed07): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (418b3c77-5152-4730-b211-8f62ba39ed07): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (418b3c77-5152-4730-b211-8f62ba39ed07): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da85ce0b-5fa2-4a85-8b25-5fc08fba130f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (da85ce0b-5fa2-4a85-8b25-5fc08fba130f): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (da85ce0b-5fa2-4a85-8b25-5fc08fba130f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8a93ca84-b615-47e5-977b-7528b3c072df): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8a93ca84-b615-47e5-977b-7528b3c072df): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (8a93ca84-b615-47e5-977b-7528b3c072df): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4ce7c33c-d397-402f-94ea-23ad69287982): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4ce7c33c-d397-402f-94ea-23ad69287982): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4ce7c33c-d397-402f-94ea-23ad69287982): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (74e0a15f-5f28-41bf-8e24-5c64566621f1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (74e0a15f-5f28-41bf-8e24-5c64566621f1): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (74e0a15f-5f28-41bf-8e24-5c64566621f1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f4853523-db7f-4bb1-977d-26475fa5e111): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f4853523-db7f-4bb1-977d-26475fa5e111): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f4853523-db7f-4bb1-977d-26475fa5e111): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbe8a83d-6c1e-4ec3-9de4-94580aa4d01b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bbe8a83d-6c1e-4ec3-9de4-94580aa4d01b): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bbe8a83d-6c1e-4ec3-9de4-94580aa4d01b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7111331e-873f-4bc2-86c8-7e95ca10d011): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7111331e-873f-4bc2-86c8-7e95ca10d011): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7111331e-873f-4bc2-86c8-7e95ca10d011): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c877baf6-833c-432c-9f16-d4c4674fee52): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c877baf6-833c-432c-9f16-d4c4674fee52): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c877baf6-833c-432c-9f16-d4c4674fee52): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7599516a-6665-46bb-b07d-1f29b067801b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7599516a-6665-46bb-b07d-1f29b067801b): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7599516a-6665-46bb-b07d-1f29b067801b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cf0254e8-ff82-46cf-b4e4-049482eb1e24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cf0254e8-ff82-46cf-b4e4-049482eb1e24): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (cf0254e8-ff82-46cf-b4e4-049482eb1e24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c28cc5c6-9c9a-4639-86a2-07f641a804fa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c28cc5c6-9c9a-4639-86a2-07f641a804fa): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c28cc5c6-9c9a-4639-86a2-07f641a804fa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (01204be0-58a3-412c-8b07-37dd264f067b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (01204be0-58a3-412c-8b07-37dd264f067b): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (01204be0-58a3-412c-8b07-37dd264f067b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc7be8eb-2f7e-4d6c-8233-594c162bae68): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cc7be8eb-2f7e-4d6c-8233-594c162bae68): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cc7be8eb-2f7e-4d6c-8233-594c162bae68): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e60b64a-8ebc-4c74-8d66-a89304beaf95): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2e60b64a-8ebc-4c74-8d66-a89304beaf95): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2e60b64a-8ebc-4c74-8d66-a89304beaf95): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (31c3ef8f-2099-4d74-b03b-616d0f67dcaf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (31c3ef8f-2099-4d74-b03b-616d0f67dcaf): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (31c3ef8f-2099-4d74-b03b-616d0f67dcaf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (071cc064-8bff-4325-9149-1d99ae6cf688): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (071cc064-8bff-4325-9149-1d99ae6cf688): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (071cc064-8bff-4325-9149-1d99ae6cf688): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d3d011d1-6c6f-495f-a4b6-f87c81f9cfce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d3d011d1-6c6f-495f-a4b6-f87c81f9cfce): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d3d011d1-6c6f-495f-a4b6-f87c81f9cfce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (16ab370c-c505-4591-97cb-1e368c32bdb9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (16ab370c-c505-4591-97cb-1e368c32bdb9): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (16ab370c-c505-4591-97cb-1e368c32bdb9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6cc51aca-d667-4d0f-b297-7f724b1d5a85): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6cc51aca-d667-4d0f-b297-7f724b1d5a85): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (6cc51aca-d667-4d0f-b297-7f724b1d5a85): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7e28e238-0de3-4672-9af9-0b965dd31e56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7e28e238-0de3-4672-9af9-0b965dd31e56): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (7e28e238-0de3-4672-9af9-0b965dd31e56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3b096432-ba07-41d2-adda-6805937b5250): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3b096432-ba07-41d2-adda-6805937b5250): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (3b096432-ba07-41d2-adda-6805937b5250): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac22b0a7-59c3-4bf7-abf1-83c65f2ec192): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ac22b0a7-59c3-4bf7-abf1-83c65f2ec192): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (ac22b0a7-59c3-4bf7-abf1-83c65f2ec192): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f8e46f1c-2005-445d-a4be-d89a8c6d4395): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f8e46f1c-2005-445d-a4be-d89a8c6d4395): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f8e46f1c-2005-445d-a4be-d89a8c6d4395): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3590f881-bb29-4077-a308-9c93bdd27bf8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3590f881-bb29-4077-a308-9c93bdd27bf8): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (3590f881-bb29-4077-a308-9c93bdd27bf8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aa21e25e-a56f-4d7b-a47b-db11c0ce55d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (aa21e25e-a56f-4d7b-a47b-db11c0ce55d7): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (aa21e25e-a56f-4d7b-a47b-db11c0ce55d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (855c0772-6c99-4c90-9531-044fc1e71117): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (855c0772-6c99-4c90-9531-044fc1e71117): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (855c0772-6c99-4c90-9531-044fc1e71117): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb98642b-dd20-49cc-92a3-bcbbd027b7b3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cb98642b-dd20-49cc-92a3-bcbbd027b7b3): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (cb98642b-dd20-49cc-92a3-bcbbd027b7b3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9ce356e4-5e81-46f5-a952-0fa687ca9f7e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9ce356e4-5e81-46f5-a952-0fa687ca9f7e): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (9ce356e4-5e81-46f5-a952-0fa687ca9f7e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`reminders`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`reminders`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`reminders`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `reminders` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `created_on` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`daily_records`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (9c5e2264-25b9-4887-9101-0fc508125f1b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9c5e2264-25b9-4887-9101-0fc508125f1b): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9c5e2264-25b9-4887-9101-0fc508125f1b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c95f4096-0121-42d0-b6c9-0ca0b5fa534d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c95f4096-0121-42d0-b6c9-0ca0b5fa534d): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c95f4096-0121-42d0-b6c9-0ca0b5fa534d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11f135bb-cb5c-49b1-bf87-d376a06c51cb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (11f135bb-cb5c-49b1-bf87-d376a06c51cb): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (11f135bb-cb5c-49b1-bf87-d376a06c51cb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (491ba9a4-3672-4ed6-84e4-94b61226cfdf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (491ba9a4-3672-4ed6-84e4-94b61226cfdf): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (491ba9a4-3672-4ed6-84e4-94b61226cfdf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (09fe1b98-206d-4a26-bf3f-bdf374c0ca4b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (09fe1b98-206d-4a26-bf3f-bdf374c0ca4b): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (09fe1b98-206d-4a26-bf3f-bdf374c0ca4b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (53b8ea2d-afa8-49bf-b76e-3493721e3fe4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (53b8ea2d-afa8-49bf-b76e-3493721e3fe4): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (53b8ea2d-afa8-49bf-b76e-3493721e3fe4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (62618fbb-a236-48a8-b6b2-43e2aedf865f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (62618fbb-a236-48a8-b6b2-43e2aedf865f): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (62618fbb-a236-48a8-b6b2-43e2aedf865f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3c7077d-d211-4d1d-a815-6641da527e5f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b3c7077d-d211-4d1d-a815-6641da527e5f): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (b3c7077d-d211-4d1d-a815-6641da527e5f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c04d58d7-9709-4c49-9fcb-f78f915668c9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c04d58d7-9709-4c49-9fcb-f78f915668c9): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c04d58d7-9709-4c49-9fcb-f78f915668c9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (858dbc1a-d5ea-44b8-9ce7-ee3df0919f18): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (858dbc1a-d5ea-44b8-9ce7-ee3df0919f18): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (858dbc1a-d5ea-44b8-9ce7-ee3df0919f18): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10418ae6-8c30-4468-9e44-aaf0145ca49c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (10418ae6-8c30-4468-9e44-aaf0145ca49c): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (10418ae6-8c30-4468-9e44-aaf0145ca49c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c4b02a75-7e98-492b-a26a-eac877882a2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c4b02a75-7e98-492b-a26a-eac877882a2f): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (c4b02a75-7e98-492b-a26a-eac877882a2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f1da69e8-8ed9-4502-9be7-dc2bae6c0a73): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f1da69e8-8ed9-4502-9be7-dc2bae6c0a73): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f1da69e8-8ed9-4502-9be7-dc2bae6c0a73): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6cd6089a-883a-4737-ae31-cc65dacfceaa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6cd6089a-883a-4737-ae31-cc65dacfceaa): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (6cd6089a-883a-4737-ae31-cc65dacfceaa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2f76804-32f1-4db2-96af-47a561ed72c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b2f76804-32f1-4db2-96af-47a561ed72c7): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b2f76804-32f1-4db2-96af-47a561ed72c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (365e2045-3ea4-44be-ab1d-a827bfa85790): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (365e2045-3ea4-44be-ab1d-a827bfa85790): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (365e2045-3ea4-44be-ab1d-a827bfa85790): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b088e5b9-8ca4-4c99-827a-77ebe363055d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b088e5b9-8ca4-4c99-827a-77ebe363055d): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b088e5b9-8ca4-4c99-827a-77ebe363055d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1fdbece7-d774-44f7-8b97-111a1c419fb8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1fdbece7-d774-44f7-8b97-111a1c419fb8): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (1fdbece7-d774-44f7-8b97-111a1c419fb8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (536cd2a7-63da-47ea-a15b-5d220548b240): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (536cd2a7-63da-47ea-a15b-5d220548b240): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (536cd2a7-63da-47ea-a15b-5d220548b240): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e239cb81-2b63-4ee8-a936-18b3e80582d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e239cb81-2b63-4ee8-a936-18b3e80582d6): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e239cb81-2b63-4ee8-a936-18b3e80582d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bc1e5252-f5a3-4764-9c7c-2b96217c1d75): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bc1e5252-f5a3-4764-9c7c-2b96217c1d75): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bc1e5252-f5a3-4764-9c7c-2b96217c1d75): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4088c02e-7515-4b23-a428-a533b9f23909): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4088c02e-7515-4b23-a428-a533b9f23909): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4088c02e-7515-4b23-a428-a533b9f23909): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a40e2ee1-6333-4fe1-addf-fabdfb49420b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a40e2ee1-6333-4fe1-addf-fabdfb49420b): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a40e2ee1-6333-4fe1-addf-fabdfb49420b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (976c69b3-0d4a-451b-bc28-ff253baafb18): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (976c69b3-0d4a-451b-bc28-ff253baafb18): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (976c69b3-0d4a-451b-bc28-ff253baafb18): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a23f5111-d600-45df-9096-212f9bd51c2b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a23f5111-d600-45df-9096-212f9bd51c2b): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a23f5111-d600-45df-9096-212f9bd51c2b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8b2fd90b-5943-4c74-846d-bc64215e4358): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8b2fd90b-5943-4c74-846d-bc64215e4358): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (8b2fd90b-5943-4c74-846d-bc64215e4358): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cf41179d-169e-4c97-90ec-fef2331e03ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cf41179d-169e-4c97-90ec-fef2331e03ea): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cf41179d-169e-4c97-90ec-fef2331e03ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (736a34be-c221-4919-8797-3a75cdaaef0e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (736a34be-c221-4919-8797-3a75cdaaef0e): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (736a34be-c221-4919-8797-3a75cdaaef0e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eec50716-a3ea-4dae-b8b1-438aa8bd7a2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eec50716-a3ea-4dae-b8b1-438aa8bd7a2f): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eec50716-a3ea-4dae-b8b1-438aa8bd7a2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f6289510-4b30-499f-8108-ededeb5a6f84): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f6289510-4b30-499f-8108-ededeb5a6f84): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (f6289510-4b30-499f-8108-ededeb5a6f84): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a5352ea3-766c-4b0a-bed1-bb5b31915433): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a5352ea3-766c-4b0a-bed1-bb5b31915433): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a5352ea3-766c-4b0a-bed1-bb5b31915433): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19142658-47b7-47e5-88d2-ff082bec4e16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (19142658-47b7-47e5-88d2-ff082bec4e16): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (19142658-47b7-47e5-88d2-ff082bec4e16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b6b89b5-b0d5-4046-a7bc-05b4f7c041de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7b6b89b5-b0d5-4046-a7bc-05b4f7c041de): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7b6b89b5-b0d5-4046-a7bc-05b4f7c041de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d1ab904b-25b2-4e26-8440-ef6b6fe97360): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d1ab904b-25b2-4e26-8440-ef6b6fe97360): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (d1ab904b-25b2-4e26-8440-ef6b6fe97360): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c71c0017-abd5-4814-8795-e7e0bddd63e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c71c0017-abd5-4814-8795-e7e0bddd63e7): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c71c0017-abd5-4814-8795-e7e0bddd63e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f85f8623-db27-44d0-a965-c51c4d36bd60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f85f8623-db27-44d0-a965-c51c4d36bd60): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (f85f8623-db27-44d0-a965-c51c4d36bd60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eaecc591-3ac3-47d9-9362-26b3dd3a86a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eaecc591-3ac3-47d9-9362-26b3dd3a86a7): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (eaecc591-3ac3-47d9-9362-26b3dd3a86a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39091a7a-08ff-4304-b33e-8425e3737f0b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (39091a7a-08ff-4304-b33e-8425e3737f0b): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (39091a7a-08ff-4304-b33e-8425e3737f0b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (00b60f27-afc9-4362-b44c-a174fd8a3c3d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (00b60f27-afc9-4362-b44c-a174fd8a3c3d): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (00b60f27-afc9-4362-b44c-a174fd8a3c3d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2fdc795b-c1cb-4733-977c-8839d520fa7d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2fdc795b-c1cb-4733-977c-8839d520fa7d): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (2fdc795b-c1cb-4733-977c-8839d520fa7d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71b74b4b-4637-489f-aaa4-e28d0bcc09bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (71b74b4b-4637-489f-aaa4-e28d0bcc09bd): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (71b74b4b-4637-489f-aaa4-e28d0bcc09bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (90e5a530-1f57-4216-a70a-2abe972cd346): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (90e5a530-1f57-4216-a70a-2abe972cd346): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (90e5a530-1f57-4216-a70a-2abe972cd346): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (343ca908-0818-452f-8281-bcfd468c7f08): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (343ca908-0818-452f-8281-bcfd468c7f08): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (343ca908-0818-452f-8281-bcfd468c7f08): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d80b5b3d-aacb-4150-b91a-dee403b405af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d80b5b3d-aacb-4150-b91a-dee403b405af): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (d80b5b3d-aacb-4150-b91a-dee403b405af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f0e5e6e1-9e5a-4b5e-a9fe-7de83c1d6808): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f0e5e6e1-9e5a-4b5e-a9fe-7de83c1d6808): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f0e5e6e1-9e5a-4b5e-a9fe-7de83c1d6808): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a6ce959-b450-422c-8c65-fb8998a54c7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1a6ce959-b450-422c-8c65-fb8998a54c7b): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (1a6ce959-b450-422c-8c65-fb8998a54c7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f112b1c9-06a2-456a-96f2-96df024ca4e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f112b1c9-06a2-456a-96f2-96df024ca4e3): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f112b1c9-06a2-456a-96f2-96df024ca4e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a7fcba2-d80c-4759-8818-0f2a7a758fc4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6a7fcba2-d80c-4759-8818-0f2a7a758fc4): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (6a7fcba2-d80c-4759-8818-0f2a7a758fc4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (daeed48f-4734-4d0d-8bfc-72ac523f7a7b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (daeed48f-4734-4d0d-8bfc-72ac523f7a7b): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (daeed48f-4734-4d0d-8bfc-72ac523f7a7b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70b7b3ef-9279-4088-8c1c-c40a8a189bac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (70b7b3ef-9279-4088-8c1c-c40a8a189bac): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (70b7b3ef-9279-4088-8c1c-c40a8a189bac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4039d947-21de-43ae-a832-99fc0e134052): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4039d947-21de-43ae-a832-99fc0e134052): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (4039d947-21de-43ae-a832-99fc0e134052): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (96af8081-efca-46a6-9512-3ef1d1c93c69): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (96af8081-efca-46a6-9512-3ef1d1c93c69): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (96af8081-efca-46a6-9512-3ef1d1c93c69): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9201b639-bb4e-4a61-9bae-3fc733f9a57d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9201b639-bb4e-4a61-9bae-3fc733f9a57d): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9201b639-bb4e-4a61-9bae-3fc733f9a57d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (74c45d33-a234-4e4f-8595-87fcf1842144): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (74c45d33-a234-4e4f-8595-87fcf1842144): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (74c45d33-a234-4e4f-8595-87fcf1842144): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e01c55e-f8cd-4109-bd26-9ff88eb1fa36): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1e01c55e-f8cd-4109-bd26-9ff88eb1fa36): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (1e01c55e-f8cd-4109-bd26-9ff88eb1fa36): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6973e8d6-3e58-4cc0-8516-be837ad12c91): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6973e8d6-3e58-4cc0-8516-be837ad12c91): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6973e8d6-3e58-4cc0-8516-be837ad12c91): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (de157a29-26ad-43e5-b6d1-d767d1b53b76): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (de157a29-26ad-43e5-b6d1-d767d1b53b76): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (de157a29-26ad-43e5-b6d1-d767d1b53b76): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (acf0ed52-c051-4816-9022-bb99d938fdab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (acf0ed52-c051-4816-9022-bb99d938fdab): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (acf0ed52-c051-4816-9022-bb99d938fdab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (529f1607-2e35-4111-b19a-b5e2f32b0b06): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (529f1607-2e35-4111-b19a-b5e2f32b0b06): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (529f1607-2e35-4111-b19a-b5e2f32b0b06): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (398c7c7a-4096-4c64-976b-a30e14a32662): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (398c7c7a-4096-4c64-976b-a30e14a32662): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (398c7c7a-4096-4c64-976b-a30e14a32662): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36863554-0f4d-4997-b4a2-f2fc04746585): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (36863554-0f4d-4997-b4a2-f2fc04746585): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (36863554-0f4d-4997-b4a2-f2fc04746585): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (75f003bb-6f2a-4d1b-9e97-8c2ab45d5d0a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (75f003bb-6f2a-4d1b-9e97-8c2ab45d5d0a): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (75f003bb-6f2a-4d1b-9e97-8c2ab45d5d0a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c59c3bc7-4caa-4252-a732-a1089e7176dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c59c3bc7-4caa-4252-a732-a1089e7176dc): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (c59c3bc7-4caa-4252-a732-a1089e7176dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bd780ce7-a5a5-4de9-ad59-36b3664a2969): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bd780ce7-a5a5-4de9-ad59-36b3664a2969): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bd780ce7-a5a5-4de9-ad59-36b3664a2969): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb06b449-dd79-4ca2-b723-d7e1ca0d5ea9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eb06b449-dd79-4ca2-b723-d7e1ca0d5ea9): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (eb06b449-dd79-4ca2-b723-d7e1ca0d5ea9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (09249772-fe62-4b6e-8a11-74a52bcfe9d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (09249772-fe62-4b6e-8a11-74a52bcfe9d8): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (09249772-fe62-4b6e-8a11-74a52bcfe9d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1294e08-4c1b-4e5e-983f-1e2c91098b4e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b1294e08-4c1b-4e5e-983f-1e2c91098b4e): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (b1294e08-4c1b-4e5e-983f-1e2c91098b4e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (672a69a5-72cd-4ad8-9056-25e31f1b9c3d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (672a69a5-72cd-4ad8-9056-25e31f1b9c3d): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (672a69a5-72cd-4ad8-9056-25e31f1b9c3d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0c899444-87fd-47af-a799-b1e0dbafcd5d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0c899444-87fd-47af-a799-b1e0dbafcd5d): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (0c899444-87fd-47af-a799-b1e0dbafcd5d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cbdde875-96fd-4ba4-84b7-a7b930c7eeb7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cbdde875-96fd-4ba4-84b7-a7b930c7eeb7): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cbdde875-96fd-4ba4-84b7-a7b930c7eeb7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (93fb0a36-2162-4663-8741-c2591f70eec9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (93fb0a36-2162-4663-8741-c2591f70eec9): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (93fb0a36-2162-4663-8741-c2591f70eec9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7e21d98-0765-41d1-927f-045a505fabc8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f7e21d98-0765-41d1-927f-045a505fabc8): PRAGMA foreign_keys=off;\n\n    CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );\n\n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f7e21d98-0765-41d1-927f-045a505fabc8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1930a7c9-3c10-43ff-94c6-2e07ae996d59): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1930a7c9-3c10-43ff-94c6-2e07ae996d59): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (1930a7c9-3c10-43ff-94c6-2e07ae996d59): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (deb9e2be-e386-45da-a2bc-9d0ad0585865): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (deb9e2be-e386-45da-a2bc-9d0ad0585865): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (deb9e2be-e386-45da-a2bc-9d0ad0585865): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d8e0c3fc-5dd8-4329-955f-56a61428f613): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d8e0c3fc-5dd8-4329-955f-56a61428f613): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d8e0c3fc-5dd8-4329-955f-56a61428f613): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f94c394-789d-48b6-ad7f-f349bc9dbf09): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3f94c394-789d-48b6-ad7f-f349bc9dbf09): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3f94c394-789d-48b6-ad7f-f349bc9dbf09): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cec5495a-fa28-4686-9e14-0b841e588455): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cec5495a-fa28-4686-9e14-0b841e588455): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (cec5495a-fa28-4686-9e14-0b841e588455): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (06902eac-212a-483a-94f3-84faaf5c4c16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (06902eac-212a-483a-94f3-84faaf5c4c16): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (06902eac-212a-483a-94f3-84faaf5c4c16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e29f6d59-1364-4096-abe0-41d9e8d8d2ce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e29f6d59-1364-4096-abe0-41d9e8d8d2ce): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (e29f6d59-1364-4096-abe0-41d9e8d8d2ce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (20eec316-3a88-4482-a4ba-c8956e109d00): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (20eec316-3a88-4482-a4ba-c8956e109d00): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (20eec316-3a88-4482-a4ba-c8956e109d00): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8ec6f6c5-0d7e-402e-8e36-967d80a983ff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8ec6f6c5-0d7e-402e-8e36-967d80a983ff): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8ec6f6c5-0d7e-402e-8e36-967d80a983ff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8b371f82-79d1-4863-ab49-5d426c836f0e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8b371f82-79d1-4863-ab49-5d426c836f0e): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8b371f82-79d1-4863-ab49-5d426c836f0e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eabd992e-4d37-45e2-94c7-19ed0709ffc5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eabd992e-4d37-45e2-94c7-19ed0709ffc5): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (eabd992e-4d37-45e2-94c7-19ed0709ffc5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dbdfb429-c843-45b5-b247-5c4255d15890): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dbdfb429-c843-45b5-b247-5c4255d15890): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (dbdfb429-c843-45b5-b247-5c4255d15890): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a45e2c86-da9b-4c6b-b057-656aad98296b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a45e2c86-da9b-4c6b-b057-656aad98296b): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a45e2c86-da9b-4c6b-b057-656aad98296b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97a43319-fb5d-43d9-98ce-d030b8d7b56a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (97a43319-fb5d-43d9-98ce-d030b8d7b56a): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (97a43319-fb5d-43d9-98ce-d030b8d7b56a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f97af57e-2463-4663-8572-5e7a400dd881): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f97af57e-2463-4663-8572-5e7a400dd881): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (f97af57e-2463-4663-8572-5e7a400dd881): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1107e4cc-ee28-4022-8c7c-93ec9b71285b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1107e4cc-ee28-4022-8c7c-93ec9b71285b): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (1107e4cc-ee28-4022-8c7c-93ec9b71285b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee452c4a-9c9a-426d-aec7-bce779cfbf22): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ee452c4a-9c9a-426d-aec7-bce779cfbf22): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (ee452c4a-9c9a-426d-aec7-bce779cfbf22): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (65e4ee8c-0e73-4df6-a929-8ef876123ea4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (65e4ee8c-0e73-4df6-a929-8ef876123ea4): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (65e4ee8c-0e73-4df6-a929-8ef876123ea4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ad1de77-5f9b-4756-a3ab-c073809ba327): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5ad1de77-5f9b-4756-a3ab-c073809ba327): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (5ad1de77-5f9b-4756-a3ab-c073809ba327): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (812005a3-b4bc-4c30-a716-4f06e7e23764): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (812005a3-b4bc-4c30-a716-4f06e7e23764): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );\n\n      \n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (812005a3-b4bc-4c30-a716-4f06e7e23764): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ccc509e-6073-4e83-9739-0b3a05da5526): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0ccc509e-6073-4e83-9739-0b3a05da5526): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (0ccc509e-6073-4e83-9739-0b3a05da5526): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (260ce339-95cd-4340-ad48-eb0bc8f15cf2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (260ce339-95cd-4340-ad48-eb0bc8f15cf2): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (260ce339-95cd-4340-ad48-eb0bc8f15cf2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ef3262ca-0d4d-44eb-bf06-ea551ff6c40e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ef3262ca-0d4d-44eb-bf06-ea551ff6c40e): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (ef3262ca-0d4d-44eb-bf06-ea551ff6c40e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1fda1df0-a112-40f8-b473-57194aeefa58): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1fda1df0-a112-40f8-b473-57194aeefa58): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (1fda1df0-a112-40f8-b473-57194aeefa58): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (48a1c67e-ad1c-4705-923c-89fd946ff017): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (48a1c67e-ad1c-4705-923c-89fd946ff017): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (48a1c67e-ad1c-4705-923c-89fd946ff017): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (990a3f53-c0c7-4718-b44e-32cd67a8ef13): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (990a3f53-c0c7-4718-b44e-32cd67a8ef13): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (990a3f53-c0c7-4718-b44e-32cd67a8ef13): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f19f2836-163e-4a0e-bf8b-0a47becf15e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f19f2836-163e-4a0e-bf8b-0a47becf15e4): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f19f2836-163e-4a0e-bf8b-0a47becf15e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc99cec5-2580-4cc8-9240-7b4d7cb0f678): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cc99cec5-2580-4cc8-9240-7b4d7cb0f678): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cc99cec5-2580-4cc8-9240-7b4d7cb0f678): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (44dcd26f-7f15-41a6-b6f4-bdae0e4e4219): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (44dcd26f-7f15-41a6-b6f4-bdae0e4e4219): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (44dcd26f-7f15-41a6-b6f4-bdae0e4e4219): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (adc448bc-5b3c-4f26-b6e1-fadd8a905296): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (adc448bc-5b3c-4f26-b6e1-fadd8a905296): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (adc448bc-5b3c-4f26-b6e1-fadd8a905296): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7e411de1-f430-4d9d-af5b-49326f61c7f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7e411de1-f430-4d9d-af5b-49326f61c7f3): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (7e411de1-f430-4d9d-af5b-49326f61c7f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d620a117-e553-4984-bc34-ff0e0e74e83f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d620a117-e553-4984-bc34-ff0e0e74e83f): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (d620a117-e553-4984-bc34-ff0e0e74e83f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5206436d-01ea-4d7a-9e6f-6946fc6811f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5206436d-01ea-4d7a-9e6f-6946fc6811f6): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (5206436d-01ea-4d7a-9e6f-6946fc6811f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (714e91a8-3096-43a5-a59b-8706a7403f37): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (714e91a8-3096-43a5-a59b-8706a7403f37): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (714e91a8-3096-43a5-a59b-8706a7403f37): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2aa8b69d-f1e3-4957-a732-cb043592c98e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2aa8b69d-f1e3-4957-a732-cb043592c98e): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (2aa8b69d-f1e3-4957-a732-cb043592c98e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5971361e-9334-4007-bd50-57f650e17573): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5971361e-9334-4007-bd50-57f650e17573): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5971361e-9334-4007-bd50-57f650e17573): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b0a7b7ce-e429-4af4-adaf-5d74dd36fce6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b0a7b7ce-e429-4af4-adaf-5d74dd36fce6): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (b0a7b7ce-e429-4af4-adaf-5d74dd36fce6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (20f374f9-d2b1-44fd-9628-d71d2c55212c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (20f374f9-d2b1-44fd-9628-d71d2c55212c): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (20f374f9-d2b1-44fd-9628-d71d2c55212c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5b956e12-73db-434c-b5d4-4a267ccd5788): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5b956e12-73db-434c-b5d4-4a267ccd5788): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (5b956e12-73db-434c-b5d4-4a267ccd5788): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fb8abcf6-df13-4c59-8338-128ec0cc7e5c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fb8abcf6-df13-4c59-8338-128ec0cc7e5c): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fb8abcf6-df13-4c59-8338-128ec0cc7e5c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8c73522d-2b95-4d9e-b49a-10cf843b5a26): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8c73522d-2b95-4d9e-b49a-10cf843b5a26): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (8c73522d-2b95-4d9e-b49a-10cf843b5a26): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f5980ab-e3da-4a2f-aacb-b3697dbbdce6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9f5980ab-e3da-4a2f-aacb-b3697dbbdce6): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9f5980ab-e3da-4a2f-aacb-b3697dbbdce6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d3dee32f-028d-4acd-a232-e661060b9e99): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d3dee32f-028d-4acd-a232-e661060b9e99): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (d3dee32f-028d-4acd-a232-e661060b9e99): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97611876-4633-4c6d-86cd-de99a36620b1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (97611876-4633-4c6d-86cd-de99a36620b1): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (97611876-4633-4c6d-86cd-de99a36620b1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (280e55f5-4157-4f7a-bd3d-ce83823bd186): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (280e55f5-4157-4f7a-bd3d-ce83823bd186): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (280e55f5-4157-4f7a-bd3d-ce83823bd186): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (98f43774-ac3b-4060-9d77-6ee917562823): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (98f43774-ac3b-4060-9d77-6ee917562823): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (98f43774-ac3b-4060-9d77-6ee917562823): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2c585a84-6551-405b-84c4-16869a8ca9bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2c585a84-6551-405b-84c4-16869a8ca9bd): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2c585a84-6551-405b-84c4-16869a8ca9bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b87a2c77-5361-4c07-bd96-4332fc8d6a81): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b87a2c77-5361-4c07-bd96-4332fc8d6a81): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (b87a2c77-5361-4c07-bd96-4332fc8d6a81): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (65bb2fcb-5297-471b-a8a6-24c5b9daba65): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (65bb2fcb-5297-471b-a8a6-24c5b9daba65): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (65bb2fcb-5297-471b-a8a6-24c5b9daba65): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39bd8107-72a5-4a0f-9b70-64383904b344): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (39bd8107-72a5-4a0f-9b70-64383904b344): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (39bd8107-72a5-4a0f-9b70-64383904b344): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1dd31124-69b9-41c5-8181-83f0bb02f69b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1dd31124-69b9-41c5-8181-83f0bb02f69b): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (1dd31124-69b9-41c5-8181-83f0bb02f69b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9819956f-f83d-4fec-8864-c0fbdc447fd7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9819956f-f83d-4fec-8864-c0fbdc447fd7): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9819956f-f83d-4fec-8864-c0fbdc447fd7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (112aa192-b92d-4a9d-89da-48cd8414a795): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (112aa192-b92d-4a9d-89da-48cd8414a795): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (112aa192-b92d-4a9d-89da-48cd8414a795): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91248b64-3d7a-43ce-94f6-65f96d9d33d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (91248b64-3d7a-43ce-94f6-65f96d9d33d1): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (91248b64-3d7a-43ce-94f6-65f96d9d33d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f10f8001-a180-440e-bdd3-dea41d961a76): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f10f8001-a180-440e-bdd3-dea41d961a76): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (f10f8001-a180-440e-bdd3-dea41d961a76): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9244da1e-d7c3-49e7-8996-7c800b52e96d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9244da1e-d7c3-49e7-8996-7c800b52e96d): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9244da1e-d7c3-49e7-8996-7c800b52e96d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (159379ee-b295-449a-840f-9e146dcd8a84): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (159379ee-b295-449a-840f-9e146dcd8a84): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (159379ee-b295-449a-840f-9e146dcd8a84): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (634f460c-8ba0-4fb7-a418-01bfce7ce9bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (634f460c-8ba0-4fb7-a418-01bfce7ce9bd): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (634f460c-8ba0-4fb7-a418-01bfce7ce9bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (89ee2526-6938-468a-8dba-d4d36ab812cc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (89ee2526-6938-468a-8dba-d4d36ab812cc): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (89ee2526-6938-468a-8dba-d4d36ab812cc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42621031-6bc6-41d5-99aa-041f8cf70aa1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (42621031-6bc6-41d5-99aa-041f8cf70aa1): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (42621031-6bc6-41d5-99aa-041f8cf70aa1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6a8cb5e4-5c94-472c-9040-e93575d33493): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6a8cb5e4-5c94-472c-9040-e93575d33493): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (6a8cb5e4-5c94-472c-9040-e93575d33493): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (251e994d-9886-455f-a8e7-307ae3476fe0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (251e994d-9886-455f-a8e7-307ae3476fe0): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (251e994d-9886-455f-a8e7-307ae3476fe0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (056b52e4-0650-4258-b3e7-c0b9a964e39e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (056b52e4-0650-4258-b3e7-c0b9a964e39e): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (056b52e4-0650-4258-b3e7-c0b9a964e39e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9510d0be-cdbf-4956-beb3-fa62484c771a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9510d0be-cdbf-4956-beb3-fa62484c771a): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9510d0be-cdbf-4956-beb3-fa62484c771a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7c09da4-1a79-4922-8d59-3cc45c8d17fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d7c09da4-1a79-4922-8d59-3cc45c8d17fb): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (d7c09da4-1a79-4922-8d59-3cc45c8d17fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (93dca425-2cdc-47b0-949a-264ea6740270): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (93dca425-2cdc-47b0-949a-264ea6740270): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (93dca425-2cdc-47b0-949a-264ea6740270): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d123a2e2-8f19-43d4-93de-2ca1e5d4eebe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d123a2e2-8f19-43d4-93de-2ca1e5d4eebe): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (d123a2e2-8f19-43d4-93de-2ca1e5d4eebe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7e8473e7-ba97-4192-8a3e-92cb3a76ce9f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7e8473e7-ba97-4192-8a3e-92cb3a76ce9f): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (7e8473e7-ba97-4192-8a3e-92cb3a76ce9f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (03587ab6-6f78-404f-a704-8b0e2d4868e1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (03587ab6-6f78-404f-a704-8b0e2d4868e1): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (03587ab6-6f78-404f-a704-8b0e2d4868e1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd66755e-ec3e-4421-ab46-a18484dde5ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cd66755e-ec3e-4421-ab46-a18484dde5ad): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (cd66755e-ec3e-4421-ab46-a18484dde5ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6c6d86b5-d19b-4ff3-8403-b49d51835260): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6c6d86b5-d19b-4ff3-8403-b49d51835260): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (6c6d86b5-d19b-4ff3-8403-b49d51835260): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0de4e673-28c7-4f32-89bd-bfc3f02abd09): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0de4e673-28c7-4f32-89bd-bfc3f02abd09): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (0de4e673-28c7-4f32-89bd-bfc3f02abd09): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3cb69c8b-05b1-46ce-b01c-e8cb1da9d67f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3cb69c8b-05b1-46ce-b01c-e8cb1da9d67f): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (3cb69c8b-05b1-46ce-b01c-e8cb1da9d67f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (485b024c-d2a8-4553-ac68-acfe0ae2df81): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (485b024c-d2a8-4553-ac68-acfe0ae2df81): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (485b024c-d2a8-4553-ac68-acfe0ae2df81): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e39950a1-2d5d-49cd-a20d-927b4ed38156): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e39950a1-2d5d-49cd-a20d-927b4ed38156): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (e39950a1-2d5d-49cd-a20d-927b4ed38156): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6b6246e-935d-46e3-af97-48b44744ac05): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a6b6246e-935d-46e3-af97-48b44744ac05): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (a6b6246e-935d-46e3-af97-48b44744ac05): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ebbf5205-b641-47e0-93e7-d8c146823de9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ebbf5205-b641-47e0-93e7-d8c146823de9): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (ebbf5205-b641-47e0-93e7-d8c146823de9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b350f57f-07e5-4dcd-9690-4cdb014e61ee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b350f57f-07e5-4dcd-9690-4cdb014e61ee): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b350f57f-07e5-4dcd-9690-4cdb014e61ee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0c6944de-b14a-4d16-913a-99db47a78758): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0c6944de-b14a-4d16-913a-99db47a78758): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (0c6944de-b14a-4d16-913a-99db47a78758): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0165266-4dd5-48b6-b4cd-95ac21062281): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a0165266-4dd5-48b6-b4cd-95ac21062281): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (a0165266-4dd5-48b6-b4cd-95ac21062281): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a06f2bce-6147-424a-af15-f8bdddc045e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a06f2bce-6147-424a-af15-f8bdddc045e3): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a06f2bce-6147-424a-af15-f8bdddc045e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2db679ef-4e7b-47ad-893b-3f94bbf6e98a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2db679ef-4e7b-47ad-893b-3f94bbf6e98a): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2db679ef-4e7b-47ad-893b-3f94bbf6e98a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d6ab1550-8855-4ff1-a6c4-cbc81486865c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d6ab1550-8855-4ff1-a6c4-cbc81486865c): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d6ab1550-8855-4ff1-a6c4-cbc81486865c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5282f08-d5e6-46f2-bf68-313399594c35): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d5282f08-d5e6-46f2-bf68-313399594c35): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (d5282f08-d5e6-46f2-bf68-313399594c35): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52c219a2-578c-4113-9949-d2f00c65acef): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (52c219a2-578c-4113-9949-d2f00c65acef): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (52c219a2-578c-4113-9949-d2f00c65acef): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6b6449a1-0191-42e7-b5b7-d2a02d56db35): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6b6449a1-0191-42e7-b5b7-d2a02d56db35): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6b6449a1-0191-42e7-b5b7-d2a02d56db35): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3995bd3e-4573-4ba1-89c4-83f7a7ac41c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3995bd3e-4573-4ba1-89c4-83f7a7ac41c5): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (3995bd3e-4573-4ba1-89c4-83f7a7ac41c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6b880d83-3f61-4e26-b586-e7aa104aa847): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6b880d83-3f61-4e26-b586-e7aa104aa847): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (6b880d83-3f61-4e26-b586-e7aa104aa847): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (73dcb940-7e2d-452a-aa10-09e3cc990965): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (73dcb940-7e2d-452a-aa10-09e3cc990965): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (73dcb940-7e2d-452a-aa10-09e3cc990965): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a397d48-ed43-4101-b51c-2be11fa81b0c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9a397d48-ed43-4101-b51c-2be11fa81b0c): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (9a397d48-ed43-4101-b51c-2be11fa81b0c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2058104a-6e9f-488f-9ad9-938dc10d6704): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2058104a-6e9f-488f-9ad9-938dc10d6704): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2058104a-6e9f-488f-9ad9-938dc10d6704): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbf8a904-0947-48e7-bf31-636a70e8f3ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bbf8a904-0947-48e7-bf31-636a70e8f3ea): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (bbf8a904-0947-48e7-bf31-636a70e8f3ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7754b13a-a551-46ea-b1ab-a979e5328af5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7754b13a-a551-46ea-b1ab-a979e5328af5): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7754b13a-a551-46ea-b1ab-a979e5328af5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f18b663-8d09-4fcf-af06-995d498aef4b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9f18b663-8d09-4fcf-af06-995d498aef4b): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (9f18b663-8d09-4fcf-af06-995d498aef4b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (685d278c-1ca1-498a-9542-2c5ae0bdeb6b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (685d278c-1ca1-498a-9542-2c5ae0bdeb6b): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (685d278c-1ca1-498a-9542-2c5ae0bdeb6b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d34cf8d-b773-4e3c-9b73-46a2baf10d1a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1d34cf8d-b773-4e3c-9b73-46a2baf10d1a): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (1d34cf8d-b773-4e3c-9b73-46a2baf10d1a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6efc1501-4bfc-423a-98a5-70bf230ca5ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6efc1501-4bfc-423a-98a5-70bf230ca5ba): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6efc1501-4bfc-423a-98a5-70bf230ca5ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (996c2c70-070a-4849-a385-db4f6bd87a6a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (996c2c70-070a-4849-a385-db4f6bd87a6a): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (996c2c70-070a-4849-a385-db4f6bd87a6a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8880b93e-83e2-4f5a-ae0e-8fc47754c563): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8880b93e-83e2-4f5a-ae0e-8fc47754c563): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8880b93e-83e2-4f5a-ae0e-8fc47754c563): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ddbf9b8d-6f60-44eb-ab06-e5f03308713b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ddbf9b8d-6f60-44eb-ab06-e5f03308713b): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ddbf9b8d-6f60-44eb-ab06-e5f03308713b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0c4b70a0-aef5-4b41-809a-d8f52b25c358): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0c4b70a0-aef5-4b41-809a-d8f52b25c358): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0c4b70a0-aef5-4b41-809a-d8f52b25c358): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac05e209-9915-4aec-85de-4e15904b6585): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ac05e209-9915-4aec-85de-4e15904b6585): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ac05e209-9915-4aec-85de-4e15904b6585): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (163a1b4b-a63d-40c6-a8a9-382f676eedb0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (163a1b4b-a63d-40c6-a8a9-382f676eedb0): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (163a1b4b-a63d-40c6-a8a9-382f676eedb0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (584568b1-393a-41d5-b929-29273e0f4837): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (584568b1-393a-41d5-b929-29273e0f4837): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (584568b1-393a-41d5-b929-29273e0f4837): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8198ecc5-0870-4c61-a473-2d5d643ac3ab): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8198ecc5-0870-4c61-a473-2d5d643ac3ab): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8198ecc5-0870-4c61-a473-2d5d643ac3ab): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b77c3054-3113-46df-80f0-e0c4bbba446d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b77c3054-3113-46df-80f0-e0c4bbba446d): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b77c3054-3113-46df-80f0-e0c4bbba446d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b74bbc28-76a2-4daa-aa35-f9f8f340ebd7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b74bbc28-76a2-4daa-aa35-f9f8f340ebd7): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (b74bbc28-76a2-4daa-aa35-f9f8f340ebd7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (44195bff-f968-4d7d-ab7f-dd8a06bb7b14): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (44195bff-f968-4d7d-ab7f-dd8a06bb7b14): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (44195bff-f968-4d7d-ab7f-dd8a06bb7b14): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (66c668d2-2ae0-4a81-9f4d-8717005f2b56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (66c668d2-2ae0-4a81-9f4d-8717005f2b56): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (66c668d2-2ae0-4a81-9f4d-8717005f2b56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd035c53-74eb-4c57-8363-a1d15b8112d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cd035c53-74eb-4c57-8363-a1d15b8112d8): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (cd035c53-74eb-4c57-8363-a1d15b8112d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dfdc3ded-c22d-4720-b816-3c96ac463669): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dfdc3ded-c22d-4720-b816-3c96ac463669): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (dfdc3ded-c22d-4720-b816-3c96ac463669): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (082696da-0922-4e26-9509-97e44c132251): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (082696da-0922-4e26-9509-97e44c132251): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (082696da-0922-4e26-9509-97e44c132251): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (977543f4-06af-41e5-912f-f6b8fc222113): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (977543f4-06af-41e5-912f-f6b8fc222113): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (977543f4-06af-41e5-912f-f6b8fc222113): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bce9cab6-a63b-4553-9e64-52fae29bb1b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bce9cab6-a63b-4553-9e64-52fae29bb1b0): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (bce9cab6-a63b-4553-9e64-52fae29bb1b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6d397b06-d481-483a-85d4-2bd5d296471e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6d397b06-d481-483a-85d4-2bd5d296471e): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (6d397b06-d481-483a-85d4-2bd5d296471e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (420526ff-925d-4261-b3e6-b16dbca914e1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (420526ff-925d-4261-b3e6-b16dbca914e1): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (420526ff-925d-4261-b3e6-b16dbca914e1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b8d3f87a-5897-48df-ab37-fb18bc46472a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b8d3f87a-5897-48df-ab37-fb18bc46472a): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b8d3f87a-5897-48df-ab37-fb18bc46472a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7cd5cdc3-b151-4ae3-a298-97b2fdb26003): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7cd5cdc3-b151-4ae3-a298-97b2fdb26003): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (7cd5cdc3-b151-4ae3-a298-97b2fdb26003): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (54a01845-95c4-4f27-be9f-9ed91ed0e725): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (54a01845-95c4-4f27-be9f-9ed91ed0e725): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (54a01845-95c4-4f27-be9f-9ed91ed0e725): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (53083493-aebb-4490-a7af-f039c960e473): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (53083493-aebb-4490-a7af-f039c960e473): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (53083493-aebb-4490-a7af-f039c960e473): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4591a92f-1de1-40cb-96a9-97e6696a79f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4591a92f-1de1-40cb-96a9-97e6696a79f4): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (4591a92f-1de1-40cb-96a9-97e6696a79f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (80388d9b-41e0-4a33-995e-8c7dd123c731): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (80388d9b-41e0-4a33-995e-8c7dd123c731): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (80388d9b-41e0-4a33-995e-8c7dd123c731): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `activities` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dbbackups` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `db_sync` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `diagnostic_tests` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `drug_info` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `incoming_payments` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `item_active_ingredients` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `outgoing_payments` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `permissions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `outgoing_payments` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `refills` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `branches` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customer_diagnostics` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `insurance_providers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `online_backups` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (caf41622-0f62-432f-a926-435613e1b798): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (caf41622-0f62-432f-a926-435613e1b798): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (caf41622-0f62-432f-a926-435613e1b798): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2723271e-e708-4621-95ce-a913f4b2585b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2723271e-e708-4621-95ce-a913f4b2585b): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2723271e-e708-4621-95ce-a913f4b2585b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (23c07642-0c2d-4aa9-96ae-ae644aea25fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (23c07642-0c2d-4aa9-96ae-ae644aea25fe): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (23c07642-0c2d-4aa9-96ae-ae644aea25fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (35437124-ff07-45a1-ab00-39041537fa46): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (35437124-ff07-45a1-ab00-39041537fa46): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (35437124-ff07-45a1-ab00-39041537fa46): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ced5d0c7-0e77-4c92-892d-4877ed035a85): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ced5d0c7-0e77-4c92-892d-4877ed035a85): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ced5d0c7-0e77-4c92-892d-4877ed035a85): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e3b92591-0b08-4cf4-80bb-83877755f3d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e3b92591-0b08-4cf4-80bb-83877755f3d1): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (e3b92591-0b08-4cf4-80bb-83877755f3d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da39e66d-4e48-48da-b8da-ff84c6e88636): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (da39e66d-4e48-48da-b8da-ff84c6e88636): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (da39e66d-4e48-48da-b8da-ff84c6e88636): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9caf5174-8454-4465-b715-66fe106a887b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9caf5174-8454-4465-b715-66fe106a887b): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (9caf5174-8454-4465-b715-66fe106a887b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (748fb1d1-3921-4573-9257-039512e66b85): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (748fb1d1-3921-4573-9257-039512e66b85): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (748fb1d1-3921-4573-9257-039512e66b85): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6cb595b1-ed0a-42b6-bd5d-5960491531e5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6cb595b1-ed0a-42b6-bd5d-5960491531e5): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (6cb595b1-ed0a-42b6-bd5d-5960491531e5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7e6c07e5-a259-4ce0-b526-1c35c620652d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7e6c07e5-a259-4ce0-b526-1c35c620652d): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7e6c07e5-a259-4ce0-b526-1c35c620652d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a9009bda-1984-4a11-a865-a1591b9fb1e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a9009bda-1984-4a11-a865-a1591b9fb1e8): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (a9009bda-1984-4a11-a865-a1591b9fb1e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (78cde474-d7dd-47aa-be3a-71638009afb5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (78cde474-d7dd-47aa-be3a-71638009afb5): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (78cde474-d7dd-47aa-be3a-71638009afb5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8f8ff92e-92e6-47a0-a6f1-5fb02251e294): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8f8ff92e-92e6-47a0-a6f1-5fb02251e294): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (8f8ff92e-92e6-47a0-a6f1-5fb02251e294): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c200f083-66b1-45e4-bd8a-10dc0686a035): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c200f083-66b1-45e4-bd8a-10dc0686a035): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c200f083-66b1-45e4-bd8a-10dc0686a035): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15a64053-b250-4cea-96c2-c6304896c3dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (15a64053-b250-4cea-96c2-c6304896c3dc): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (15a64053-b250-4cea-96c2-c6304896c3dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e01c4b9-b93a-448e-9e91-b457cbbbf640): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6e01c4b9-b93a-448e-9e91-b457cbbbf640): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (6e01c4b9-b93a-448e-9e91-b457cbbbf640): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (76802611-12e1-4963-8d53-5e301851270e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (76802611-12e1-4963-8d53-5e301851270e): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (76802611-12e1-4963-8d53-5e301851270e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c029e459-a617-4d03-a2c4-2b02d84f3d24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c029e459-a617-4d03-a2c4-2b02d84f3d24): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c029e459-a617-4d03-a2c4-2b02d84f3d24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fc9051f-784f-4da5-a583-87952a5d8860): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7fc9051f-784f-4da5-a583-87952a5d8860): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (7fc9051f-784f-4da5-a583-87952a5d8860): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (357a8712-eaf1-407f-b826-94cf336c7fb8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (357a8712-eaf1-407f-b826-94cf336c7fb8): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (357a8712-eaf1-407f-b826-94cf336c7fb8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e947494-48ea-417f-973c-b7ea75c76c49): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2e947494-48ea-417f-973c-b7ea75c76c49): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2e947494-48ea-417f-973c-b7ea75c76c49): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f83587f8-3556-4683-9b3e-a4a3f3e9d5bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f83587f8-3556-4683-9b3e-a4a3f3e9d5bd): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (f83587f8-3556-4683-9b3e-a4a3f3e9d5bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7cd01626-ae78-4fc0-b61f-8f2683228bce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7cd01626-ae78-4fc0-b61f-8f2683228bce): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (7cd01626-ae78-4fc0-b61f-8f2683228bce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ae97f28e-a87e-4a65-bbba-66946303800b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ae97f28e-a87e-4a65-bbba-66946303800b): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ae97f28e-a87e-4a65-bbba-66946303800b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5481f7d7-7abd-4297-891a-3719f87a24b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5481f7d7-7abd-4297-891a-3719f87a24b4): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (5481f7d7-7abd-4297-891a-3719f87a24b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3d3caa62-10b0-4854-92f7-629ab51af46a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3d3caa62-10b0-4854-92f7-629ab51af46a): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3d3caa62-10b0-4854-92f7-629ab51af46a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (28967cc3-39bb-4920-8d5a-36fc2226fc83): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (28967cc3-39bb-4920-8d5a-36fc2226fc83): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (28967cc3-39bb-4920-8d5a-36fc2226fc83): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cb3548ad-bbeb-420f-b3a0-4d680935a63b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cb3548ad-bbeb-420f-b3a0-4d680935a63b): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cb3548ad-bbeb-420f-b3a0-4d680935a63b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2a83faa-0724-4e42-b2fd-581a28860885): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b2a83faa-0724-4e42-b2fd-581a28860885): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (b2a83faa-0724-4e42-b2fd-581a28860885): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5126f824-35b4-4601-bbb1-36df8fbd423d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5126f824-35b4-4601-bbb1-36df8fbd423d): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5126f824-35b4-4601-bbb1-36df8fbd423d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (034fec80-c7bd-420f-b3dc-d85f48c091e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (034fec80-c7bd-420f-b3dc-d85f48c091e8): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (034fec80-c7bd-420f-b3dc-d85f48c091e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (38659ba4-d9f1-4aee-a1d2-75e137502835): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (38659ba4-d9f1-4aee-a1d2-75e137502835): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (38659ba4-d9f1-4aee-a1d2-75e137502835): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e153771f-0727-4645-a8ed-ef57fdf5dc34): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e153771f-0727-4645-a8ed-ef57fdf5dc34): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (e153771f-0727-4645-a8ed-ef57fdf5dc34): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (90b4f444-6828-4c82-b1b8-f616b872033d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (90b4f444-6828-4c82-b1b8-f616b872033d): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (90b4f444-6828-4c82-b1b8-f616b872033d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (30e495c0-92e6-49d8-8b88-03a0aa97ee4e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (30e495c0-92e6-49d8-8b88-03a0aa97ee4e): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (30e495c0-92e6-49d8-8b88-03a0aa97ee4e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (09b613a4-6c19-4b08-9a90-05a479f043b8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (09b613a4-6c19-4b08-9a90-05a479f043b8): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (09b613a4-6c19-4b08-9a90-05a479f043b8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e037b5f-f19f-4fc6-951c-385befb1d6f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1e037b5f-f19f-4fc6-951c-385befb1d6f4): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (1e037b5f-f19f-4fc6-951c-385befb1d6f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (380799ae-c30e-4973-83cb-0d7d63743e89): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (380799ae-c30e-4973-83cb-0d7d63743e89): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (380799ae-c30e-4973-83cb-0d7d63743e89): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd20d60a-fd60-4887-ab79-8823657ab339): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cd20d60a-fd60-4887-ab79-8823657ab339): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (cd20d60a-fd60-4887-ab79-8823657ab339): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (431760ed-b315-4c05-9ec0-e4678edc8b11): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (431760ed-b315-4c05-9ec0-e4678edc8b11): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (431760ed-b315-4c05-9ec0-e4678edc8b11): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d7a9936f-09e5-44de-9d5b-54fe24c3c30a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d7a9936f-09e5-44de-9d5b-54fe24c3c30a): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (d7a9936f-09e5-44de-9d5b-54fe24c3c30a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8cf733ac-8248-4b41-b062-23f1ea967687): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8cf733ac-8248-4b41-b062-23f1ea967687): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (8cf733ac-8248-4b41-b062-23f1ea967687): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f1ed043c-92ec-4dab-a0a5-a2294cc651ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f1ed043c-92ec-4dab-a0a5-a2294cc651ae): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f1ed043c-92ec-4dab-a0a5-a2294cc651ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f4045b7-fcb5-4a75-a82c-3e5176b3d20e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3f4045b7-fcb5-4a75-a82c-3e5176b3d20e): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (3f4045b7-fcb5-4a75-a82c-3e5176b3d20e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d6c7d795-065d-4f28-ab3c-927fc97571fc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d6c7d795-065d-4f28-ab3c-927fc97571fc): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (d6c7d795-065d-4f28-ab3c-927fc97571fc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f257121e-e6bc-4ad7-968d-6d1cb3e7256b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f257121e-e6bc-4ad7-968d-6d1cb3e7256b): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (f257121e-e6bc-4ad7-968d-6d1cb3e7256b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d7444f6-4015-45c6-b8fe-4a7fe4792f43): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1d7444f6-4015-45c6-b8fe-4a7fe4792f43): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (1d7444f6-4015-45c6-b8fe-4a7fe4792f43): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (195d3081-9013-4c8c-b887-11648f0263c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (195d3081-9013-4c8c-b887-11648f0263c4): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (195d3081-9013-4c8c-b887-11648f0263c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f36cd19d-efe1-41c4-88d8-7932fcb0fd3d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f36cd19d-efe1-41c4-88d8-7932fcb0fd3d): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (f36cd19d-efe1-41c4-88d8-7932fcb0fd3d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f8fe47a2-52d7-496a-9052-5d04c2e42e0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f8fe47a2-52d7-496a-9052-5d04c2e42e0f): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (f8fe47a2-52d7-496a-9052-5d04c2e42e0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2baaa1bb-9441-46dd-95bb-dacbc2689242): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2baaa1bb-9441-46dd-95bb-dacbc2689242): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (2baaa1bb-9441-46dd-95bb-dacbc2689242): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0d369a2f-ab08-405e-ad8a-750fcdf6405e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0d369a2f-ab08-405e-ad8a-750fcdf6405e): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0d369a2f-ab08-405e-ad8a-750fcdf6405e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f893530-9e1c-41e8-b32a-5aa5c00032c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0f893530-9e1c-41e8-b32a-5aa5c00032c5): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (0f893530-9e1c-41e8-b32a-5aa5c00032c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b1591c7f-ba5a-4d14-a939-68aa3c7f8fef): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b1591c7f-ba5a-4d14-a939-68aa3c7f8fef): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (b1591c7f-ba5a-4d14-a939-68aa3c7f8fef): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c2b59e5-09f6-477a-a38d-068ab186e8f7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5c2b59e5-09f6-477a-a38d-068ab186e8f7): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (5c2b59e5-09f6-477a-a38d-068ab186e8f7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7559bc09-25d0-4b9d-9fc5-0a8a5bb4b7f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7559bc09-25d0-4b9d-9fc5-0a8a5bb4b7f4): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7559bc09-25d0-4b9d-9fc5-0a8a5bb4b7f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39f28153-27d5-4698-9f76-56aa1d3a6e25): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (39f28153-27d5-4698-9f76-56aa1d3a6e25): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (39f28153-27d5-4698-9f76-56aa1d3a6e25): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2a58540f-b2bd-4078-93f0-59c87c1a8a3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2a58540f-b2bd-4078-93f0-59c87c1a8a3b): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (2a58540f-b2bd-4078-93f0-59c87c1a8a3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1be970c0-d643-4479-9619-b3160b4d7f1c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1be970c0-d643-4479-9619-b3160b4d7f1c): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (1be970c0-d643-4479-9619-b3160b4d7f1c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c926a40c-78d3-4eb9-8d60-b7126d22ef21): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c926a40c-78d3-4eb9-8d60-b7126d22ef21): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c926a40c-78d3-4eb9-8d60-b7126d22ef21): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e48e1e43-910f-4046-b6de-c29b1b225049): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e48e1e43-910f-4046-b6de-c29b1b225049): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (e48e1e43-910f-4046-b6de-c29b1b225049): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b0c029af-ad27-43d3-bd89-18b68c80e998): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b0c029af-ad27-43d3-bd89-18b68c80e998): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (b0c029af-ad27-43d3-bd89-18b68c80e998): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (27eaff4e-047f-42a6-b0db-83be93401ebc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (27eaff4e-047f-42a6-b0db-83be93401ebc): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (27eaff4e-047f-42a6-b0db-83be93401ebc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f24b19de-4d0b-4a58-b573-c048351ee9a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f24b19de-4d0b-4a58-b573-c048351ee9a5): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (f24b19de-4d0b-4a58-b573-c048351ee9a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ba70b202-7171-4627-950f-cc5e18df6f8f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ba70b202-7171-4627-950f-cc5e18df6f8f): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ba70b202-7171-4627-950f-cc5e18df6f8f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b98b7331-60a5-4f97-9a92-1c85d455bb40): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b98b7331-60a5-4f97-9a92-1c85d455bb40): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (b98b7331-60a5-4f97-9a92-1c85d455bb40): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc0aa1c4-b68d-4221-be7d-2e49e410a7b3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dc0aa1c4-b68d-4221-be7d-2e49e410a7b3): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (dc0aa1c4-b68d-4221-be7d-2e49e410a7b3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0e39ad1-9a47-46b0-b35a-33c68f5140ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a0e39ad1-9a47-46b0-b35a-33c68f5140ed): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (a0e39ad1-9a47-46b0-b35a-33c68f5140ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3493247b-a533-4dd7-ba6a-f31de0e37fe2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3493247b-a533-4dd7-ba6a-f31de0e37fe2): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3493247b-a533-4dd7-ba6a-f31de0e37fe2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (423a9816-29dc-40c8-bc88-97a2477fee0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (423a9816-29dc-40c8-bc88-97a2477fee0f): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (423a9816-29dc-40c8-bc88-97a2477fee0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58517518-db55-4062-8d65-9600eaa97640): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (58517518-db55-4062-8d65-9600eaa97640): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (58517518-db55-4062-8d65-9600eaa97640): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c997ac9f-d028-413a-9058-5403341b0d5f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c997ac9f-d028-413a-9058-5403341b0d5f): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (c997ac9f-d028-413a-9058-5403341b0d5f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (833039e3-ee7a-4c4a-ab8a-611c2291e6ce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (833039e3-ee7a-4c4a-ab8a-611c2291e6ce): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (833039e3-ee7a-4c4a-ab8a-611c2291e6ce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5658f5d4-70e7-4fe4-a9fe-b3630a7e116e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5658f5d4-70e7-4fe4-a9fe-b3630a7e116e): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5658f5d4-70e7-4fe4-a9fe-b3630a7e116e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8c02c039-e793-4b06-9051-9263c7fec541): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8c02c039-e793-4b06-9051-9263c7fec541): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8c02c039-e793-4b06-9051-9263c7fec541): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (79df6bdc-9670-417a-9ec2-05983462b807): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (79df6bdc-9670-417a-9ec2-05983462b807): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (79df6bdc-9670-417a-9ec2-05983462b807): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ad0ac2c9-9482-4071-b327-089138a24bb3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ad0ac2c9-9482-4071-b327-089138a24bb3): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (ad0ac2c9-9482-4071-b327-089138a24bb3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0703ad46-010e-4898-b4f2-0d06c000bd33): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0703ad46-010e-4898-b4f2-0d06c000bd33): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (0703ad46-010e-4898-b4f2-0d06c000bd33): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f050595d-4061-40e9-a6f5-8c081903268c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f050595d-4061-40e9-a6f5-8c081903268c): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f050595d-4061-40e9-a6f5-8c081903268c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (212e96ae-2345-4f0f-93be-0947ff570282): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (212e96ae-2345-4f0f-93be-0947ff570282): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (212e96ae-2345-4f0f-93be-0947ff570282): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (756ce86c-a12c-4d9d-8c96-a0aa09883370): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (756ce86c-a12c-4d9d-8c96-a0aa09883370): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (756ce86c-a12c-4d9d-8c96-a0aa09883370): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (030b3640-cf96-497c-9c6e-29ab18eb1479): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (030b3640-cf96-497c-9c6e-29ab18eb1479): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (030b3640-cf96-497c-9c6e-29ab18eb1479): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f70b8ac3-6734-4f68-a3e9-c7e9352544d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f70b8ac3-6734-4f68-a3e9-c7e9352544d1): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (f70b8ac3-6734-4f68-a3e9-c7e9352544d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (88cc8e8d-db79-4f9e-94f7-167de7607a5b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (88cc8e8d-db79-4f9e-94f7-167de7607a5b): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (88cc8e8d-db79-4f9e-94f7-167de7607a5b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (174e9608-07ed-4239-b92a-88b2ea1ad627): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (174e9608-07ed-4239-b92a-88b2ea1ad627): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (174e9608-07ed-4239-b92a-88b2ea1ad627): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ccfafb7f-c782-4d01-bf2c-8895b9632884): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ccfafb7f-c782-4d01-bf2c-8895b9632884): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (ccfafb7f-c782-4d01-bf2c-8895b9632884): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fe0b8596-9f52-4566-b68d-3afe6b78514c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fe0b8596-9f52-4566-b68d-3afe6b78514c): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (fe0b8596-9f52-4566-b68d-3afe6b78514c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (db993a95-6bbc-4569-9d74-3546304c2ee6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (db993a95-6bbc-4569-9d74-3546304c2ee6): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (db993a95-6bbc-4569-9d74-3546304c2ee6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d2dcda59-27c3-4a89-ba4c-b8284b995332): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d2dcda59-27c3-4a89-ba4c-b8284b995332): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (d2dcda59-27c3-4a89-ba4c-b8284b995332): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f261a29f-e372-434d-bb63-4b349afcaf13): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f261a29f-e372-434d-bb63-4b349afcaf13): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (f261a29f-e372-434d-bb63-4b349afcaf13): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (27ea1ddd-594c-4fc3-9240-22e757e15985): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (27ea1ddd-594c-4fc3-9240-22e757e15985): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (27ea1ddd-594c-4fc3-9240-22e757e15985): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3212ce82-2506-4595-9731-555c3de9b6d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3212ce82-2506-4595-9731-555c3de9b6d6): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (3212ce82-2506-4595-9731-555c3de9b6d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (68ffded2-a570-4228-90bc-53953e189b70): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (68ffded2-a570-4228-90bc-53953e189b70): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (68ffded2-a570-4228-90bc-53953e189b70): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e6ef7e61-caac-4bbb-891a-88e749edb957): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e6ef7e61-caac-4bbb-891a-88e749edb957): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (e6ef7e61-caac-4bbb-891a-88e749edb957): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d26aba76-b14f-494f-9f89-439252ae8ac6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d26aba76-b14f-494f-9f89-439252ae8ac6): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (d26aba76-b14f-494f-9f89-439252ae8ac6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1e64918-ce07-4ff9-9819-092e672060ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e1e64918-ce07-4ff9-9819-092e672060ae): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (e1e64918-ce07-4ff9-9819-092e672060ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `refills` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `branches` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customer_diagnostics` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `insurance_providers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `online_backups` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `purchases` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `purchases` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `received_transfer_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `received_transfers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `settings` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment_pending` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment_sessions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_values` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `transfer_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `transfers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `users` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `user_sessions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `vendors` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (8518833b-9c2d-4a07-b069-cb270f1c6690): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8518833b-9c2d-4a07-b069-cb270f1c6690): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8518833b-9c2d-4a07-b069-cb270f1c6690): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9120d01-6da8-421f-850f-9811e0048b89): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b9120d01-6da8-421f-850f-9811e0048b89): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b9120d01-6da8-421f-850f-9811e0048b89): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55d5750f-e0ce-4819-be0b-2cf2615df3de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (55d5750f-e0ce-4819-be0b-2cf2615df3de): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (55d5750f-e0ce-4819-be0b-2cf2615df3de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (260175eb-538b-4f5e-985d-dda7b36313e2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (260175eb-538b-4f5e-985d-dda7b36313e2): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (260175eb-538b-4f5e-985d-dda7b36313e2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8f147ba7-9519-425f-8ea9-e8df55cd6340): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8f147ba7-9519-425f-8ea9-e8df55cd6340): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8f147ba7-9519-425f-8ea9-e8df55cd6340): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (55fd2272-95e6-4635-9500-7f9fc8187402): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (55fd2272-95e6-4635-9500-7f9fc8187402): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (55fd2272-95e6-4635-9500-7f9fc8187402): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3b67dfdc-dcf2-4502-8893-6966dc6a0e2e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3b67dfdc-dcf2-4502-8893-6966dc6a0e2e): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (3b67dfdc-dcf2-4502-8893-6966dc6a0e2e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (08f84d0b-01bc-4edd-afab-ef09f3075faf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (08f84d0b-01bc-4edd-afab-ef09f3075faf): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (08f84d0b-01bc-4edd-afab-ef09f3075faf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8fd90c14-05f2-4e8c-9df5-0cf8b4ad66b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8fd90c14-05f2-4e8c-9df5-0cf8b4ad66b7): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8fd90c14-05f2-4e8c-9df5-0cf8b4ad66b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f45b962-437b-460d-800c-c049eca760a3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1f45b962-437b-460d-800c-c049eca760a3): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (1f45b962-437b-460d-800c-c049eca760a3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3fc390f6-474d-4cc0-af5a-3cd5c3976148): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3fc390f6-474d-4cc0-af5a-3cd5c3976148): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3fc390f6-474d-4cc0-af5a-3cd5c3976148): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a753263b-0332-4f3e-bbba-2481ceb04370): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a753263b-0332-4f3e-bbba-2481ceb04370): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (a753263b-0332-4f3e-bbba-2481ceb04370): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1e59375d-1df4-400a-bccc-c60046ecae0d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1e59375d-1df4-400a-bccc-c60046ecae0d): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1e59375d-1df4-400a-bccc-c60046ecae0d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3932cace-5c6d-41c6-b067-c043f9954fd6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3932cace-5c6d-41c6-b067-c043f9954fd6): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (3932cace-5c6d-41c6-b067-c043f9954fd6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (876204d4-f0ff-44a1-8a0f-227a0cddc5bf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (876204d4-f0ff-44a1-8a0f-227a0cddc5bf): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (876204d4-f0ff-44a1-8a0f-227a0cddc5bf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (205d5f78-8fc8-4166-a535-e3a50d251b9a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (205d5f78-8fc8-4166-a535-e3a50d251b9a): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (205d5f78-8fc8-4166-a535-e3a50d251b9a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (039a47af-e1ae-4860-bc3b-8fdcc28c2d2c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (039a47af-e1ae-4860-bc3b-8fdcc28c2d2c): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (039a47af-e1ae-4860-bc3b-8fdcc28c2d2c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (310330e0-e54e-4513-815e-ff71222cadc8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (310330e0-e54e-4513-815e-ff71222cadc8): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (310330e0-e54e-4513-815e-ff71222cadc8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5dede14c-faba-4bf1-b0e4-3e3521e94531): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5dede14c-faba-4bf1-b0e4-3e3521e94531): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5dede14c-faba-4bf1-b0e4-3e3521e94531): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (53fa9871-121e-4723-8207-1cc230d69e6c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (53fa9871-121e-4723-8207-1cc230d69e6c): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (53fa9871-121e-4723-8207-1cc230d69e6c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b0247d34-2d6d-4ccd-b685-52f474366208): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b0247d34-2d6d-4ccd-b685-52f474366208): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b0247d34-2d6d-4ccd-b685-52f474366208): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5e687e07-e516-45c7-90e9-4e92c455c993): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5e687e07-e516-45c7-90e9-4e92c455c993): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5e687e07-e516-45c7-90e9-4e92c455c993): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee5c9134-0e85-485d-aff2-cdea35b21d2b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ee5c9134-0e85-485d-aff2-cdea35b21d2b): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (ee5c9134-0e85-485d-aff2-cdea35b21d2b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (16e29f02-3bf8-4d72-8c50-4b7ccd47d48d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (16e29f02-3bf8-4d72-8c50-4b7ccd47d48d): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (16e29f02-3bf8-4d72-8c50-4b7ccd47d48d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (508aa3fe-9c8a-43ce-9bd1-8ad7621953a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (508aa3fe-9c8a-43ce-9bd1-8ad7621953a8): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (508aa3fe-9c8a-43ce-9bd1-8ad7621953a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12c33e8b-368f-40c7-b067-71bb56ec3790): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (12c33e8b-368f-40c7-b067-71bb56ec3790): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (12c33e8b-368f-40c7-b067-71bb56ec3790): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5ecf6a11-a1ef-459b-b788-93ff69fab06c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5ecf6a11-a1ef-459b-b788-93ff69fab06c): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5ecf6a11-a1ef-459b-b788-93ff69fab06c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19ee6118-52bc-4eeb-8a7f-c8bcb4a1ca63): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (19ee6118-52bc-4eeb-8a7f-c8bcb4a1ca63): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (19ee6118-52bc-4eeb-8a7f-c8bcb4a1ca63): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c0a099c6-105d-4343-a9ed-f985fa83a799): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c0a099c6-105d-4343-a9ed-f985fa83a799): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c0a099c6-105d-4343-a9ed-f985fa83a799): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e5f24a50-40d4-45e9-ada1-6177e7d7d16a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e5f24a50-40d4-45e9-ada1-6177e7d7d16a): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (e5f24a50-40d4-45e9-ada1-6177e7d7d16a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (771f8ab9-cfde-423d-b872-29b367016c7e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (771f8ab9-cfde-423d-b872-29b367016c7e): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (771f8ab9-cfde-423d-b872-29b367016c7e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e6d11bfe-ef99-4490-856f-c7596a196408): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e6d11bfe-ef99-4490-856f-c7596a196408): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (e6d11bfe-ef99-4490-856f-c7596a196408): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (22605f19-99c3-4df9-be4b-0ceb209a7c16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (22605f19-99c3-4df9-be4b-0ceb209a7c16): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (22605f19-99c3-4df9-be4b-0ceb209a7c16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da7e5f98-538a-4028-a87e-cfffeea959aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (da7e5f98-538a-4028-a87e-cfffeea959aa): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (da7e5f98-538a-4028-a87e-cfffeea959aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (92a10696-ce5a-494c-ad19-77482e6d549a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (92a10696-ce5a-494c-ad19-77482e6d549a): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (92a10696-ce5a-494c-ad19-77482e6d549a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8040e8d7-06fb-4124-9629-af8c513043d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8040e8d7-06fb-4124-9629-af8c513043d9): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (8040e8d7-06fb-4124-9629-af8c513043d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8405e217-8390-4819-ad65-1b26bb10ee09): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8405e217-8390-4819-ad65-1b26bb10ee09): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (8405e217-8390-4819-ad65-1b26bb10ee09): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (046da8f2-1f01-4706-8a6e-6c8ae631f71f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (046da8f2-1f01-4706-8a6e-6c8ae631f71f): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (046da8f2-1f01-4706-8a6e-6c8ae631f71f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9710d472-52c3-402c-a9fe-028a68b2dc0e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9710d472-52c3-402c-a9fe-028a68b2dc0e): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9710d472-52c3-402c-a9fe-028a68b2dc0e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (024b515c-f277-4154-aad7-30de4dd7076d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (024b515c-f277-4154-aad7-30de4dd7076d): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (024b515c-f277-4154-aad7-30de4dd7076d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d54ca66d-cceb-4a73-99f8-224fb8e70de4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d54ca66d-cceb-4a73-99f8-224fb8e70de4): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (d54ca66d-cceb-4a73-99f8-224fb8e70de4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e7c78af-aa82-4c3d-9833-556fa79da59b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6e7c78af-aa82-4c3d-9833-556fa79da59b): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (6e7c78af-aa82-4c3d-9833-556fa79da59b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (90069962-34ba-49f6-b94c-df6112f21011): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (90069962-34ba-49f6-b94c-df6112f21011): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (90069962-34ba-49f6-b94c-df6112f21011): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b2174896-435f-4be0-9596-e887d6acf3c0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b2174896-435f-4be0-9596-e887d6acf3c0): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (b2174896-435f-4be0-9596-e887d6acf3c0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d6931ba8-2315-4395-973e-b7b424186c4a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d6931ba8-2315-4395-973e-b7b424186c4a): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (d6931ba8-2315-4395-973e-b7b424186c4a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d406bb17-d673-41da-aaeb-aa7be08c5b37): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d406bb17-d673-41da-aaeb-aa7be08c5b37): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (d406bb17-d673-41da-aaeb-aa7be08c5b37): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (68674885-d699-4032-995a-39f85acdbf91): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (68674885-d699-4032-995a-39f85acdbf91): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (68674885-d699-4032-995a-39f85acdbf91): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3187327-b96c-4417-b4d4-da52d888d02a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b3187327-b96c-4417-b4d4-da52d888d02a): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (b3187327-b96c-4417-b4d4-da52d888d02a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5083e549-29fd-4f4c-9cf7-d1542e4d1463): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5083e549-29fd-4f4c-9cf7-d1542e4d1463): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (5083e549-29fd-4f4c-9cf7-d1542e4d1463): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (793bc8fb-c053-4371-aafa-b86754b453ff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (793bc8fb-c053-4371-aafa-b86754b453ff): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (793bc8fb-c053-4371-aafa-b86754b453ff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f6a817e1-c298-4fe5-98d1-415d5d8c8999): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f6a817e1-c298-4fe5-98d1-415d5d8c8999): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (f6a817e1-c298-4fe5-98d1-415d5d8c8999): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ddb6b1db-b312-4923-98c1-5a41d18adb01): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ddb6b1db-b312-4923-98c1-5a41d18adb01): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (ddb6b1db-b312-4923-98c1-5a41d18adb01): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (80d13270-89a3-4a7e-8a41-f0f551287001): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (80d13270-89a3-4a7e-8a41-f0f551287001): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (80d13270-89a3-4a7e-8a41-f0f551287001): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dd9c07e5-eb82-4f52-8173-2425e8381678): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dd9c07e5-eb82-4f52-8173-2425e8381678): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (dd9c07e5-eb82-4f52-8173-2425e8381678): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d276b0a9-4c6f-467c-b02e-48b8cd7ac843): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d276b0a9-4c6f-467c-b02e-48b8cd7ac843): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (d276b0a9-4c6f-467c-b02e-48b8cd7ac843): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (23223db9-ef69-498f-bca6-760298475196): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (23223db9-ef69-498f-bca6-760298475196): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (23223db9-ef69-498f-bca6-760298475196): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fe572c5-2589-4361-8f97-05caa409ddf3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7fe572c5-2589-4361-8f97-05caa409ddf3): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7fe572c5-2589-4361-8f97-05caa409ddf3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3084015c-faea-4867-ae11-954efdb3a5c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3084015c-faea-4867-ae11-954efdb3a5c5): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3084015c-faea-4867-ae11-954efdb3a5c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8db31fbf-3091-4711-bc56-045f59ff4847): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8db31fbf-3091-4711-bc56-045f59ff4847): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (8db31fbf-3091-4711-bc56-045f59ff4847): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff323ade-179a-4353-9688-f5e144066a1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ff323ade-179a-4353-9688-f5e144066a1f): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (ff323ade-179a-4353-9688-f5e144066a1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (376d46ac-3608-4e17-a7ab-019c8f94d02b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (376d46ac-3608-4e17-a7ab-019c8f94d02b): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (376d46ac-3608-4e17-a7ab-019c8f94d02b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (124ed548-6e97-4d4f-8f45-06b3812064b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (124ed548-6e97-4d4f-8f45-06b3812064b0): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (124ed548-6e97-4d4f-8f45-06b3812064b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bb55eec6-21cf-4711-9c43-8d315dae5a55): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bb55eec6-21cf-4711-9c43-8d315dae5a55): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (bb55eec6-21cf-4711-9c43-8d315dae5a55): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1102fff-759b-4290-8fd1-899dbe2f445f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e1102fff-759b-4290-8fd1-899dbe2f445f): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e1102fff-759b-4290-8fd1-899dbe2f445f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9ae63fd0-53c9-427b-be0d-7710ecd09626): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9ae63fd0-53c9-427b-be0d-7710ecd09626): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (9ae63fd0-53c9-427b-be0d-7710ecd09626): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e52014d-474d-4f21-822d-b01def5c0184): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9e52014d-474d-4f21-822d-b01def5c0184): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9e52014d-474d-4f21-822d-b01def5c0184): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a629f6d0-d922-4841-b36a-5fcc00b44d11): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a629f6d0-d922-4841-b36a-5fcc00b44d11): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (a629f6d0-d922-4841-b36a-5fcc00b44d11): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7df3af56-239f-49c9-a525-9f47e939e57e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7df3af56-239f-49c9-a525-9f47e939e57e): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7df3af56-239f-49c9-a525-9f47e939e57e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff106ddf-e7fc-4bf1-b64c-5a147d1ba095): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ff106ddf-e7fc-4bf1-b64c-5a147d1ba095): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (ff106ddf-e7fc-4bf1-b64c-5a147d1ba095): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d1a3f43-dfb2-4fd8-8e36-3fa7e1859d72): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1d1a3f43-dfb2-4fd8-8e36-3fa7e1859d72): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1d1a3f43-dfb2-4fd8-8e36-3fa7e1859d72): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (65187e2a-b475-4a85-babd-fb9e96e99c66): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (65187e2a-b475-4a85-babd-fb9e96e99c66): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (65187e2a-b475-4a85-babd-fb9e96e99c66): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (74b1456e-4017-43dd-ab1d-ed705d98f69c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (74b1456e-4017-43dd-ab1d-ed705d98f69c): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (74b1456e-4017-43dd-ab1d-ed705d98f69c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5e803410-f2dd-4e9b-9983-33750d634690): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5e803410-f2dd-4e9b-9983-33750d634690): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (5e803410-f2dd-4e9b-9983-33750d634690): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3a5bee0a-fe7f-4e5f-b63d-29b67f8044d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3a5bee0a-fe7f-4e5f-b63d-29b67f8044d2): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3a5bee0a-fe7f-4e5f-b63d-29b67f8044d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (80725398-f073-4eae-bc1a-615332584ca7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (80725398-f073-4eae-bc1a-615332584ca7): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (80725398-f073-4eae-bc1a-615332584ca7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (356c28ce-4bb9-420e-a1b8-86b73bd8cd30): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (356c28ce-4bb9-420e-a1b8-86b73bd8cd30): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (356c28ce-4bb9-420e-a1b8-86b73bd8cd30): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9cc5fcbd-395e-4dd9-aef3-3694a04f50c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9cc5fcbd-395e-4dd9-aef3-3694a04f50c4): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9cc5fcbd-395e-4dd9-aef3-3694a04f50c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bf5d5910-7710-4628-a31f-b8b5225550b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bf5d5910-7710-4628-a31f-b8b5225550b4): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bf5d5910-7710-4628-a31f-b8b5225550b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91c33b7a-6e5e-4cca-b9a5-62583abf5631): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (91c33b7a-6e5e-4cca-b9a5-62583abf5631): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (91c33b7a-6e5e-4cca-b9a5-62583abf5631): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a28f7b38-0767-45d9-97c6-730c79fd7add): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a28f7b38-0767-45d9-97c6-730c79fd7add): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a28f7b38-0767-45d9-97c6-730c79fd7add): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0f68b79-2301-4040-8202-65001055af78): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a0f68b79-2301-4040-8202-65001055af78): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a0f68b79-2301-4040-8202-65001055af78): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3c0cfa65-0d6e-4b5b-ac03-98eb791fe127): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3c0cfa65-0d6e-4b5b-ac03-98eb791fe127): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (3c0cfa65-0d6e-4b5b-ac03-98eb791fe127): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6e9b9dc-0a5e-44c7-ab52-7922f95c59e2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a6e9b9dc-0a5e-44c7-ab52-7922f95c59e2): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a6e9b9dc-0a5e-44c7-ab52-7922f95c59e2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5664c2bf-d623-44c7-a32d-b9f567087ada): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5664c2bf-d623-44c7-a32d-b9f567087ada): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (5664c2bf-d623-44c7-a32d-b9f567087ada): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86e91eca-1e43-48e8-8d65-b640e2fa16f9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (86e91eca-1e43-48e8-8d65-b640e2fa16f9): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (86e91eca-1e43-48e8-8d65-b640e2fa16f9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dd2af1d9-23e1-486f-99ab-dbdc5f952244): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dd2af1d9-23e1-486f-99ab-dbdc5f952244): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (dd2af1d9-23e1-486f-99ab-dbdc5f952244): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5748eefb-971d-44b6-80af-d98ca996688b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5748eefb-971d-44b6-80af-d98ca996688b): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (5748eefb-971d-44b6-80af-d98ca996688b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5dd0cf18-05e9-424c-b4d0-533b84afaeb6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5dd0cf18-05e9-424c-b4d0-533b84afaeb6): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (5dd0cf18-05e9-424c-b4d0-533b84afaeb6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (baf8dac1-1c13-4223-87b3-d67e559580d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (baf8dac1-1c13-4223-87b3-d67e559580d4): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (baf8dac1-1c13-4223-87b3-d67e559580d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9df5da9-ad10-43de-89f8-5e92409e5230): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b9df5da9-ad10-43de-89f8-5e92409e5230): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (b9df5da9-ad10-43de-89f8-5e92409e5230): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7d2dd94e-4ede-49fe-b223-be073fc2e998): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7d2dd94e-4ede-49fe-b223-be073fc2e998): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (7d2dd94e-4ede-49fe-b223-be073fc2e998): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (34348337-c1d4-4aba-87fd-bfa093846744): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (34348337-c1d4-4aba-87fd-bfa093846744): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (34348337-c1d4-4aba-87fd-bfa093846744): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8b4350be-6fc2-4712-b53e-b348fe336682): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8b4350be-6fc2-4712-b53e-b348fe336682): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (8b4350be-6fc2-4712-b53e-b348fe336682): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (94ceae7a-2864-42c5-b0a4-7de0b70f35f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (94ceae7a-2864-42c5-b0a4-7de0b70f35f3): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (94ceae7a-2864-42c5-b0a4-7de0b70f35f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed690d3a-bb57-4a73-acb3-4265e50bf411): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ed690d3a-bb57-4a73-acb3-4265e50bf411): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (ed690d3a-bb57-4a73-acb3-4265e50bf411): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6788074f-e261-4503-ad59-c21c0764ead4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6788074f-e261-4503-ad59-c21c0764ead4): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (6788074f-e261-4503-ad59-c21c0764ead4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (569e82ba-d32f-46ac-8dd5-45207bcae614): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (569e82ba-d32f-46ac-8dd5-45207bcae614): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (569e82ba-d32f-46ac-8dd5-45207bcae614): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `activities` ADD `object_id` VARCHAR(255);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `activities` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customers` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dailyRecords` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `dbbackups` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `db_sync` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `diagnostic_tests` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `drug_info` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `incoming_payments` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `item_active_ingredients` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `outgoing_payments` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `permissions` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `outgoing_payments` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `refills` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `branches` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customer_diagnostics` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `insurance_providers` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `online_backups` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (e3a913b0-c6bb-4746-9b23-2a9a7cf38037): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e3a913b0-c6bb-4746-9b23-2a9a7cf38037): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e3a913b0-c6bb-4746-9b23-2a9a7cf38037): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (365cec9f-86e9-4c4f-abd0-b4c019ba61dd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (365cec9f-86e9-4c4f-abd0-b4c019ba61dd): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (365cec9f-86e9-4c4f-abd0-b4c019ba61dd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (974f25e7-ec42-413c-bd80-c1b3bf8f345c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (974f25e7-ec42-413c-bd80-c1b3bf8f345c): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (974f25e7-ec42-413c-bd80-c1b3bf8f345c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c5c9e541-166f-4184-ba34-cd07556dfbf7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c5c9e541-166f-4184-ba34-cd07556dfbf7): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (c5c9e541-166f-4184-ba34-cd07556dfbf7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (015bcb81-df45-4ca6-b633-97fa668b154c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (015bcb81-df45-4ca6-b633-97fa668b154c): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (015bcb81-df45-4ca6-b633-97fa668b154c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b69d9d80-c5c9-4cb9-929d-773a3cd68835): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b69d9d80-c5c9-4cb9-929d-773a3cd68835): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (b69d9d80-c5c9-4cb9-929d-773a3cd68835): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b42f92b1-6435-4e2f-90d2-9e452f8e56cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b42f92b1-6435-4e2f-90d2-9e452f8e56cf): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (b42f92b1-6435-4e2f-90d2-9e452f8e56cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9b46f649-860f-4ad2-8cd2-075d54b71b38): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9b46f649-860f-4ad2-8cd2-075d54b71b38): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (9b46f649-860f-4ad2-8cd2-075d54b71b38): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (48c1101a-ddba-4d5b-9e40-517dd9373643): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (48c1101a-ddba-4d5b-9e40-517dd9373643): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (48c1101a-ddba-4d5b-9e40-517dd9373643): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b0800a65-e57a-407a-babf-f1fca63bf5de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b0800a65-e57a-407a-babf-f1fca63bf5de): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (b0800a65-e57a-407a-babf-f1fca63bf5de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b9684edb-ffc7-4de4-889b-e843c61a571d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b9684edb-ffc7-4de4-889b-e843c61a571d): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b9684edb-ffc7-4de4-889b-e843c61a571d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ffca50d-b65e-43f9-bb81-ebfbf5a82662): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3ffca50d-b65e-43f9-bb81-ebfbf5a82662): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (3ffca50d-b65e-43f9-bb81-ebfbf5a82662): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6409771-a7a1-4606-825c-c7806b74b90c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a6409771-a7a1-4606-825c-c7806b74b90c): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a6409771-a7a1-4606-825c-c7806b74b90c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fb5c0a01-c530-4e29-a65a-23fa11c431f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fb5c0a01-c530-4e29-a65a-23fa11c431f3): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (fb5c0a01-c530-4e29-a65a-23fa11c431f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c26c087b-c431-4655-9414-4be95f12d51e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c26c087b-c431-4655-9414-4be95f12d51e): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c26c087b-c431-4655-9414-4be95f12d51e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fb610924-51c2-475a-9bea-c31d475634b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fb610924-51c2-475a-9bea-c31d475634b4): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (fb610924-51c2-475a-9bea-c31d475634b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3600a467-0e89-4f00-9e66-970b060b034b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3600a467-0e89-4f00-9e66-970b060b034b): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3600a467-0e89-4f00-9e66-970b060b034b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (097fa8ce-07ba-4fd2-8cdf-2e7cc05260c3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (097fa8ce-07ba-4fd2-8cdf-2e7cc05260c3): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (097fa8ce-07ba-4fd2-8cdf-2e7cc05260c3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c683a778-0216-4a77-8ade-94ed056cb858): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c683a778-0216-4a77-8ade-94ed056cb858): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c683a778-0216-4a77-8ade-94ed056cb858): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e87835d4-423c-45f3-ada6-1b0f55d4bc3f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e87835d4-423c-45f3-ada6-1b0f55d4bc3f): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e87835d4-423c-45f3-ada6-1b0f55d4bc3f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3a673137-70ae-4114-8051-1df5a733cec4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3a673137-70ae-4114-8051-1df5a733cec4): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3a673137-70ae-4114-8051-1df5a733cec4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (738f1629-acf7-4e0c-a8da-7882d3efc8fb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (738f1629-acf7-4e0c-a8da-7882d3efc8fb): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (738f1629-acf7-4e0c-a8da-7882d3efc8fb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ffe78f7d-b4c9-45de-887c-ad8728c5c5bb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ffe78f7d-b4c9-45de-887c-ad8728c5c5bb): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (ffe78f7d-b4c9-45de-887c-ad8728c5c5bb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (38aa21f7-e5fe-462e-a591-c8e0a4162777): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (38aa21f7-e5fe-462e-a591-c8e0a4162777): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (38aa21f7-e5fe-462e-a591-c8e0a4162777): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3fb48656-6799-4a93-aaae-59e3b33e3d00): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3fb48656-6799-4a93-aaae-59e3b33e3d00): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3fb48656-6799-4a93-aaae-59e3b33e3d00): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7a9bc1e7-6260-4b50-8aea-bf4065dad5c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7a9bc1e7-6260-4b50-8aea-bf4065dad5c7): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (7a9bc1e7-6260-4b50-8aea-bf4065dad5c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f6957ffc-1fb4-46d4-a47a-a759e5a3cc1c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f6957ffc-1fb4-46d4-a47a-a759e5a3cc1c): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f6957ffc-1fb4-46d4-a47a-a759e5a3cc1c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ce2877ac-b608-4faa-b318-e5cc1ae816c7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ce2877ac-b608-4faa-b318-e5cc1ae816c7): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (ce2877ac-b608-4faa-b318-e5cc1ae816c7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a16063d-e1f5-4408-b2c1-fdc9d79a7474): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1a16063d-e1f5-4408-b2c1-fdc9d79a7474): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1a16063d-e1f5-4408-b2c1-fdc9d79a7474): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c3955d9d-a223-40cf-8cd5-60ef7534d678): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c3955d9d-a223-40cf-8cd5-60ef7534d678): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (c3955d9d-a223-40cf-8cd5-60ef7534d678): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3652d3be-c55c-4747-8aa8-b6081ed2956d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3652d3be-c55c-4747-8aa8-b6081ed2956d): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3652d3be-c55c-4747-8aa8-b6081ed2956d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9b30d8c8-8702-41c0-b605-0905602b366c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9b30d8c8-8702-41c0-b605-0905602b366c): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (9b30d8c8-8702-41c0-b605-0905602b366c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ab6a4aa-1a9b-4d96-9418-fd3a0ee47159): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0ab6a4aa-1a9b-4d96-9418-fd3a0ee47159): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0ab6a4aa-1a9b-4d96-9418-fd3a0ee47159): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39ac0f7c-3be9-4b5f-8ec1-d2a8ce3e3180): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (39ac0f7c-3be9-4b5f-8ec1-d2a8ce3e3180): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (39ac0f7c-3be9-4b5f-8ec1-d2a8ce3e3180): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (639aee1d-daaa-4d1e-a188-749d3cee9abb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (639aee1d-daaa-4d1e-a188-749d3cee9abb): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (639aee1d-daaa-4d1e-a188-749d3cee9abb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6d074f7f-2345-43d5-9e77-ab2db538da1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6d074f7f-2345-43d5-9e77-ab2db538da1f): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (6d074f7f-2345-43d5-9e77-ab2db538da1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (60b09f18-74cf-40be-9ac1-9622cfd0d5d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (60b09f18-74cf-40be-9ac1-9622cfd0d5d1): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (60b09f18-74cf-40be-9ac1-9622cfd0d5d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (345360f9-6cb3-4197-a668-8538b8cd8615): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (345360f9-6cb3-4197-a668-8538b8cd8615): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (345360f9-6cb3-4197-a668-8538b8cd8615): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (caca7b4f-aea2-48c1-a2ec-ddeff19370fc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (caca7b4f-aea2-48c1-a2ec-ddeff19370fc): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (caca7b4f-aea2-48c1-a2ec-ddeff19370fc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15f1df9a-6c62-49db-a32b-289d2cc6d8e2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (15f1df9a-6c62-49db-a32b-289d2cc6d8e2): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (15f1df9a-6c62-49db-a32b-289d2cc6d8e2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8a2ac5e9-6150-4af6-a6ee-a005fe6cc927): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8a2ac5e9-6150-4af6-a6ee-a005fe6cc927): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (8a2ac5e9-6150-4af6-a6ee-a005fe6cc927): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc41607e-cf0e-4be3-87b5-d02690d7bc15): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cc41607e-cf0e-4be3-87b5-d02690d7bc15): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (cc41607e-cf0e-4be3-87b5-d02690d7bc15): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b35f62ca-fba7-498c-b843-f64943323715): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b35f62ca-fba7-498c-b843-f64943323715): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (b35f62ca-fba7-498c-b843-f64943323715): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (77892739-aa61-44b8-8d0c-0e311e93f4b3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (77892739-aa61-44b8-8d0c-0e311e93f4b3): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (77892739-aa61-44b8-8d0c-0e311e93f4b3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb579863-669f-4846-adc9-af446d55c9b5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eb579863-669f-4846-adc9-af446d55c9b5): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (eb579863-669f-4846-adc9-af446d55c9b5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7791d1fd-e76f-43b2-aa80-e6825f4ad1de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7791d1fd-e76f-43b2-aa80-e6825f4ad1de): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (7791d1fd-e76f-43b2-aa80-e6825f4ad1de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc074e62-de6f-49c0-94aa-3b41e066829b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cc074e62-de6f-49c0-94aa-3b41e066829b): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (cc074e62-de6f-49c0-94aa-3b41e066829b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6e0ad99e-53d0-47d6-9f64-88778a2d10bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6e0ad99e-53d0-47d6-9f64-88778a2d10bc): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (6e0ad99e-53d0-47d6-9f64-88778a2d10bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (516bac68-a22c-43b4-8ef5-934f0e0298ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (516bac68-a22c-43b4-8ef5-934f0e0298ad): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (516bac68-a22c-43b4-8ef5-934f0e0298ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (33a9f830-a7e8-4e7f-ac93-90d26c6868f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (33a9f830-a7e8-4e7f-ac93-90d26c6868f3): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (33a9f830-a7e8-4e7f-ac93-90d26c6868f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aed77865-a6f0-4717-9c38-9cb211e14835): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (aed77865-a6f0-4717-9c38-9cb211e14835): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (aed77865-a6f0-4717-9c38-9cb211e14835): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (af6afc09-8056-4610-b7ba-898c9edcabb7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (af6afc09-8056-4610-b7ba-898c9edcabb7): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (af6afc09-8056-4610-b7ba-898c9edcabb7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (72e940c5-d439-4a4d-8a23-b17b308d8ba3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (72e940c5-d439-4a4d-8a23-b17b308d8ba3): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (72e940c5-d439-4a4d-8a23-b17b308d8ba3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6206ddf5-537c-42c8-92bf-917786633ce7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6206ddf5-537c-42c8-92bf-917786633ce7): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (6206ddf5-537c-42c8-92bf-917786633ce7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa070733-7b00-40e3-b74c-8aed41bdaeed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fa070733-7b00-40e3-b74c-8aed41bdaeed): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (fa070733-7b00-40e3-b74c-8aed41bdaeed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f2b84dfb-95b3-40fd-98af-83ccdef296f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f2b84dfb-95b3-40fd-98af-83ccdef296f6): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f2b84dfb-95b3-40fd-98af-83ccdef296f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (911700de-c7ab-49a9-83db-e126e5cef818): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (911700de-c7ab-49a9-83db-e126e5cef818): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (911700de-c7ab-49a9-83db-e126e5cef818): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a4655ee8-a217-4757-a39d-87099d6c4c82): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a4655ee8-a217-4757-a39d-87099d6c4c82): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a4655ee8-a217-4757-a39d-87099d6c4c82): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (73e275d8-1a07-4882-b859-a4154cfb12e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (73e275d8-1a07-4882-b859-a4154cfb12e8): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (73e275d8-1a07-4882-b859-a4154cfb12e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4d2cb273-5aec-4fcc-b06f-138016b63203): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4d2cb273-5aec-4fcc-b06f-138016b63203): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (4d2cb273-5aec-4fcc-b06f-138016b63203): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fb2decbf-7a5a-4e46-a721-48ac6f9da70b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fb2decbf-7a5a-4e46-a721-48ac6f9da70b): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fb2decbf-7a5a-4e46-a721-48ac6f9da70b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42c130c4-a7a3-46eb-a1ac-1c3fb3efaaa7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (42c130c4-a7a3-46eb-a1ac-1c3fb3efaaa7): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (42c130c4-a7a3-46eb-a1ac-1c3fb3efaaa7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dbd8d1a8-386f-4dd7-b04c-f3af6320f076): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dbd8d1a8-386f-4dd7-b04c-f3af6320f076): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (dbd8d1a8-386f-4dd7-b04c-f3af6320f076): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e52e785c-5a07-4646-906f-cb3d8715e638): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e52e785c-5a07-4646-906f-cb3d8715e638): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e52e785c-5a07-4646-906f-cb3d8715e638): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e309ff2e-df97-41e4-8ede-c02ceec8a141): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e309ff2e-df97-41e4-8ede-c02ceec8a141): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (e309ff2e-df97-41e4-8ede-c02ceec8a141): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1c5d687f-fac4-430a-9f30-2ef8cbea98a9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1c5d687f-fac4-430a-9f30-2ef8cbea98a9): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1c5d687f-fac4-430a-9f30-2ef8cbea98a9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c76ddfbf-c798-4475-ad1e-942fc8262107): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c76ddfbf-c798-4475-ad1e-942fc8262107): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (c76ddfbf-c798-4475-ad1e-942fc8262107): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6ffc1b18-b909-4255-a7b5-b7427f9f3fb7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6ffc1b18-b909-4255-a7b5-b7427f9f3fb7): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6ffc1b18-b909-4255-a7b5-b7427f9f3fb7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (af839a9a-21c5-4582-b2c5-8f0c73d12bdd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (af839a9a-21c5-4582-b2c5-8f0c73d12bdd): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (af839a9a-21c5-4582-b2c5-8f0c73d12bdd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fefc883e-cb75-4450-9458-a47015ced620): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fefc883e-cb75-4450-9458-a47015ced620): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fefc883e-cb75-4450-9458-a47015ced620): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cccc16c3-dd70-4542-b145-25adc7f81751): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cccc16c3-dd70-4542-b145-25adc7f81751): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (cccc16c3-dd70-4542-b145-25adc7f81751): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05f96acb-5eb9-432d-9dce-058639c7816f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (05f96acb-5eb9-432d-9dce-058639c7816f): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (05f96acb-5eb9-432d-9dce-058639c7816f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2a9fb68a-f56e-4783-a577-066bd68ca438): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2a9fb68a-f56e-4783-a577-066bd68ca438): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (2a9fb68a-f56e-4783-a577-066bd68ca438): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (feb454ef-86e6-484e-8219-9033474aa556): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (feb454ef-86e6-484e-8219-9033474aa556): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (feb454ef-86e6-484e-8219-9033474aa556): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0270faef-d047-4f4e-9582-ff49078edb6d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0270faef-d047-4f4e-9582-ff49078edb6d): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0270faef-d047-4f4e-9582-ff49078edb6d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c992b670-b16e-4113-ac34-7a73b9ce774d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c992b670-b16e-4113-ac34-7a73b9ce774d): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c992b670-b16e-4113-ac34-7a73b9ce774d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bfa42358-e5a3-4e6a-b4d8-a01bdb8a86df): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bfa42358-e5a3-4e6a-b4d8-a01bdb8a86df): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (bfa42358-e5a3-4e6a-b4d8-a01bdb8a86df): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2ae3bef5-691f-4585-92ac-19bcb996564d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2ae3bef5-691f-4585-92ac-19bcb996564d): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2ae3bef5-691f-4585-92ac-19bcb996564d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b3648f17-814e-476c-813c-17fbe85819d2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b3648f17-814e-476c-813c-17fbe85819d2): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (b3648f17-814e-476c-813c-17fbe85819d2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c90d27f7-28a5-4401-95c2-a43e988211ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c90d27f7-28a5-4401-95c2-a43e988211ba): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c90d27f7-28a5-4401-95c2-a43e988211ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da1d5345-b8f2-44b2-8615-3f5682ceadc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (da1d5345-b8f2-44b2-8615-3f5682ceadc0): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (da1d5345-b8f2-44b2-8615-3f5682ceadc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b35666f2-5088-4b0b-8f19-8d8db41afab9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b35666f2-5088-4b0b-8f19-8d8db41afab9): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (b35666f2-5088-4b0b-8f19-8d8db41afab9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05976197-78d4-4a96-acbd-6b6a1a7d9c3f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (05976197-78d4-4a96-acbd-6b6a1a7d9c3f): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (05976197-78d4-4a96-acbd-6b6a1a7d9c3f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70e12e34-d397-4bc6-8c18-c608edbcd04f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (70e12e34-d397-4bc6-8c18-c608edbcd04f): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (70e12e34-d397-4bc6-8c18-c608edbcd04f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f8d7fb4-fcca-40a0-8412-247a10210d49): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0f8d7fb4-fcca-40a0-8412-247a10210d49): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (0f8d7fb4-fcca-40a0-8412-247a10210d49): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (653c1b62-1d1d-4e5e-a2b0-0d627346e680): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (653c1b62-1d1d-4e5e-a2b0-0d627346e680): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (653c1b62-1d1d-4e5e-a2b0-0d627346e680): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f367050-1654-4404-97b6-d5f52cf2e88d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6f367050-1654-4404-97b6-d5f52cf2e88d): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (6f367050-1654-4404-97b6-d5f52cf2e88d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7d75eab0-d7ad-442a-8a6d-a7ba161cd8e3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7d75eab0-d7ad-442a-8a6d-a7ba161cd8e3): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (7d75eab0-d7ad-442a-8a6d-a7ba161cd8e3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (350e810e-a21b-4d09-bb8c-1628d86f9517): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (350e810e-a21b-4d09-bb8c-1628d86f9517): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (350e810e-a21b-4d09-bb8c-1628d86f9517): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c84d4f05-cc9e-49e3-b202-92879a114b90): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c84d4f05-cc9e-49e3-b202-92879a114b90): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (c84d4f05-cc9e-49e3-b202-92879a114b90): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (313858a5-08f0-4f1a-938b-31e190ec4f78): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (313858a5-08f0-4f1a-938b-31e190ec4f78): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (313858a5-08f0-4f1a-938b-31e190ec4f78): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f208f12-1acb-4e53-b885-e8f89e546cd0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2f208f12-1acb-4e53-b885-e8f89e546cd0): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2f208f12-1acb-4e53-b885-e8f89e546cd0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e9d937f-44b4-46ea-bd0d-091982d7a19e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3e9d937f-44b4-46ea-bd0d-091982d7a19e): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (3e9d937f-44b4-46ea-bd0d-091982d7a19e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2835dfc9-3253-4a5f-a29d-19dc1c2d10f0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2835dfc9-3253-4a5f-a29d-19dc1c2d10f0): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (2835dfc9-3253-4a5f-a29d-19dc1c2d10f0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (60522ad0-71ef-4757-94ac-5ca13752c50c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (60522ad0-71ef-4757-94ac-5ca13752c50c): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (60522ad0-71ef-4757-94ac-5ca13752c50c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ae896f59-0a11-4339-b95b-0d7d020b1a94): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ae896f59-0a11-4339-b95b-0d7d020b1a94): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (ae896f59-0a11-4339-b95b-0d7d020b1a94): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5c8b3988-e3c5-4b63-b093-2d17e114b678): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5c8b3988-e3c5-4b63-b093-2d17e114b678): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (5c8b3988-e3c5-4b63-b093-2d17e114b678): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `refills` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `role_permissions` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `roles` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `branches` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `customer_diagnostics` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `insurance_providers` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `online_backups` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `products` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `purchases` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `purchases` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `received_transfer_details` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `received_transfers` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `sales_details` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `settings` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment_pending` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_adjustment_sessions` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `stock_values` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `transfer_details` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `transfers` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `users` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `user_sessions` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): ALTER TABLE `vendors` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (eb753043-bf91-4d56-8b5d-02e2ce79a647): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eb753043-bf91-4d56-8b5d-02e2ce79a647): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eb753043-bf91-4d56-8b5d-02e2ce79a647): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e5ba9d95-086d-4129-a435-370686e0b7a5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e5ba9d95-086d-4129-a435-370686e0b7a5): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e5ba9d95-086d-4129-a435-370686e0b7a5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4b214738-5f2f-4b2e-8495-2be727b349df): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4b214738-5f2f-4b2e-8495-2be727b349df): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4b214738-5f2f-4b2e-8495-2be727b349df): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b01f450d-8d4e-483f-ab49-60c95211389d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b01f450d-8d4e-483f-ab49-60c95211389d): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (b01f450d-8d4e-483f-ab49-60c95211389d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e68e6327-b93a-4be0-aee0-f648df01b073): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e68e6327-b93a-4be0-aee0-f648df01b073): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e68e6327-b93a-4be0-aee0-f648df01b073): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d36ca6c1-5d8d-44fe-a4fb-1bfc7b18aaae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d36ca6c1-5d8d-44fe-a4fb-1bfc7b18aaae): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (d36ca6c1-5d8d-44fe-a4fb-1bfc7b18aaae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (49922a54-d5cf-4bb2-8003-df52b820f09e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (49922a54-d5cf-4bb2-8003-df52b820f09e): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (49922a54-d5cf-4bb2-8003-df52b820f09e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6181afc7-7851-4bfa-b295-7e0247ac7fb2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6181afc7-7851-4bfa-b295-7e0247ac7fb2): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (6181afc7-7851-4bfa-b295-7e0247ac7fb2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d3759d04-b214-4147-9822-3f46d7dfb5d3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d3759d04-b214-4147-9822-3f46d7dfb5d3): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d3759d04-b214-4147-9822-3f46d7dfb5d3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e6f9c43-b384-417d-9468-064ed2a1dbd0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9e6f9c43-b384-417d-9468-064ed2a1dbd0): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (9e6f9c43-b384-417d-9468-064ed2a1dbd0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d58be1da-41cd-4402-a331-4e195092a18c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d58be1da-41cd-4402-a331-4e195092a18c): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d58be1da-41cd-4402-a331-4e195092a18c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5a98b257-00ea-414c-a656-ce1119309c87): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5a98b257-00ea-414c-a656-ce1119309c87): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (5a98b257-00ea-414c-a656-ce1119309c87): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dc5258fc-24e4-4e26-a7cf-59f2f6abac24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dc5258fc-24e4-4e26-a7cf-59f2f6abac24): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (dc5258fc-24e4-4e26-a7cf-59f2f6abac24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (31d5b83b-1bb4-43e5-80ea-26b472bd85a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (31d5b83b-1bb4-43e5-80ea-26b472bd85a7): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (31d5b83b-1bb4-43e5-80ea-26b472bd85a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (14e15573-bc17-4de9-8d10-084704c72118): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (14e15573-bc17-4de9-8d10-084704c72118): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (14e15573-bc17-4de9-8d10-084704c72118): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b722ff7f-4066-4734-a189-4bc249169a9e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b722ff7f-4066-4734-a189-4bc249169a9e): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (b722ff7f-4066-4734-a189-4bc249169a9e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4120413-986f-4113-8105-bf167cd652ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d4120413-986f-4113-8105-bf167cd652ed): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d4120413-986f-4113-8105-bf167cd652ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (96f40e51-50d5-4432-bec0-76347bf8ae5d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (96f40e51-50d5-4432-bec0-76347bf8ae5d): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (96f40e51-50d5-4432-bec0-76347bf8ae5d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cee44907-a6f4-49e0-bea5-b01af7285eb1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cee44907-a6f4-49e0-bea5-b01af7285eb1): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cee44907-a6f4-49e0-bea5-b01af7285eb1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7f685c91-7911-41f2-9648-77f485ffc8cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7f685c91-7911-41f2-9648-77f485ffc8cf): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (7f685c91-7911-41f2-9648-77f485ffc8cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ba48aae-c105-40ca-b4a7-bd26ea329603): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3ba48aae-c105-40ca-b4a7-bd26ea329603): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3ba48aae-c105-40ca-b4a7-bd26ea329603): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (696e3c1b-94d1-4d2c-a4d5-db28f967f6d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (696e3c1b-94d1-4d2c-a4d5-db28f967f6d6): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (696e3c1b-94d1-4d2c-a4d5-db28f967f6d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (327c6801-81d2-4c70-b137-4d97ae3dbfb8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (327c6801-81d2-4c70-b137-4d97ae3dbfb8): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (327c6801-81d2-4c70-b137-4d97ae3dbfb8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7bf51286-63b7-4101-8ff8-23a66703c648): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7bf51286-63b7-4101-8ff8-23a66703c648): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (7bf51286-63b7-4101-8ff8-23a66703c648): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58cb3f2a-110b-404c-a9ee-c9fed40c74b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (58cb3f2a-110b-404c-a9ee-c9fed40c74b7): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (58cb3f2a-110b-404c-a9ee-c9fed40c74b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (267f69eb-de36-4fa1-8af4-fca79931f2a6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (267f69eb-de36-4fa1-8af4-fca79931f2a6): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (267f69eb-de36-4fa1-8af4-fca79931f2a6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8ffd0a90-a940-45a7-8d33-e46b0739b192): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8ffd0a90-a940-45a7-8d33-e46b0739b192): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (8ffd0a90-a940-45a7-8d33-e46b0739b192): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fdda1e09-3e01-44de-908b-cd28b9a13f7e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fdda1e09-3e01-44de-908b-cd28b9a13f7e): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (fdda1e09-3e01-44de-908b-cd28b9a13f7e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b7564cf9-f39b-4f8e-b0c1-d5166e2a09d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b7564cf9-f39b-4f8e-b0c1-d5166e2a09d7): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b7564cf9-f39b-4f8e-b0c1-d5166e2a09d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (68e1098f-4a97-42ec-bc6f-ac10ae765911): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (68e1098f-4a97-42ec-bc6f-ac10ae765911): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (68e1098f-4a97-42ec-bc6f-ac10ae765911): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cbda8ec7-167b-4722-9d9e-3bacdfc56844): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cbda8ec7-167b-4722-9d9e-3bacdfc56844): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cbda8ec7-167b-4722-9d9e-3bacdfc56844): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2383e0b-f8cb-4839-a4dd-dfc489036283): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c2383e0b-f8cb-4839-a4dd-dfc489036283): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (c2383e0b-f8cb-4839-a4dd-dfc489036283): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12f2f3e5-3895-4f7d-99a7-51df11c92474): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (12f2f3e5-3895-4f7d-99a7-51df11c92474): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (12f2f3e5-3895-4f7d-99a7-51df11c92474): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a087ff1-a48b-4e87-bc06-391be869fe67): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9a087ff1-a48b-4e87-bc06-391be869fe67): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (9a087ff1-a48b-4e87-bc06-391be869fe67): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d47d7f5c-a29f-40ed-aa49-cecb03c5d079): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d47d7f5c-a29f-40ed-aa49-cecb03c5d079): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d47d7f5c-a29f-40ed-aa49-cecb03c5d079): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (323db0dd-5398-4ecf-abce-16fccce9e2aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (323db0dd-5398-4ecf-abce-16fccce9e2aa): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (323db0dd-5398-4ecf-abce-16fccce9e2aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (496eb4da-0b6d-4283-a93e-d027c4c2e1b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (496eb4da-0b6d-4283-a93e-d027c4c2e1b2): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (496eb4da-0b6d-4283-a93e-d027c4c2e1b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b13b869-a216-444a-b48c-1979e5c01540): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1b13b869-a216-444a-b48c-1979e5c01540): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (1b13b869-a216-444a-b48c-1979e5c01540): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (545fac9d-09bf-42ca-8976-75813b828cd1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (545fac9d-09bf-42ca-8976-75813b828cd1): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (545fac9d-09bf-42ca-8976-75813b828cd1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (90d82ef2-dca2-4d32-96c7-3fb51571ea09): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (90d82ef2-dca2-4d32-96c7-3fb51571ea09): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (90d82ef2-dca2-4d32-96c7-3fb51571ea09): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f2cf3d1a-87c3-4352-bff1-5b8d484eaa58): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f2cf3d1a-87c3-4352-bff1-5b8d484eaa58): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (f2cf3d1a-87c3-4352-bff1-5b8d484eaa58): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6a16283-540d-4095-a114-a9bc97524d60): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a6a16283-540d-4095-a114-a9bc97524d60): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (a6a16283-540d-4095-a114-a9bc97524d60): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a80873b4-5642-4ded-a731-637158abb110): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a80873b4-5642-4ded-a731-637158abb110): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (a80873b4-5642-4ded-a731-637158abb110): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70d30cd7-9685-4c44-92ca-0fb4815fc09d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (70d30cd7-9685-4c44-92ca-0fb4815fc09d): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (70d30cd7-9685-4c44-92ca-0fb4815fc09d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b38a92cb-307e-4750-8680-dddf2de23ecd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b38a92cb-307e-4750-8680-dddf2de23ecd): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (b38a92cb-307e-4750-8680-dddf2de23ecd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (43d082a9-ee79-4760-865d-e881bc9ce13e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (43d082a9-ee79-4760-865d-e881bc9ce13e): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (43d082a9-ee79-4760-865d-e881bc9ce13e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5be17337-486b-42c5-9de2-76bd2380103e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5be17337-486b-42c5-9de2-76bd2380103e): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (5be17337-486b-42c5-9de2-76bd2380103e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (59d83714-c735-4452-89f8-f262a4d568ac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (59d83714-c735-4452-89f8-f262a4d568ac): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (59d83714-c735-4452-89f8-f262a4d568ac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0793f78b-f4a5-428b-a36a-7782741cec9b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0793f78b-f4a5-428b-a36a-7782741cec9b): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (0793f78b-f4a5-428b-a36a-7782741cec9b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f01ca8a0-0b1c-4bcb-a73e-80121c4415d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f01ca8a0-0b1c-4bcb-a73e-80121c4415d1): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (f01ca8a0-0b1c-4bcb-a73e-80121c4415d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5a024e5a-9e8c-4f13-bfbd-38cc0b40657d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5a024e5a-9e8c-4f13-bfbd-38cc0b40657d): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (5a024e5a-9e8c-4f13-bfbd-38cc0b40657d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b387394-3cc3-43dd-9d74-1345f831918b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7b387394-3cc3-43dd-9d74-1345f831918b): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (7b387394-3cc3-43dd-9d74-1345f831918b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a655fdd-57ad-4553-ad78-7b92160901b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1a655fdd-57ad-4553-ad78-7b92160901b2): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1a655fdd-57ad-4553-ad78-7b92160901b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dda933ba-d34c-470b-87c3-a3b871c08e22): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dda933ba-d34c-470b-87c3-a3b871c08e22): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (dda933ba-d34c-470b-87c3-a3b871c08e22): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5db7f19-1af2-48d9-a71e-0325dab20c77): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d5db7f19-1af2-48d9-a71e-0325dab20c77): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (d5db7f19-1af2-48d9-a71e-0325dab20c77): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c4fec052-93e8-415e-9a6c-6077f718314c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c4fec052-93e8-415e-9a6c-6077f718314c): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c4fec052-93e8-415e-9a6c-6077f718314c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e8e34953-12c5-4572-939a-7968f8a28a0e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e8e34953-12c5-4572-939a-7968f8a28a0e): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e8e34953-12c5-4572-939a-7968f8a28a0e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ea66ce5-268c-42d1-bc1c-90454c415440): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0ea66ce5-268c-42d1-bc1c-90454c415440): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0ea66ce5-268c-42d1-bc1c-90454c415440): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4067365-3531-46fe-83da-8a3ccaeca7b7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d4067365-3531-46fe-83da-8a3ccaeca7b7): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (d4067365-3531-46fe-83da-8a3ccaeca7b7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b23ed5a1-9c1f-4bda-8f13-ace6db687358): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b23ed5a1-9c1f-4bda-8f13-ace6db687358): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (b23ed5a1-9c1f-4bda-8f13-ace6db687358): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (28e13216-6303-4c98-926d-6e6ec418e874): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (28e13216-6303-4c98-926d-6e6ec418e874): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (28e13216-6303-4c98-926d-6e6ec418e874): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (34c0ccb9-fcc1-4608-8f94-cb40cf77d605): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (34c0ccb9-fcc1-4608-8f94-cb40cf77d605): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (34c0ccb9-fcc1-4608-8f94-cb40cf77d605): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (278e9582-4961-4cfd-9cd7-885f7fa643a2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (278e9582-4961-4cfd-9cd7-885f7fa643a2): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (278e9582-4961-4cfd-9cd7-885f7fa643a2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0e752828-5080-4b22-a595-98ed1d8da417): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0e752828-5080-4b22-a595-98ed1d8da417): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (0e752828-5080-4b22-a595-98ed1d8da417): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f463493a-b3d7-4880-ae6e-e8db29de4197): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f463493a-b3d7-4880-ae6e-e8db29de4197): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (f463493a-b3d7-4880-ae6e-e8db29de4197): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (376e4cdb-2126-4396-abfc-ae9eed37b9e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (376e4cdb-2126-4396-abfc-ae9eed37b9e8): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (376e4cdb-2126-4396-abfc-ae9eed37b9e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (006e1c76-31d6-45c3-9997-f5edbec1f6d8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (006e1c76-31d6-45c3-9997-f5edbec1f6d8): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (006e1c76-31d6-45c3-9997-f5edbec1f6d8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (25af5ed5-551e-4f6d-9e45-cd50801f8eae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (25af5ed5-551e-4f6d-9e45-cd50801f8eae): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (25af5ed5-551e-4f6d-9e45-cd50801f8eae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (65af68d4-1df4-4e74-b915-c8a01aec4247): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (65af68d4-1df4-4e74-b915-c8a01aec4247): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (65af68d4-1df4-4e74-b915-c8a01aec4247): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b974a5a5-2293-4fd9-8733-38e2b8b605d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b974a5a5-2293-4fd9-8733-38e2b8b605d9): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b974a5a5-2293-4fd9-8733-38e2b8b605d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7cd72ca2-3c56-4eaa-a85d-60dcb10e83e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7cd72ca2-3c56-4eaa-a85d-60dcb10e83e4): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (7cd72ca2-3c56-4eaa-a85d-60dcb10e83e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc780fa4-415c-4da7-bf3f-89f867f81d5b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fc780fa4-415c-4da7-bf3f-89f867f81d5b): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fc780fa4-415c-4da7-bf3f-89f867f81d5b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4b3ed1b-b049-4125-a774-056558ec7712): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d4b3ed1b-b049-4125-a774-056558ec7712): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (d4b3ed1b-b049-4125-a774-056558ec7712): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d790fae0-351c-457d-89a3-90f8230b4ed3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d790fae0-351c-457d-89a3-90f8230b4ed3): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (d790fae0-351c-457d-89a3-90f8230b4ed3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a7eae814-42e3-437b-8e1b-96870835c52e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a7eae814-42e3-437b-8e1b-96870835c52e): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a7eae814-42e3-437b-8e1b-96870835c52e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1bf6aa48-8e74-4fed-98e0-cc0b1a8f2d18): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1bf6aa48-8e74-4fed-98e0-cc0b1a8f2d18): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1bf6aa48-8e74-4fed-98e0-cc0b1a8f2d18): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aba41774-bd98-4bc1-9c35-947eae8e9f92): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (aba41774-bd98-4bc1-9c35-947eae8e9f92): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (aba41774-bd98-4bc1-9c35-947eae8e9f92): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39ef2059-7fed-45fb-ae9a-ca9bc8c93398): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (39ef2059-7fed-45fb-ae9a-ca9bc8c93398): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (39ef2059-7fed-45fb-ae9a-ca9bc8c93398): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3091beb8-5c78-47a7-8733-798ed5f35f6e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3091beb8-5c78-47a7-8733-798ed5f35f6e): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (3091beb8-5c78-47a7-8733-798ed5f35f6e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aad79ef1-cec8-4c3e-ab06-c3ed5f628c8c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (aad79ef1-cec8-4c3e-ab06-c3ed5f628c8c): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (aad79ef1-cec8-4c3e-ab06-c3ed5f628c8c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05cddc07-b90f-45a1-9977-9646ad04f0f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (05cddc07-b90f-45a1-9977-9646ad04f0f6): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (05cddc07-b90f-45a1-9977-9646ad04f0f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a9859713-9533-44fc-92a2-c76db7e4ad4f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a9859713-9533-44fc-92a2-c76db7e4ad4f): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a9859713-9533-44fc-92a2-c76db7e4ad4f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (56978574-e51b-4e92-8f11-0543deedd6bc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (56978574-e51b-4e92-8f11-0543deedd6bc): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (56978574-e51b-4e92-8f11-0543deedd6bc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fdaca23e-8946-4c3b-b83b-7cfee4294cee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fdaca23e-8946-4c3b-b83b-7cfee4294cee): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (fdaca23e-8946-4c3b-b83b-7cfee4294cee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a2350f54-331f-4890-aaaf-bb3df08205e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a2350f54-331f-4890-aaaf-bb3df08205e7): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (a2350f54-331f-4890-aaaf-bb3df08205e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b6fafa45-f216-4963-9183-ebddd0258990): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b6fafa45-f216-4963-9183-ebddd0258990): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b6fafa45-f216-4963-9183-ebddd0258990): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4d3cf2d1-27d1-4d56-8dca-3bae5c02aadf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4d3cf2d1-27d1-4d56-8dca-3bae5c02aadf): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (4d3cf2d1-27d1-4d56-8dca-3bae5c02aadf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ee261079-0434-4f27-abca-fc72381f8489): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ee261079-0434-4f27-abca-fc72381f8489): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (ee261079-0434-4f27-abca-fc72381f8489): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3597d44f-cc38-49a8-8c65-ece971665903): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3597d44f-cc38-49a8-8c65-ece971665903): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (3597d44f-cc38-49a8-8c65-ece971665903): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a1cbdd4-7a1d-4cca-ae25-2487d6ae8898): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9a1cbdd4-7a1d-4cca-ae25-2487d6ae8898): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (9a1cbdd4-7a1d-4cca-ae25-2487d6ae8898): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e937ce0a-6604-49b5-9f9d-e717b87447b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e937ce0a-6604-49b5-9f9d-e717b87447b2): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (e937ce0a-6604-49b5-9f9d-e717b87447b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11fdcf81-2346-43de-beb9-3860161af4a6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (11fdcf81-2346-43de-beb9-3860161af4a6): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (11fdcf81-2346-43de-beb9-3860161af4a6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cc18ec3f-a0c8-4bde-ad9f-17431ec60105): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cc18ec3f-a0c8-4bde-ad9f-17431ec60105): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (cc18ec3f-a0c8-4bde-ad9f-17431ec60105): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e9ab7a9c-c92c-4876-83a4-a2081034fd72): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e9ab7a9c-c92c-4876-83a4-a2081034fd72): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (e9ab7a9c-c92c-4876-83a4-a2081034fd72): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7c15dfbd-1fa8-42ed-86b8-087498797810): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7c15dfbd-1fa8-42ed-86b8-087498797810): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (7c15dfbd-1fa8-42ed-86b8-087498797810): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e74b9811-b235-4723-883f-26083ca913e4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e74b9811-b235-4723-883f-26083ca913e4): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (e74b9811-b235-4723-883f-26083ca913e4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (848dfb4e-0cb7-4931-a21f-ec6bd049355a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (848dfb4e-0cb7-4931-a21f-ec6bd049355a): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (848dfb4e-0cb7-4931-a21f-ec6bd049355a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (6bd48d37-e909-466a-9249-47d5117430ad): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`reminders`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (6bd48d37-e909-466a-9249-47d5117430ad): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`reminders`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`reminders`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (e3577bb8-3fbc-41d2-9b3a-1a1d508697a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (e3577bb8-3fbc-41d2-9b3a-1a1d508697a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (b4cca316-604c-4a31-83f3-cfa867aa1d06): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b4cca316-604c-4a31-83f3-cfa867aa1d06): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b4cca316-604c-4a31-83f3-cfa867aa1d06): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (27c9db29-a24b-45aa-83e5-fcd392069d27): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (27c9db29-a24b-45aa-83e5-fcd392069d27): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (27c9db29-a24b-45aa-83e5-fcd392069d27): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3ec2e73-fac6-4427-bd9d-0006cb18f8e8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f3ec2e73-fac6-4427-bd9d-0006cb18f8e8): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f3ec2e73-fac6-4427-bd9d-0006cb18f8e8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (815dec6c-3fcd-49a9-9680-f83592cd97c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (815dec6c-3fcd-49a9-9680-f83592cd97c2): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (815dec6c-3fcd-49a9-9680-f83592cd97c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7b414ebc-09fe-4682-adcb-47598cb1525c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7b414ebc-09fe-4682-adcb-47598cb1525c): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7b414ebc-09fe-4682-adcb-47598cb1525c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05b5e909-4a67-46b4-8f67-578b853f5040): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (05b5e909-4a67-46b4-8f67-578b853f5040): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (05b5e909-4a67-46b4-8f67-578b853f5040): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40d39368-69be-4e44-97f6-e7aaffe48ede): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (40d39368-69be-4e44-97f6-e7aaffe48ede): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (40d39368-69be-4e44-97f6-e7aaffe48ede): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (50fda0d2-3f10-4c55-a87b-1ee1548b4c53): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (50fda0d2-3f10-4c55-a87b-1ee1548b4c53): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (50fda0d2-3f10-4c55-a87b-1ee1548b4c53): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (97dffc7f-b9b8-437a-af43-29cd368366d7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (97dffc7f-b9b8-437a-af43-29cd368366d7): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (97dffc7f-b9b8-437a-af43-29cd368366d7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (026ce95e-6a38-4346-82af-97c213f15909): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (026ce95e-6a38-4346-82af-97c213f15909): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (026ce95e-6a38-4346-82af-97c213f15909): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff519cf8-4aa8-46ae-8cbb-1ef3ef5fb8c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ff519cf8-4aa8-46ae-8cbb-1ef3ef5fb8c4): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ff519cf8-4aa8-46ae-8cbb-1ef3ef5fb8c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e8add419-aad7-4a7a-b300-27b927bf0116): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e8add419-aad7-4a7a-b300-27b927bf0116): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (e8add419-aad7-4a7a-b300-27b927bf0116): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10996464-5252-4dcc-90fe-abda603085d3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (10996464-5252-4dcc-90fe-abda603085d3): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (10996464-5252-4dcc-90fe-abda603085d3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c8cb19d1-713f-4c1d-8e9d-009f050f6ef2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c8cb19d1-713f-4c1d-8e9d-009f050f6ef2): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (c8cb19d1-713f-4c1d-8e9d-009f050f6ef2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (05983001-5fdf-4cf3-9c57-f386565e95bd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (05983001-5fdf-4cf3-9c57-f386565e95bd): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (05983001-5fdf-4cf3-9c57-f386565e95bd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ac7a4264-954b-491b-953e-06de24603a0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ac7a4264-954b-491b-953e-06de24603a0f): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (ac7a4264-954b-491b-953e-06de24603a0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (39f91a55-aa9d-47a7-959b-8dae4626227f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (39f91a55-aa9d-47a7-959b-8dae4626227f): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (39f91a55-aa9d-47a7-959b-8dae4626227f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (85379485-1aa2-4e96-9aef-1026510d0bc5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (85379485-1aa2-4e96-9aef-1026510d0bc5): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (85379485-1aa2-4e96-9aef-1026510d0bc5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (60bc7df5-d569-4321-9256-290c17656668): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (60bc7df5-d569-4321-9256-290c17656668): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (60bc7df5-d569-4321-9256-290c17656668): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e7b9c30d-0504-494a-8978-a0d14eda405d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e7b9c30d-0504-494a-8978-a0d14eda405d): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e7b9c30d-0504-494a-8978-a0d14eda405d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1c178e25-e9a4-4f23-88fe-65c409708c91): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1c178e25-e9a4-4f23-88fe-65c409708c91): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1c178e25-e9a4-4f23-88fe-65c409708c91): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (82873e9b-ffef-4d09-ba6d-215a57f267af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (82873e9b-ffef-4d09-ba6d-215a57f267af): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (82873e9b-ffef-4d09-ba6d-215a57f267af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (66977290-292c-405a-9e92-79f426f44d3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (66977290-292c-405a-9e92-79f426f44d3b): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (66977290-292c-405a-9e92-79f426f44d3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6cdba066-c32a-44d2-a32f-5e95271f29a6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6cdba066-c32a-44d2-a32f-5e95271f29a6): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (6cdba066-c32a-44d2-a32f-5e95271f29a6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (799029bf-75bd-4a0f-8f58-a3ba777eac90): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (799029bf-75bd-4a0f-8f58-a3ba777eac90): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (799029bf-75bd-4a0f-8f58-a3ba777eac90): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f8904c2-fd8e-496f-9322-40bc0a9c2f5f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5f8904c2-fd8e-496f-9322-40bc0a9c2f5f): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (5f8904c2-fd8e-496f-9322-40bc0a9c2f5f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f868d6d-7481-40e0-994e-971e9187a122): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5f868d6d-7481-40e0-994e-971e9187a122): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5f868d6d-7481-40e0-994e-971e9187a122): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8ea6b373-9a48-4e5f-9a0d-ad57126e76db): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8ea6b373-9a48-4e5f-9a0d-ad57126e76db): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (8ea6b373-9a48-4e5f-9a0d-ad57126e76db): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (90496a65-a167-4235-ab19-13e063b9e7e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (90496a65-a167-4235-ab19-13e063b9e7e7): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (90496a65-a167-4235-ab19-13e063b9e7e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0bb00390-373d-4222-a9e1-2a5cc69bc9c9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0bb00390-373d-4222-a9e1-2a5cc69bc9c9): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (0bb00390-373d-4222-a9e1-2a5cc69bc9c9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (78053c29-f83e-4aad-8143-0ec30e037b90): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (78053c29-f83e-4aad-8143-0ec30e037b90): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (78053c29-f83e-4aad-8143-0ec30e037b90): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a0206988-3245-459e-93ae-49b6a840b282): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a0206988-3245-459e-93ae-49b6a840b282): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (a0206988-3245-459e-93ae-49b6a840b282): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (761a07a7-d7c8-46a0-b56d-215657043c17): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (761a07a7-d7c8-46a0-b56d-215657043c17): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (761a07a7-d7c8-46a0-b56d-215657043c17): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f70359f-644c-4446-8373-55800d41dcc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6f70359f-644c-4446-8373-55800d41dcc0): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (6f70359f-644c-4446-8373-55800d41dcc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fe90cc25-39b4-43e9-b496-e26331299898): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fe90cc25-39b4-43e9-b496-e26331299898): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fe90cc25-39b4-43e9-b496-e26331299898): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (56d97a3e-21fe-4d6c-84fe-f144e81e0a9d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (56d97a3e-21fe-4d6c-84fe-f144e81e0a9d): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (56d97a3e-21fe-4d6c-84fe-f144e81e0a9d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cbe1cdfc-8368-47c2-93b1-975adb8b350b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cbe1cdfc-8368-47c2-93b1-975adb8b350b): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (cbe1cdfc-8368-47c2-93b1-975adb8b350b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f79801dc-f642-4aae-87e2-e6be89c83bb4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f79801dc-f642-4aae-87e2-e6be89c83bb4): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (f79801dc-f642-4aae-87e2-e6be89c83bb4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e5617954-4e24-43ed-978b-8016adbc5ca4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e5617954-4e24-43ed-978b-8016adbc5ca4): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e5617954-4e24-43ed-978b-8016adbc5ca4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6fc143e0-7899-4d5c-84e1-6c0158fdb637): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6fc143e0-7899-4d5c-84e1-6c0158fdb637): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (6fc143e0-7899-4d5c-84e1-6c0158fdb637): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa032338-e0b5-4c2c-8a79-d1fe85a2dfdf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fa032338-e0b5-4c2c-8a79-d1fe85a2dfdf): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (fa032338-e0b5-4c2c-8a79-d1fe85a2dfdf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (78eb3b48-a75f-4bd0-aa28-4796407d2ad5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (78eb3b48-a75f-4bd0-aa28-4796407d2ad5): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (78eb3b48-a75f-4bd0-aa28-4796407d2ad5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7894b02e-4527-4220-91a9-c13046c24045): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7894b02e-4527-4220-91a9-c13046c24045): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (7894b02e-4527-4220-91a9-c13046c24045): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3a1f2bb4-f723-409d-a57d-d4b7e3783b76): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3a1f2bb4-f723-409d-a57d-d4b7e3783b76): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (3a1f2bb4-f723-409d-a57d-d4b7e3783b76): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b7cbd7ec-2869-4fe3-9eb6-48ec0e5995a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b7cbd7ec-2869-4fe3-9eb6-48ec0e5995a8): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (b7cbd7ec-2869-4fe3-9eb6-48ec0e5995a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1aef55d5-8a77-471e-9ecc-90e2e2da68ed): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1aef55d5-8a77-471e-9ecc-90e2e2da68ed): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (1aef55d5-8a77-471e-9ecc-90e2e2da68ed): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a82a9182-17dd-4589-b0df-0dc8791ce5e9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a82a9182-17dd-4589-b0df-0dc8791ce5e9): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (a82a9182-17dd-4589-b0df-0dc8791ce5e9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d0b234cc-6629-41d3-b2cc-7dba6c77ff5b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d0b234cc-6629-41d3-b2cc-7dba6c77ff5b): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (d0b234cc-6629-41d3-b2cc-7dba6c77ff5b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9eadc407-10a6-4eab-aa90-f981840e5c70): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9eadc407-10a6-4eab-aa90-f981840e5c70): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (9eadc407-10a6-4eab-aa90-f981840e5c70): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1fbd69cd-64e1-42ea-95e5-9defad0e9412): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1fbd69cd-64e1-42ea-95e5-9defad0e9412): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (1fbd69cd-64e1-42ea-95e5-9defad0e9412): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9309c011-02b3-43d3-8389-a3a48663b759): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9309c011-02b3-43d3-8389-a3a48663b759): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (9309c011-02b3-43d3-8389-a3a48663b759): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (18895320-2653-4ee1-b6d8-ca92d782794c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (18895320-2653-4ee1-b6d8-ca92d782794c): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (18895320-2653-4ee1-b6d8-ca92d782794c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1c6b10cf-2ba5-4839-94ae-cbce9fd2eec6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1c6b10cf-2ba5-4839-94ae-cbce9fd2eec6): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1c6b10cf-2ba5-4839-94ae-cbce9fd2eec6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d410618a-5292-4b61-90cf-495f1568425c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d410618a-5292-4b61-90cf-495f1568425c): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (d410618a-5292-4b61-90cf-495f1568425c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d3f8ed02-556a-44ba-b9ea-710e91ab3b80): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d3f8ed02-556a-44ba-b9ea-710e91ab3b80): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (d3f8ed02-556a-44ba-b9ea-710e91ab3b80): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c04ee212-dd2a-4ac5-b69a-b262e2ba169a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c04ee212-dd2a-4ac5-b69a-b262e2ba169a): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c04ee212-dd2a-4ac5-b69a-b262e2ba169a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (52abb435-5ddd-4750-8235-912121297bce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (52abb435-5ddd-4750-8235-912121297bce): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (52abb435-5ddd-4750-8235-912121297bce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (48582928-c456-4580-88d8-9d4a93c2fc0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (48582928-c456-4580-88d8-9d4a93c2fc0f): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (48582928-c456-4580-88d8-9d4a93c2fc0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f2d6b2e0-e847-43be-a0aa-cad5c03e5e2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f2d6b2e0-e847-43be-a0aa-cad5c03e5e2f): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (f2d6b2e0-e847-43be-a0aa-cad5c03e5e2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8a1a0871-9b90-44c1-abdd-c91163c78e57): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8a1a0871-9b90-44c1-abdd-c91163c78e57): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (8a1a0871-9b90-44c1-abdd-c91163c78e57): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b18e4ace-6738-4c18-8402-feac05863e32): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b18e4ace-6738-4c18-8402-feac05863e32): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b18e4ace-6738-4c18-8402-feac05863e32): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c192ce31-c9ab-4bb7-ab6a-1baeb1e134a6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c192ce31-c9ab-4bb7-ab6a-1baeb1e134a6): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (c192ce31-c9ab-4bb7-ab6a-1baeb1e134a6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e4dc8981-6804-4c24-9f4e-1366767e3464): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e4dc8981-6804-4c24-9f4e-1366767e3464): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (e4dc8981-6804-4c24-9f4e-1366767e3464): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e3f6c9a0-8ee5-4d61-9dca-f5740765b940): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e3f6c9a0-8ee5-4d61-9dca-f5740765b940): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e3f6c9a0-8ee5-4d61-9dca-f5740765b940): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ebf2014-47ae-4660-ac86-cd10f1fbc25a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0ebf2014-47ae-4660-ac86-cd10f1fbc25a): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (0ebf2014-47ae-4660-ac86-cd10f1fbc25a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15634535-911f-4fc9-baf5-4f80febbb95b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (15634535-911f-4fc9-baf5-4f80febbb95b): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (15634535-911f-4fc9-baf5-4f80febbb95b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (be71dcbd-a909-4c11-a6b3-d312cc959221): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (be71dcbd-a909-4c11-a6b3-d312cc959221): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (be71dcbd-a909-4c11-a6b3-d312cc959221): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4346f91a-61b1-41f8-b23f-a972d2a165f8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4346f91a-61b1-41f8-b23f-a972d2a165f8): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4346f91a-61b1-41f8-b23f-a972d2a165f8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a39f3258-40b2-4280-94a4-a1fb18b21d93): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a39f3258-40b2-4280-94a4-a1fb18b21d93): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (a39f3258-40b2-4280-94a4-a1fb18b21d93): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (220ae5e1-4e90-4388-95d1-aba4622c8f92): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (220ae5e1-4e90-4388-95d1-aba4622c8f92): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (220ae5e1-4e90-4388-95d1-aba4622c8f92): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1fb802f5-bac2-4480-9c78-da8fe804755e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1fb802f5-bac2-4480-9c78-da8fe804755e): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (1fb802f5-bac2-4480-9c78-da8fe804755e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f633f4fe-6c21-4550-99e1-13b018044626): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f633f4fe-6c21-4550-99e1-13b018044626): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f633f4fe-6c21-4550-99e1-13b018044626): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7c150f70-1c8d-4b0b-97ab-b97cb8fce790): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7c150f70-1c8d-4b0b-97ab-b97cb8fce790): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (7c150f70-1c8d-4b0b-97ab-b97cb8fce790): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (78157b24-41da-4c2c-9159-1e0f8a291e1e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (78157b24-41da-4c2c-9159-1e0f8a291e1e): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (78157b24-41da-4c2c-9159-1e0f8a291e1e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9decadd9-23fd-4925-b3e7-778343ff980b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9decadd9-23fd-4925-b3e7-778343ff980b): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9decadd9-23fd-4925-b3e7-778343ff980b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (43f8d9fe-d8fa-4478-ab69-d9c62a7ba8c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (43f8d9fe-d8fa-4478-ab69-d9c62a7ba8c2): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (43f8d9fe-d8fa-4478-ab69-d9c62a7ba8c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (50a4ce21-2234-4b22-9280-9a4a660ed840): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (50a4ce21-2234-4b22-9280-9a4a660ed840): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (50a4ce21-2234-4b22-9280-9a4a660ed840): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ad2671c-7e40-4eb9-92b3-43469381a21f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3ad2671c-7e40-4eb9-92b3-43469381a21f): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (3ad2671c-7e40-4eb9-92b3-43469381a21f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (da9206e9-6648-4a4d-80fc-facb5b8463de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (da9206e9-6648-4a4d-80fc-facb5b8463de): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (da9206e9-6648-4a4d-80fc-facb5b8463de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f013edae-2059-4f97-adad-3d802087ca58): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f013edae-2059-4f97-adad-3d802087ca58): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f013edae-2059-4f97-adad-3d802087ca58): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f7abe39d-08ab-453b-a212-ac6ce1a4d662): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f7abe39d-08ab-453b-a212-ac6ce1a4d662): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f7abe39d-08ab-453b-a212-ac6ce1a4d662): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8a668f41-414f-4c7f-9783-ad8a0154e28b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8a668f41-414f-4c7f-9783-ad8a0154e28b): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (8a668f41-414f-4c7f-9783-ad8a0154e28b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a7a218f-c3db-42e6-b215-2f5a8499973d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4a7a218f-c3db-42e6-b215-2f5a8499973d): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (4a7a218f-c3db-42e6-b215-2f5a8499973d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7d29fe3e-be86-40da-a245-cb172715188e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7d29fe3e-be86-40da-a245-cb172715188e): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (7d29fe3e-be86-40da-a245-cb172715188e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c88bd394-3432-4837-bfab-e3ceb97e1a24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c88bd394-3432-4837-bfab-e3ceb97e1a24): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (c88bd394-3432-4837-bfab-e3ceb97e1a24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a29c9b02-5949-4edf-8d62-26f92f67d5db): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a29c9b02-5949-4edf-8d62-26f92f67d5db): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a29c9b02-5949-4edf-8d62-26f92f67d5db): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3695c167-d3fd-4426-b3d7-bd9b7d17da88): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3695c167-d3fd-4426-b3d7-bd9b7d17da88): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (3695c167-d3fd-4426-b3d7-bd9b7d17da88): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c683d445-87d2-4e9e-9303-1ceee3088020): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c683d445-87d2-4e9e-9303-1ceee3088020): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (c683d445-87d2-4e9e-9303-1ceee3088020): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ec882bc3-100b-4efd-8850-3e4a5b029a39): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ec882bc3-100b-4efd-8850-3e4a5b029a39): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (ec882bc3-100b-4efd-8850-3e4a5b029a39): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (819b3fad-a49c-4c62-b5d6-48c781826c49): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (819b3fad-a49c-4c62-b5d6-48c781826c49): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (819b3fad-a49c-4c62-b5d6-48c781826c49): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (919ec007-b039-4ea4-89ea-1ea18fed692e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (919ec007-b039-4ea4-89ea-1ea18fed692e): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (919ec007-b039-4ea4-89ea-1ea18fed692e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b840e88b-e6c2-4a8f-b09d-8515f77dad93): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b840e88b-e6c2-4a8f-b09d-8515f77dad93): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b840e88b-e6c2-4a8f-b09d-8515f77dad93): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (57558fee-0ff8-47dc-b51b-623562788277): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (57558fee-0ff8-47dc-b51b-623562788277): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (57558fee-0ff8-47dc-b51b-623562788277): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bb38ab10-4c15-4d2c-96da-228017aec48d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bb38ab10-4c15-4d2c-96da-228017aec48d): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (bb38ab10-4c15-4d2c-96da-228017aec48d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (02f82963-c74a-4174-8236-f2ceb6672f51): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (02f82963-c74a-4174-8236-f2ceb6672f51): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (02f82963-c74a-4174-8236-f2ceb6672f51): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e16b189c-7803-4460-915f-3bfb251f6cfc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e16b189c-7803-4460-915f-3bfb251f6cfc): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (e16b189c-7803-4460-915f-3bfb251f6cfc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42cf9f00-950c-409a-a89b-48f99d3f9f6f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (42cf9f00-950c-409a-a89b-48f99d3f9f6f): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (42cf9f00-950c-409a-a89b-48f99d3f9f6f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (86cf7684-e69f-41c0-b891-e5f4f0b60a53): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (86cf7684-e69f-41c0-b891-e5f4f0b60a53): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (85c3b803-3407-4006-bb66-2ae130889771): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (85c3b803-3407-4006-bb66-2ae130889771): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (85c3b803-3407-4006-bb66-2ae130889771): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (449f2f17-6c39-4ffb-9510-78b69883282a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (449f2f17-6c39-4ffb-9510-78b69883282a): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (449f2f17-6c39-4ffb-9510-78b69883282a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5349b4fb-2826-4e46-a035-e3b87cd68d0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5349b4fb-2826-4e46-a035-e3b87cd68d0f): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5349b4fb-2826-4e46-a035-e3b87cd68d0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d904ad38-4043-4e4d-8f1f-9c9e6ada1746): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d904ad38-4043-4e4d-8f1f-9c9e6ada1746): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (d904ad38-4043-4e4d-8f1f-9c9e6ada1746): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b88897c0-ece3-4142-8e90-aaf94d059080): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b88897c0-ece3-4142-8e90-aaf94d059080): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b88897c0-ece3-4142-8e90-aaf94d059080): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4d4f59c-f525-4f01-b102-4bbb8a50218e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d4d4f59c-f525-4f01-b102-4bbb8a50218e): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (d4d4f59c-f525-4f01-b102-4bbb8a50218e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (53ae1dae-9d8e-4c01-a604-00cdb1435cfa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (53ae1dae-9d8e-4c01-a604-00cdb1435cfa): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (53ae1dae-9d8e-4c01-a604-00cdb1435cfa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d189915c-3488-4193-bbfe-49535a8d6066): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d189915c-3488-4193-bbfe-49535a8d6066): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (d189915c-3488-4193-bbfe-49535a8d6066): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b450adc2-4a67-40ff-8f8d-5db6bced8f6c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b450adc2-4a67-40ff-8f8d-5db6bced8f6c): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b450adc2-4a67-40ff-8f8d-5db6bced8f6c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (21661fd9-5966-41ca-a0cc-f960e10653d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (21661fd9-5966-41ca-a0cc-f960e10653d1): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (21661fd9-5966-41ca-a0cc-f960e10653d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ab8a4c88-c25d-48d3-bf03-795f54fdacd2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ab8a4c88-c25d-48d3-bf03-795f54fdacd2): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ab8a4c88-c25d-48d3-bf03-795f54fdacd2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a1f7024-3a9f-493f-be29-ecb61ca8f566): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4a1f7024-3a9f-493f-be29-ecb61ca8f566): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (4a1f7024-3a9f-493f-be29-ecb61ca8f566): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d7f94ca-4014-46cc-af73-c6ff793f8724): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1d7f94ca-4014-46cc-af73-c6ff793f8724): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (1d7f94ca-4014-46cc-af73-c6ff793f8724): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f768a1c-c20a-4c7d-a4a5-4caa9c268d8c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3f768a1c-c20a-4c7d-a4a5-4caa9c268d8c): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (3f768a1c-c20a-4c7d-a4a5-4caa9c268d8c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2c9d2d7e-639c-4450-9092-7b719c1602af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2c9d2d7e-639c-4450-9092-7b719c1602af): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (2c9d2d7e-639c-4450-9092-7b719c1602af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (11415923-58f6-4f22-a0b6-785812fdfa5d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (11415923-58f6-4f22-a0b6-785812fdfa5d): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (11415923-58f6-4f22-a0b6-785812fdfa5d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a65b1f2f-d338-461b-901c-8ef9621cecf5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a65b1f2f-d338-461b-901c-8ef9621cecf5): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a65b1f2f-d338-461b-901c-8ef9621cecf5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (314092d5-5718-4987-9443-bd18a8f53df8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (314092d5-5718-4987-9443-bd18a8f53df8): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (314092d5-5718-4987-9443-bd18a8f53df8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7252785f-1369-4643-89f7-8b3ee92f443d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7252785f-1369-4643-89f7-8b3ee92f443d): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7252785f-1369-4643-89f7-8b3ee92f443d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1c9b1da-fada-4031-a250-e498265b34a2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e1c9b1da-fada-4031-a250-e498265b34a2): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (e1c9b1da-fada-4031-a250-e498265b34a2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ede21ece-c85e-443a-8098-440a6ffe0cee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ede21ece-c85e-443a-8098-440a6ffe0cee): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ede21ece-c85e-443a-8098-440a6ffe0cee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7499089f-764c-4015-81c0-7fb86b7f5dda): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7499089f-764c-4015-81c0-7fb86b7f5dda): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7499089f-764c-4015-81c0-7fb86b7f5dda): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5095181f-400f-4039-a6db-1648914f5113): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5095181f-400f-4039-a6db-1648914f5113): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (5095181f-400f-4039-a6db-1648914f5113): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2a09ab3c-9927-4418-ac3b-649a6e6ae35e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2a09ab3c-9927-4418-ac3b-649a6e6ae35e): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (2a09ab3c-9927-4418-ac3b-649a6e6ae35e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f9941d38-fed8-4786-be2e-8b7573423026): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f9941d38-fed8-4786-be2e-8b7573423026): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f9941d38-fed8-4786-be2e-8b7573423026): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7f94b2b4-9607-4ee8-97a7-8afe26bfd3b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7f94b2b4-9607-4ee8-97a7-8afe26bfd3b4): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (7f94b2b4-9607-4ee8-97a7-8afe26bfd3b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (306d1e16-1aea-4644-8b1d-d536238a62a2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (306d1e16-1aea-4644-8b1d-d536238a62a2): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (306d1e16-1aea-4644-8b1d-d536238a62a2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a1cf681f-a524-402a-9c3b-33b9305cc656): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a1cf681f-a524-402a-9c3b-33b9305cc656): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (a1cf681f-a524-402a-9c3b-33b9305cc656): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9feed0cd-c589-484b-80d7-b4a694729386): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9feed0cd-c589-484b-80d7-b4a694729386): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9feed0cd-c589-484b-80d7-b4a694729386): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (019f9f41-4a38-4761-952b-be98e1e8a7a7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (019f9f41-4a38-4761-952b-be98e1e8a7a7): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (019f9f41-4a38-4761-952b-be98e1e8a7a7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (30310596-a35c-4ffa-a9d7-2b5941859640): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (30310596-a35c-4ffa-a9d7-2b5941859640): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (30310596-a35c-4ffa-a9d7-2b5941859640): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4fab3a12-c174-4d8f-9a74-8f0bac57f9f6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4fab3a12-c174-4d8f-9a74-8f0bac57f9f6): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (4fab3a12-c174-4d8f-9a74-8f0bac57f9f6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (21698150-2a54-4916-b1b8-2179ad973d8c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (21698150-2a54-4916-b1b8-2179ad973d8c): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (21698150-2a54-4916-b1b8-2179ad973d8c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1c7cdf13-59c0-4f35-8b84-0f152d631612): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1c7cdf13-59c0-4f35-8b84-0f152d631612): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (1c7cdf13-59c0-4f35-8b84-0f152d631612): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5695b964-87b0-46a5-a78a-6380852862c5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5695b964-87b0-46a5-a78a-6380852862c5): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5695b964-87b0-46a5-a78a-6380852862c5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (69171881-0e6c-4d0a-b554-eb7d99230be1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (69171881-0e6c-4d0a-b554-eb7d99230be1): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (69171881-0e6c-4d0a-b554-eb7d99230be1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ffe0df8d-6798-468c-86da-924c06c97634): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ffe0df8d-6798-468c-86da-924c06c97634): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (ffe0df8d-6798-468c-86da-924c06c97634): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cefdf9ba-64cb-4b24-816b-c2644345b86e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cefdf9ba-64cb-4b24-816b-c2644345b86e): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (cefdf9ba-64cb-4b24-816b-c2644345b86e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f9c5e52a-4b87-4669-9b82-b8152b634454): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f9c5e52a-4b87-4669-9b82-b8152b634454): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f9c5e52a-4b87-4669-9b82-b8152b634454): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c33f8430-f708-49f2-af0d-3d837d428569): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c33f8430-f708-49f2-af0d-3d837d428569): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (c33f8430-f708-49f2-af0d-3d837d428569): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a90b6197-946b-4537-b12f-b5c1ae56f29b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a90b6197-946b-4537-b12f-b5c1ae56f29b): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (a90b6197-946b-4537-b12f-b5c1ae56f29b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1a0e5276-b636-4f4a-8c20-85a14bdf0435): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1a0e5276-b636-4f4a-8c20-85a14bdf0435): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (1a0e5276-b636-4f4a-8c20-85a14bdf0435): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8ac176a7-dff9-460d-bc9f-aebd61b8a2c3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8ac176a7-dff9-460d-bc9f-aebd61b8a2c3): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (8ac176a7-dff9-460d-bc9f-aebd61b8a2c3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (15a87cc0-77bc-4372-8cc4-367947b5c32b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (15a87cc0-77bc-4372-8cc4-367947b5c32b): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (15a87cc0-77bc-4372-8cc4-367947b5c32b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (809ee554-7a03-467f-a4ee-e255274fd829): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (809ee554-7a03-467f-a4ee-e255274fd829): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (809ee554-7a03-467f-a4ee-e255274fd829): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b6d93ba-ab7f-4fe1-82ea-8e4fa550033f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0b6d93ba-ab7f-4fe1-82ea-8e4fa550033f): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (0b6d93ba-ab7f-4fe1-82ea-8e4fa550033f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7c0e8f54-f3aa-4e23-b948-f5c46df44682): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7c0e8f54-f3aa-4e23-b948-f5c46df44682): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (7c0e8f54-f3aa-4e23-b948-f5c46df44682): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ec242d6-6622-41e5-93cc-c98524358a16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3ec242d6-6622-41e5-93cc-c98524358a16): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (3ec242d6-6622-41e5-93cc-c98524358a16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (12dc531e-ff69-4959-b759-29b9c4b5cbf0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (12dc531e-ff69-4959-b759-29b9c4b5cbf0): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (12dc531e-ff69-4959-b759-29b9c4b5cbf0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ba87b0d6-58c4-4c6a-b8cd-a3472dd0da7e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ba87b0d6-58c4-4c6a-b8cd-a3472dd0da7e): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (ba87b0d6-58c4-4c6a-b8cd-a3472dd0da7e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (079b5524-e7b1-440f-82d8-29dbfacdc312): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (079b5524-e7b1-440f-82d8-29dbfacdc312): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (079b5524-e7b1-440f-82d8-29dbfacdc312): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e0436f4-3c46-4eef-a87f-3100428ce0b4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3e0436f4-3c46-4eef-a87f-3100428ce0b4): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (3e0436f4-3c46-4eef-a87f-3100428ce0b4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (416dba10-5271-42e6-8170-18266c0c10f8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (416dba10-5271-42e6-8170-18266c0c10f8): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (416dba10-5271-42e6-8170-18266c0c10f8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ea7b563d-35dc-46a7-8608-4f6343dca84c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ea7b563d-35dc-46a7-8608-4f6343dca84c): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (ea7b563d-35dc-46a7-8608-4f6343dca84c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (53943f94-84b0-4023-83a7-71b5e33342e9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (53943f94-84b0-4023-83a7-71b5e33342e9): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (53943f94-84b0-4023-83a7-71b5e33342e9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b0983cbe-eeb6-4a9d-9b82-907406351ef3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b0983cbe-eeb6-4a9d-9b82-907406351ef3): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (b0983cbe-eeb6-4a9d-9b82-907406351ef3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eafe04eb-65fe-418b-8d01-6880718cd6ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eafe04eb-65fe-418b-8d01-6880718cd6ca): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (eafe04eb-65fe-418b-8d01-6880718cd6ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (59f2dfe2-b79b-482e-82f4-29d564edcde3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (59f2dfe2-b79b-482e-82f4-29d564edcde3): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (59f2dfe2-b79b-482e-82f4-29d564edcde3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8278be9f-9406-4dcc-96fd-03708773b9a8): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8278be9f-9406-4dcc-96fd-03708773b9a8): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (8278be9f-9406-4dcc-96fd-03708773b9a8): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b05844d-b325-48ea-8bd2-ea13c3c02d65): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2b05844d-b325-48ea-8bd2-ea13c3c02d65): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (2b05844d-b325-48ea-8bd2-ea13c3c02d65): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c63a42a7-a09d-4a92-bf2a-b9330796539b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c63a42a7-a09d-4a92-bf2a-b9330796539b): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c63a42a7-a09d-4a92-bf2a-b9330796539b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (18fa5500-9608-41fb-936c-6b6013752fbf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (18fa5500-9608-41fb-936c-6b6013752fbf): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (18fa5500-9608-41fb-936c-6b6013752fbf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b0e4d25-5221-4119-b88e-0bba8070a090): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2b0e4d25-5221-4119-b88e-0bba8070a090): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (2b0e4d25-5221-4119-b88e-0bba8070a090): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (680d2729-0311-40d4-9e98-d9a4883344ee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (680d2729-0311-40d4-9e98-d9a4883344ee): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (680d2729-0311-40d4-9e98-d9a4883344ee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (36ce0348-820c-4271-b8ac-96a843a94acc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (36ce0348-820c-4271-b8ac-96a843a94acc): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (36ce0348-820c-4271-b8ac-96a843a94acc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (73c19839-d747-4843-af85-de0426e57ef5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (73c19839-d747-4843-af85-de0426e57ef5): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (73c19839-d747-4843-af85-de0426e57ef5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c77d2be3-70cb-4e54-949d-8a89e31840aa): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c77d2be3-70cb-4e54-949d-8a89e31840aa): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (c77d2be3-70cb-4e54-949d-8a89e31840aa): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (870094f5-7c92-4311-b2b1-9f6a9b88cd14): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (870094f5-7c92-4311-b2b1-9f6a9b88cd14): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (870094f5-7c92-4311-b2b1-9f6a9b88cd14): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (53d1af40-c7f7-4742-b03c-01507f1d6252): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (53d1af40-c7f7-4742-b03c-01507f1d6252): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (53d1af40-c7f7-4742-b03c-01507f1d6252): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a1b333b8-8146-4c4c-a079-1f0c12940068): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a1b333b8-8146-4c4c-a079-1f0c12940068): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (a1b333b8-8146-4c4c-a079-1f0c12940068): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (749e69b8-6e37-4032-bf96-e804c7481b09): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (749e69b8-6e37-4032-bf96-e804c7481b09): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (749e69b8-6e37-4032-bf96-e804c7481b09): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0f4cb183-5376-43e7-8ab7-b53ee595d4be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0f4cb183-5376-43e7-8ab7-b53ee595d4be): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0f4cb183-5376-43e7-8ab7-b53ee595d4be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e15b85f9-42d3-452a-a054-891d8b388b56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e15b85f9-42d3-452a-a054-891d8b388b56): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (e15b85f9-42d3-452a-a054-891d8b388b56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c158512e-1c81-43c6-a13a-2de4387ac690): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c158512e-1c81-43c6-a13a-2de4387ac690): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c158512e-1c81-43c6-a13a-2de4387ac690): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fc027bf-1a6c-4b46-8acc-0d1a9c40fd69): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7fc027bf-1a6c-4b46-8acc-0d1a9c40fd69): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7fc027bf-1a6c-4b46-8acc-0d1a9c40fd69): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f09bb4ce-5182-4a9a-89e2-ba20c83fd56a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f09bb4ce-5182-4a9a-89e2-ba20c83fd56a): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (f09bb4ce-5182-4a9a-89e2-ba20c83fd56a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7858fd62-3d2a-4ab1-88b2-729f94389a1c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7858fd62-3d2a-4ab1-88b2-729f94389a1c): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (7858fd62-3d2a-4ab1-88b2-729f94389a1c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb086390-c01e-4799-84e1-6d80ae998346): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eb086390-c01e-4799-84e1-6d80ae998346): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (eb086390-c01e-4799-84e1-6d80ae998346): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9a6e0c8f-47eb-494d-b90e-8d63d780d990): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9a6e0c8f-47eb-494d-b90e-8d63d780d990): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (9a6e0c8f-47eb-494d-b90e-8d63d780d990): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ab1fcf86-04fc-4535-8484-e11744c24fac): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ab1fcf86-04fc-4535-8484-e11744c24fac): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ab1fcf86-04fc-4535-8484-e11744c24fac): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (685dcd97-a2fe-476f-8f48-b368250f4647): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (685dcd97-a2fe-476f-8f48-b368250f4647): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (685dcd97-a2fe-476f-8f48-b368250f4647): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (633fd586-2cbf-44b3-aeb8-8c97d3b64b26): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (633fd586-2cbf-44b3-aeb8-8c97d3b64b26): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (633fd586-2cbf-44b3-aeb8-8c97d3b64b26): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (095c1c0c-a636-4eb6-9bc6-e3ca8405bf9b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (095c1c0c-a636-4eb6-9bc6-e3ca8405bf9b): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (095c1c0c-a636-4eb6-9bc6-e3ca8405bf9b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (19fe1f0f-9c13-4797-80cf-1922cc013dc7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (19fe1f0f-9c13-4797-80cf-1922cc013dc7): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (19fe1f0f-9c13-4797-80cf-1922cc013dc7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f9db478f-4e83-4226-a401-2d8d786bd03e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f9db478f-4e83-4226-a401-2d8d786bd03e): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (f9db478f-4e83-4226-a401-2d8d786bd03e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (49400a92-a60a-4cbf-9b1a-2d170811c4f9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (49400a92-a60a-4cbf-9b1a-2d170811c4f9): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (49400a92-a60a-4cbf-9b1a-2d170811c4f9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa8760c6-50ef-40ef-ba22-02409e33ccfd): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fa8760c6-50ef-40ef-ba22-02409e33ccfd): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (fa8760c6-50ef-40ef-ba22-02409e33ccfd): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e0e73557-1c0f-4aca-8f73-8e8a84020831): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e0e73557-1c0f-4aca-8f73-8e8a84020831): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (e0e73557-1c0f-4aca-8f73-8e8a84020831): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c872ef8e-c807-4945-b8cb-6cec3473c400): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c872ef8e-c807-4945-b8cb-6cec3473c400): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (c872ef8e-c807-4945-b8cb-6cec3473c400): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b41d2a7e-2405-400d-9010-71577ec5721b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b41d2a7e-2405-400d-9010-71577ec5721b): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (b41d2a7e-2405-400d-9010-71577ec5721b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3f7e5f47-6b0d-4a65-9159-ffc46dc965c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3f7e5f47-6b0d-4a65-9159-ffc46dc965c4): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (3f7e5f47-6b0d-4a65-9159-ffc46dc965c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3ab1c51e-0831-4881-b059-dad0d5af1f1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3ab1c51e-0831-4881-b059-dad0d5af1f1f): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3ab1c51e-0831-4881-b059-dad0d5af1f1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9318856b-e03a-44e5-aff9-b10e480d8c47): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9318856b-e03a-44e5-aff9-b10e480d8c47): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (9318856b-e03a-44e5-aff9-b10e480d8c47): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9dae124f-4984-49f5-bcbc-1774ee6cdbd4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9dae124f-4984-49f5-bcbc-1774ee6cdbd4): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (9dae124f-4984-49f5-bcbc-1774ee6cdbd4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (47857d89-681c-47d7-9ccf-023f3f19620e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (47857d89-681c-47d7-9ccf-023f3f19620e): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (47857d89-681c-47d7-9ccf-023f3f19620e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a8429588-f965-4076-b626-e6b451b268b6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a8429588-f965-4076-b626-e6b451b268b6): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (a8429588-f965-4076-b626-e6b451b268b6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f01fc250-d52e-4975-8563-03f058448425): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f01fc250-d52e-4975-8563-03f058448425): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (f01fc250-d52e-4975-8563-03f058448425): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `received_transfer_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `received_transfers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `sales` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `sales_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `settings` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `stock_adjustment` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `stock_adjustment_pending` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `stock_adjustment_sessions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `stock_values` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `transfer_details` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `transfers` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `users` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `user_sessions` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): ALTER TABLE `vendors` ADD `updatedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (6eda5c39-6474-427c-9ac9-a3233ee67586): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (e3885057-3bbf-47d5-b7a4-b908c6095270): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (e3885057-3bbf-47d5-b7a4-b908c6095270): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (7eace2cc-b579-4691-b274-2ae2017b5e9b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7eace2cc-b579-4691-b274-2ae2017b5e9b): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7eace2cc-b579-4691-b274-2ae2017b5e9b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5abf7e63-1fc9-4629-934a-01fb4e843da7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5abf7e63-1fc9-4629-934a-01fb4e843da7): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5abf7e63-1fc9-4629-934a-01fb4e843da7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a4dfee4b-c299-4798-a24d-3c6529b71781): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a4dfee4b-c299-4798-a24d-3c6529b71781): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a4dfee4b-c299-4798-a24d-3c6529b71781): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6f85404e-5d6f-4384-a8be-1d6e70a5f49b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6f85404e-5d6f-4384-a8be-1d6e70a5f49b): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (6f85404e-5d6f-4384-a8be-1d6e70a5f49b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (acd97fe6-7730-4cc7-8497-d5968ff30993): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (acd97fe6-7730-4cc7-8497-d5968ff30993): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (acd97fe6-7730-4cc7-8497-d5968ff30993): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (31345c13-cd51-46b3-8d5e-ca6193bf0bcb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (31345c13-cd51-46b3-8d5e-ca6193bf0bcb): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (31345c13-cd51-46b3-8d5e-ca6193bf0bcb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6c643cfc-79fa-4584-92c2-8fadee443dde): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6c643cfc-79fa-4584-92c2-8fadee443dde): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (6c643cfc-79fa-4584-92c2-8fadee443dde): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (231c613d-ae8d-4eb8-9fc4-d747679739ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (231c613d-ae8d-4eb8-9fc4-d747679739ba): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (231c613d-ae8d-4eb8-9fc4-d747679739ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f23fd24e-1803-4dac-ac05-7958d78ebf96): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f23fd24e-1803-4dac-ac05-7958d78ebf96): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f23fd24e-1803-4dac-ac05-7958d78ebf96): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2a6d5888-f4c3-4003-b365-73d84663ebf1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2a6d5888-f4c3-4003-b365-73d84663ebf1): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (2a6d5888-f4c3-4003-b365-73d84663ebf1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (afcccafe-01e0-4937-9f84-d57bb17d4dca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (afcccafe-01e0-4937-9f84-d57bb17d4dca): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (afcccafe-01e0-4937-9f84-d57bb17d4dca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (42184cff-d0ad-45ba-bc40-81c9da73eda0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (42184cff-d0ad-45ba-bc40-81c9da73eda0): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (42184cff-d0ad-45ba-bc40-81c9da73eda0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (70b627de-82be-430f-8aec-590b08637034): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (70b627de-82be-430f-8aec-590b08637034): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (70b627de-82be-430f-8aec-590b08637034): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bacc4bb2-9210-49b8-a0a2-c1a86ff1d382): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bacc4bb2-9210-49b8-a0a2-c1a86ff1d382): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (bacc4bb2-9210-49b8-a0a2-c1a86ff1d382): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (773e577d-6577-4086-b741-8a2e2d9c2d5b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (773e577d-6577-4086-b741-8a2e2d9c2d5b): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (773e577d-6577-4086-b741-8a2e2d9c2d5b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (942ac25b-fd5c-450b-955f-66bd94779896): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (942ac25b-fd5c-450b-955f-66bd94779896): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (942ac25b-fd5c-450b-955f-66bd94779896): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (25d04bad-01a4-4bc9-9e27-9aae799efe0b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (25d04bad-01a4-4bc9-9e27-9aae799efe0b): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (25d04bad-01a4-4bc9-9e27-9aae799efe0b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0c922c5e-65a9-4d22-9eae-857f0e0dd22a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0c922c5e-65a9-4d22-9eae-857f0e0dd22a): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (0c922c5e-65a9-4d22-9eae-857f0e0dd22a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (87cb3a71-7c29-40f5-9c91-23175faa7fce): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (87cb3a71-7c29-40f5-9c91-23175faa7fce): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (87cb3a71-7c29-40f5-9c91-23175faa7fce): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (56302054-113f-4cbd-9a2d-148998b72660): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (56302054-113f-4cbd-9a2d-148998b72660): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (56302054-113f-4cbd-9a2d-148998b72660): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d4d8d871-3020-447d-992f-4a59722558d1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d4d8d871-3020-447d-992f-4a59722558d1): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d4d8d871-3020-447d-992f-4a59722558d1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3efca8f-2916-45ee-a7dd-3690bcbd47df): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f3efca8f-2916-45ee-a7dd-3690bcbd47df): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f3efca8f-2916-45ee-a7dd-3690bcbd47df): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a75d62e-a2b6-4936-8a12-d3b65829fd56): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4a75d62e-a2b6-4936-8a12-d3b65829fd56): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (4a75d62e-a2b6-4936-8a12-d3b65829fd56): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e68b6383-2279-46a2-bb2d-d8c096e58a39): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e68b6383-2279-46a2-bb2d-d8c096e58a39): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (e68b6383-2279-46a2-bb2d-d8c096e58a39): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4f75353d-2d4d-40cb-985b-e9e6923f8f89): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4f75353d-2d4d-40cb-985b-e9e6923f8f89): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4f75353d-2d4d-40cb-985b-e9e6923f8f89): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bbbf3e1a-7197-4364-a1be-9eb315102cc6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bbbf3e1a-7197-4364-a1be-9eb315102cc6): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (bbbf3e1a-7197-4364-a1be-9eb315102cc6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (00977651-5517-4678-90a5-b230e042be73): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (00977651-5517-4678-90a5-b230e042be73): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (00977651-5517-4678-90a5-b230e042be73): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0ee9c671-0c3f-431b-a615-e620041fdeb0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0ee9c671-0c3f-431b-a615-e620041fdeb0): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (0ee9c671-0c3f-431b-a615-e620041fdeb0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b10f4301-e522-4c7a-be1b-20bc6ef44cf7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b10f4301-e522-4c7a-be1b-20bc6ef44cf7): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (b10f4301-e522-4c7a-be1b-20bc6ef44cf7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (597028d7-61c6-4110-bdf9-fe1d13456194): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (597028d7-61c6-4110-bdf9-fe1d13456194): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (597028d7-61c6-4110-bdf9-fe1d13456194): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f0709b55-4904-490f-958d-da60f0a933af): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f0709b55-4904-490f-958d-da60f0a933af): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f0709b55-4904-490f-958d-da60f0a933af): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e121c1d8-2180-4b18-9147-89464383baea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e121c1d8-2180-4b18-9147-89464383baea): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (e121c1d8-2180-4b18-9147-89464383baea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e8ee6460-9104-43d9-b7e3-35c1b290cc9f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e8ee6460-9104-43d9-b7e3-35c1b290cc9f): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (e8ee6460-9104-43d9-b7e3-35c1b290cc9f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (225f771c-0735-4d69-9fe2-6fe081ae9969): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (225f771c-0735-4d69-9fe2-6fe081ae9969): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (225f771c-0735-4d69-9fe2-6fe081ae9969): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d3827c6f-7f44-442d-a6da-56b14c1c0bff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d3827c6f-7f44-442d-a6da-56b14c1c0bff): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (d3827c6f-7f44-442d-a6da-56b14c1c0bff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a5c4d19f-c821-4768-88f2-abf266ce55fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a5c4d19f-c821-4768-88f2-abf266ce55fe): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (a5c4d19f-c821-4768-88f2-abf266ce55fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (d5afd05d-988c-4c96-878c-fd42e4e0eb16): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (d5afd05d-988c-4c96-878c-fd42e4e0eb16): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (d5afd05d-988c-4c96-878c-fd42e4e0eb16): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (beb869ff-9007-4f2b-af01-e6dab12b743f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (beb869ff-9007-4f2b-af01-e6dab12b743f): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (beb869ff-9007-4f2b-af01-e6dab12b743f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cf7e9c2c-c5f8-40ed-b689-8b1a0cad3423): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cf7e9c2c-c5f8-40ed-b689-8b1a0cad3423): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (cf7e9c2c-c5f8-40ed-b689-8b1a0cad3423): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7f44c52a-9384-4504-ac12-aa5136105915): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7f44c52a-9384-4504-ac12-aa5136105915): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (7f44c52a-9384-4504-ac12-aa5136105915): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e8993f8e-06a3-4583-a960-80477f18a255): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e8993f8e-06a3-4583-a960-80477f18a255): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (e8993f8e-06a3-4583-a960-80477f18a255): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c43d8213-e8c5-4b13-a7a1-062e1e26bedc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c43d8213-e8c5-4b13-a7a1-062e1e26bedc): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (c43d8213-e8c5-4b13-a7a1-062e1e26bedc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (16a5196a-d6d7-4675-8ba3-953757c7f3cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (16a5196a-d6d7-4675-8ba3-953757c7f3cf): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (16a5196a-d6d7-4675-8ba3-953757c7f3cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aba931a3-f835-4f64-929d-8a92202460fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (aba931a3-f835-4f64-929d-8a92202460fe): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (aba931a3-f835-4f64-929d-8a92202460fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (328fade4-a5ce-40ea-a0ac-30b2f5f9c515): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (328fade4-a5ce-40ea-a0ac-30b2f5f9c515): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (328fade4-a5ce-40ea-a0ac-30b2f5f9c515): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9076f79f-f4ee-48af-8bec-e245a6ead519): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9076f79f-f4ee-48af-8bec-e245a6ead519): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (9076f79f-f4ee-48af-8bec-e245a6ead519): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (438dd672-e4f1-49c8-88b7-3c597ef4f120): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (438dd672-e4f1-49c8-88b7-3c597ef4f120): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (438dd672-e4f1-49c8-88b7-3c597ef4f120): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (16cd6b52-cb4e-48bb-bfea-27d05d1a17ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (16cd6b52-cb4e-48bb-bfea-27d05d1a17ea): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (16cd6b52-cb4e-48bb-bfea-27d05d1a17ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a2e5b43c-dac9-4111-80d7-7a5bebee023b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a2e5b43c-dac9-4111-80d7-7a5bebee023b): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (a2e5b43c-dac9-4111-80d7-7a5bebee023b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (794c4e4c-ade6-4ccc-a723-d3b5426b9e4f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (794c4e4c-ade6-4ccc-a723-d3b5426b9e4f): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (794c4e4c-ade6-4ccc-a723-d3b5426b9e4f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f1e1a71-cc2a-48b6-b3d0-0630a08547a1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2f1e1a71-cc2a-48b6-b3d0-0630a08547a1): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (2f1e1a71-cc2a-48b6-b3d0-0630a08547a1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0d6b4a0f-ca54-476d-b201-f6ab9ef0c9de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0d6b4a0f-ca54-476d-b201-f6ab9ef0c9de): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (0d6b4a0f-ca54-476d-b201-f6ab9ef0c9de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (871d72b0-419a-42f6-bdc8-bc18680edb49): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (871d72b0-419a-42f6-bdc8-bc18680edb49): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (871d72b0-419a-42f6-bdc8-bc18680edb49): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2cfc8980-4362-4417-99f0-79f9516c2eeb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2cfc8980-4362-4417-99f0-79f9516c2eeb): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (2cfc8980-4362-4417-99f0-79f9516c2eeb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (37d9a734-df21-4d8c-8049-7556bd86ab5b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (37d9a734-df21-4d8c-8049-7556bd86ab5b): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (37d9a734-df21-4d8c-8049-7556bd86ab5b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1fe4ca46-5b3d-4f99-b8cd-5698ab227cb4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1fe4ca46-5b3d-4f99-b8cd-5698ab227cb4): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (1fe4ca46-5b3d-4f99-b8cd-5698ab227cb4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd1c621e-329d-4954-9a2e-5aed67f630c9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fd1c621e-329d-4954-9a2e-5aed67f630c9): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fd1c621e-329d-4954-9a2e-5aed67f630c9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (29a2f7bf-e648-4af7-9a10-5a5d59fc1127): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (29a2f7bf-e648-4af7-9a10-5a5d59fc1127): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (29a2f7bf-e648-4af7-9a10-5a5d59fc1127): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (778b4cb4-a99d-41be-ab83-22859a71a7ea): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (778b4cb4-a99d-41be-ab83-22859a71a7ea): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (778b4cb4-a99d-41be-ab83-22859a71a7ea): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (790d3742-5c7f-4b58-8396-11c4f9ca4873): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (790d3742-5c7f-4b58-8396-11c4f9ca4873): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (790d3742-5c7f-4b58-8396-11c4f9ca4873): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f139d99-7f89-453f-ba73-152f2aae5c9e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2f139d99-7f89-453f-ba73-152f2aae5c9e): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2f139d99-7f89-453f-ba73-152f2aae5c9e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9888b027-b850-48c4-b33f-b18dd1cc3f5d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9888b027-b850-48c4-b33f-b18dd1cc3f5d): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (9888b027-b850-48c4-b33f-b18dd1cc3f5d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (26639d21-6b27-4db8-aae1-c62c5d5851c4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (26639d21-6b27-4db8-aae1-c62c5d5851c4): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (26639d21-6b27-4db8-aae1-c62c5d5851c4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c2369961-aae8-4f83-989e-88792a9afe17): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c2369961-aae8-4f83-989e-88792a9afe17): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (c2369961-aae8-4f83-989e-88792a9afe17): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e03f8f6-4ac1-42b0-888e-9e51588e0d36): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9e03f8f6-4ac1-42b0-888e-9e51588e0d36): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (9e03f8f6-4ac1-42b0-888e-9e51588e0d36): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (081d9ed8-4e29-493f-9437-6a2805a0a8b0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (081d9ed8-4e29-493f-9437-6a2805a0a8b0): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (081d9ed8-4e29-493f-9437-6a2805a0a8b0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ed361a17-6b30-4507-94b7-18cf81c7f50f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ed361a17-6b30-4507-94b7-18cf81c7f50f): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (ed361a17-6b30-4507-94b7-18cf81c7f50f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (aff01e51-bbff-409f-ad27-d45b17dda47a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (aff01e51-bbff-409f-ad27-d45b17dda47a): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (aff01e51-bbff-409f-ad27-d45b17dda47a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (145c93fd-c339-4f24-a258-e750378b98a3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (145c93fd-c339-4f24-a258-e750378b98a3): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (145c93fd-c339-4f24-a258-e750378b98a3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4787e7b4-f61c-44a8-9a4a-3257607202c2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4787e7b4-f61c-44a8-9a4a-3257607202c2): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (4787e7b4-f61c-44a8-9a4a-3257607202c2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fdaa2301-b1a6-459f-825a-9b675c603f33): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fdaa2301-b1a6-459f-825a-9b675c603f33): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (fdaa2301-b1a6-459f-825a-9b675c603f33): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4a638b98-6d30-4d7b-8c9f-9ead19203be5): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4a638b98-6d30-4d7b-8c9f-9ead19203be5): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (4a638b98-6d30-4d7b-8c9f-9ead19203be5): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e807595b-0fd2-4ede-96e0-8b152bc05ac2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e807595b-0fd2-4ede-96e0-8b152bc05ac2): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (e807595b-0fd2-4ede-96e0-8b152bc05ac2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6dfa1868-48c7-4c81-b601-a2285bdb912f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6dfa1868-48c7-4c81-b601-a2285bdb912f): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (6dfa1868-48c7-4c81-b601-a2285bdb912f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9b6df9b5-807f-4b21-8a3b-2b0bc61d1dcb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9b6df9b5-807f-4b21-8a3b-2b0bc61d1dcb): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9b6df9b5-807f-4b21-8a3b-2b0bc61d1dcb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9c191f26-8195-4e2e-93da-2289aa9d2018): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9c191f26-8195-4e2e-93da-2289aa9d2018): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9c191f26-8195-4e2e-93da-2289aa9d2018): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (02b99cb1-766f-44ed-9399-65faa74d0f26): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (02b99cb1-766f-44ed-9399-65faa74d0f26): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (02b99cb1-766f-44ed-9399-65faa74d0f26): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9f09e093-71ce-4799-b493-78a7f1936c28): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9f09e093-71ce-4799-b493-78a7f1936c28): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9f09e093-71ce-4799-b493-78a7f1936c28): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (57208893-3e06-4052-b0c1-1eb0aa7979de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (57208893-3e06-4052-b0c1-1eb0aa7979de): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (57208893-3e06-4052-b0c1-1eb0aa7979de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a5adbb76-ca47-40ce-9158-81cf751d7460): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a5adbb76-ca47-40ce-9158-81cf751d7460): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (a5adbb76-ca47-40ce-9158-81cf751d7460): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c01099e5-2c39-4885-b75c-ba79a67d9e0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c01099e5-2c39-4885-b75c-ba79a67d9e0f): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c01099e5-2c39-4885-b75c-ba79a67d9e0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f5e98df5-4c46-4ec8-9fab-7a59e6a29fc0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f5e98df5-4c46-4ec8-9fab-7a59e6a29fc0): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (f5e98df5-4c46-4ec8-9fab-7a59e6a29fc0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (6c6b7f8a-40d4-44a8-ab7f-dae4dcb1456d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (6c6b7f8a-40d4-44a8-ab7f-dae4dcb1456d): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (6c6b7f8a-40d4-44a8-ab7f-dae4dcb1456d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (01afa835-0f51-4706-82f7-fb30e1fea8c6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (01afa835-0f51-4706-82f7-fb30e1fea8c6): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (01afa835-0f51-4706-82f7-fb30e1fea8c6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b8abb0af-f36c-4ec9-a266-9b25128be279): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b8abb0af-f36c-4ec9-a266-9b25128be279): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (b8abb0af-f36c-4ec9-a266-9b25128be279): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9408e956-0c18-4b8a-9155-db0641336dc1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9408e956-0c18-4b8a-9155-db0641336dc1): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (9408e956-0c18-4b8a-9155-db0641336dc1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (cd1ce671-e785-41dc-b35b-62afc6daa9f3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (cd1ce671-e785-41dc-b35b-62afc6daa9f3): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (cd1ce671-e785-41dc-b35b-62afc6daa9f3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (67123a7f-98df-4be2-bf37-659e14e1f1fe): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (67123a7f-98df-4be2-bf37-659e14e1f1fe): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (67123a7f-98df-4be2-bf37-659e14e1f1fe): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2a7895ba-b576-4576-acd8-c4cb471ba680): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2a7895ba-b576-4576-acd8-c4cb471ba680): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (2a7895ba-b576-4576-acd8-c4cb471ba680): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a261779e-0a4f-424e-8911-fcf0998cb0cf): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a261779e-0a4f-424e-8911-fcf0998cb0cf): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (a261779e-0a4f-424e-8911-fcf0998cb0cf): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4acf927c-a9e9-4c9e-af28-0bbc561ab3b3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4acf927c-a9e9-4c9e-af28-0bbc561ab3b3): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (4acf927c-a9e9-4c9e-af28-0bbc561ab3b3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (207177d0-134a-4d16-8cd2-3bd49ada1cf2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (207177d0-134a-4d16-8cd2-3bd49ada1cf2): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (207177d0-134a-4d16-8cd2-3bd49ada1cf2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3bd59b42-b06a-4d78-9527-e38d87082c24): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3bd59b42-b06a-4d78-9527-e38d87082c24): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (3bd59b42-b06a-4d78-9527-e38d87082c24): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91bed7eb-bc71-4b92-8b70-71b9a34bd8bb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (91bed7eb-bc71-4b92-8b70-71b9a34bd8bb): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (91bed7eb-bc71-4b92-8b70-71b9a34bd8bb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e3599b3b-f219-4299-b563-83dab654110a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e3599b3b-f219-4299-b563-83dab654110a): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (e3599b3b-f219-4299-b563-83dab654110a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b318834-6e29-4d1d-a007-4bc532c710d9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1b318834-6e29-4d1d-a007-4bc532c710d9): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (1b318834-6e29-4d1d-a007-4bc532c710d9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (94bf9e45-6761-48bf-a89a-7c4afc578798): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (94bf9e45-6761-48bf-a89a-7c4afc578798): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (94bf9e45-6761-48bf-a89a-7c4afc578798): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `received_transfer_details` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `received_transfers` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `sales` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `sales_details` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `settings` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `stock_adjustment` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `stock_adjustment_pending` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `stock_adjustment_sessions` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `stock_values` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `transfer_details` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `transfers` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `users` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `user_sessions` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): ALTER TABLE `vendors` ADD `deletedAt` DATETIME;","service":"user-service"}
{"level":"debug","message":"Executing (39203b0e-0056-4011-bf43-f314861f0c67): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"info","message":"server started successfully on 5100","service":"user-service"}
{"level":"info","message":"process.send defined","service":"user-service"}
{"level":"debug","message":"Executing (89b0463d-3ecf-4b52-ad16-a10bdd906c41): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (89b0463d-3ecf-4b52-ad16-a10bdd906c41): CREATE TABLE IF NOT EXISTS  activities (\n            activity_id integer  primary key autoincrement,\n            user_id integer NOT NULL DEFAULT 0,\n            activity text NOT NULL,\n            module text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            deleted integer NOT NULL DEFAULT 0\n          );","service":"user-service"}
{"level":"debug","message":"Executing (89b0463d-3ecf-4b52-ad16-a10bdd906c41): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb7bf8c9-b867-41c5-a01b-c7062ae90151): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eb7bf8c9-b867-41c5-a01b-c7062ae90151): CREATE TABLE IF NOT EXISTS  customers (\n            id integer primary key autoincrement,\n            first_name text NOT NULL,\n            last_name text NOT NULL,\n            sex text DEFAULT NULL,\n            nationality text DEFAULT NULL,\n            phone text NOT NULL,\n            email text DEFAULT NULL,\n            place_of_work text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            picture text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (eb7bf8c9-b867-41c5-a01b-c7062ae90151): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c177aaf8-2508-49cc-9828-dfb190e43173): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c177aaf8-2508-49cc-9828-dfb190e43173): CREATE TABLE IF NOT EXISTS  permissions (\n            permission_id integer primary key autoincrement,\n            name text NOT NULL,\n            description text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c177aaf8-2508-49cc-9828-dfb190e43173): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (89ac8ce3-4ac0-4ac7-810a-4fcc834e7123): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (89ac8ce3-4ac0-4ac7-810a-4fcc834e7123): INSERT OR IGNORE INTO permissions (permission_id, name, description) VALUES\n(59, 'View Sales History', 'view sales invoices'),\n(60, 'Return Sold Items', 'received items returned. This will alter stock levels'),\n(61, 'Delete Sales Records', 'delete sales receipts. this erases the receipt from the database. it will affect stock levels and sales'),\n(62, 'View Sales Reports', 'View the monthly/daily sales reports page '),\n(63, 'View End Of Day Report', 'view the end of day sales summary'),\n(64, 'Transfer Items', 'transfer products to another branch. this will affect stock levels'),\n(65, 'Receive Transfers', 'receive items transferred from another branch. this will affect stock levels'),\n(67, 'View Inventory', 'view the products list, expiries, and stock-out'),\n(68, 'Manage Inventory', 'add a new product to the inventory/edit products, delete products'),\n(72, 'Adjust Stock', 'adjust the stock of products or initiate stock-taking'),\n(73, 'Receive Purchases', 'receive new purchases'),\n(74, 'View Purchase History', 'view purchase history '),\n(75, 'Create Sales', 'make sales'),\n(76, 'Delete Purchases', 'delete purchases invoices. This will affect stock levels'),\n(77, 'Manage Vendors', 'add/delete vendors'),\n(78, 'View Transfer History', 'view outgoing/incoming transfer history'),\n(79, 'Delete Transfers', 'delete transfer records. this will affect stock levels'),\n(80, 'View User Activities', 'view all activities by user and time');","service":"user-service"}
{"level":"debug","message":"Executing (89ac8ce3-4ac0-4ac7-810a-4fcc834e7123): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (86eacfd4-6992-49e3-aeb5-7c5593f6a122): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (86eacfd4-6992-49e3-aeb5-7c5593f6a122): CREATE TABLE IF NOT EXISTS  products (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            status integer NOT NULL DEFAULT 1\n          );","service":"user-service"}
{"level":"debug","message":"Executing (86eacfd4-6992-49e3-aeb5-7c5593f6a122): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2e1c27aa-6b6d-45cc-817a-5357d243d699): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2e1c27aa-6b6d-45cc-817a-5357d243d699): CREATE UNIQUE INDEX  IF NOT EXISTS  product_name_unique \n      ON products(name);\n      CREATE  INDEX product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (2e1c27aa-6b6d-45cc-817a-5357d243d699): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (91ece2f1-427b-4643-9a20-6150a343d678): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (91ece2f1-427b-4643-9a20-6150a343d678): CREATE TABLE IF NOT EXISTS  insurance_providers (\n            id integer primary key autoincrement,\n            name text NOT NULL);","service":"user-service"}
{"level":"debug","message":"Executing (91ece2f1-427b-4643-9a20-6150a343d678): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a6677cd3-8db7-49e3-8818-9468a7bb5103): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a6677cd3-8db7-49e3-8818-9468a7bb5103): CREATE UNIQUE INDEX  IF NOT EXISTS  insurance_providers_name_unique \n      ON insurance_providers(name);","service":"user-service"}
{"level":"debug","message":"Executing (a6677cd3-8db7-49e3-8818-9468a7bb5103): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f53d5533-14b1-4d8b-b081-41ed1b2c8296): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f53d5533-14b1-4d8b-b081-41ed1b2c8296): CREATE TABLE IF NOT EXISTS vendors (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            code text DEFAULT NULL,\n            email text DEFAULT NULL,\n            notes text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            legacy_id integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f53d5533-14b1-4d8b-b081-41ed1b2c8296): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (401f4bff-2bca-40be-bfbb-15784293f064): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (401f4bff-2bca-40be-bfbb-15784293f064): CREATE UNIQUE INDEX  IF NOT EXISTS  vendors_unique_name\n      ON vendors(name);","service":"user-service"}
{"level":"debug","message":"Executing (401f4bff-2bca-40be-bfbb-15784293f064): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fd210389-a88a-4b87-97f0-f083556ebd28): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fd210389-a88a-4b87-97f0-f083556ebd28): CREATE TABLE IF NOT EXISTS branches (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            location text DEFAULT NULL,\n            phone text NOT NULL,\n            address text DEFAULT NULL,\n            email text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP\n          );","service":"user-service"}
{"level":"debug","message":"Executing (fd210389-a88a-4b87-97f0-f083556ebd28): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a5c08af6-4a50-4604-9625-4d394340780d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a5c08af6-4a50-4604-9625-4d394340780d): CREATE UNIQUE INDEX  IF NOT EXISTS  branches_unique_name\n      ON branches(name);","service":"user-service"}
{"level":"debug","message":"Executing (a5c08af6-4a50-4604-9625-4d394340780d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (18cd9610-6899-4b24-8170-115fd146ac8a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (18cd9610-6899-4b24-8170-115fd146ac8a): CREATE TABLE IF NOT EXISTS purchases (\n            id INTEGER NOT NULL primary key autoincrement,\n            vendor integer NOT NULL,\n            date text NOT NULL,\n            site text DEFAULT NULL,\n            code text NOT NULL,\n            status text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            invoice text default NULL,\n            payment_method text default null,\n            amount_paid real default null,\n            last_payment_date text default null,\n            FOREIGN KEY (vendor) REFERENCES vendors (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (18cd9610-6899-4b24-8170-115fd146ac8a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (a27966cf-fedf-49df-9368-c7a984bd475b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (a27966cf-fedf-49df-9368-c7a984bd475b): CREATE  INDEX  IF NOT EXISTS  purchases_index_1 ON purchases(vendor, date, created_on, invoice,\n        \n         payment_method, last_payment_date, status);\n         CREATE UNIQUE INDEX purchases_index_2 ON purchases(code);","service":"user-service"}
{"level":"debug","message":"Executing (a27966cf-fedf-49df-9368-c7a984bd475b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f3dd7f8b-9446-4e07-a5ea-ce98f44c5148): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f3dd7f8b-9446-4e07-a5ea-ce98f44c5148): CREATE TABLE if not exists purchase_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            unit text NOT NULL,\n            created_on text DEFAULT CURRENT_TIMESTAMP ,\n            created_by integer NOT NULL,\n            markup real NOT NULL,\n            code varchar(50) NOT NULL,\n            date text DEFAULT NULL,\n            selling_price real not null,\n            FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references purchases (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f3dd7f8b-9446-4e07-a5ea-ce98f44c5148): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (17ad49f2-8171-4f53-b29c-49f547680cfb): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (17ad49f2-8171-4f53-b29c-49f547680cfb): CREATE  INDEX  IF NOT EXISTS  purchase_details_index_1 ON purchase_details(created_on, \n        date);\n         CREATE  INDEX  IF NOT EXISTS  purchase_details_index_2 ON purchase_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (17ad49f2-8171-4f53-b29c-49f547680cfb): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca809bdb-ce83-4fdc-8fc9-965066a767be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ca809bdb-ce83-4fdc-8fc9-965066a767be): CREATE TABLE IF NOT EXISTS received_transfers (\n            id INTEGER NOT NULL primary key autoincrement,\n            \n  date text NOT NULL,\n  code text NOT NULL,\n  invoice text not null,\n  created_on text default CURRENT_TIMESTAMP ,\n  created_by integer DEFAULT NULL,\n  sender integer DEFAULT NULL,\n  FOREIGN KEY (sender) REFERENCES branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ca809bdb-ce83-4fdc-8fc9-965066a767be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5f5152e7-b63f-45a8-9a08-f3f132660ff4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5f5152e7-b63f-45a8-9a08-f3f132660ff4): CREATE  INDEX  IF NOT EXISTS  received_transfers_index_1 ON received_transfers(created_on, \n        date);\n         CREATE UNIQUE INDEX  IF NOT EXISTS  received_transfers_index_2 ON received_transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (5f5152e7-b63f-45a8-9a08-f3f132660ff4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7283cf5a-de76-4f15-820b-141ee95cbdd6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7283cf5a-de76-4f15-820b-141ee95cbdd6): CREATE TABLE  IF NOT EXISTS  received_transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n            foreign key (code) references received_transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7283cf5a-de76-4f15-820b-141ee95cbdd6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dabb1065-2710-411b-a4a4-4e41aa810c7f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dabb1065-2710-411b-a4a4-4e41aa810c7f): CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_1 ON received_transfer_details(created_on, \n        date);\n         CREATE  INDEX IF NOT EXISTS  received_transfer_details_index_2 ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (dabb1065-2710-411b-a4a4-4e41aa810c7f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ab2f65dc-6616-4540-a887-f62583169b00): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ab2f65dc-6616-4540-a887-f62583169b00): CREATE TABLE IF NOT EXISTS  roles (\n            role_id integer primary key autoincrement,\n            role_name text NOT NULL,\n            description text DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ab2f65dc-6616-4540-a887-f62583169b00): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c408b41a-abb8-4d50-a332-7336c074b944): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c408b41a-abb8-4d50-a332-7336c074b944): CREATE TABLE IF NOT EXISTS  role_permissions (\n            id integer primary key autoincrement,\n            role_id integer not null,\n            permission_id integer NOT NULL,\n            foreign key (role_id) references roles (role_id) ON DELETE CASCADE ON UPDATE CASCADE,\n            foreign key (permission_id) references permissions (permission_id) \n            ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c408b41a-abb8-4d50-a332-7336c074b944): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e98f8637-3cad-4120-b143-3d37546eba04): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e98f8637-3cad-4120-b143-3d37546eba04): CREATE TABLE IF NOT EXISTS  sales (\n            id integer primary key autoincrement,\n            customer integer DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n          );","service":"user-service"}
{"level":"debug","message":"Executing (e98f8637-3cad-4120-b143-3d37546eba04): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (40d46270-ef97-4368-a435-5514ed28d0de): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (40d46270-ef97-4368-a435-5514ed28d0de): CREATE  INDEX IF NOT EXISTS  sales_index_1 ON sales(created_on, \n        date, payment_method, insurance_member_id, insurance_member_name);\n         CREATE UNIQUE INDEX IF NOT EXISTS  sales_index_2 ON sales(code);","service":"user-service"}
{"level":"debug","message":"Executing (40d46270-ef97-4368-a435-5514ed28d0de): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0b864539-0e39-4824-b6af-83e53d3d94e6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0b864539-0e39-4824-b6af-83e53d3d94e6): CREATE TABLE  IF NOT EXISTS  sales_details (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (0b864539-0e39-4824-b6af-83e53d3d94e6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1d027f01-724b-4f53-92e7-28566234d1d6): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1d027f01-724b-4f53-92e7-28566234d1d6): CREATE  INDEX IF NOT EXISTS  sales_details_index_1 ON sales_details(created_on, \n        date, cost_price);","service":"user-service"}
{"level":"debug","message":"Executing (1d027f01-724b-4f53-92e7-28566234d1d6): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9e4e9f9f-6fa5-48a9-9630-140a6f718837): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9e4e9f9f-6fa5-48a9-9630-140a6f718837): CREATE TABLE IF NOT EXISTS  settings (\n            id integer primary key autoincrement,\n            name text NOT NULL,\n            module text NOT NULL,\n            value text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (9e4e9f9f-6fa5-48a9-9630-140a6f718837): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (055218f7-2f7f-445d-bdf9-f8ca706b1261): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (055218f7-2f7f-445d-bdf9-f8ca706b1261): CREATE UNIQUE INDEX IF NOT EXISTS  settings_index_1 ON settings(name);","service":"user-service"}
{"level":"debug","message":"Executing (055218f7-2f7f-445d-bdf9-f8ca706b1261): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5e131d20-de74-41e5-acd9-c041bc06404a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5e131d20-de74-41e5-acd9-c041bc06404a): CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (5e131d20-de74-41e5-acd9-c041bc06404a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (56919ad7-7180-49d7-9dda-b911f3676378): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (56919ad7-7180-49d7-9dda-b911f3676378): CREATE UNIQUE INDEX IF NOT EXISTS  stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);","service":"user-service"}
{"level":"debug","message":"Executing (56919ad7-7180-49d7-9dda-b911f3676378): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (242f3a6d-bcf2-4ba0-b27a-5ee6ed9dd42b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (242f3a6d-bcf2-4ba0-b27a-5ee6ed9dd42b): CREATE TABLE IF NOT EXISTS  stock_adjustment (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            quantity_counted real NOT NULL,\n            quantity_expected real NOT NULL,\n            current_price real NOT NULL,\n            created_by integer NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP ,\n            cost_price real DEFAULT NULL,\n            category text DEFAULT NULL,\n            size text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            comments text DEFAULT NULL,\n            quantity_expired real NOT NULL DEFAULT 0,\n            quantity_damaged real NOT NULL DEFAULT 0,\n            foreign key (code) references stock_adjustment_sessions (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (242f3a6d-bcf2-4ba0-b27a-5ee6ed9dd42b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (47de4131-bc5d-4566-8a70-b94b8dc5f774): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (47de4131-bc5d-4566-8a70-b94b8dc5f774): CREATE  INDEX IF NOT EXISTS  stock_adj_index_1 ON stock_adjustment(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (47de4131-bc5d-4566-8a70-b94b8dc5f774): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ff1cd95c-22e2-48a8-89f4-a151a6a29e11): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ff1cd95c-22e2-48a8-89f4-a151a6a29e11): CREATE TABLE IF NOT EXISTS  transfers (\n            id integer primary key autoincrement,\n            receiver integer NOT NULL,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            status text DEFAULT 'Pending',\n            created_on text default CURRENT_TIMESTAMP ,\n            created_by integer DEFAULT NULL,\n            foreign key (receiver) references branches (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ff1cd95c-22e2-48a8-89f4-a151a6a29e11): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bd1e567b-2cb4-4e5d-93be-020bc77c2aa4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bd1e567b-2cb4-4e5d-93be-020bc77c2aa4): CREATE  INDEX IF NOT EXISTS  transfers_index_1 ON transfers(date, created_on);\n      CREATE UNIQUE INDEX  IF NOT EXISTS transfers_index_2 ON transfers(code);","service":"user-service"}
{"level":"debug","message":"Executing (bd1e567b-2cb4-4e5d-93be-020bc77c2aa4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7fd600b3-721a-43d9-8118-695ded6f01f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7fd600b3-721a-43d9-8118-695ded6f01f4): CREATE TABLE  IF NOT EXISTS transfer_details (\n            id integer primary key autoincrement,\n            product integer NOT NULL,\n            quantity real NOT NULL,\n            price real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer NOT NULL,\n            code text NOT NULL,\n            date text DEFAULT NULL,\n            expiry text DEFAULT NULL,\n            cost_price real NOT NULL,\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n            foreign key (code) references transfers (code) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (7fd600b3-721a-43d9-8118-695ded6f01f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f39d9fe6-4935-491f-8fcf-7e1d535caca9): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f39d9fe6-4935-491f-8fcf-7e1d535caca9): CREATE  INDEX  IF NOT EXISTS transferdetails_index_1 ON transfer_details(date, created_on, product, quantity, expiry);\n      CREATE  INDEX  IF NOT EXISTS transferDETAILS_index_2 ON transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (f39d9fe6-4935-491f-8fcf-7e1d535caca9): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8fe7946e-61a3-45b4-ac50-4866bbf3b873): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8fe7946e-61a3-45b4-ac50-4866bbf3b873): CREATE TABLE IF NOT EXISTS  users (\n            id integer primary key autoincrement,\n            role_id integer NOT NULL ,\n            email text NOT NULL,\n            username text NOT NULL DEFAULT '',\n            password_hash text DEFAULT NULL,\n            last_login text NOT NULL DEFAULT '0000-00-00 00:00:00',\n            last_ip text NOT NULL DEFAULT '',\n            created_on text default CURRENT_TIMESTAMP,\n            display_name text DEFAULT '',\n            active integer NOT NULL DEFAULT 0,\n            last_seen text DEFAULT NULL,\n            phone text DEFAULT NULL\n            \n          );","service":"user-service"}
{"level":"debug","message":"Executing (8fe7946e-61a3-45b4-ac50-4866bbf3b873): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b78c39e8-6a12-4cdb-bdbb-4c146be8ac31): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b78c39e8-6a12-4cdb-bdbb-4c146be8ac31): CREATE  INDEX  IF NOT EXISTS users_index_1 ON users(username, active);\n      CREATE UNIQUE INDEX IF NOT EXISTS  users_index_2 ON users(email);","service":"user-service"}
{"level":"debug","message":"Executing (b78c39e8-6a12-4cdb-bdbb-4c146be8ac31): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (683c0f8a-d9a5-4751-9ba2-d641f4bd675d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (683c0f8a-d9a5-4751-9ba2-d641f4bd675d): CREATE TABLE IF NOT EXISTS  user_sessions (\n            id integer primary key autoincrement,\n            user_id integer NOT NULL,\n            token text NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            expires text NOT NULL\n          );","service":"user-service"}
{"level":"debug","message":"Executing (683c0f8a-d9a5-4751-9ba2-d641f4bd675d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fc517495-c9fa-468d-b5cc-8fb419633d46): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fc517495-c9fa-468d-b5cc-8fb419633d46): CREATE  INDEX IF NOT EXISTS  users_sess_index_1 ON user_sessions(token, user_id, expires);","service":"user-service"}
{"level":"debug","message":"Executing (fc517495-c9fa-468d-b5cc-8fb419633d46): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (dbd661a5-6fb0-4612-af75-052231a11fba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (dbd661a5-6fb0-4612-af75-052231a11fba): INSERT OR IGNORE INTO roles (role_id, role_name, description) values \n    (1, 'Branch Manager', 'manages day-to-day activities. Receives purchases, manages stock. May also make sales'),\n    (2, 'Sales Person', 'serves customers and makes sales. Limited permissions by default');","service":"user-service"}
{"level":"debug","message":"Executing (dbd661a5-6fb0-4612-af75-052231a11fba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (eb52e76e-fe76-4a4e-8854-2d4f350646be): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (eb52e76e-fe76-4a4e-8854-2d4f350646be): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 59),(1,60), (1, 61), (1, 62), (1, 63), (1,64), (1,65), (1,67), (1, 68), \n     (1, 72), (1, 73), (1, 74), (1, 75), (1, 76), (1, 77), (1,78), (1, 79), (1, 80);","service":"user-service"}
{"level":"debug","message":"Executing (eb52e76e-fe76-4a4e-8854-2d4f350646be): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f79688fa-eb9c-43b3-bdd4-d2550f5ab6ec): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f79688fa-eb9c-43b3-bdd4-d2550f5ab6ec): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (2, 59),  (2, 62), (2, 63), (2,67),   \n     (2, 74),  (2, 80);","service":"user-service"}
{"level":"debug","message":"Executing (f79688fa-eb9c-43b3-bdd4-d2550f5ab6ec): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca9028d9-ffd5-4db5-ae7c-6e334279b86b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ca9028d9-ffd5-4db5-ae7c-6e334279b86b): DROP INDEX IF EXISTS purchase_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (ca9028d9-ffd5-4db5-ae7c-6e334279b86b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (b534332d-b48a-465c-bdda-6e6932e4507c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (b534332d-b48a-465c-bdda-6e6932e4507c): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (b534332d-b48a-465c-bdda-6e6932e4507c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (74d623c5-3570-456e-bb4f-2357e8b4414d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (74d623c5-3570-456e-bb4f-2357e8b4414d): DROP INDEX IF EXISTS transferDETAILS_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (74d623c5-3570-456e-bb4f-2357e8b4414d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1f7fca30-fda5-4295-bace-379ae00d251e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1f7fca30-fda5-4295-bace-379ae00d251e): DROP INDEX IF EXISTS received_transfer_details_index_2;","service":"user-service"}
{"level":"debug","message":"Executing (1f7fca30-fda5-4295-bace-379ae00d251e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (811eae91-d5c6-47fb-9a51-053a33cdd7ae): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (811eae91-d5c6-47fb-9a51-053a33cdd7ae): CREATE  INDEX IF NOT EXISTS  transferDetails_index_code ON transfer_details(code);\n      CREATE  INDEX IF NOT EXISTS  purchaseDetails_index_code ON purchase_details(code);\n      CREATE  INDEX IF NOT EXISTS  receivedtransferDetails_index_code ON received_transfer_details(code);","service":"user-service"}
{"level":"debug","message":"Executing (811eae91-d5c6-47fb-9a51-053a33cdd7ae): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c51e6ac0-f13d-4289-9e35-01d116228165): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c51e6ac0-f13d-4289-9e35-01d116228165): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (81, 'Manage Staff', 'add/edit/delete users. Also can change a user role or permissions');","service":"user-service"}
{"level":"debug","message":"Executing (c51e6ac0-f13d-4289-9e35-01d116228165): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca142abb-e840-455c-aee0-ef008f073291): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ca142abb-e840-455c-aee0-ef008f073291): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 81);","service":"user-service"}
{"level":"debug","message":"Executing (ca142abb-e840-455c-aee0-ef008f073291): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5cbf3d36-151e-4008-aef5-2724759f06e7): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5cbf3d36-151e-4008-aef5-2724759f06e7): DROP INDEX IF EXISTS product_name_unique;","service":"user-service"}
{"level":"debug","message":"Executing (5cbf3d36-151e-4008-aef5-2724759f06e7): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (003671df-3603-4b72-95b8-2d3e5966f145): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (003671df-3603-4b72-95b8-2d3e5966f145): CREATE  INDEX IF NOT EXISTS  product_index_name ON products(name);","service":"user-service"}
{"level":"debug","message":"Executing (003671df-3603-4b72-95b8-2d3e5966f145): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (773cfbc0-a2a6-462a-b932-652585e8be31): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (773cfbc0-a2a6-462a-b932-652585e8be31): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE customers RENAME TO _customers_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  customers (\n    \n      id integer primary key autoincrement,\n      name text NOT NULL,\n      sex text DEFAULT NULL,\n      phone text DEFAULT NULL,\n      email text DEFAULT NULL,\n      location text DEFAULT NULL,\n      created_on text  DEFAULT CURRENT_TIMESTAMP\n    );\n    \n    INSERT OR IGNORE INTO customers (id,name, sex,phone, email, location)\n      SELECT id, first_name || ' ' || last_name,sex,phone, email, place_of_work\n      FROM _customers_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (773cfbc0-a2a6-462a-b932-652585e8be31): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5977a9e8-706f-4279-a0f0-cb3545a5310b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5977a9e8-706f-4279-a0f0-cb3545a5310b): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (82, 'Manage Customers', 'add/edit/delete customers data.');","service":"user-service"}
{"level":"debug","message":"Executing (5977a9e8-706f-4279-a0f0-cb3545a5310b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (00912eb5-21b1-4080-a1f3-2d03365a48ff): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (00912eb5-21b1-4080-a1f3-2d03365a48ff): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 82);","service":"user-service"}
{"level":"debug","message":"Executing (00912eb5-21b1-4080-a1f3-2d03365a48ff): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fb96c702-74c1-45ab-9da9-18d443511636): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fb96c702-74c1-45ab-9da9-18d443511636): PRAGMA foreign_keys=off;\n\n    \n    \n    ALTER TABLE sales RENAME TO _sales_old;\n\n    \n    \n    CREATE TABLE IF NOT EXISTS  sales (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO sales \n      SELECT *\n      FROM _sales_old;\n\n      DROP TABLE IF EXISTS _sales_old;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (fb96c702-74c1-45ab-9da9-18d443511636): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2b5a875a-5693-4bd8-b8cd-85035bb22826): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2b5a875a-5693-4bd8-b8cd-85035bb22826): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE  IF NOT EXISTS  sales_details_new (\n            id integer primary key autoincrement,\n            date text NOT NULL,\n            product integer NOT NULL,\n            price real NOT NULL,\n            quantity real NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            code text NOT NULL,\n            cost_price real DEFAULT NULL,\n            foreign key (code) references sales (code) ON DELETE CASCADE ON UPDATE CASCADE\n            foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO sales_details_new \n      SELECT *\n      FROM sales_details;\n\n      DROP TABLE IF EXISTS sales_details;\n      ALTER TABLE sales_details_new RENAME TO sales_details;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (2b5a875a-5693-4bd8-b8cd-85035bb22826): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (c689b060-d33c-4910-812c-118ddf78ed38): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (c689b060-d33c-4910-812c-118ddf78ed38): CREATE TABLE IF NOT EXISTS  customer_diagnostics (\n            id integer primary key autoincrement,\n            customer integer NOT NULL,\n            test text NOT NULL,\n            data text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            \n            foreign key (customer) references customers (id) ON DELETE CASCADE ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (c689b060-d33c-4910-812c-118ddf78ed38): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3c1dd933-d245-4caf-a865-842812406c0f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3c1dd933-d245-4caf-a865-842812406c0f): CREATE  INDEX  IF NOT EXISTS customer_diagnostics_test ON customer_diagnostics (test);","service":"user-service"}
{"level":"debug","message":"Executing (3c1dd933-d245-4caf-a865-842812406c0f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (af6ad6b5-146e-41a7-b84e-626488faaa6b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (af6ad6b5-146e-41a7-b84e-626488faaa6b): CREATE TABLE IF NOT EXISTS  diagnostic_tests (\n            id integer primary key autoincrement,\n            test_name text NOT NULL,\n            parameters text NOT NULL,\n            comments text default NULL,\n            created_on text default CURRENT_TIMESTAMP\n            );\n            \n      insert OR IGNORE into diagnostic_tests  (test_name, parameters, comments) values \n      ('Blood Glucose Test', 'value (mmol/L)', \n      'Normal ranges for non-diabetic: Before meals - 4.0 to 5.9 mmol/L; After meals - under 7.8 mmol/L; \n      For diabetics: Before meals - 4 to 7 mmol/L; After meals - 5 to 9 mmol/L'),\n\n      ('Blood Pressure', 'systolic, diastolic', \n      '90/60mmHg  to 120/80mmHg - ideal,\n      140/90mmHg or higher - high,\n      90/60mmHg or lower - low'),\n\n      ('Total Blood Cholesterol', 'value (mmol/L)', \n      'Below 5.2 mmol/L - normal, 5.2 to 6.2 mmol/L - Borderline High, Above 6.2 mmol/L - High ');","service":"user-service"}
{"level":"debug","message":"Executing (af6ad6b5-146e-41a7-b84e-626488faaa6b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (14577f47-7d94-4d2f-96c2-3aca640d108e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (14577f47-7d94-4d2f-96c2-3aca640d108e): PRAGMA foreign_keys=off;\n\n\n    CREATE TABLE  IF NOT EXISTS stock_adjustment_new (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_new \n      SELECT *\n      FROM stock_adjustment;\n\n      DROP TABLE IF EXISTS stock_adjustment;\n      DROP INDEX IF EXISTS stock_adj_index_1;\n      ALTER TABLE stock_adjustment_new RENAME TO stock_adjustment;\n          \n        \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (14577f47-7d94-4d2f-96c2-3aca640d108e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (64ba137a-1d32-4c8f-a951-ffca9fc2d06e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (64ba137a-1d32-4c8f-a951-ffca9fc2d06e): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (83, 'Manage Settings', 'edit company name, phone, address, etc');","service":"user-service"}
{"level":"debug","message":"Executing (64ba137a-1d32-4c8f-a951-ffca9fc2d06e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (373e5fb3-5550-4e37-8b1e-caa0ff0e3b3d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (373e5fb3-5550-4e37-8b1e-caa0ff0e3b3d): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 83);","service":"user-service"}
{"level":"debug","message":"Executing (373e5fb3-5550-4e37-8b1e-caa0ff0e3b3d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (71562aca-2907-4738-a588-f6a47d1264ca): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (71562aca-2907-4738-a588-f6a47d1264ca): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status)\n      SELECT id, name, price, category, notes, unit, picture, created_on, \n      max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, status \n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (71562aca-2907-4738-a588-f6a47d1264ca): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (942e1cbf-8fe8-40ff-b9f2-2f7029293633): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (942e1cbf-8fe8-40ff-b9f2-2f7029293633): CREATE  INDEX  IF NOT EXISTS product_name\n      ON products(name);\n      CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (942e1cbf-8fe8-40ff-b9f2-2f7029293633): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (38833052-1528-436a-84c3-7a2737579748): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (38833052-1528-436a-84c3-7a2737579748): CREATE TABLE if not exists stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (38833052-1528-436a-84c3-7a2737579748): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (0fb3be8b-017b-41ae-b9cf-948a80319750): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (0fb3be8b-017b-41ae-b9cf-948a80319750): CREATE  INDEX IF NOT EXISTS  stock_adj_pending_index_1 ON stock_adjustment_pending(date, quantity_counted,\n        quantity_expected, category, expiry);","service":"user-service"}
{"level":"debug","message":"Executing (0fb3be8b-017b-41ae-b9cf-948a80319750): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (34d232ef-832c-4692-931f-815aff3e24d4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (34d232ef-832c-4692-931f-815aff3e24d4): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE IF NOT EXISTS  stock_adjustment_sessions_new (\n      id integer primary key autoincrement,\n            date text NOT NULL,\n            code text DEFAULT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            created_by integer DEFAULT NULL,\n            status text default 'in_progress'\n\n\n          );\n\n          INSERT OR IGNORE INTO stock_adjustment_sessions_new (id, date, code, created_on, created_by) \n      SELECT id, date, code, created_on, created_by \n      FROM stock_adjustment_sessions;\n\n      DROP TABLE IF EXISTS stock_adjustment_sessions;\n      ALTER TABLE stock_adjustment_sessions_new RENAME TO stock_adjustment_sessions;\n\n      DROP INDEX IF EXISTS stock_index_1;\n      DROP INDEX IF EXISTS stock_index_2;\n\n\n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (34d232ef-832c-4692-931f-815aff3e24d4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e6549db5-5ac9-4359-8211-72ee1ae53300): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e6549db5-5ac9-4359-8211-72ee1ae53300): CREATE TABLE IF NOT EXISTS  products_new (\n      id integer primary key autoincrement,\n            name text NOT NULL,\n            price real NOT NULL,\n            category text NOT NULL DEFAULT 'Uncategorised',\n            notes text DEFAULT NULL,\n            unit text DEFAULT NULL,\n            picture text DEFAULT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            max_stock real DEFAULT NULL,\n            min_stock real NOT NULL DEFAULT 1,\n            expiry text DEFAULT NULL,\n            barcode text DEFAULT NULL,\n            current_stock real DEFAULT NULL,\n            last_modified text DEFAULT NULL,\n            cost_price real default null,\n            size text default null,\n            description text default null,\n            status integer  DEFAULT null,\n            shelf text default null\n          );\n\n          INSERT OR IGNORE INTO products_new (id, name, price, category, notes, unit, picture, created_on, \n            max_stock, min_stock, expiry, barcode, current_stock, last_modified, cost_price, size,\n            description, status)\n      SELECT *\n      FROM products;\n\n\n      DROP INDEX IF EXISTS product_name_unique;\n      DROP INDEX IF EXISTS product_index;\n      DROP INDEX IF EXISTS product_barcode_unique;\n\n      DROP TABLE IF EXISTS products;\n\n      ALTER TABLE products_new RENAME TO products;","service":"user-service"}
{"level":"debug","message":"Executing (e6549db5-5ac9-4359-8211-72ee1ae53300): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (35855fd3-b4c0-4d2d-a2ab-981851b6eeb1): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (35855fd3-b4c0-4d2d-a2ab-981851b6eeb1): PRAGMA foreign_keys=off;\n\n    \nCREATE UNIQUE INDEX  IF NOT EXISTS stock_index_1 ON stock_adjustment_sessions(code);\n      CREATE  INDEX IF NOT EXISTS  stock_index_2 ON stock_adjustment_sessions(date);\n    \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (35855fd3-b4c0-4d2d-a2ab-981851b6eeb1): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (98ab8a79-24e0-4320-b1b0-bf025e9dc598): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (98ab8a79-24e0-4320-b1b0-bf025e9dc598): CREATE  INDEX IF NOT EXISTS  product_index  ON products(price, category, max_stock, min_stock, expiry,\n         current_stock, last_modified, status);","service":"user-service"}
{"level":"debug","message":"Executing (98ab8a79-24e0-4320-b1b0-bf025e9dc598): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (10dfe0be-7e5d-46a0-81c2-f642ebfdbd1f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (10dfe0be-7e5d-46a0-81c2-f642ebfdbd1f): CREATE TABLE IF NOT EXISTS dbbackups (\n      id integer primary key autoincrement,\n            file_name text NOT NULL,\n            created_on text  DEFAULT CURRENT_TIMESTAMP,\n            created_by text DEFAULT NULL,\n            description text DEFUALT NULL,\n            uploaded text default null,\n            db_version text default null\n          );","service":"user-service"}
{"level":"debug","message":"Executing (10dfe0be-7e5d-46a0-81c2-f642ebfdbd1f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (fa87a3a0-5ee7-4493-b391-c33b50db2e5f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (fa87a3a0-5ee7-4493-b391-c33b50db2e5f): CREATE TABLE if not exists _stock_adjustment_pending (\n      id integer primary key autoincrement,\n      date text NOT NULL,\n      product integer NOT NULL,\n      quantity_counted real NOT NULL,\n      quantity_expected real NOT NULL,\n      current_price real default NULL,\n      created_by integer default NULL,\n      code text DEFAULT NULL,\n      created_on text default CURRENT_TIMESTAMP ,\n      cost_price real DEFAULT NULL,\n      category text DEFAULT NULL,\n      size text DEFAULT NULL,\n      expiry text DEFAULT NULL,\n      comments text DEFAULT NULL,\n      quantity_expired real NOT NULL DEFAULT 0,\n      quantity_damaged real NOT NULL DEFAULT 0,\n      shelf text DEFAULT NULL,\n      unit text DEFAULT NULL,\n      foreign key (product) references products (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _stock_adjustment_pending (id, date, product, quantity_counted, quantity_expected,\n         current_price, created_by, created_on, \n            code, cost_price, category, size, expiry, comments, quantity_expired, quantity_damaged);\n      SELECT *\n      FROM stock_adjustment_pending;\n\n\n      DROP INDEX IF EXISTS stock_adj_pending_index_1;\n      \n\n      DROP TABLE IF EXISTS stock_adjustment_pending;\n\n      ALTER TABLE _stock_adjustment_pending RENAME TO stock_adjustment_pending;","service":"user-service"}
{"level":"debug","message":"Executing (fa87a3a0-5ee7-4493-b391-c33b50db2e5f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (649881f4-6334-4a3d-b940-8c0f92f33d46): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (649881f4-6334-4a3d-b940-8c0f92f33d46): PRAGMA foreign_keys=off;\nCREATE  INDEX IF NOT EXISTS  dbbackups_name\n      ON dbbackups (file_name,created_on,description,uploaded,db_version);\n      \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (649881f4-6334-4a3d-b940-8c0f92f33d46): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (3e6663a7-487a-4f03-8316-0044d09c9e30): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (3e6663a7-487a-4f03-8316-0044d09c9e30): CREATE TABLE if not exists refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (3e6663a7-487a-4f03-8316-0044d09c9e30): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (8e11b2df-1f4b-4a18-b995-d3a40eba6fa0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (8e11b2df-1f4b-4a18-b995-d3a40eba6fa0): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity real NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer not null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (8e11b2df-1f4b-4a18-b995-d3a40eba6fa0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e87587bc-bec3-4625-a985-5b704273f345): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e87587bc-bec3-4625-a985-5b704273f345): PRAGMA foreign_keys=off;\n\n    \n\n    CREATE TABLE if not exists _refills (\n      id integer primary key autoincrement,\n      product text NOT NULL,\n      product_id integer default NULL,\n      quantity text NOT NULL,\n      start_date date NOT NULL,\n      end_date date default NULL,\n      created_by integer default NULL,\n      status text DEFAULT NULL,\n      customer_id integer default null,\n      customer_name text default null,\n      created_on date default current_timestamp,\n      \n      foreign key (product_id) references products (id) ON DELETE SET NULL ON UPDATE CASCADE\n\n          );\n\n      INSERT OR IGNORE INTO _refills (id, product, product_id, start_date, end_date,\n         status, created_by, \n             quantity,customer_id, created_on)\n      SELECT *\n      FROM refills;\n\n\n      DROP TABLE IF EXISTS refills;\n\n      ALTER TABLE _refills RENAME TO refills;\n          \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e87587bc-bec3-4625-a985-5b704273f345): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (98366632-87ce-48d9-9507-b30118153982): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (98366632-87ce-48d9-9507-b30118153982): PRAGMA foreign_keys=off;\n\n    \n    \n\n    \n    \n    CREATE TABLE IF NOT EXISTS  _sales_old (\n    \n      id integer primary key autoincrement,\n            customer text DEFAULT NULL,\n            code text NOT NULL,\n            created_by integer NOT NULL,\n            created_on text default CURRENT_TIMESTAMP,\n            date text NOT NULL,\n            amount_paid real NOT NULL DEFAULT 0,\n            payment_method text NOT NULL DEFAULT 'Cash',\n            momo_reference text DEFAULT NULL,\n            insurance_provider text DEFAULT NULL,\n            insurance_member_name text DEFAULT NULL,\n            insurance_member_id text DEFAULT NULL,\n            creditor_name text DEFAULT NULL,\n            credit_paid integer NOT NULL DEFAULT 0,\n            discount real NOT NULL DEFAULT 0,\n            shift text default null,\n            foreign key (insurance_provider) references insurance_providers (name) ON DELETE RESTRICT ON UPDATE CASCADE\n          \n    );\n    \n    INSERT OR IGNORE INTO _sales_old (id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n      momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n      credit_paid, discount)\n      SELECT id, customer, code, created_by, created_on, date, amount_paid, payment_method,\n        momo_reference, insurance_provider, insurance_member_name, insurance_member_id, creditor_name, \n        credit_paid, discount \n      FROM sales;\n\n      DROP TABLE IF EXISTS sales;\n\n      ALTER TABLE _sales_old RENAME TO sales;\n    \n    \n    \n    PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (98366632-87ce-48d9-9507-b30118153982): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e63a3927-ada6-4a37-8aba-2f040ffc4b1c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e63a3927-ada6-4a37-8aba-2f040ffc4b1c): INSERT OR IGNORE INTO settings (name, value, module) values ('number_of_shifts', 2, 'System');","service":"user-service"}
{"level":"debug","message":"Executing (e63a3927-ada6-4a37-8aba-2f040ffc4b1c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (f53d4b7f-2f53-46d9-bca8-f7d844aeba02): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (f53d4b7f-2f53-46d9-bca8-f7d844aeba02): CREATE TABLE if not exists stock_values (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      last_modified text default current_timestamp,\n      selling_value real NOT NULL,\n      cost_value date NOT NULL,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (f53d4b7f-2f53-46d9-bca8-f7d844aeba02): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (ca2f9543-aa7b-49cd-b581-2be62008f9ba): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (ca2f9543-aa7b-49cd-b581-2be62008f9ba): CREATE TABLE if not exists outgoing_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      recipient text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (ca2f9543-aa7b-49cd-b581-2be62008f9ba): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (349a8967-2cb6-4e1f-98d3-0118b8901c3b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (349a8967-2cb6-4e1f-98d3-0118b8901c3b): CREATE TABLE if not exists online_backups (\n      id integer primary key autoincrement,\n      date text unique NOT NULL,\n      url text not null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (349a8967-2cb6-4e1f-98d3-0118b8901c3b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e1fa72c5-8737-47d7-9400-09e470a107a3): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e1fa72c5-8737-47d7-9400-09e470a107a3): CREATE TABLE if not exists active_ingredients (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      indication text default null,\n      side_effect text default null,\n      caution text default null,\n      pregnancy text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (e1fa72c5-8737-47d7-9400-09e470a107a3): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (5106ea28-e441-4eac-84f7-4d208778f0f4): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (5106ea28-e441-4eac-84f7-4d208778f0f4): CREATE TABLE if not exists item_active_ingredients (\n      id integer primary key autoincrement,\n      product integer not null,\n      ingredient integer not null,\n      FOREIGN KEY (product) REFERENCES products (id) ON DELETE RESTRICT ON UPDATE CASCADE,\n      FOREIGN KEY (ingredient) REFERENCES active_ingredients (id) ON DELETE RESTRICT ON UPDATE CASCADE\n\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (5106ea28-e441-4eac-84f7-4d208778f0f4): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (deef3cf9-2b36-499c-afe8-6fc36380a758): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (deef3cf9-2b36-499c-afe8-6fc36380a758): CREATE TABLE if not exists drug_info (\n      id integer primary key autoincrement,\n      name text  NOT NULL,\n      pregnancy text default null,\n      pharmacodynamics text default null,\n      mechanism_of_action text default null,\n      pharmacokinetics text default null,\n      indications_and_usage text default null,\n      contraindications text default null,\n      drug_interactions_table text default null,\n      warnings_and_cautions text default null,\n      dosage_and_administration text default null,\n      adverse_reactions text default null,\n      information_for_patients text default null,\n      clinical_pharmacology text default null,\n      drug_abuse_and_dependence text default null,\n      teratogenic_effects text default null,\n      geriatric_use text default null,\n      overdosage text default null,\n      \n      created_on date default current_timestamp\n      \n          );","service":"user-service"}
{"level":"debug","message":"Executing (deef3cf9-2b36-499c-afe8-6fc36380a758): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (e48691be-9334-4dc9-aa5c-7d3007575263): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (e48691be-9334-4dc9-aa5c-7d3007575263): PRAGMA foreign_keys=off;\n\n    CREATE UNIQUE INDEX IF NOT EXISTS  ai_name_unique \n      ON active_ingredients(name);\n      CREATE  INDEX ai_index  ON active_ingredients(indication,\n         side_effect, caution, pregnancy);\n         CREATE  INDEX item_ai_index  ON item_active_ingredients(product,\n          ingredient);\n      \n          \n    \n          PRAGMA foreign_keys=on;","service":"user-service"}
{"level":"debug","message":"Executing (e48691be-9334-4dc9-aa5c-7d3007575263): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (7068d87b-6881-44ba-a796-79ec440737f0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (7068d87b-6881-44ba-a796-79ec440737f0): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (84, 'View Accounts', 'view accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (7068d87b-6881-44ba-a796-79ec440737f0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (9337c4a4-3d55-41b0-af83-801bcd90d1ee): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (9337c4a4-3d55-41b0-af83-801bcd90d1ee): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 84);","service":"user-service"}
{"level":"debug","message":"Executing (9337c4a4-3d55-41b0-af83-801bcd90d1ee): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2f7bb57f-a335-48f7-b289-3c939f788df0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2f7bb57f-a335-48f7-b289-3c939f788df0): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (85, 'Manage Accounts', 'delete/add expenses/accounts details/reports');","service":"user-service"}
{"level":"debug","message":"Executing (2f7bb57f-a335-48f7-b289-3c939f788df0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4251e336-1c25-4dee-8c3e-f3678bee8613): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4251e336-1c25-4dee-8c3e-f3678bee8613): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 85);","service":"user-service"}
{"level":"debug","message":"Executing (4251e336-1c25-4dee-8c3e-f3678bee8613): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (30088b78-2804-4f56-895b-1fcc2721923a): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (30088b78-2804-4f56-895b-1fcc2721923a): create table if not exists db_sync (\n      id integer primary key autoincrement,\n      type text  NOT NULL,\n      action text default null,\n      data text default null,\n      created_on text  default current_timestamp\n    );","service":"user-service"}
{"level":"debug","message":"Executing (30088b78-2804-4f56-895b-1fcc2721923a): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (bf66f936-3684-4cf2-b659-0219bd7e9b9c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (bf66f936-3684-4cf2-b659-0219bd7e9b9c): CREATE TABLE if not exists incoming_payments (\n      id integer primary key autoincrement,\n      date text  NOT NULL,\n      amount text not null,\n      type text NOT NULL,\n      payer text NOT NULL,\n      payment_method text default 'CASH',\n      transaction_id text default null,\n      item_code text default null,\n      notes text default null,\n      created_by integer default null,\n      \n      created_on date default current_timestamp\n      \n\n          );","service":"user-service"}
{"level":"debug","message":"Executing (bf66f936-3684-4cf2-b659-0219bd7e9b9c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (1b347670-65a0-4dea-8c90-9f32d225379e): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (1b347670-65a0-4dea-8c90-9f32d225379e): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (86, 'Give Discount', 'offer discounts to clients during sales');","service":"user-service"}
{"level":"debug","message":"Executing (1b347670-65a0-4dea-8c90-9f32d225379e): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (26d2b600-e1ff-45fa-9cbe-7dcfeb9d39c0): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (26d2b600-e1ff-45fa-9cbe-7dcfeb9d39c0): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 86);","service":"user-service"}
{"level":"debug","message":"Executing (26d2b600-e1ff-45fa-9cbe-7dcfeb9d39c0): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (2c7af7dc-8a23-46fb-9039-16ff5c183e2f): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (2c7af7dc-8a23-46fb-9039-16ff5c183e2f): INSERT OR IGNORE INTO settings (name, value, module) values ('restrict_zero_stock_sales', 'no', 'System');","service":"user-service"}
{"level":"debug","message":"Executing (2c7af7dc-8a23-46fb-9039-16ff5c183e2f): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (4e06e9f7-e5ee-4f43-bdc0-c3d2dc26c0dc): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (4e06e9f7-e5ee-4f43-bdc0-c3d2dc26c0dc): INSERT OR IGNORE INTO permissions (permission_id, name, description) values \n    (87, 'Edit Sales', 'edit a sales date, payment method, amount paid, customer and shift');","service":"user-service"}
{"level":"debug","message":"Executing (4e06e9f7-e5ee-4f43-bdc0-c3d2dc26c0dc): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (58f49cf6-62cb-49ee-bae8-d4f7ce8a705d): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (58f49cf6-62cb-49ee-bae8-d4f7ce8a705d): INSERT OR IGNORE INTO role_permissions (role_id, permission_id) values \n    (1, 87);","service":"user-service"}
{"level":"debug","message":"Executing (58f49cf6-62cb-49ee-bae8-d4f7ce8a705d): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT `name` FROM `SequelizeMeta` AS `SequelizeMeta` ORDER BY `SequelizeMeta`.`name` ASC;","service":"user-service"}
{"level":"debug","message":"Executing (a64267ba-ea81-4e35-9c91-c1a6dc8d5c1c): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`reminders`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`reminders`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`reminders`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (a64267ba-ea81-4e35-9c91-c1a6dc8d5c1c): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (357ca9e9-382b-42c1-8952-6ec932d8f20b): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (357ca9e9-382b-42c1-8952-6ec932d8f20b): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"debug","message":"Executing (9cc7a947-c3e9-4d48-adea-3c5cea1aa5b2): BEGIN DEFERRED TRANSACTION;","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`activities`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`activities`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`branches`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`branches_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`branches`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customer_diagnostics`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`customer_diagnostics_test`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customer_diagnostics`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`customers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`customers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dailyRecords`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dailyRecords`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`dbbackups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`dbbackups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`db_sync`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`db_sync`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`diagnostic_tests`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`diagnostic_tests`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`drug_info`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`drug_info`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`incoming_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`incoming_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`insurance_providers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`insurance_providers_name_unique`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`insurance_providers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`item_active_ingredients`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`item_active_ingredients`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`online_backups`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_online_backups_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`online_backups`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`outgoing_payments`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`outgoing_payments`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`products`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`product_index`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`products`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`purchases`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`purchases_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`purchases`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfer_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`received_transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`received_transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`received_transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`refills`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`refills`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`role_permissions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`role_permissions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`roles`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`roles`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`sales_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sales_details_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`sales_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`settings`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`settings_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`settings`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_pending`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_adj_pending_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_pending`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_adjustment_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`stock_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_adjustment_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`stock_values`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_stock_values_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`stock_values`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfer_details`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferdetails_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transferDetails_index_code`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfer_details`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`transfers`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`transfers_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`transfers`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`users`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`users`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`user_sessions`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`users_sess_index_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`user_sessions`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA TABLE_INFO(`vendors`);","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`vendors_unique_name`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA foreign_key_list(`vendors`)","service":"user-service"}
{"level":"debug","message":"Executing (9cc7a947-c3e9-4d48-adea-3c5cea1aa5b2): COMMIT;","service":"user-service"}
{"level":"debug","message":"Executing (default): SELECT name FROM sqlite_master WHERE type='table' AND name='SequelizeMeta';","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_LIST(`SequelizeMeta`)","service":"user-service"}
{"level":"debug","message":"Executing (default): PRAGMA INDEX_INFO(`sqlite_autoindex_SequelizeMeta_1`)","service":"user-service"}
{"level":"debug","message":"Executing (default): INSERT INTO `SequelizeMeta` (`name`) VALUES ($1);","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
{"level":"error","service":"user-service"}
